(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const Vt="modulepreload",Wt=function(s){return"/"+s},Je={},X=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(c=>{if(c=Wt(c),c in Je)return;Je[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Vt,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})},Qt=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>X(async()=>{const{default:r}=await Promise.resolve().then(()=>ee);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Me extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Yt extends Me{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xt extends Me{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zt extends Me{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $e;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})($e||($e={}));var er=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class tr{constructor(e,{headers:t={},customFetch:r,region:i=$e.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Qt(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return er(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(g=>{throw new Yt(g)}),u=d.headers.get("x-relay-error");if(u&&u==="true")throw new Xt(d);if(!d.ok)throw new Zt(d);let h=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield d.json():h==="application/octet-stream"?f=yield d.blob():h==="text/event-stream"?f=d:h==="multipart/form-data"?f=yield d.formData():f=yield d.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}function rr(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function sr(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var i=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return s[r]}})}),t}var w={},F={},z={},H={},J={},G={},ir=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Z=ir();const nr=Z.fetch,_t=Z.fetch.bind(Z),kt=Z.Headers,or=Z.Request,ar=Z.Response,ee=Object.freeze(Object.defineProperty({__proto__:null,Headers:kt,Request:or,Response:ar,default:_t,fetch:nr},Symbol.toStringTag,{value:"Module"})),lr=sr(ee);var fe={},Ge;function Et(){if(Ge)return fe;Ge=1,Object.defineProperty(fe,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return fe.default=s,fe}var Ke;function xt(){if(Ke)return G;Ke=1;var s=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(G,"__esModule",{value:!0});const e=s(lr),t=s(Et());class r{constructor(n){this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=n.headers,this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=n.shouldThrowOnError,this.signal=n.signal,this.isMaybeSingle=n.isMaybeSingle,n.fetch?this.fetch=n.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,o){return this.headers=Object.assign({},this.headers),this.headers[n]=o,this}then(n,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,h;let f=null,g=null,y=null,m=c.status,T=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=S:g=JSON.parse(S))}const E=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),x=(u=c.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");E&&x&&x.length>1&&(y=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,m=406,T="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const E=await c.text();try{f=JSON.parse(E),Array.isArray(f)&&c.status===404&&(g=[],f=null,m=200,T="OK")}catch{c.status===404&&E===""?(m=204,T="No Content"):f={message:E}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,m=200,T="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:g,count:y,status:m,statusText:T}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,u,h;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(u=c==null?void 0:c.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(n,o)}returns(){return this}overrideTypes(){return this}}return G.default=r,G}var Ve;function St(){if(Ve)return J;Ve=1;var s=J&&J.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(J,"__esModule",{value:!0});const e=s(xt());class t extends e.default{select(i){let n=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:n=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${i}.${n?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:o=n}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,n,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:n=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const u=[i?"analyze":null,n?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${u};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return J.default=t,J}var We;function Be(){if(We)return H;We=1;var s=H&&H.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(H,"__esModule",{value:!0});const e=s(St());class t extends e.default{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}in(i,n){const o=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${n}`),this}match(i){return Object.entries(i).forEach(([n,o])=>{this.url.searchParams.append(n,`eq.${o}`)}),this}not(i,n,o){return this.url.searchParams.append(i,`not.${n}.${o}`),this}or(i,{foreignTable:n,referencedTable:o=n}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,n,o){return this.url.searchParams.append(i,`${n}.${o}`),this}}return H.default=t,H}var Qe;function Tt(){if(Qe)return z;Qe=1;var s=z&&z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(z,"__esModule",{value:!0});const e=s(Be());class t{constructor(i,{headers:n={},schema:o,fetch:a}){this.url=i,this.headers=n,this.schema=o,this.fetch=a}select(i,{head:n=!1,count:o}={}){const a=n?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:n,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:n,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const c="POST",d=[`resolution=${o?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(i)){const u=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:n}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const n="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return z.default=t,z}var re={},se={},Ye;function cr(){return Ye||(Ye=1,Object.defineProperty(se,"__esModule",{value:!0}),se.version=void 0,se.version="0.0.0-automated"),se}var Xe;function dr(){if(Xe)return re;Xe=1,Object.defineProperty(re,"__esModule",{value:!0}),re.DEFAULT_HEADERS=void 0;const s=cr();return re.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`},re}var Ze;function ur(){if(Ze)return F;Ze=1;var s=F&&F.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(F,"__esModule",{value:!0});const e=s(Tt()),t=s(Be()),r=dr();class i{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:d}={}){let u;const h=new URL(`${this.url}/rpc/${o}`);let f;l||c?(u=l?"HEAD":"GET",Object.entries(a).filter(([y,m])=>m!==void 0).map(([y,m])=>[y,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([y,m])=>{h.searchParams.append(y,m)})):(u="POST",f=a);const g=Object.assign({},this.headers);return d&&(g.Prefer=`count=${d}`),new t.default({method:u,url:h,headers:g,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return F.default=i,F}var et;function hr(){if(et)return w;et=1;var s=w&&w.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(w,"__esModule",{value:!0}),w.PostgrestError=w.PostgrestBuilder=w.PostgrestTransformBuilder=w.PostgrestFilterBuilder=w.PostgrestQueryBuilder=w.PostgrestClient=void 0;const e=s(ur());w.PostgrestClient=e.default;const t=s(Tt());w.PostgrestQueryBuilder=t.default;const r=s(Be());w.PostgrestFilterBuilder=r.default;const i=s(St());w.PostgrestTransformBuilder=i.default;const n=s(xt());w.PostgrestBuilder=n.default;const o=s(Et());return w.PostgrestError=o.default,w.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:n.default,PostgrestError:o.default},w}var fr=hr();const gr=rr(fr),{PostgrestClient:pr,PostgrestQueryBuilder:Ri,PostgrestFilterBuilder:Ii,PostgrestTransformBuilder:Di,PostgrestBuilder:Ui,PostgrestError:Mi}=gr,mr="2.11.2",vr={"X-Client-Info":`realtime-js/${mr}`},yr="1.0.0",jt=1e4,br=1e3;var Y;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Y||(Y={}));var P;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(P||(P={}));var $;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})($||($={}));var Ae;(function(s){s.websocket="websocket"})(Ae||(Ae={}));var N;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(N||(N={}));class wr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),n=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+n));o=o+n;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Pt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var b;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(b||(b={}));const tt=(s,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,o)=>(n[o]=_r(o,s,e,i),n),{})},_r=(s,e,t,r)=>{const i=e.find(a=>a.name===s),n=i==null?void 0:i.type,o=t[s];return n&&!r.includes(n)?$t(n,o):Oe(o)},$t=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Sr(e,t)}switch(s){case b.bool:return kr(e);case b.float4:case b.float8:case b.int2:case b.int4:case b.int8:case b.numeric:case b.oid:return Er(e);case b.json:case b.jsonb:return xr(e);case b.timestamp:return Tr(e);case b.abstime:case b.date:case b.daterange:case b.int4range:case b.int8range:case b.money:case b.reltime:case b.text:case b.time:case b.timestamptz:case b.timetz:case b.tsrange:case b.tstzrange:return Oe(e);default:return Oe(e)}},Oe=s=>s,kr=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Er=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},xr=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Sr=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let n;const o=s.slice(1,t);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(a=>$t(e,a))}return s},Tr=s=>typeof s=="string"?s.replace(" ","T"):s,At=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ee{constructor(e,t,r={},i=jt){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rt;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(rt||(rt={}));class oe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:n,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oe.syncState(this.state,i,n,o),this.pendingDiffs.forEach(l=>{this.state=oe.syncDiff(this.state,l,n,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:n,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=oe.syncDiff(this.state,i,n,o),a())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const n=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(n,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const u=n[c];if(u){const h=d.map(m=>m.presence_ref),f=u.map(m=>m.presence_ref),g=d.filter(m=>f.indexOf(m.presence_ref)<0),y=u.filter(m=>h.indexOf(m.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=d}),this.syncDiff(n,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:n,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(n,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const u=e[a].map(f=>f.presence_ref),h=d.filter(f=>u.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(u=>u.presence_ref);c=c.filter(u=>d.indexOf(u.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var st;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(st||(st={}));var it;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(it||(it={}));var L;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(L||(L={}));class Ne{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=P.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ee(this,$.join,this.params,this.timeout),this.rejoinTimer=new Pt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=P.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=P.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=P.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=P.errored,this.rejoinTimer.scheduleTimeout())}),this._on($.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new oe(this),this.broadcastEndpointURL=At(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:n,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(L.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(L.CLOSED));const l={},c={broadcast:n,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var u;if(this.socket.setAuth(),d===void 0){e==null||e(L.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,g=[];for(let y=0;y<f;y++){const m=h[y],{filter:{event:T,schema:A,table:E,filter:x}}=m,S=d&&d[y];if(S&&S.event===T&&S.schema===A&&S.table===E&&S.filter===x)g.push(Object.assign(Object.assign({},m),{id:S.id}));else{this.unsubscribe(),e==null||e(L.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(L.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(L.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(L.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&n("ok"),c.receive("ok",()=>n("ok")),c.receive("error",()=>n("error")),c.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=P.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Ee(this,$.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const i=new AbortController,n=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(n),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ee(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,n;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=$;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,y,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(y=f.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(n=this.bindings[o])===null||n===void 0||n.filter(f=>{var g,y,m,T,A,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,S=(g=f.filter)===null||g===void 0?void 0:g.event;return x&&((y=t.ids)===null||y===void 0?void 0:y.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const x=(A=(T=f==null?void 0:f.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return x==="*"||x===((E=t==null?void 0:t.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:y,table:m,commit_timestamp:T,type:A,errors:E}=g;h=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:T,eventType:A,new:{},old:{},errors:E}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===P.closed}_isJoined(){return this.state===P.joined}_isJoining(){return this.state===P.joining}_isLeaving(){return this.state===P.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),n={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&Ne.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($.close,{},e)}_onError(e){this._on($.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=P.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=tt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=tt(e.columns,e.old_record)),t}}const jr=()=>{},Pr=typeof WebSocket<"u",$r=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ar{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=vr,this.params={},this.timeout=jt,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=jr,this.conn=null,this.sendBuffer=[],this.serializer=new wr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>X(async()=>{const{default:l}=await Promise.resolve().then(()=>ee);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ae.websocket}`,this.httpEndpoint=At(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(n,o)=>o(JSON.stringify(n)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pt(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Pr){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Or(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),X(async()=>{const{default:e}=await import("./browser-iMTROjfD.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yr}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Y.connecting:return N.Connecting;case Y.open:return N.Open;case Y.closing:return N.Closing;default:return N.Closed}}isConnected(){return this.connectionState()===N.Open}channel(e,t={config:{}}){const r=new Ne(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:n}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${n})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push($.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(br,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:n,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,n),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,n,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger($.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([$r],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class Or{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Y.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class qe extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Lr extends qe{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Le extends qe{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Cr=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Ot=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>X(async()=>{const{default:r}=await Promise.resolve().then(()=>ee);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Rr=()=>Cr(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield X(()=>Promise.resolve().then(()=>ee),void 0)).Response:Response}),Ce=s=>{if(Array.isArray(s))return s.map(t=>Ce(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=Ce(r)}),e};var q=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const xe=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ir=(s,e,t)=>q(void 0,void 0,void 0,function*(){const r=yield Rr();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(i=>{e(new Lr(xe(i),s.status||500))}).catch(i=>{e(new Le(xe(i),i))}):e(new Le(xe(s),s))}),Dr=(s,e,t,r)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function ue(s,e,t,r,i,n){return q(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,Dr(e,r,i,n)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ir(l,a,r))})})}function be(s,e,t,r){return q(this,void 0,void 0,function*(){return ue(s,"GET",e,t,r)})}function I(s,e,t,r,i){return q(this,void 0,void 0,function*(){return ue(s,"POST",e,r,i,t)})}function Ur(s,e,t,r,i){return q(this,void 0,void 0,function*(){return ue(s,"PUT",e,r,i,t)})}function Mr(s,e,t,r){return q(this,void 0,void 0,function*(){return ue(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Lt(s,e,t,r,i){return q(this,void 0,void 0,function*(){return ue(s,"DELETE",e,r,i,t)})}var j=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Br={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nr{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ot(i)}uploadOrUpdate(e,t,r,i){return j(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},nt),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),l&&n.append("metadata",this.encodeMetadata(l)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",o.cacheControl),l&&n.append("metadata",this.encodeMetadata(l))):(n=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:n,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield u.json();return u.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(n){if(_(n))return{data:null,error:n};throw n}})}upload(e,t,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return j(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:nt.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const u=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),h=yield u.json();return u.ok?{data:{path:n,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(_(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return j(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const n=yield I(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+n.url),a=o.searchParams.get("token");if(!a)throw new qe("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}update(e,t,r){return j(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return j(this,void 0,void 0,function*(){try{return{data:yield I(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(_(i))return{data:null,error:i};throw i}})}copy(e,t,r){return j(this,void 0,void 0,function*(){try{return{data:{path:(yield I(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(_(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return j(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield I(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(_(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return j(this,void 0,void 0,function*(){try{const i=yield I(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(_(i))return{data:null,error:i};throw i}})}download(e,t){return j(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=n?`?${n}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield be(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(_(a))return{data:null,error:a};throw a}})}info(e){return j(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield be(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ce(r),error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}exists(e){return j(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Mr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(_(r)&&r instanceof Le){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&i.push(n);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return j(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(_(t))return{data:null,error:t};throw t}})}list(e,t,r){return j(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Br),t),{prefix:e||""});return{data:yield I(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(_(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const qr="2.7.1",Fr={"X-Client-Info":`storage-js/${qr}`};var K=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class zr{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Fr),t),this.fetch=Ot(r)}listBuckets(){return K(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_(e))return{data:null,error:e};throw e}})}getBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(_(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return K(this,void 0,void 0,function*(){try{return{data:yield I(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return K(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}})}emptyBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield I(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(_(t))return{data:null,error:t};throw t}})}deleteBucket(e){return K(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(_(t))return{data:null,error:t};throw t}})}}class Hr extends zr{constructor(e,t={},r){super(e,t,r)}from(e){return new Nr(this.url,this.headers,e,this.fetch)}}const Jr="2.49.4";let ne="";typeof Deno<"u"?ne="deno":typeof document<"u"?ne="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ne="react-native":ne="node";const Gr={"X-Client-Info":`supabase-js-${ne}/${Jr}`},Kr={headers:Gr},Vr={schema:"public"},Wr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qr={};var Yr=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};const Xr=s=>{let e;return s?e=s:typeof fetch>"u"?e=_t:e=fetch,(...t)=>e(...t)},Zr=()=>typeof Headers>"u"?kt:Headers,es=(s,e,t)=>{const r=Xr(t),i=Zr();return(n,o)=>Yr(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:s;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},o),{headers:c}))})};var ts=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};function rs(s){return s.replace(/\/$/,"")}function ss(s,e){const{db:t,auth:r,realtime:i,global:n}=s,{db:o,auth:a,realtime:l,global:c}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),n),accessToken:()=>ts(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}const Ct="2.69.1",Q=30*1e3,Re=3,Se=Re*Q,is="http://localhost:9999",ns="supabase.auth.token",os={"X-Client-Info":`gotrue-js/${Ct}`},Ie="X-Supabase-Api-Version",Rt={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},as=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ls=6e5;class Fe extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function p(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class cs extends Fe{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function ds(s){return p(s)&&s.name==="AuthApiError"}class It extends Fe{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class U extends Fe{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class C extends U{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function us(s){return p(s)&&s.name==="AuthSessionMissingError"}class Te extends U{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ge extends U{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pe extends U{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hs(s){return p(s)&&s.name==="AuthImplicitGrantRedirectError"}class ot extends U{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class De extends U{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function je(s){return p(s)&&s.name==="AuthRetryableFetchError"}class at extends U{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ae extends U{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ct=` 	
\r=`.split(""),fs=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<ct.length;e+=1)s[ct[e].charCodeAt(0)]=-2;for(let e=0;e<lt.length;e+=1)s[lt[e].charCodeAt(0)]=e;return s})();function Dt(s,e,t){const r=fs[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function dt(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=o=>{ms(o,r,t)};for(let o=0;o<s.length;o+=1)Dt(s.charCodeAt(o),i,n);return e.join("")}function gs(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function ps(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}gs(r,e)}}function ms(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function vs(s){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)Dt(s.charCodeAt(i),t,r);return new Uint8Array(e)}function ys(s){const e=[];return ps(s,t=>e.push(t)),new Uint8Array(e)}function bs(s){return Math.round(Date.now()/1e3)+s}function ws(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const O=()=>typeof window<"u"&&typeof document<"u",M={tested:!1,writable:!1},le=()=>{if(!O())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(M.tested)return M.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),M.tested=!0,M.writable=!0}catch{M.tested=!0,M.writable=!1}return M.writable};function _s(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const Ut=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>X(async()=>{const{default:r}=await Promise.resolve().then(()=>ee);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ks=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Mt=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},me=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ve=async(s,e)=>{await s.removeItem(e)};class we{constructor(){this.promise=new we.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}we.promiseConstructor=Promise;function Pe(s){const e=s.split(".");if(e.length!==3)throw new ae("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!as.test(e[r]))throw new ae("JWT not in base64url format");return{header:JSON.parse(dt(e[0])),payload:JSON.parse(dt(e[1])),signature:vs(e[2]),raw:{header:e[0],payload:e[1]}}}async function Es(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function xs(s,e){return new Promise((r,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await s(n);if(!e(n,null,o)){r(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function Ss(s){return("0"+s.toString(16)).substr(-2)}function Ts(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let n=0;n<56;n++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Ss).join("")}async function js(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function Ps(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await js(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function V(s,e,t=!1){const r=Ts();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Mt(s,`${e}-code-verifier`,i);const n=await Ps(r);return[n,r===n?"plain":"s256"]}const $s=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function As(s){const e=s.headers.get(Ie);if(!e||!e.match($s))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Os(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function Ls(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Cs=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};const B=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Rs=[502,503,504];async function ut(s){var e;if(!ks(s))throw new De(B(s),0);if(Rs.includes(s.status))throw new De(B(s),s.status);let t;try{t=await s.json()}catch(n){throw new It(B(n),n)}let r;const i=As(s);if(i&&i.getTime()>=Rt["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new at(B(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new C}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new at(B(t),s.status,t.weak_password.reasons);throw new cs(B(t),s.status||500,r)}const Is=(s,e,t,r)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function v(s,e,t,r){var i;const n=Object.assign({},r==null?void 0:r.headers);n[Ie]||(n[Ie]=Rt["2024-01-01"].name),r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ds(s,e,t+a,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Ds(s,e,t,r,i,n){const o=Is(e,r,i,n);let a;try{a=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new De(B(l),0)}if(a.ok||await ut(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ut(l)}}function R(s){var e;let t=null;Ns(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=bs(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function ht(s){const e=R(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function D(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Us(s){return{data:s,error:null}}function Ms(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n}=s,o=Cs(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:n},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Bs(s){return s}function Ns(s){return s.access_token&&s.refresh_token&&s.expires_in}var qs=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};class Fs{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Ut(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await v(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(p(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await v(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:D})}catch(r){if(p(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=qs(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await v(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ms,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(p(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await v(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:D})}catch(t){if(p(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,n,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await v(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:Bs});if(d.error)throw d.error;const u=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(p(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await v(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:D})}catch(t){if(p(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await v(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:D})}catch(r){if(p(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await v(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:D})}catch(r){if(p(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await v(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(p(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await v(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(p(t))return{data:null,error:t};throw t}}}const zs={getItem:s=>le()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{le()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{le()&&globalThis.localStorage.removeItem(s)}};function ft(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Hs(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const W={debug:!!(globalThis&&le()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Js extends Bt{}async function Gs(s,e,t){W.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),W.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){W.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{W.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw W.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Js(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(W.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Hs();const Ks={url:is,storageKey:ns,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:os,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gt(s,e,t){return await t()}class ce{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ce.nextInstanceID,ce.nextInstanceID+=1,this.instanceID>0&&O()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Ks),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Fs({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ut(i.fetch),this.lock=i.lock||gt,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:O()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Gs:this.lock=gt,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:le()?this.storage=zs:(this.memoryStorage={},this.storage=ft(this.memoryStorage)):(this.memoryStorage={},this.storage=ft(this.memoryStorage)),O()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ct}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=_s(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),O()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),hs(n)){const l=(e=n.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return p(t)?{error:t}:{error:new It("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const n=await v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:R}),{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(p(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,i;try{let n;if("email"in e){const{email:d,password:u,options:h}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await V(this.storage,this.storageKey)),n=await v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:R})}else if("phone"in e){const{phone:d,password:u,options:h}=e;n=await v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:R})}else throw new ge("You must provide either an email or phone number and a password");const{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(p(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:o,options:a}=e;t=await v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ht})}else if("phone"in e){const{phone:n,password:o,options:a}=e;t=await v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ht})}else throw new ge("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Te}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(p(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await me(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:n,error:o}=await v(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:R});if(await ve(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Te}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:o})}catch(n){if(p(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:n,nonce:o}=e,a=await v(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:R}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Te}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(p(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,n,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await V(this.storage,this.storageKey));const{error:u}=await v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ge("You must provide either an email or phone number.")}catch(a){if(p(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,n;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await v(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:R});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(p(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await V(this.storage,this.storageKey)),await v(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:Us})}catch(n){if(p(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new C;const{error:i}=await v(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(p(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:n}=e,{error:o}=await v(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:n}=e,{data:o,error:a}=await v(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ge("You must provide either an email or phone number and a type")}catch(t){if(p(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await me(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Se:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:D}):await this._useSession(async t=>{var r,i,n;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new C}:await v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:D})})}catch(t){if(p(t))return us(t)&&(await this._removeSession(),await ve(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:n}=r;if(n)throw n;if(!i.session)throw new C;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await V(this.storage,this.storageKey));const{data:c,error:d}=await v(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:D});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(p(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new C;const t=Date.now()/1e3;let r=t,i=!0,n=null;const{payload:o}=Pe(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};n=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(p(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new C;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(p(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!O())throw new pe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ot("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ot("No code detected.");const{data:A,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:n,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!n||!a||!o||!c)throw new pe("No session defined in URL");const d=Math.round(Date.now()/1e3),u=parseInt(a);let h=d+u;l&&(h=parseInt(l));const f=h-d;f*1e3<=Q&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=h-u;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:y,error:m}=await this._getUser(n);if(m)throw m;const T={provider_token:r,provider_refresh_token:i,access_token:n,expires_in:u,expires_at:h,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(p(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await me(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:n}=t;if(n)return{error:n};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ds(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ve(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ws(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:n},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await V(this.storage,this.storageKey,!0));try{return await v(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(p(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(p(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async n=>{var o,a,l,c,d;const{data:u,error:h}=n;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await v(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(c=u.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return O()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(p(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:n,error:o}=t;if(o)throw o;return await v(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(p(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await xs(async i=>(i>0&&await Es(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await v(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:R})),(i,n)=>{const o=200*Math.pow(2,i);return n&&je(n)&&Date.now()+o-r<Q})}catch(r){if(this._debug(t,"error",r),p(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),O()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await me(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Se;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Se}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:n}=await this._callRefreshToken(r.refresh_token);n&&(console.error(n),je(n)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new C;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new we;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new C;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const a={session:n.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(n){if(this._debug(i,"error",n),p(n)){const o={session:null,error:n};return je(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){n.push(l)}});if(await Promise.all(o),n.length>0){for(let a=0;a<n.length;a+=1)console.error(n[a]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Mt(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ve(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&O()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Q);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Q);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Q}ms, refresh threshold is ${Re} ticks`),i<=Re&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bt)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!O()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,o]=await V(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const n=new URLSearchParams(r.queryParams);i.push(n.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;return n?{data:null,error:n}:await v(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(p(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:n,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await v(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(p(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;if(n)return{data:null,error:n};const{data:o,error:a}=await v(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(p(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:n}=t;return n?{data:null,error:n}:await v(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(p(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Pe(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+ls>Date.now()))return r;const{data:i,error:n}=await v(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;if(!i.keys||i.keys.length===0)throw new ae("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new ae("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:i,payload:n,signature:o,raw:{header:a,payload:l}}=Pe(r);if(Os(n.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:n,header:i,signature:o},error:null}}const c=Ls(i.alg),d=await this.fetchJwk(i.kid,t),u=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,o,ys(`${a}.${l}`)))throw new ae("Invalid JWT signature");return{data:{claims:n,header:i,signature:o},error:null}}catch(r){if(p(r))return{data:null,error:r};throw r}}}ce.nextInstanceID=0;const Vs=ce;class Ws extends Vs{constructor(e){super(e)}}var Qs=function(s,e,t,r){function i(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(u){o(u)}}function l(d){try{c(r.throw(d))}catch(u){o(u)}}function c(d){d.done?n(d.value):i(d.value).then(a,l)}c((r=r.apply(s,e||[])).next())})};class Ys{constructor(e,t,r){var i,n,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=rs(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Vr,realtime:Qr,auth:Object.assign(Object.assign({},Wr),{storageKey:l}),global:Kr},d=ss(r??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=d.global.headers)!==null&&n!==void 0?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=es(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new pr(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new tr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Hr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Qs(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:n,flowType:o,lock:a,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ws({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ar(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xs=(s,e,t)=>new Ys(s,e,t),Zs="https://hvrfmzyxtcdzikzuhcja.supabase.co",ei="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2cmZtenl4dGNkemlrenVoY2phIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NTU4MzU3OCwiZXhwIjoyMDYxMTU5NTc4fQ.VavAi0nEPRzCcM3jdKtGDJ06sLBpYxyn5QLbIr3IAWs",te=Xs(Zs,ei),pt={React:"bg-sky-100 text-sky-800 dark:bg-sky-900 dark:text-sky-200",Go:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Golang:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Kafka:"bg-rose-100 text-rose-800 dark:bg-rose-700 dark:text-rose-200",Redis:"bg-orange-100 text-orange-900 dark:bg-orange-900 dark:text-orange-200",RabbitMQ:"bg-pink-100 text-pink-900 dark:bg-pink-900 dark:text-pink-200",gRPC:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-200",Express:"bg-zinc-100 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200",Django:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200",Flask:"bg-stone-100 text-stone-800 dark:bg-stone-900 dark:text-stone-200",MongoDB:"bg-green-100 text-green-900 dark:bg-green-900 dark:text-green-200","Node.js":"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",PostgreSQL:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",MySQL:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200","React Native":"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",Flutter:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",JavaScript:"bg-yellow-100 text-yellow-900 dark:bg-yellow-900 dark:text-yellow-200",TypeScript:"bg-blue-200 text-blue-900 dark:bg-blue-950 dark:text-blue-200",Python:"bg-cyan-100 text-cyan-900 dark:bg-cyan-900 dark:text-cyan-200",Java:"bg-red-200 text-red-900 dark:bg-red-950 dark:text-red-200","C++":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",Docker:"bg-sky-200 text-sky-900 dark:bg-sky-950 dark:text-sky-200",Kubernetes:"bg-violet-100 text-violet-800 dark:bg-violet-900 dark:text-violet-200",AWS:"bg-orange-200 text-orange-900 dark:bg-orange-950 dark:text-orange-200",GCP:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",default:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"};function ze(s){return pt[s]||pt.default}function ti(s){const e=new Error(s);throw e.statusCode=404,e.timestamp=new Date,e}async function _e(s,e="Loading..."){try{return console.log(e),await s()}catch(t){throw console.error("API Error:",t),ti("Failed to load data")}finally{di()}}async function ri(){return _e(async()=>{const{data:s,error:e}=await te.from("Projects").select("*").order("created_at",{ascending:!1});if(e)throw new Error("Failed to load projects");return s},"Loading projects...")}async function si(){return _e(async()=>{const{data:s,error:e}=await te.from("Personal").select("*").order("created_at",{ascending:!1});if(e)throw new Error("Failed to load projects");return s},"Loading personal projects...")}async function ii(){return _e(async()=>{const{data:s,error:e}=await te.from("Publications").select("*").order("created_at",{ascending:!1});if(e)throw new Error("Failed to load publications");return s},"Loading publications...")}async function ni(){return _e(async()=>{const{data:s,error:e}=await te.from("References").select("*");if(e)throw new Error("Failed to load references");return s},"Loading references...")}async function oi(s){const e=await fetch(s);if(!e.ok)throw new Error(`Failed to fetch PDF: ${e.status}`);return await e.blob()}async function Nt(){try{const{data:s,error:e}=await te.from("Resume").select("link").order("created_at",{ascending:!1}).limit(1).single();if(e)throw e;if(!s)throw new Error("No resume found");return typeof s.link=="string"?s.link:s.link.join("")}catch(s){throw console.error("Error fetching resume:",s),s}}const k={projects:[],personal_projects:[],publications:[],references:[],initialized:!1,resume:""};let ai=!1,ye=null;async function He(s=3){return ye||(ye=(async()=>{try{console.log("Starting cache initialization...");const[e,t,r,i,n]=await Promise.all([ri(),si(),ii(),ni(),Nt()]);return k.projects=e||[],k.publications=r||[],k.references=i||[],k.personal_projects=t||[],typeof n=="string"?(k.resume=n,console.log("YES")):k.resume=n.join(""),console.log("projects--> ",k.projects),console.log("resume--> ",k.resume),console.log("publications--> ",r),console.log("references--> ",i),console.log("personal projects--> ",t),li(),ai=!0,k.initialized=!0,console.log("Cache initialized successfully"),!0}catch(e){if(console.error("Cache initialization error:",e),s>0)return console.log(`Retrying cache initialization (${s} left)`),await new Promise(t=>setTimeout(t,2e3)),He(s-1);throw e}})(),ye)}async function he(s){return k.initialized?Ue(s):new Promise(e=>{const t=()=>{e(Ue(s)),document.removeEventListener("cache-ready",t)};document.addEventListener("cache-ready",t)})}function Ue(s){return k.initialized?[...k[s]]:(console.warn(`Cache accessed before initialization for key: ${s}`),[])}function li(){[{name:"Projects",key:"projects"},{name:"Publications",key:"publications"},{name:"References",key:"references"},{name:"Personal",key:"personal"}].forEach(({name:e,key:t})=>{te.channel(`public_changes:${e}`).on("postgres_changes",{event:"*",schema:"public",table:e},r=>{ci(t,r)}).subscribe(r=>{r==="SUBSCRIBED"&&console.log(`Realtime ${t} subscription established`)})})}function ci(s,e){switch(e.eventType){case"INSERT":k[s].unshift(e.new);break;case"UPDATE":k[s]=k[s].map(t=>t.id===e.new.id?e.new:t);break;case"DELETE":k[s]=k[s].filter(t=>t.id!==e.old.id);break}document.dispatchEvent(new CustomEvent(`${s}-updated`))}const qt=He();function di(){document.getElementById("loading-overlay").classList.add("hidden")}function de(s){const e=document.getElementById("error-modal");document.getElementById("error-message").textContent=s,e.classList.remove("hidden")}function ui(){document.getElementById("error-modal").classList.add("hidden")}function Ft(){const s=document.createElement("div");return s.className="card dark:bg-slate-700 rounded-lg shadow-md overflow-hidden dark:border-slate-600",s.innerHTML=`
    <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-32 w-full"></div>
    <div class="p-4">
      <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-6 w-3/4 mb-3"></div>
      <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-4 w-full mb-2"></div>
      <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-4 w-5/6 mb-4"></div>
      <div class="flex flex-wrap gap-2">
        <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-6 w-16 rounded-full"></div>
        <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-6 w-16 rounded-full"></div>
      </div>
      <div class="animate-pulse bg-gray-200 dark:bg-slate-600 h-5 w-24 mt-4"></div>
    </div>
  `,s}function hi(){const s=document.createElement("div");return s.className="card dark:bg-slate-700 p-6 rounded-lg shadow-md mb-6 dark:border-slate-600",s.innerHTML=`
    <div class="animate-pulse">
      <!-- Title + Type Badge -->
      <div class="flex justify-between items-start mb-4">
        <div class="bg-gray-200 dark:bg-slate-600 h-7 w-3/4 rounded"></div>
        <div class="bg-gray-200 dark:bg-slate-600 h-5 w-12 rounded-full"></div>
      </div>
      
      <!-- Description -->
      <div class="space-y-2 mb-4">
        <div class="bg-gray-200 dark:bg-slate-600 h-4 w-full rounded"></div>
        <div class="bg-gray-200 dark:bg-slate-600 h-4 w-5/6 rounded"></div>
        <div class="bg-gray-200 dark:bg-slate-600 h-4 w-2/3 rounded"></div>
      </div>
      
      <!-- Feature Chips -->
      <div class="flex flex-wrap gap-2 mb-4">
        <div class="bg-gray-200 dark:bg-slate-600 h-6 w-20 rounded-full"></div>
        <div class="bg-gray-200 dark:bg-slate-600 h-6 w-16 rounded-full"></div>
        <div class="bg-gray-200 dark:bg-slate-600 h-6 w-24 rounded-full"></div>
      </div>
      
      <!-- Status/Date + Links Row -->
      <div class="flex justify-between items-center mt-4">
        <div class="flex space-x-3">
          <div class="bg-gray-200 dark:bg-slate-600 h-5 w-16 rounded"></div>
          <div class="bg-gray-200 dark:bg-slate-600 h-5 w-20 rounded"></div>
        </div>
        <div class="flex space-x-3">
          <div class="bg-gray-200 dark:bg-slate-600 h-5 w-12 rounded"></div>
          <div class="bg-gray-200 dark:bg-slate-600 h-5 w-14 rounded"></div>
          <div class="bg-gray-200 dark:bg-slate-600 h-5 w-16 rounded"></div>
        </div>
      </div>
    </div>
  `,s}function fi(){window.addEventListener("error",s=>{s.preventDefault(),de("An unexpected error occurred"),console.error("Global error:",s.error)}),window.addEventListener("unhandledrejection",s=>{s.preventDefault(),de("An async operation failed"),console.error("Unhandled rejection:",s.reason)})}async function zt(s){s.preventDefault();const e=s.currentTarget,t=e.innerHTML;try{e.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i> Downloading...',e.disabled=!0;let r=await he("resume");r||(r=await fetchResume()),Array.isArray(r)&&(r=r.join(""));const i=await oi(r);if(console.log("Blob data:",i),!i)throw new Error("No data received");const n=URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download="Alefew_Yimer_Resume.pdf",document.body.appendChild(o),o.click(),setTimeout(()=>{document.body.removeChild(o),URL.revokeObjectURL(n),e.innerHTML=t,e.disabled=!1},100)}catch(r){e.innerHTML=t,e.disabled=!1,console.error("Download failed:",r),de("Failed to download Resume")}finally{e.innerHTML=t,e.disabled=!1}}function gi(){const s=document.getElementById("download-cv-btn");s&&s.addEventListener("click",e=>{e.stopPropagation(),zt(e)})}document.querySelectorAll('[onclick="togglePdfModal()"]').forEach(s=>{s.onclick=e=>togglePdfModal(e)});let mt;function pi(s,e,t="info",r=5e3){const i=document.getElementById("message-modal"),n=document.getElementById("message-icon"),o=document.getElementById("message-title");clearTimeout(mt);const a={success:{icon:"fa-check-circle",color:"text-green-500"},error:{icon:"fa-times-circle",color:"text-red-500"},warning:{icon:"fa-exclamation-triangle",color:"text-yellow-500"},info:{icon:"fa-info-circle",color:"text-blue-500"}};n.className=`fas ${a[t].icon} text-xl mt-1 ${a[t].color}`,o.textContent=s,document.getElementById("message-content").textContent=e,i.classList.remove("hidden"),setTimeout(()=>{i.classList.remove("opacity-0"),i.querySelector("div").classList.remove("scale-95")},10),r>0&&(mt=setTimeout(Ht,r))}function Ht(){const s=document.getElementById("message-modal");s.classList.add("opacity-0"),s.querySelector("div").classList.add("scale-95"),setTimeout(()=>{s.classList.add("hidden")},300)}function mi(s){try{const e=Ue("projects").find(u=>u.id==s);if(!e)throw new Error("Project not found");document.getElementById("project-title").textContent=e.title||"Untitled Project",document.getElementById("project-description").textContent=e.description||"No description available";const t=document.getElementById("project-links");if(t.classList.add("hidden"),e.liveLink||e.codeLink){t.classList.remove("hidden");const u=document.getElementById("project-live-link"),h=document.getElementById("project-code-link");e.liveLink?(u.href=e.liveLink,u.classList.remove("hidden")):u.classList.add("hidden"),e.codeLink?(h.href=e.codeLink,h.classList.remove("hidden")):h.classList.add("hidden")}const r=document.getElementById("project-technologies");r.innerHTML=(e.technologies||[]).map(u=>`
        <span class="px-3 py-1 rounded-full text-sm ${ze(u)}">
          ${u}
        </span>
      `).join("");const i=document.getElementById("project-images"),o=e.type==="mobile"?e.mobile_images:e.web_images;i.innerHTML=o.map((u,h)=>`
        <img src="${u}" 
             alt="Project screenshot ${h+1}"
             class="h-full object-contain"
             onerror="this.src='default-project.jpg'">
      `).join("");const a=document.getElementById("project-features");a.innerHTML=(e.features||[]).map(u=>`<li>${u}</li>`).join("");const l=document.getElementById("project-contributions");l.innerHTML=(e.contributions||[]).map(u=>`<li>${u}</li>`).join("");const c=document.getElementById("project-challenges");c.innerHTML=(e.challenges_solutions||[]).map(u=>`<li>${u}</li>`).join("");const d=document.getElementById("project-impact");d.innerHTML=(e.impact||[]).map(u=>`<li>${u}</li>`).join(""),document.getElementById("project-modal").classList.remove("hidden"),document.body.style.overflow="hidden"}catch(e){de("Failed to load project details"),console.error("Project modal error:",e),ke()}}function ke(){document.getElementById("project-modal").classList.add("hidden"),document.body.style.overflow=""}document.querySelector(".modal-backdrop").addEventListener("click",ke);document.addEventListener("keydown",function(s){s.key==="Escape"&&ke()});document.addEventListener("click",function(s){s.target.tagName==="IMG"&&s.target.closest("#project-images")&&(s.target.classList.toggle("zoomed"),s.target.classList.toggle("cursor-zoom-out"),s.target.classList.toggle("cursor-zoom-in"))});async function vi(){try{console.log("Initializing projects tab..."),yi(),bi();const s=new Promise(e=>{if(document.readyState==="complete"||document.readyState==="interactive")return console.log("DOM already ready"),e();const t=()=>{console.log("DOMContentLoaded received"),document.removeEventListener("DOMContentLoaded",t),e()};document.addEventListener("DOMContentLoaded",t)});await Promise.race([Promise.all([qt,s]),new Promise((e,t)=>setTimeout(()=>t(new Error("Initialization timeout (check DOM or cache)")),5e3))]),console.log("Both cache and DOM ready"),document.addEventListener("projects-updated",vt),document.addEventListener("personal_projects-updated",yt),await vt(),await yt()}catch(s){console.error("Initialization failed:",s),Jt(new Error("Failed to load data")),Gt(new Error("Failed to load data"))}}async function vt(){try{console.log("Starting to render projects..."),wi();const s=await he("projects");console.log("Received projects:",s);const e=document.getElementById("projects-container");if(!e)throw new Error("Projects container not found");if(!s||!s.length){console.log("No projects found"),e.innerHTML=`
        <div class="col-span-full text-center py-8">
          <p class="text-gray-500 dark:text-gray-400">No projects found</p>
        </div>
      `;return}console.log(`Rendering ${s.length} projects`),e.innerHTML=s.map(t=>{const r=t.type==="mobile";return`
      <div class="card dark:bg-slate-700 rounded-lg shadow-md overflow-hidden dark:border-slate-600">
        ${(()=>{var n,o;return r&&((n=t.mobile_images)==null?void 0:n.length)>=3?`
          <div class="flex gap-1 h-48 overflow-hidden">
            ${t.mobile_images.slice(0,Math.min(3,t.mobile_images.length)).map(a=>`
              <img src="${a}" 
                   alt="${t.title||"Mobile screenshot"}" 
                   class="flex-1 object-cover border dark:border-slate-600"
                   onerror="this.src='default-mobile.jpg'">
            `).join("")}
          </div>
        `:`
          <img src="${t.cover_image||((o=t.web_images)==null?void 0:o[0])||"default-project.jpg"}"
               alt="${t.title||"Project"}" 
               class="w-full h-48 object-cover"
               onerror="this.src='default-project.jpg'">
        `})()}
        <div class="p-4">
          <h3 class="font-bold text-xl mb-2">${t.title||"Untitled Project"}</h3>
          <p class="dark:text-gray-300 mb-4">
            ${t.description||"No description available"}
          </p>
          <div class="flex flex-wrap gap-2">
            ${(t.technologies||[]).map(n=>`
                <span class="px-2 py-1 rounded-full text-xs ${ze(n)}">
                  ${n}
                </span>
              `).join("")}
          </div>
          <div class="mt-4 flex justify-between">
            ${t.liveLink?`
              <a href="${t.liveLink}" 
                 target="_blank" 
                 rel="noopener noreferrer"
                 class="inline-block dark:text-blue-400 hover:underline">
                Live Demo
              </a>
            `:""}
            ${t.codeLink?`
              <a href="${t.codeLink}" 
                 target="_blank" 
                 rel="noopener noreferrer"
                 class="inline-block dark:text-blue-400 hover:underline">
                View Code
              </a>
            `:""}
            <button onclick="window.showProjectModal('${t.id}')"
                    class="inline-block dark:text-blue-400 hover:underline">
              Details →
            </button>
          </div>
        </div>
      </div>
    `}).join(""),console.log("Projects rendered successfully")}catch(s){console.error("Error in renderProjects:",s),Jt(s)}}async function yt(){try{console.log("Starting to render personal projects..."),_i();const s=await he("personal_projects");console.log("Received personal projects:",s);const e=document.getElementById("personal-projects-container");if(!e)throw new Error("Personal projects container not found");if(!s||!s.length){console.log("No personal projects found"),e.innerHTML=`
        <div class="text-center py-8">
          <p class="text-gray-500 dark:text-gray-400">No personal projects found</p>
        </div>
      `;return}console.log(`Rendering ${s.length} personal projects`),e.innerHTML=s.map(t=>{var r;return`
        <div class="card dark:bg-slate-700 p-6 rounded-lg shadow-md mb-6 dark:border-slate-600">
  <div class="flex justify-between items-start mb-3">
    <h3 class="font-bold text-xl">${t.title}</h3>
    ${t.type?`<span class="text-xs px-2 py-1 bg-pink-100 dark:bg-pink-900 rounded-full">${t.type}</span>`:""}
  </div>

  <p class="dark:text-gray-300 mb-4">${t.description}</p>

  ${(r=t.features)!=null&&r.length?`
        <div class="flex flex-wrap gap-2 mb-4">
          ${t.features.map(i=>`
            <span class="px-2 py-1 rounded-full text-xs bg-blue-100/50 dark:bg-blue-900/50">
              <i class="fas fa-check-circle mr-1 text-blue-500 dark:text-blue-300"></i>
              ${i}
            </span>
          `).join("")}
        </div>
      `:""}
          <div class="flex flex-wrap gap-2 mb-4">
              ${(t.technologies||[]).map(i=>`
                  <span class="px-2 py-1 rounded-full text-xs ${ze(i)}">
                    ${i}
                  </span>
                `).join("")}
            </div>

      <div class="flex justify-between items-center mt-4">
        <div class="flex items-center space-x-3 text-sm dark:text-gray-400">
          ${t.date?`
            <span class="flex items-center">
              <i class="far fa-calendar mr-1"></i>
              ${t.date}
            </span>
          `:""}
          
          ${t.status?`
            <span class="flex items-center">
              <i class="fas fa-circle mr-1 ${t.status==="completed"?"text-green-500":"text-yellow-500"}"></i>
              ${t.status}
            </span>
          `:""}
        </div>

        <div class="flex space-x-3">
          ${t.codeLink?`
            <a href="${t.codeLink}" 
              target="_blank"
              class="dark:text-blue-400 hover:underline flex items-center">
              <i class="fab fa-github mr-1"></i> Code
            </a>
          `:""}
          
          ${t.liveLink?`
            <a href="${t.liveLink}" 
              target="_blank"
              class="dark:text-blue-400 hover:underline flex items-center">
              <i class="fas fa-external-link-alt mr-1"></i> Demo
            </a>
          `:""}
        </div>
      </div>
    </div>
      `}).join(""),console.log("Personal projects rendered successfully")}catch(s){console.error("Error in renderPersonalProjects:",s),Gt(s)}}function yi(){const s=document.getElementById("projects-container");s.innerHTML="";for(let e=0;e<3;e++)s.appendChild(Ft())}function bi(){const s=document.getElementById("personal-projects-container");s.innerHTML="";for(let e=0;e<3;e++)s.appendChild(hi())}function Jt(s){const e=document.getElementById("projects-container");e.innerHTML=`
    <div class="col-span-full text-center py-8">
      <p class="text-red-500 dark:text-red-400">${s.message}</p>
      <button onclick="window.location.reload()" 
        class="mt-4 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">
        Reload Page
      </button>
    </div>
  `}function Gt(s){const e=document.getElementById("personal-projects-container");e.innerHTML=`
    <div class="text-center py-8">
      <p class="text-red-500 dark:text-red-400">${s.message}</p>
      <button onclick="window.location.reload()" 
              class="mt-4 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">
        Reload Page
      </button>
    </div>
  `}function wi(){const s=document.getElementById("projects-container");s.innerHTML=`
    <div class="col-span-full text-center py-8">
      <p class="text-gray-500 dark:text-gray-400">Loading projects...</p>
    </div>
  `}function _i(){const s=document.getElementById("personal-projects-container");s.innerHTML=`
    <div class="text-center py-8">
      <p class="text-gray-500 dark:text-gray-400">Loading personal projects...</p>
    </div>
  `}function ki(){document.getElementById("Projects-Tab").click(),document.addEventListener("click",function(s){const e=document.getElementById("mobile-nav-links"),t=document.getElementById("mobile-menu-button");e.classList.contains("show")&&!e.contains(s.target)&&!t.contains(s.target)&&e.classList.remove("show")})}function Ei(s,e,t){s&&s.preventDefault(),document.querySelectorAll(".tab-content").forEach(i=>{i.classList.add("hidden")}),document.querySelectorAll(".tab").forEach(i=>{i.classList.remove("active-tab")}),document.getElementById(e).classList.remove("hidden"),document.getElementById(t).classList.add("active-tab");const r={"About-Tab":["about-nav","mobile-about-nav"],"Projects-Tab":["projects-nav","mobile-projects-nav"],"Publications-Tab":["publications-nav","mobile-publications-nav"],"References-Tab":["references-nav","mobile-references-nav"],"Contact-Tab":["contact-nav","mobile-contact-nav"]};document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(i=>{i.classList.remove("active-nav")}),r[t]&&r[t].forEach(i=>{const n=document.getElementById(i);n&&n.classList.add("active-nav")})}function xi(s){const e={about:"About-Tab",projects:"Projects-Tab",publications:"Publications-Tab",references:"References-Tab",contact:"Contact-Tab"};e[s]&&document.getElementById(e[s]).click(),document.getElementById("tabs-section").scrollIntoView({behavior:"smooth"}),document.getElementById("mobile-nav-links").classList.remove("show")}async function Si(s){s&&(s.stopPropagation(),s.preventDefault());const e=document.getElementById("pdf-modal"),t=document.getElementById("resume-iframe"),r=document.getElementById("pdf-loading");if(e.classList.contains("hidden")){e.classList.remove("hidden"),document.body.style.overflow="hidden",r.classList.remove("hidden"),t.classList.add("hidden");try{let i=await he("resume");i||(i=await Nt()),Array.isArray(i)&&(i=i.join("")),console.log("Processed Resume URL:",i),t.src=i,t.onload=()=>{r.classList.add("hidden"),t.classList.remove("hidden")},t.src=i}catch(i){console.log("error here",i),r.innerHTML=`
        <div class="text-center p-4">
          <i class="fas fa-exclamation-triangle text-red-400 text-3xl mb-2"></i>
          <p class="text-white">Failed to load resume</p>
          <button onclick="togglePdfModal(event)" 
            class="mt-2 px-4 py-2 bg-red-500 hover:bg-red-600 rounded">
            Close
          </button>
        </div>
      `,console.error("Error loading resume:",i)}}else e.classList.add("hidden"),document.body.style.overflow="",t.src=""}function Ti(){document.getElementById("mobile-nav-links").classList.toggle("show")}async function ji(){try{console.log("Initializing publications tab..."),Pi();const s=new Promise(e=>{document.readyState==="complete"||document.readyState==="interactive"?e():document.addEventListener("DOMContentLoaded",e)});await Promise.race([Promise.all([qt,s]),new Promise((e,t)=>setTimeout(()=>t(new Error("Initialization timeout")),5e3))]),console.log("Cache and DOM ready for publications"),document.addEventListener("publications-updated",bt),await bt()}catch(s){console.error("Publications initialization failed:",s),Kt(new Error("Failed to load publications"))}}async function bt(){try{console.log("Rendering publications..."),$i();const s=await he("publications");console.log("Publications data:",s);const e=document.querySelector("#Publications .space-y-4");if(!e)throw new Error("Publications container not found");if(!s||!s.length){e.innerHTML=`
        <div class="text-center py-8">
          <p class="dark:text-gray-400">No publications found</p>
        </div>
      `;return}e.innerHTML=s.map(t=>{const r=()=>{const i=[];return t.pdfLink&&i.push(`
              <a href="${t.pdfLink}" 
                 class="dark:text-blue-400 hover:underline flex items-center">
                <i class="fas fa-file-pdf mr-1"></i> PDF
              </a>
            `),t.doiLink&&i.push(`
              <a href="${t.doiLink}" 
                 class="dark:text-blue-400 hover:underline flex items-center">
                <i class="fas fa-link mr-1"></i> DOI
              </a>
            `),t.citation&&i.push(`
              <button onclick="navigator.clipboard.writeText('${t.citation}')"
                      class="dark:text-blue-400 hover:underline flex items-center">
                <i class="fas fa-quote-right mr-1"></i> Cite
              </button>
            `),t.externalLink&&i.push(`
              <button onclick="navigator.clipboard.writeText('${t.externalLink}')"
                      class="dark:text-blue-400 hover:underline flex items-center">
                <i class="fas fa-external-link-alt mr-1"></i> Read Article
              </button>
            `),i.join("")};return`
          <div class="dark:bg-slate-700 p-4 rounded-lg shadow dark:border-slate-600">
            <h3 class="font-bold text-lg">${t.title||"Untitled Publication"}</h3>
            <p class="text-sm dark:text-gray-400 mb-2">
              ${t.journal||"Unspecified Journal"}, ${t.year||"N/A"}
            </p>
            <p class="mb-2">${t.description||"No abstract available."}</p>
            <div class="flex space-x-3">
              ${r()}
            </div>
          </div>
        `}).join(""),console.log("Publications rendered successfully")}catch(s){console.error("Error rendering publications:",s),Kt(s)}}function Pi(){const s=document.querySelector("#Publications .space-y-4");s.innerHTML="";for(let e=0;e<3;e++)s.appendChild(Ft())}function Kt(s){const e=document.querySelector("#Publications .space-y-4");e.innerHTML=`
    <div class="text-center py-8">
      <p class="text-red-500 dark:text-red-400">${s.message}</p>
      <button onclick="window.location.reload()" 
              class="mt-4 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">
        Reload Page
      </button>
    </div>
  `}function $i(){const s=document.querySelector("#Publications .space-y-4");s.innerHTML=`
    <div class="text-center py-8">
      <p class="dark:text-gray-400">Loading publications...</p>
    </div>
  `}const ie={experience:[{title:"Software Engineer",period:"Jun 2022 – Present",company:"Equally.ai | Tel Aviv, Israel",achievements:["Designed AI-driven WCAG Compliance System (Golang/Kubernetes) improving accessibility by 40% across 1000+ sites","Architected 12+ microservices deployed on GCP/AWS Kubernetes, enhancing system reliability","Built subscription system with PayPal integration increasing revenue by 30% in 4 months"]},{title:"Software Engineer",period:"Jan 2021 – Jun 2022",company:"Twof Capital | Addis Ababa, Ethiopia",achievements:["Developed market-leading Ride Plus payment app generating 20% revenue growth","Engineered music streaming app (Go/Flutter) for 500k+ users with 4.3 rating","Built scalable microservices achieving 25% performance boost through TDD"]},{title:"Software Engineer",period:"Dec 2019 – Jan 2021",company:"Equb Financial Technologies | Addis Ababa, Ethiopia",achievements:["Developed RESTful API for saving system serving 10k+ users (Golang/Flutter)","Optimized API efficiency by 40% through PGX migration and query optimization","Reduced deployment time 50% via CI/CD automation"]}],education:[{degree:"Bachelor's in Software Engineering",period:"Oct 2017 – Jul 2022",institution:"Addis Ababa University",details:["Top 1% of batch with AI-Based Thesis Similarity Checker project","Developed Online Grading System Thesis"]},{degree:"Competitive Programming",period:"Oct 2022 – Nov 2023",institution:"",details:["Mastered Data Structures, Algorithms, and Discrete Mathematics"]}],skills:{languages:["Go/Golang","Python","JavaScript"],cloud:["Docker","Kubernetes","AWS","GCP","CI/CD"],specializations:["Microservices","Hexagonal Architecture","Distributed Systems","AI Integration"]}};function Ai(){const s=document.getElementById("About"),e={"Go/Golang":"dark:bg-blue-900 dark:text-blue-200",Python:"dark:bg-green-900 dark:text-green-200",JavaScript:"dark:bg-purple-900 dark:text-purple-200",Docker:"dark:bg-yellow-900 dark:text-yellow-200",Kubernetes:"dark:bg-red-900 dark:text-red-200",AWS:"dark:bg-indigo-900 dark:text-indigo-200",GCP:"dark:bg-blue-900 dark:text-blue-200","CI/CD":"dark:bg-gray-700 text-white",Microservices:"dark:bg-green-900 dark:text-green-200","Hexagonal Architecture":"dark:bg-purple-900 dark:text-purple-200","Distributed Systems":"dark:bg-blue-900 dark:text-blue-200","AI Integration":"dark:bg-red-900 dark:text-red-200"},t=r=>`${e[r]||"dark:bg-slate-800 text-white"} px-3 py-1 rounded-full text-sm`;s.innerHTML=`
      <h2 class="text-2xl font-bold mb-6">About Me</h2>
      <div class="space-y-8">
        <!-- Experience Section -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
          <div class="md:col-span-1">
            <h3 class="text-xl font-semibold">Experience</h3>
          </div>
          <div class="md:col-span-4">
            <ul class="space-y-4">
              ${ie.experience.map(r=>`
                <li class="p-4 dark:bg-slate-700 rounded-lg">
                  <div class="flex justify-between flex-wrap">
                    <strong class="block text-lg">${r.title}</strong>
                    <span class="dark:text-blue-400">${r.period}</span>
                  </div>
                  <p class="font-medium">${r.company}</p>
                  <ul class="list-disc pl-5 mt-2 space-y-1 text-sm">
                    ${r.achievements.map(i=>`<li>${i}</li>`).join("")}
                  </ul>
                </li>
              `).join("")}
            </ul>
          </div>
        </div>
  
        <div class="border-t border-slate-700 my-4"></div>
  
        <!-- Education Section -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
          <div class="md:col-span-1">
            <h3 class="text-xl font-semibold">Education</h3>
          </div>
          <div class="md:col-span-4">
            <ul class="space-y-4">
              ${ie.education.map(r=>`
                <li class="p-4 dark:bg-slate-700 rounded-lg">
                  <div class="flex justify-between flex-wrap">
                    <strong class="block">${r.degree}</strong>
                    <span class="dark:text-blue-400">${r.period}</span>
                  </div>
                  ${r.institution?`<p>${r.institution}</p>`:""}
                  <ul class="list-disc pl-5 mt-2 text-sm">
                    ${r.details.map(i=>`<li>${i}</li>`).join("")}
                  </ul>
                </li>
              `).join("")}
            </ul>
          </div>
        </div>
  
        <div class="border-t border-slate-700 my-4"></div>
  
        <!-- Skills Section -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
          <div class="md:col-span-1">
            <h3 class="text-xl font-semibold">Skills</h3>
          </div>
          <div class="md:col-span-4">
            <div class="p-4 dark:bg-slate-700 rounded-lg">
              <!-- Languages -->
              <div class="mb-4">
                <h4 class="font-medium mb-2">Languages</h4>
                <div class="flex flex-wrap gap-2">
                  ${ie.skills.languages.map(r=>`<span class="${t(r)}">${r}</span>`).join("")}
                </div>
              </div>
  
              <!-- Cloud & DevOps -->
              <div class="mb-4">
                <h4 class="font-medium mb-2">Cloud & DevOps</h4>
                <div class="flex flex-wrap gap-2">
                  ${ie.skills.cloud.map(r=>`<span class="${t(r)}">${r}</span>`).join("")}
                </div>
              </div>
  
              <!-- Specializations -->
              <div>
                <h4 class="font-medium mb-2">Specializations</h4>
                <div class="flex flex-wrap gap-2">
                  ${ie.skills.specializations.map(r=>`<span class="${t(r)}">${r}</span>`).join("")}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    `}function Oi(){Ai()}function Li(){console.group("DOM State Verification"),console.log("document.readyState:",document.readyState),console.log("document.body exists:",!!document.body),console.log("Main container exists:",!!document.getElementById("projects-container")),console.groupEnd()}window.openTab=Ei;window.handleNavClick=xi;window.togglePdfModal=Si;window.toggleMobileMenu=Ti;window.showProjectModal=mi;window.hideProjectModal=ke;window.showMessageModal=pi;window.hideMessageModal=Ht;window.hideErrorModal=ui;window.saveResume=zt;async function wt(){try{Li(),fi(),console.log("Starting initialization process..."),console.log("Initializing cache..."),He(),console.log("Cache initialized successfully"),Oi(),gi(),console.log("Initializing navigation..."),ki(),console.log("Navigation initialized"),console.log("Initializing projects tab..."),ji(),await vi(),console.log("Tabs initialized"),console.log("Application fully initialized")}catch(s){console.error("Boot error:",s),de(`Application failed to start: ${s.message}`);try{const e=document.getElementById("projects-container");e&&(e.innerHTML=`
          <div class="col-span-full text-center py-8">
            <p class="text-red-500 dark:text-red-400">${s.message}</p>
            <button onclick="window.location.reload()" 
              class="mt-4 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">
              Reload Page
            </button>
          </div>
        `)}catch(e){console.error("Fallback UI failed:",e)}}}function Ci(){console.log("Starting application..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded, initializing app"),wt()}):(console.log("DOM already ready, initializing app"),wt())}Ci();export{rr as g};


//# sourceMappingURL=data:application/json;base64,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QUFBQTtBQUFBLFVBUWhFLE9BQVFvcUIsRUFBZSxDQUN0QixRQUFRLE1BQU0sc0JBQXVCQSxDQUFhLENBQ3hELENBQ0EsQ0FDQSxDQUdBLFNBQVNDLElBQW1CLENBQzFCLFFBQVEsSUFBSSx5QkFBeUIsRUFDakMsU0FBUyxhQUFlLFVBQzFCLFNBQVMsaUJBQWlCLG1CQUFvQixJQUFNLENBQ2xELFFBQVEsSUFBSSxvQ0FBb0MsRUFDaERGLEdBQWUsQ0FDckIsQ0FBSyxHQUVELFFBQVEsSUFBSSxxQ0FBcUMsRUFDakRBLEdBQWUsRUFFbkIsQ0FHQUUsR0FBa0IiLCJuYW1lcyI6WyJyZXNvbHZlRmV0Y2giLCJjdXN0b21GZXRjaCIsIl9mZXRjaCIsImFyZ3MiLCJfX3ZpdGVQcmVsb2FkIiwiZmV0Y2giLCJicm93c2VyIiwiRnVuY3Rpb25zRXJyb3IiLCJtZXNzYWdlIiwibmFtZSIsImNvbnRleHQiLCJGdW5jdGlvbnNGZXRjaEVycm9yIiwiRnVuY3Rpb25zUmVsYXlFcnJvciIsIkZ1bmN0aW9uc0h0dHBFcnJvciIsIkZ1bmN0aW9uUmVnaW9uIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiYWRvcHQiLCJ2YWx1ZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiRnVuY3Rpb25zQ2xpZW50IiwidXJsIiwiaGVhZGVycyIsInJlZ2lvbiIsInRva2VuIiwiZnVuY3Rpb25OYW1lIiwib3B0aW9ucyIsIl9hIiwibWV0aG9kIiwiZnVuY3Rpb25BcmdzIiwiX2hlYWRlcnMiLCJib2R5IiwicmVzcG9uc2UiLCJmZXRjaEVycm9yIiwiaXNSZWxheUVycm9yIiwicmVzcG9uc2VUeXBlIiwiZGF0YSIsImVycm9yIiwiZ2V0R2xvYmFsIiwiZ2xvYmFsT2JqZWN0Iiwibm9kZUZldGNoIiwiSGVhZGVycyIsIlJlcXVlc3QiLCJSZXNwb25zZSIsIlBvc3RncmVzdEVycm9yXzEiLCJQb3N0Z3Jlc3RFcnJvciIsIl9faW1wb3J0RGVmYXVsdCIsInRoaXMiLCJtb2QiLCJQb3N0Z3Jlc3RCdWlsZGVyXzEiLCJub2RlX2ZldGNoXzEiLCJyZXF1aXJlJCQwIiwicmVxdWlyZSQkMSIsIlBvc3RncmVzdEJ1aWxkZXIiLCJidWlsZGVyIiwib25mdWxmaWxsZWQiLCJvbnJlamVjdGVkIiwicmVzIiwiX2IiLCJfYyIsImNvdW50Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImNvdW50SGVhZGVyIiwiY29udGVudFJhbmdlIiwiUG9zdGdyZXN0VHJhbnNmb3JtQnVpbGRlcl8xIiwiUG9zdGdyZXN0VHJhbnNmb3JtQnVpbGRlciIsImNvbHVtbnMiLCJxdW90ZWQiLCJjbGVhbmVkQ29sdW1ucyIsImMiLCJjb2x1bW4iLCJhc2NlbmRpbmciLCJudWxsc0ZpcnN0IiwiZm9yZWlnblRhYmxlIiwicmVmZXJlbmNlZFRhYmxlIiwia2V5IiwiZXhpc3RpbmdPcmRlciIsImZyb20iLCJ0byIsImtleU9mZnNldCIsImtleUxpbWl0Iiwic2lnbmFsIiwiYW5hbHl6ZSIsInZlcmJvc2UiLCJzZXR0aW5ncyIsImJ1ZmZlcnMiLCJ3YWwiLCJmb3JtYXQiLCJmb3JNZWRpYXR5cGUiLCJQb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyXzEiLCJQb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyIiwicGF0dGVybiIsInBhdHRlcm5zIiwidmFsdWVzIiwiY2xlYW5lZFZhbHVlcyIsInMiLCJyYW5nZSIsInF1ZXJ5IiwiY29uZmlnIiwidHlwZSIsInR5cGVQYXJ0IiwiY29uZmlnUGFydCIsIm9wZXJhdG9yIiwiZmlsdGVycyIsIlBvc3RncmVzdFF1ZXJ5QnVpbGRlcl8xIiwiUG9zdGdyZXN0UXVlcnlCdWlsZGVyIiwic2NoZW1hIiwiaGVhZCIsImRlZmF1bHRUb051bGwiLCJwcmVmZXJzSGVhZGVycyIsImFjYyIsIngiLCJ1bmlxdWVDb2x1bW5zIiwib25Db25mbGljdCIsImlnbm9yZUR1cGxpY2F0ZXMiLCJ2ZXJzaW9uIiwiY29uc3RhbnRzIiwidmVyc2lvbl8xIiwiUG9zdGdyZXN0Q2xpZW50XzEiLCJjb25zdGFudHNfMSIsInJlcXVpcmUkJDIiLCJQb3N0Z3Jlc3RDbGllbnQiLCJyZWxhdGlvbiIsImZuIiwiZ2V0IiwiXyIsImNqcyIsInJlcXVpcmUkJDMiLCJyZXF1aXJlJCQ0IiwicmVxdWlyZSQkNSIsImluZGV4IiwiREVGQVVMVF9IRUFERVJTIiwiVlNOIiwiREVGQVVMVF9USU1FT1VUIiwiV1NfQ0xPU0VfTk9STUFMIiwiU09DS0VUX1NUQVRFUyIsIkNIQU5ORUxfU1RBVEVTIiwiQ0hBTk5FTF9FVkVOVFMiLCJUUkFOU1BPUlRTIiwiQ09OTkVDVElPTl9TVEFURSIsIlNlcmlhbGl6ZXIiLCJyYXdQYXlsb2FkIiwiY2FsbGJhY2siLCJidWZmZXIiLCJ2aWV3IiwiZGVjb2RlciIsInRvcGljU2l6ZSIsImV2ZW50U2l6ZSIsIm9mZnNldCIsInRvcGljIiwiZXZlbnQiLCJUaW1lciIsInRpbWVyQ2FsYyIsIlBvc3RncmVzVHlwZXMiLCJjb252ZXJ0Q2hhbmdlRGF0YSIsInJlY29yZCIsInNraXBUeXBlcyIsInJlY19rZXkiLCJjb252ZXJ0Q29sdW1uIiwiY29sdW1uTmFtZSIsImNvbFR5cGUiLCJjb252ZXJ0Q2VsbCIsIm5vb3AiLCJkYXRhVHlwZSIsInRvQXJyYXkiLCJ0b0Jvb2xlYW4iLCJ0b051bWJlciIsInRvSnNvbiIsInRvVGltZXN0YW1wU3RyaW5nIiwicGFyc2VkVmFsdWUiLCJsYXN0SWR4IiwiY2xvc2VCcmFjZSIsImFyciIsInZhbFRyaW0iLCJ2YWwiLCJodHRwRW5kcG9pbnRVUkwiLCJzb2NrZXRVcmwiLCJQdXNoIiwiY2hhbm5lbCIsInBheWxvYWQiLCJ0aW1lb3V0IiwiaCIsIlJFQUxUSU1FX1BSRVNFTkNFX0xJU1RFTl9FVkVOVFMiLCJSZWFsdGltZVByZXNlbmNlIiwib3B0cyIsImV2ZW50cyIsIm5ld1N0YXRlIiwib25Kb2luIiwib25MZWF2ZSIsIm9uU3luYyIsImRpZmYiLCJjdXJyZW50UHJlc2VuY2VzIiwibmV3UHJlc2VuY2VzIiwibGVmdFByZXNlbmNlcyIsImN1cnJlbnRTdGF0ZSIsInN0YXRlIiwidHJhbnNmb3JtZWRTdGF0ZSIsImpvaW5zIiwibGVhdmVzIiwicHJlc2VuY2VzIiwibmV3UHJlc2VuY2VSZWZzIiwiY3VyUHJlc2VuY2VSZWZzIiwiam9pbmVkUHJlc2VuY2VzIiwiam9pbmVkUHJlc2VuY2VSZWZzIiwibSIsImN1clByZXNlbmNlcyIsInByZXNlbmNlUmVmc1RvUmVtb3ZlIiwib2JqIiwiZnVuYyIsInByZXNlbmNlIiwiUkVBTFRJTUVfUE9TVEdSRVNfQ0hBTkdFU19MSVNURU5fRVZFTlQiLCJSRUFMVElNRV9MSVNURU5fVFlQRVMiLCJSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTIiwiUmVhbHRpbWVDaGFubmVsIiwicGFyYW1zIiwic29ja2V0IiwicHVzaEV2ZW50IiwicmVhc29uIiwicmVmIiwiYnJvYWRjYXN0IiwiaXNQcml2YXRlIiwiYWNjZXNzVG9rZW5QYXlsb2FkIiwiciIsInBvc3RncmVzX2NoYW5nZXMiLCJjbGllbnRQb3N0Z3Jlc0JpbmRpbmdzIiwiYmluZGluZ3NMZW4iLCJuZXdQb3N0Z3Jlc0JpbmRpbmdzIiwiaSIsImNsaWVudFBvc3RncmVzQmluZGluZyIsInRhYmxlIiwiZmlsdGVyIiwic2VydmVyUG9zdGdyZXNGaWx0ZXIiLCJlbmRwb2ludF9wYXlsb2FkIiwicHVzaCIsIm9uQ2xvc2UiLCJsZWF2ZVB1c2giLCJjb250cm9sbGVyIiwiaWQiLCJfZXZlbnQiLCJfcmVmIiwidHlwZUxvd2VyIiwiY2xvc2UiLCJsZWF2ZSIsImpvaW4iLCJoYW5kbGVkUGF5bG9hZCIsImJpbmQiLCJfZCIsIl9lIiwiX2YiLCJiaW5kSWQiLCJiaW5kRXZlbnQiLCJwb3N0Z3Jlc0NoYW5nZXMiLCJjb21taXRfdGltZXN0YW1wIiwiZXJyb3JzIiwiYmluZGluZyIsIm9iajEiLCJvYmoyIiwiayIsInJlY29yZHMiLCJUcmFuc2Zvcm1lcnMuY29udmVydENoYW5nZURhdGEiLCJOQVRJVkVfV0VCU09DS0VUX0FWQUlMQUJMRSIsIldPUktFUl9TQ1JJUFQiLCJSZWFsdGltZUNsaWVudCIsImVuZFBvaW50IiwiYWNjZXNzVG9rZW5WYWx1ZSIsInRyaWVzIiwiV1NXZWJTb2NrZXREdW1teSIsIldTIiwibiIsImNvZGUiLCJ2YWx1ZXNfMSIsImtpbmQiLCJtc2ciLCJjaGFuIiwidG9rZW5Ub1NlbmQiLCJwYXJzZWQiLCJuZXdSZWYiLCJkdXBDaGFubmVsIiwicmF3TWVzc2FnZSIsIm9iamVjdFVybCIsInByZWZpeCIsInJlc3VsdF91cmwiLCJibG9iIiwiYWRkcmVzcyIsIl9wcm90b2NvbHMiLCJTdG9yYWdlRXJyb3IiLCJpc1N0b3JhZ2VFcnJvciIsIlN0b3JhZ2VBcGlFcnJvciIsIlN0b3JhZ2VVbmtub3duRXJyb3IiLCJvcmlnaW5hbEVycm9yIiwicmVzb2x2ZVJlc3BvbnNlIiwicmVjdXJzaXZlVG9DYW1lbCIsIml0ZW0iLCJlbCIsIm5ld0tleSIsIl9nZXRFcnJvck1lc3NhZ2UiLCJlcnIiLCJoYW5kbGVFcnJvciIsIlJlcyIsIl9nZXRSZXF1ZXN0UGFyYW1zIiwicGFyYW1ldGVycyIsIl9oYW5kbGVSZXF1ZXN0IiwiZmV0Y2hlciIsInBvc3QiLCJwdXQiLCJyZW1vdmUiLCJERUZBVUxUX1NFQVJDSF9PUFRJT05TIiwiREVGQVVMVF9GSUxFX09QVElPTlMiLCJTdG9yYWdlRmlsZUFwaSIsImJ1Y2tldElkIiwicGF0aCIsImZpbGVCb2R5IiwiZmlsZU9wdGlvbnMiLCJtZXRhZGF0YSIsImNsZWFuUGF0aCIsIl9wYXRoIiwiZnJvbVBhdGgiLCJ0b1BhdGgiLCJleHBpcmVzSW4iLCJkb3dubG9hZFF1ZXJ5UGFyYW0iLCJwYXRocyIsImRhdHVtIiwicmVuZGVyUGF0aCIsInRyYW5zZm9ybWF0aW9uUXVlcnkiLCJxdWVyeVN0cmluZyIsIl9xdWVyeVN0cmluZyIsInRyYW5zZm9ybSIsIlN0b3JhZ2VCdWNrZXRBcGkiLCJTdG9yYWdlQ2xpZW50IiwiSlNfRU5WIiwiREVGQVVMVF9HTE9CQUxfT1BUSU9OUyIsIkRFRkFVTFRfREJfT1BUSU9OUyIsIkRFRkFVTFRfQVVUSF9PUFRJT05TIiwiREVGQVVMVF9SRUFMVElNRV9PUFRJT05TIiwicmVzb2x2ZUhlYWRlcnNDb25zdHJ1Y3RvciIsIk5vZGVGZXRjaEhlYWRlcnMiLCJmZXRjaFdpdGhBdXRoIiwic3VwYWJhc2VLZXkiLCJnZXRBY2Nlc3NUb2tlbiIsIkhlYWRlcnNDb25zdHJ1Y3RvciIsImlucHV0IiwiaW5pdCIsImFjY2Vzc1Rva2VuIiwic3RyaXBUcmFpbGluZ1NsYXNoIiwiYXBwbHlTZXR0aW5nRGVmYXVsdHMiLCJkZWZhdWx0cyIsImRiT3B0aW9ucyIsImF1dGhPcHRpb25zIiwicmVhbHRpbWVPcHRpb25zIiwiZ2xvYmFsT3B0aW9ucyIsIkFVVE9fUkVGUkVTSF9USUNLX0RVUkFUSU9OX01TIiwiQVVUT19SRUZSRVNIX1RJQ0tfVEhSRVNIT0xEIiwiRVhQSVJZX01BUkdJTl9NUyIsIkdPVFJVRV9VUkwiLCJTVE9SQUdFX0tFWSIsIkFQSV9WRVJTSU9OX0hFQURFUl9OQU1FIiwiQVBJX1ZFUlNJT05TIiwiQkFTRTY0VVJMX1JFR0VYIiwiSldLU19UVEwiLCJBdXRoRXJyb3IiLCJpc0F1dGhFcnJvciIsIkF1dGhBcGlFcnJvciIsImlzQXV0aEFwaUVycm9yIiwiQXV0aFVua25vd25FcnJvciIsIkN1c3RvbUF1dGhFcnJvciIsIkF1dGhTZXNzaW9uTWlzc2luZ0Vycm9yIiwiaXNBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvciIsIkF1dGhJbnZhbGlkVG9rZW5SZXNwb25zZUVycm9yIiwiQXV0aEludmFsaWRDcmVkZW50aWFsc0Vycm9yIiwiQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yIiwiZGV0YWlscyIsImlzQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yIiwiQXV0aFBLQ0VHcmFudENvZGVFeGNoYW5nZUVycm9yIiwiQXV0aFJldHJ5YWJsZUZldGNoRXJyb3IiLCJpc0F1dGhSZXRyeWFibGVGZXRjaEVycm9yIiwiQXV0aFdlYWtQYXNzd29yZEVycm9yIiwicmVhc29ucyIsIkF1dGhJbnZhbGlkSnd0RXJyb3IiLCJUT19CQVNFNjRVUkwiLCJJR05PUkVfQkFTRTY0VVJMIiwiRlJPTV9CQVNFNjRVUkwiLCJjaGFyTWFwIiwiYnl0ZUZyb21CYXNlNjRVUkwiLCJjaGFyQ29kZSIsImVtaXQiLCJiaXRzIiwic3RyaW5nRnJvbUJhc2U2NFVSTCIsInN0ciIsImNvbnYiLCJ1dGY4RW1pdCIsImNvZGVwb2ludCIsInV0ZjhTdGF0ZSIsImI2NFN0YXRlIiwiYnl0ZUVtaXQiLCJieXRlIiwic3RyaW5nRnJvbVVURjgiLCJjb2RlcG9pbnRUb1VURjgiLCJzdHJpbmdUb1VURjgiLCJoaWdoU3Vycm9nYXRlIiwibGVhZGluZ0JpdCIsImJhc2U2NFVybFRvVWludDhBcnJheSIsIm9uQnl0ZSIsInN0cmluZ1RvVWludDhBcnJheSIsImV4cGlyZXNBdCIsInV1aWQiLCJpc0Jyb3dzZXIiLCJsb2NhbFN0b3JhZ2VXcml0ZVRlc3RzIiwic3VwcG9ydHNMb2NhbFN0b3JhZ2UiLCJyYW5kb21LZXkiLCJwYXJzZVBhcmFtZXRlcnNGcm9tVVJMIiwiaHJlZiIsImxvb2tzTGlrZUZldGNoUmVzcG9uc2UiLCJtYXliZVJlc3BvbnNlIiwic2V0SXRlbUFzeW5jIiwic3RvcmFnZSIsImdldEl0ZW1Bc3luYyIsInJlbW92ZUl0ZW1Bc3luYyIsIkRlZmVycmVkIiwicmVqIiwiZGVjb2RlSldUIiwicGFydHMiLCJzbGVlcCIsInRpbWUiLCJhY2NlcHQiLCJyZXRyeWFibGUiLCJpc1JldHJ5YWJsZSIsImF0dGVtcHQiLCJkZWMyaGV4IiwiZGVjIiwiZ2VuZXJhdGVQS0NFVmVyaWZpZXIiLCJhcnJheSIsImNoYXJTZXQiLCJjaGFyU2V0TGVuIiwidmVyaWZpZXIiLCJzaGEyNTYiLCJyYW5kb21TdHJpbmciLCJlbmNvZGVkRGF0YSIsImhhc2giLCJieXRlcyIsImdlbmVyYXRlUEtDRUNoYWxsZW5nZSIsImhhc2hlZCIsImdldENvZGVDaGFsbGVuZ2VBbmRNZXRob2QiLCJzdG9yYWdlS2V5IiwiaXNQYXNzd29yZFJlY292ZXJ5IiwiY29kZVZlcmlmaWVyIiwic3RvcmVkQ29kZVZlcmlmaWVyIiwiY29kZUNoYWxsZW5nZSIsIkFQSV9WRVJTSU9OX1JFR0VYIiwicGFyc2VSZXNwb25zZUFQSVZlcnNpb24iLCJhcGlWZXJzaW9uIiwidmFsaWRhdGVFeHAiLCJleHAiLCJ0aW1lTm93IiwiZ2V0QWxnb3JpdGhtIiwiYWxnIiwiX19yZXN0IiwicCIsIk5FVFdPUktfRVJST1JfQ09ERVMiLCJlcnJvckNvZGUiLCJyZXNwb25zZUFQSVZlcnNpb24iLCJhIiwiX3JlcXVlc3QiLCJxcyIsInJlcXVlc3RQYXJhbXMiLCJfc2Vzc2lvblJlc3BvbnNlIiwic2Vzc2lvbiIsImhhc1Nlc3Npb24iLCJ1c2VyIiwiX3Nlc3Npb25SZXNwb25zZVBhc3N3b3JkIiwiX3VzZXJSZXNwb25zZSIsIl9zc29SZXNwb25zZSIsIl9nZW5lcmF0ZUxpbmtSZXNwb25zZSIsImFjdGlvbl9saW5rIiwiZW1haWxfb3RwIiwiaGFzaGVkX3Rva2VuIiwicmVkaXJlY3RfdG8iLCJ2ZXJpZmljYXRpb25fdHlwZSIsInJlc3QiLCJwcm9wZXJ0aWVzIiwiX25vUmVzb2x2ZUpzb25SZXNwb25zZSIsIkdvVHJ1ZUFkbWluQXBpIiwiand0Iiwic2NvcGUiLCJlbWFpbCIsImF0dHJpYnV0ZXMiLCJfZyIsInBhZ2luYXRpb24iLCJ1c2VycyIsInRvdGFsIiwibGlua3MiLCJsaW5rIiwicGFnZSIsInJlbCIsInVpZCIsInNob3VsZFNvZnREZWxldGUiLCJmYWN0b3JzIiwibG9jYWxTdG9yYWdlQWRhcHRlciIsIm1lbW9yeUxvY2FsU3RvcmFnZUFkYXB0ZXIiLCJzdG9yZSIsInBvbHlmaWxsR2xvYmFsVGhpcyIsImludGVybmFscyIsIkxvY2tBY3F1aXJlVGltZW91dEVycm9yIiwiTmF2aWdhdG9yTG9ja0FjcXVpcmVUaW1lb3V0RXJyb3IiLCJuYXZpZ2F0b3JMb2NrIiwiYWNxdWlyZVRpbWVvdXQiLCJhYm9ydENvbnRyb2xsZXIiLCJsb2NrIiwiREVGQVVMVF9PUFRJT05TIiwibG9ja05vT3AiLCJHb1RydWVDbGllbnQiLCJjYWxsYmFja1VybFR5cGUiLCJyZWRpcmVjdFR5cGUiLCJjcmVkZW50aWFscyIsInBhc3N3b3JkIiwiY29kZUNoYWxsZW5nZU1ldGhvZCIsInBob25lIiwiYXV0aENvZGUiLCJzdG9yYWdlSXRlbSIsInByb3ZpZGVyIiwiYWNjZXNzX3Rva2VuIiwibm9uY2UiLCJyZWRpcmVjdFRvIiwiY2FwdGNoYVRva2VuIiwic2Vzc2lvbkVycm9yIiwiZW5kcG9pbnQiLCJsYXN0Iiwid2FpdE9uIiwiY3VycmVudFNlc3Npb24iLCJtYXliZVNlc3Npb24iLCJoYXNFeHBpcmVkIiwic3VwcHJlc3NXYXJuaW5nIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwic2Vzc2lvbkRhdGEiLCJ1c2VyRXJyb3IiLCJyZWZyZXNoZWRTZXNzaW9uIiwicHJvdmlkZXJfdG9rZW4iLCJwcm92aWRlcl9yZWZyZXNoX3Rva2VuIiwicmVmcmVzaF90b2tlbiIsImV4cGlyZXNfaW4iLCJleHBpcmVzX2F0IiwidG9rZW5fdHlwZSIsImFjdHVhbGx5RXhwaXJlc0luIiwiaXNzdWVkQXQiLCJjdXJyZW50U3RvcmFnZUNvbnRlbnQiLCJzdWJzY3JpcHRpb24iLCJpZGVudGl0eSIsInJlZnJlc2hUb2tlbiIsImRlYnVnTmFtZSIsInN0YXJ0ZWRBdCIsIm5leHRCYWNrT2ZmSW50ZXJ2YWwiLCJleHBpcmVzV2l0aE1hcmdpbiIsInByb21pc2VzIiwidGlja2VyIiwibm93IiwiZXhwaXJlc0luVGlja3MiLCJjYWxsZWRGcm9tSW5pdGlhbGl6ZSIsIm1ldGhvZE5hbWUiLCJ1cmxQYXJhbXMiLCJmbG93UGFyYW1zIiwiY2hhbGxlbmdlRGF0YSIsImNoYWxsZW5nZUVycm9yIiwidG90cCIsImZhY3RvciIsImN1cnJlbnRMZXZlbCIsIm5leHRMZXZlbCIsImN1cnJlbnRBdXRoZW50aWNhdGlvbk1ldGhvZHMiLCJraWQiLCJqd2tzIiwiandrIiwiaGVhZGVyIiwic2lnbmF0dXJlIiwicmF3SGVhZGVyIiwiYWxnb3JpdGhtIiwic2lnbmluZ0tleSIsInB1YmxpY0tleSIsIkF1dGhDbGllbnQiLCJTdXBhYmFzZUF1dGhDbGllbnQiLCJTdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlVXJsIiwiX3N1cGFiYXNlVXJsIiwiZGVmYXVsdFN0b3JhZ2VLZXkiLCJERUZBVUxUUyIsIlN1cGFiYXNlU3RvcmFnZUNsaWVudCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImRldGVjdFNlc3Npb25JblVybCIsImZsb3dUeXBlIiwiZGVidWciLCJhdXRoSGVhZGVycyIsInNvdXJjZSIsImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlIiwidGVjaENvbG9ycyIsImdldFRlY2hDb2xvciIsInRlY2giLCJkYXRhRXJyb3IiLCJzYWZlU3VwYWJhc2VRdWVyeSIsInF1ZXJ5Rm4iLCJsb2FkaW5nTWVzc2FnZSIsImhpZGVMb2FkaW5nIiwiZmV0Y2hQcm9qZWN0cyIsImZldGNoUGVyc29uYWxQcm9qZWN0cyIsImZldGNoUHVibGljYXRpb25zIiwiZmV0Y2hSZWZlcmVuY2VzIiwiZG93bmxvYWRSZXN1bWUiLCJyZXN1bWVVcmwiLCJmZXRjaFJlc3VtZSIsImNhY2hlIiwiY2FjaGVJbml0aWFsaXplZCIsImNhY2hlSW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaW5pdGlhbGl6ZUNhY2hlIiwicmV0cmllcyIsInByb2plY3RzIiwicGVyc29uYWxQcm9qZWN0cyIsInB1YmxpY2F0aW9ucyIsInJlZmVyZW5jZXMiLCJyZXN1bWUiLCJzZXR1cFN1YnNjcmlwdGlvbnMiLCJ3YWl0Rm9yQ2FjaGUiLCJnZXRDYWNoZWREYXRhIiwibGlzdGVuZXIiLCJoYW5kbGVUYWJsZVVwZGF0ZSIsImNhY2hlUmVhZHkiLCJzaG93RXJyb3IiLCJtb2RhbCIsImhpZGVFcnJvck1vZGFsIiwiY3JlYXRlU2hpbW1lckNhcmQiLCJjYXJkIiwiY3JlYXRlUGVyc29uYWxTaGltbWVyQ2FyZCIsInNldHVwR2xvYmFsRXJyb3JIYW5kbGVycyIsInNhdmVSZXN1bWUiLCJidG4iLCJvcmlnaW5hbFRleHQiLCJibG9iRGF0YSIsImluaXRpYWxpemVEb3dubG9hZFJlc3VtZSIsImRvd25sb2FkQnRuIiwibWVzc2FnZVRpbWVyIiwic2hvd01lc3NhZ2VNb2RhbCIsInRpdGxlIiwiZGlzbWlzc1RpbWUiLCJpY29uIiwidGl0bGVFbCIsInR5cGVTdHlsZXMiLCJoaWRlTWVzc2FnZU1vZGFsIiwic2hvd1Byb2plY3RNb2RhbCIsInByb2plY3RJZCIsInByb2plY3QiLCJwcm9qZWN0TGluayIsImxpdmVMaW5rIiwiY29kZUxpbmsiLCJ0ZWNoQ29udGFpbmVyIiwiaW1hZ2VzQ29udGFpbmVyIiwicHJvamVjdF9pbWFnZXMiLCJpbWciLCJmZWF0dXJlc0xpc3QiLCJmZWF0dXJlIiwiY29udHJpYnV0aW9uc0xpc3QiLCJjb250cmlidXRpb24iLCJjaGFsbGVuZ2VzTGlzdCIsImNoYWxsZW5nZSIsImltcGFjdExpc3QiLCJpbXBhY3QiLCJoaWRlUHJvamVjdE1vZGFsIiwiaW5pdGlhbGl6ZVByb2plY3RzVGFiIiwicmVuZGVyUHJvamVjdHNMb2FkaW5nIiwicmVuZGVyUGVyc29uYWxQcm9qZWN0c0xvYWRpbmciLCJkb21SZWFkeSIsIm9uUmVhZHkiLCJyZW5kZXJQcm9qZWN0cyIsInJlbmRlclBlcnNvbmFsUHJvamVjdHMiLCJyZW5kZXJFcnJvclN0YXRlIiwicmVuZGVyUGVyc29uYWxQcm9qZWN0c0Vycm9yU3RhdGUiLCJzaG93RW1wdHlTdGF0ZSIsImNvbnRhaW5lciIsImlzTW9iaWxlIiwic2hvd1BlcnNvbmFsUHJvamVjdHNFbXB0eVN0YXRlIiwiaW5pdGlhbGl6ZU5hdmlnYXRpb24iLCJtb2JpbGVNZW51IiwibWVudUJ1dHRvbiIsIm9wZW5UYWIiLCJldnQiLCJ0YWJOYW1lIiwidGFiTWVudU5hbWUiLCJ0YWIiLCJuYXZNYXAiLCJuYXZJdGVtIiwiaGFuZGxlTmF2Q2xpY2siLCJzZWN0aW9uIiwidGFiTWFwIiwidG9nZ2xlUGRmTW9kYWwiLCJpZnJhbWUiLCJsb2FkaW5nIiwidG9nZ2xlTW9iaWxlTWVudSIsImluaXRpYWxpemVQdWJsaWNhdGlvbnNUYWIiLCJyZW5kZXJQdWJsaWNhdGlvbnNMb2FkaW5nIiwicmVuZGVyUHVibGljYXRpb25zIiwicHViIiwicmVuZGVyTGlua3MiLCJhYm91dERhdGEiLCJyZW5kZXJBYm91dFNlY3Rpb24iLCJhYm91dENvbnRhaW5lciIsInNraWxsQ29sb3JNYXAiLCJnZXRCYWRnZUNsYXNzIiwic2tpbGwiLCJhY2giLCJlZHUiLCJkZXRhaWwiLCJpbml0aWFsaXplQWJvdXRTZWN0aW9uIiwidmVyaWZ5RE9NU3RhdGUiLCJpbml0aWFsaXplQXBwIiwiZmFsbGJhY2tFcnJvciIsInN0YXJ0QXBwbGljYXRpb24iXSwiaWdub3JlTGlzdCI6WzAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDldLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvZnVuY3Rpb25zLWpzL2Rpc3QvbW9kdWxlL2hlbHBlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvZnVuY3Rpb25zLWpzL2Rpc3QvbW9kdWxlL3R5cGVzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9mdW5jdGlvbnMtanMvZGlzdC9tb2R1bGUvRnVuY3Rpb25zQ2xpZW50LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9ub2RlLWZldGNoL2Jyb3dzZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3Bvc3RncmVzdC1qcy9kaXN0L2Nqcy9Qb3N0Z3Jlc3RFcnJvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcG9zdGdyZXN0LWpzL2Rpc3QvY2pzL1Bvc3RncmVzdEJ1aWxkZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3Bvc3RncmVzdC1qcy9kaXN0L2Nqcy9Qb3N0Z3Jlc3RUcmFuc2Zvcm1CdWlsZGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9wb3N0Z3Jlc3QtanMvZGlzdC9janMvUG9zdGdyZXN0RmlsdGVyQnVpbGRlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcG9zdGdyZXN0LWpzL2Rpc3QvY2pzL1Bvc3RncmVzdFF1ZXJ5QnVpbGRlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcG9zdGdyZXN0LWpzL2Rpc3QvY2pzL3ZlcnNpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3Bvc3RncmVzdC1qcy9kaXN0L2Nqcy9jb25zdGFudHMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3Bvc3RncmVzdC1qcy9kaXN0L2Nqcy9Qb3N0Z3Jlc3RDbGllbnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3Bvc3RncmVzdC1qcy9kaXN0L2Nqcy9pbmRleC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcG9zdGdyZXN0LWpzL2Rpc3QvZXNtL3dyYXBwZXIubWpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9yZWFsdGltZS1qcy9kaXN0L21vZHVsZS9saWIvdmVyc2lvbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcmVhbHRpbWUtanMvZGlzdC9tb2R1bGUvbGliL2NvbnN0YW50cy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcmVhbHRpbWUtanMvZGlzdC9tb2R1bGUvbGliL3NlcmlhbGl6ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3JlYWx0aW1lLWpzL2Rpc3QvbW9kdWxlL2xpYi90aW1lci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcmVhbHRpbWUtanMvZGlzdC9tb2R1bGUvbGliL3RyYW5zZm9ybWVycy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcmVhbHRpbWUtanMvZGlzdC9tb2R1bGUvbGliL3B1c2guanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3JlYWx0aW1lLWpzL2Rpc3QvbW9kdWxlL1JlYWx0aW1lUHJlc2VuY2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3JlYWx0aW1lLWpzL2Rpc3QvbW9kdWxlL1JlYWx0aW1lQ2hhbm5lbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvcmVhbHRpbWUtanMvZGlzdC9tb2R1bGUvUmVhbHRpbWVDbGllbnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N0b3JhZ2UtanMvZGlzdC9tb2R1bGUvbGliL2Vycm9ycy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2Uvc3RvcmFnZS1qcy9kaXN0L21vZHVsZS9saWIvaGVscGVycy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2Uvc3RvcmFnZS1qcy9kaXN0L21vZHVsZS9saWIvZmV0Y2guanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N0b3JhZ2UtanMvZGlzdC9tb2R1bGUvcGFja2FnZXMvU3RvcmFnZUZpbGVBcGkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N0b3JhZ2UtanMvZGlzdC9tb2R1bGUvbGliL3ZlcnNpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N0b3JhZ2UtanMvZGlzdC9tb2R1bGUvbGliL2NvbnN0YW50cy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2Uvc3RvcmFnZS1qcy9kaXN0L21vZHVsZS9wYWNrYWdlcy9TdG9yYWdlQnVja2V0QXBpLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9zdG9yYWdlLWpzL2Rpc3QvbW9kdWxlL1N0b3JhZ2VDbGllbnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N1cGFiYXNlLWpzL2Rpc3QvbW9kdWxlL2xpYi92ZXJzaW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9zdXBhYmFzZS1qcy9kaXN0L21vZHVsZS9saWIvY29uc3RhbnRzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9zdXBhYmFzZS1qcy9kaXN0L21vZHVsZS9saWIvZmV0Y2guanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N1cGFiYXNlLWpzL2Rpc3QvbW9kdWxlL2xpYi9oZWxwZXJzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9hdXRoLWpzL2Rpc3QvbW9kdWxlL2xpYi92ZXJzaW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9hdXRoLWpzL2Rpc3QvbW9kdWxlL2xpYi9jb25zdGFudHMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL2F1dGgtanMvZGlzdC9tb2R1bGUvbGliL2Vycm9ycy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvYXV0aC1qcy9kaXN0L21vZHVsZS9saWIvYmFzZTY0dXJsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9hdXRoLWpzL2Rpc3QvbW9kdWxlL2xpYi9oZWxwZXJzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9hdXRoLWpzL2Rpc3QvbW9kdWxlL2xpYi9mZXRjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvYXV0aC1qcy9kaXN0L21vZHVsZS9Hb1RydWVBZG1pbkFwaS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvYXV0aC1qcy9kaXN0L21vZHVsZS9saWIvbG9jYWwtc3RvcmFnZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvYXV0aC1qcy9kaXN0L21vZHVsZS9saWIvcG9seWZpbGxzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0BzdXBhYmFzZS9hdXRoLWpzL2Rpc3QvbW9kdWxlL2xpYi9sb2Nrcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2UvYXV0aC1qcy9kaXN0L21vZHVsZS9Hb1RydWVDbGllbnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL2F1dGgtanMvZGlzdC9tb2R1bGUvQXV0aENsaWVudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2Uvc3VwYWJhc2UtanMvZGlzdC9tb2R1bGUvbGliL1N1cGFiYXNlQXV0aENsaWVudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9Ac3VwYWJhc2Uvc3VwYWJhc2UtanMvZGlzdC9tb2R1bGUvU3VwYWJhc2VDbGllbnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHN1cGFiYXNlL3N1cGFiYXNlLWpzL2Rpc3QvbW9kdWxlL2luZGV4LmpzIiwiLi4vLi4vanMvc3VwYWJhc2UuanMiLCIuLi8uLi9qcy90ZWNoLWNvbG9ycy5qcyIsIi4uLy4uL2pzL2Vycm9ycy5qcyIsIi4uLy4uL2pzL2FwaS1zZXJ2aWNlLmpzIiwiLi4vLi4vanMvZGF0YS1jYWNoZS5qcyIsIi4uLy4uL2pzL3VpLWhlbHBlcnMuanMiLCIuLi8uLi9qcy9wcm9qZWN0LW1vZGFsLmpzIiwiLi4vLi4vanMvcHJvamVjdHMuanMiLCIuLi8uLi9qcy9uYXYuanMiLCIuLi8uLi9qcy9wdWJsaWNhdGlvbnMuanMiLCIuLi8uLi9qcy9hYm91dC1kYXRhLmpzIiwiLi4vLi4vanMvYWJvdXQuanMiLCIuLi8uLi9qcy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCByZXNvbHZlRmV0Y2ggPSAoY3VzdG9tRmV0Y2gpID0+IHtcbiAgICBsZXQgX2ZldGNoO1xuICAgIGlmIChjdXN0b21GZXRjaCkge1xuICAgICAgICBfZmV0Y2ggPSBjdXN0b21GZXRjaDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZldGNoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBfZmV0Y2ggPSAoLi4uYXJncykgPT4gaW1wb3J0KCdAc3VwYWJhc2Uvbm9kZS1mZXRjaCcpLnRoZW4oKHsgZGVmYXVsdDogZmV0Y2ggfSkgPT4gZmV0Y2goLi4uYXJncykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgX2ZldGNoID0gZmV0Y2g7XG4gICAgfVxuICAgIHJldHVybiAoLi4uYXJncykgPT4gX2ZldGNoKC4uLmFyZ3MpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlci5qcy5tYXAiLCJleHBvcnQgY2xhc3MgRnVuY3Rpb25zRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgbmFtZSA9ICdGdW5jdGlvbnNFcnJvcicsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uc0ZldGNoRXJyb3IgZXh0ZW5kcyBGdW5jdGlvbnNFcnJvciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICBzdXBlcignRmFpbGVkIHRvIHNlbmQgYSByZXF1ZXN0IHRvIHRoZSBFZGdlIEZ1bmN0aW9uJywgJ0Z1bmN0aW9uc0ZldGNoRXJyb3InLCBjb250ZXh0KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRnVuY3Rpb25zUmVsYXlFcnJvciBleHRlbmRzIEZ1bmN0aW9uc0Vycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKCdSZWxheSBFcnJvciBpbnZva2luZyB0aGUgRWRnZSBGdW5jdGlvbicsICdGdW5jdGlvbnNSZWxheUVycm9yJywgY29udGV4dCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uc0h0dHBFcnJvciBleHRlbmRzIEZ1bmN0aW9uc0Vycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKCdFZGdlIEZ1bmN0aW9uIHJldHVybmVkIGEgbm9uLTJ4eCBzdGF0dXMgY29kZScsICdGdW5jdGlvbnNIdHRwRXJyb3InLCBjb250ZXh0KTtcbiAgICB9XG59XG4vLyBEZWZpbmUgdGhlIGVudW0gZm9yIHRoZSAncmVnaW9uJyBwcm9wZXJ0eVxuZXhwb3J0IHZhciBGdW5jdGlvblJlZ2lvbjtcbihmdW5jdGlvbiAoRnVuY3Rpb25SZWdpb24pIHtcbiAgICBGdW5jdGlvblJlZ2lvbltcIkFueVwiXSA9IFwiYW55XCI7XG4gICAgRnVuY3Rpb25SZWdpb25bXCJBcE5vcnRoZWFzdDFcIl0gPSBcImFwLW5vcnRoZWFzdC0xXCI7XG4gICAgRnVuY3Rpb25SZWdpb25bXCJBcE5vcnRoZWFzdDJcIl0gPSBcImFwLW5vcnRoZWFzdC0yXCI7XG4gICAgRnVuY3Rpb25SZWdpb25bXCJBcFNvdXRoMVwiXSA9IFwiYXAtc291dGgtMVwiO1xuICAgIEZ1bmN0aW9uUmVnaW9uW1wiQXBTb3V0aGVhc3QxXCJdID0gXCJhcC1zb3V0aGVhc3QtMVwiO1xuICAgIEZ1bmN0aW9uUmVnaW9uW1wiQXBTb3V0aGVhc3QyXCJdID0gXCJhcC1zb3V0aGVhc3QtMlwiO1xuICAgIEZ1bmN0aW9uUmVnaW9uW1wiQ2FDZW50cmFsMVwiXSA9IFwiY2EtY2VudHJhbC0xXCI7XG4gICAgRnVuY3Rpb25SZWdpb25bXCJFdUNlbnRyYWwxXCJdID0gXCJldS1jZW50cmFsLTFcIjtcbiAgICBGdW5jdGlvblJlZ2lvbltcIkV1V2VzdDFcIl0gPSBcImV1LXdlc3QtMVwiO1xuICAgIEZ1bmN0aW9uUmVnaW9uW1wiRXVXZXN0MlwiXSA9IFwiZXUtd2VzdC0yXCI7XG4gICAgRnVuY3Rpb25SZWdpb25bXCJFdVdlc3QzXCJdID0gXCJldS13ZXN0LTNcIjtcbiAgICBGdW5jdGlvblJlZ2lvbltcIlNhRWFzdDFcIl0gPSBcInNhLWVhc3QtMVwiO1xuICAgIEZ1bmN0aW9uUmVnaW9uW1wiVXNFYXN0MVwiXSA9IFwidXMtZWFzdC0xXCI7XG4gICAgRnVuY3Rpb25SZWdpb25bXCJVc1dlc3QxXCJdID0gXCJ1cy13ZXN0LTFcIjtcbiAgICBGdW5jdGlvblJlZ2lvbltcIlVzV2VzdDJcIl0gPSBcInVzLXdlc3QtMlwiO1xufSkoRnVuY3Rpb25SZWdpb24gfHwgKEZ1bmN0aW9uUmVnaW9uID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgcmVzb2x2ZUZldGNoIH0gZnJvbSAnLi9oZWxwZXInO1xuaW1wb3J0IHsgRnVuY3Rpb25zRmV0Y2hFcnJvciwgRnVuY3Rpb25zSHR0cEVycm9yLCBGdW5jdGlvbnNSZWxheUVycm9yLCBGdW5jdGlvblJlZ2lvbiwgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBjbGFzcyBGdW5jdGlvbnNDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKHVybCwgeyBoZWFkZXJzID0ge30sIGN1c3RvbUZldGNoLCByZWdpb24gPSBGdW5jdGlvblJlZ2lvbi5BbnksIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgdGhpcy5yZWdpb24gPSByZWdpb247XG4gICAgICAgIHRoaXMuZmV0Y2ggPSByZXNvbHZlRmV0Y2goY3VzdG9tRmV0Y2gpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhdXRob3JpemF0aW9uIGhlYWRlclxuICAgICAqIEBwYXJhbSB0b2tlbiAtIHRoZSBuZXcgand0IHRva2VuIHNlbnQgaW4gdGhlIGF1dGhvcmlzYXRpb24gaGVhZGVyXG4gICAgICovXG4gICAgc2V0QXV0aCh0b2tlbikge1xuICAgICAgICB0aGlzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGEgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZnVuY3Rpb25OYW1lIC0gVGhlIG5hbWUgb2YgdGhlIEZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIGludm9raW5nIHRoZSBGdW5jdGlvbi5cbiAgICAgKi9cbiAgICBpbnZva2UoZnVuY3Rpb25OYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGhlYWRlcnMsIG1ldGhvZCwgYm9keTogZnVuY3Rpb25BcmdzIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgIGxldCBfaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGxldCB7IHJlZ2lvbiB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICByZWdpb24gPSB0aGlzLnJlZ2lvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lvbiAmJiByZWdpb24gIT09ICdhbnknKSB7XG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXJzWyd4LXJlZ2lvbiddID0gcmVnaW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYm9keTtcbiAgICAgICAgICAgICAgICBpZiAoZnVuY3Rpb25BcmdzICYmXG4gICAgICAgICAgICAgICAgICAgICgoaGVhZGVycyAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKSkgfHwgIWhlYWRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIGZ1bmN0aW9uQXJncyBpbnN0YW5jZW9mIEJsb2IpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbkFyZ3MgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCB3b3JrIGZvciBGaWxlIGFzIEZpbGUgaW5oZXJpdHMgQmxvYlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxzbyB3b3JrcyBmb3IgQXJyYXlCdWZmZXIgYXMgaXQgaXMgdGhlIHNhbWUgdW5kZXJseWluZyBzdHJ1Y3R1cmUgYXMgYSBCbG9iXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBmdW5jdGlvbkFyZ3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZ1bmN0aW9uQXJncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ3RleHQvcGxhaW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IGZ1bmN0aW9uQXJncztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnICYmIGZ1bmN0aW9uQXJncyBpbnN0YW5jZW9mIEZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBzZXQgY29udGVudC10eXBlIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3Qgd2lsbCBhdXRvbWF0aWNhbGx5IGFkZCB0aGUgcmlnaHQgYm91bmRhcnkgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBmdW5jdGlvbkFyZ3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0LCBhc3N1bWUgdGhpcyBpcyBKU09OXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoZnVuY3Rpb25BcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZmV0Y2goYCR7dGhpcy51cmx9LyR7ZnVuY3Rpb25OYW1lfWAsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QgfHwgJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAvLyBoZWFkZXJzIHByaW9yaXR5IGlzIChoaWdoIHRvIGxvdyk6XG4gICAgICAgICAgICAgICAgICAgIC8vIDEuIGludm9rZS1sZXZlbCBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIGNsaWVudC1sZXZlbCBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgIC8vIDMuIGRlZmF1bHQgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgX2hlYWRlcnMpLCB0aGlzLmhlYWRlcnMpLCBoZWFkZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZmV0Y2hFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRnVuY3Rpb25zRmV0Y2hFcnJvcihmZXRjaEVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1JlbGF5RXJyb3IgPSByZXNwb25zZS5oZWFkZXJzLmdldCgneC1yZWxheS1lcnJvcicpO1xuICAgICAgICAgICAgICAgIGlmIChpc1JlbGF5RXJyb3IgJiYgaXNSZWxheUVycm9yID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZ1bmN0aW9uc1JlbGF5RXJyb3IocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGdW5jdGlvbnNIdHRwRXJyb3IocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VUeXBlID0gKChfYSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3RleHQvcGxhaW4nKS5zcGxpdCgnOycpWzBdLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VUeXBlID09PSAnYXBwbGljYXRpb24vanNvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHlpZWxkIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2VUeXBlID09PSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0geWllbGQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZVR5cGUgPT09ICd0ZXh0L2V2ZW50LXN0cmVhbScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZVR5cGUgPT09ICdtdWx0aXBhcnQvZm9ybS1kYXRhJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0geWllbGQgcmVzcG9uc2UuZm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgdG8gdGV4dFxuICAgICAgICAgICAgICAgICAgICBkYXRhID0geWllbGQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RnVuY3Rpb25zQ2xpZW50LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbFxudmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHRoZSBvbmx5IHJlbGlhYmxlIG1lYW5zIHRvIGdldCB0aGUgZ2xvYmFsIG9iamVjdCBpc1xuICAgIC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuICAgIC8vIEhvd2V2ZXIsIHRoaXMgY2F1c2VzIENTUCB2aW9sYXRpb25zIGluIENocm9tZSBhcHBzLlxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHNlbGY7IH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIHdpbmRvdzsgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgeyByZXR1cm4gZ2xvYmFsOyB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcbn1cblxudmFyIGdsb2JhbE9iamVjdCA9IGdldEdsb2JhbCgpO1xuXG5leHBvcnQgY29uc3QgZmV0Y2ggPSBnbG9iYWxPYmplY3QuZmV0Y2g7XG5cbmV4cG9ydCBkZWZhdWx0IGdsb2JhbE9iamVjdC5mZXRjaC5iaW5kKGdsb2JhbE9iamVjdCk7XG5cbmV4cG9ydCBjb25zdCBIZWFkZXJzID0gZ2xvYmFsT2JqZWN0LkhlYWRlcnM7XG5leHBvcnQgY29uc3QgUmVxdWVzdCA9IGdsb2JhbE9iamVjdC5SZXF1ZXN0O1xuZXhwb3J0IGNvbnN0IFJlc3BvbnNlID0gZ2xvYmFsT2JqZWN0LlJlc3BvbnNlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIEVycm9yIGZvcm1hdFxuICpcbiAqIHtAbGluayBodHRwczovL3Bvc3RncmVzdC5vcmcvZW4vc3RhYmxlL2FwaS5odG1sP2hpZ2hsaWdodD1vcHRpb25zI2Vycm9ycy1hbmQtaHR0cC1zdGF0dXMtY29kZXN9XG4gKi9cbmNsYXNzIFBvc3RncmVzdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoY29udGV4dC5tZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ1Bvc3RncmVzdEVycm9yJztcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gY29udGV4dC5kZXRhaWxzO1xuICAgICAgICB0aGlzLmhpbnQgPSBjb250ZXh0LmhpbnQ7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvbnRleHQuY29kZTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBQb3N0Z3Jlc3RFcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvc3RncmVzdEVycm9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gQHRzLWlnbm9yZVxuY29uc3Qgbm9kZV9mZXRjaF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJAc3VwYWJhc2Uvbm9kZS1mZXRjaFwiKSk7XG5jb25zdCBQb3N0Z3Jlc3RFcnJvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Bvc3RncmVzdEVycm9yXCIpKTtcbmNsYXNzIFBvc3RncmVzdEJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXIpIHtcbiAgICAgICAgdGhpcy5zaG91bGRUaHJvd09uRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBidWlsZGVyLm1ldGhvZDtcbiAgICAgICAgdGhpcy51cmwgPSBidWlsZGVyLnVybDtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gYnVpbGRlci5oZWFkZXJzO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IGJ1aWxkZXIuc2NoZW1hO1xuICAgICAgICB0aGlzLmJvZHkgPSBidWlsZGVyLmJvZHk7XG4gICAgICAgIHRoaXMuc2hvdWxkVGhyb3dPbkVycm9yID0gYnVpbGRlci5zaG91bGRUaHJvd09uRXJyb3I7XG4gICAgICAgIHRoaXMuc2lnbmFsID0gYnVpbGRlci5zaWduYWw7XG4gICAgICAgIHRoaXMuaXNNYXliZVNpbmdsZSA9IGJ1aWxkZXIuaXNNYXliZVNpbmdsZTtcbiAgICAgICAgaWYgKGJ1aWxkZXIuZmV0Y2gpIHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2ggPSBidWlsZGVyLmZldGNoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmZXRjaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2ggPSBub2RlX2ZldGNoXzEuZGVmYXVsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2ggPSBmZXRjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGVyZSdzIGFuIGVycm9yIHdpdGggdGhlIHF1ZXJ5LCB0aHJvd09uRXJyb3Igd2lsbCByZWplY3QgdGhlIHByb21pc2UgYnlcbiAgICAgKiB0aHJvd2luZyB0aGUgZXJyb3IgaW5zdGVhZCBvZiByZXR1cm5pbmcgaXQgYXMgcGFydCBvZiBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3N1cGFiYXNlL3N1cGFiYXNlLWpzL2lzc3Vlcy85Mn1cbiAgICAgKi9cbiAgICB0aHJvd09uRXJyb3IoKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkVGhyb3dPbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhbiBIVFRQIGhlYWRlciBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovXG4gICAgc2V0SGVhZGVyKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaGVhZGVycyk7XG4gICAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuICAgICAgICAvLyBodHRwczovL3Bvc3RncmVzdC5vcmcvZW4vc3RhYmxlL2FwaS5odG1sI3N3aXRjaGluZy1zY2hlbWFzXG4gICAgICAgIGlmICh0aGlzLnNjaGVtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBza2lwXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoWydHRVQnLCAnSEVBRCddLmluY2x1ZGVzKHRoaXMubWV0aG9kKSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzWydBY2NlcHQtUHJvZmlsZSddID0gdGhpcy5zY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbJ0NvbnRlbnQtUHJvZmlsZSddID0gdGhpcy5zY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWV0aG9kICE9PSAnR0VUJyAmJiB0aGlzLm1ldGhvZCAhPT0gJ0hFQUQnKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5PVEU6IEludm9rZSB3L28gYHRoaXNgIHRvIGF2b2lkIGlsbGVnYWwgaW52b2NhdGlvbiBlcnJvci5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3N1cGFiYXNlL3Bvc3RncmVzdC1qcy9wdWxsLzI0N1xuICAgICAgICBjb25zdCBfZmV0Y2ggPSB0aGlzLmZldGNoO1xuICAgICAgICBsZXQgcmVzID0gX2ZldGNoKHRoaXMudXJsLnRvU3RyaW5nKCksIHtcbiAgICAgICAgICAgIG1ldGhvZDogdGhpcy5tZXRob2QsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmJvZHkpLFxuICAgICAgICAgICAgc2lnbmFsOiB0aGlzLnNpZ25hbCxcbiAgICAgICAgfSkudGhlbihhc3luYyAocmVzKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgIGxldCBlcnJvciA9IG51bGw7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICBsZXQgY291bnQgPSBudWxsO1xuICAgICAgICAgICAgbGV0IHN0YXR1cyA9IHJlcy5zdGF0dXM7XG4gICAgICAgICAgICBsZXQgc3RhdHVzVGV4dCA9IHJlcy5zdGF0dXNUZXh0O1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1ldGhvZCAhPT0gJ0hFQUQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYm9keSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZWZlcjogcmV0dXJuPW1pbmltYWxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhlYWRlcnNbJ0FjY2VwdCddID09PSAndGV4dC9jc3YnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYm9keTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhlYWRlcnNbJ0FjY2VwdCddICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcnNbJ0FjY2VwdCddLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi92bmQucGdyc3QucGxhbit0ZXh0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBib2R5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY291bnRIZWFkZXIgPSAoX2EgPSB0aGlzLmhlYWRlcnNbJ1ByZWZlciddKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWF0Y2goL2NvdW50PShleGFjdHxwbGFubmVkfGVzdGltYXRlZCkvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50UmFuZ2UgPSAoX2IgPSByZXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtcmFuZ2UnKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50SGVhZGVyICYmIGNvbnRlbnRSYW5nZSAmJiBjb250ZW50UmFuZ2UubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IHBhcnNlSW50KGNvbnRlbnRSYW5nZVsxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRlbXBvcmFyeSBwYXJ0aWFsIGZpeCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3N1cGFiYXNlL3Bvc3RncmVzdC1qcy9pc3N1ZXMvMzYxXG4gICAgICAgICAgICAgICAgLy8gSXNzdWUgcGVyc2lzdHMgZS5nLiBmb3IgYC5pbnNlcnQoWy4uLl0pLnNlbGVjdCgpLm1heWJlU2luZ2xlKClgXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXliZVNpbmdsZSAmJiB0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgJiYgQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vUG9zdGdSRVNUL3Bvc3RncmVzdC9ibG9iL2E4NjdkNzljNDI0MTlhZjE2YzE4YzNmYjAxOWViYThkZjk5MjYyNmYvc3JjL1Bvc3RnUkVTVC9FcnJvci5ocyNMNTUzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogJ1BHUlNUMTE2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgUmVzdWx0cyBjb250YWluICR7ZGF0YS5sZW5ndGh9IHJvd3MsIGFwcGxpY2F0aW9uL3ZuZC5wZ3JzdC5vYmplY3QranNvbiByZXF1aXJlcyAxIHJvd2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSlNPTiBvYmplY3QgcmVxdWVzdGVkLCBtdWx0aXBsZSAob3Igbm8pIHJvd3MgcmV0dXJuZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gNDA2O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9ICdOb3QgQWNjZXB0YWJsZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhWzBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9zdXBhYmFzZS9wb3N0Z3Jlc3QtanMvaXNzdWVzLzI5NVxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlcnJvcikgJiYgcmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAyMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gJ09LJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2QpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3N1cGFiYXNlL3Bvc3RncmVzdC1qcy9pc3N1ZXMvMjk1XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDQgJiYgYm9keSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IDIwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSAnTm8gQ29udGVudCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBib2R5LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgdGhpcy5pc01heWJlU2luZ2xlICYmICgoX2MgPSBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuZGV0YWlscykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmluY2x1ZGVzKCcwIHJvd3MnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAyMDA7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSAnT0snO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgdGhpcy5zaG91bGRUaHJvd09uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBvc3RncmVzdEVycm9yXzEuZGVmYXVsdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zdGdyZXN0UmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICBjb3VudCxcbiAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgc3RhdHVzVGV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcG9zdGdyZXN0UmVzcG9uc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkVGhyb3dPbkVycm9yKSB7XG4gICAgICAgICAgICByZXMgPSByZXMuY2F0Y2goKGZldGNoRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgICAgICByZXR1cm4gKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGAkeyhfYSA9IGZldGNoRXJyb3IgPT09IG51bGwgfHwgZmV0Y2hFcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmV0Y2hFcnJvci5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnRmV0Y2hFcnJvcid9OiAke2ZldGNoRXJyb3IgPT09IG51bGwgfHwgZmV0Y2hFcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmV0Y2hFcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgJHsoX2IgPSBmZXRjaEVycm9yID09PSBudWxsIHx8IGZldGNoRXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZldGNoRXJyb3Iuc3RhY2spICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IGAkeyhfYyA9IGZldGNoRXJyb3IgPT09IG51bGwgfHwgZmV0Y2hFcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmV0Y2hFcnJvci5jb2RlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnJ31gLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHRoZSB0eXBlIG9mIHRoZSByZXR1cm5lZCBgZGF0YWAuXG4gICAgICpcbiAgICAgKiBAdHlwZVBhcmFtIE5ld1Jlc3VsdCAtIFRoZSBuZXcgcmVzdWx0IHR5cGUgdG8gb3ZlcnJpZGUgd2l0aFxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBvdmVycmlkZVR5cGVzPHlvdXJUeXBlLCB7IG1lcmdlOiBmYWxzZSB9PigpIG1ldGhvZCBhdCB0aGUgZW5kIG9mIHlvdXIgY2FsbCBjaGFpbiBpbnN0ZWFkXG4gICAgICovXG4gICAgcmV0dXJucygpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHRoZSB0eXBlIG9mIHRoZSByZXR1cm5lZCBgZGF0YWAgZmllbGQgaW4gdGhlIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogQHR5cGVQYXJhbSBOZXdSZXN1bHQgLSBUaGUgbmV3IHR5cGUgdG8gY2FzdCB0aGUgcmVzcG9uc2UgZGF0YSB0b1xuICAgICAqIEB0eXBlUGFyYW0gT3B0aW9ucyAtIE9wdGlvbmFsIHR5cGUgY29uZmlndXJhdGlvbiAoZGVmYXVsdHMgdG8geyBtZXJnZTogdHJ1ZSB9KVxuICAgICAqIEB0eXBlUGFyYW0gT3B0aW9ucy5tZXJnZSAtIFdoZW4gdHJ1ZSwgbWVyZ2VzIHRoZSBuZXcgdHlwZSB3aXRoIGV4aXN0aW5nIHJldHVybiB0eXBlLiBXaGVuIGZhbHNlLCByZXBsYWNlcyB0aGUgZXhpc3RpbmcgdHlwZXMgZW50aXJlbHkgKGRlZmF1bHRzIHRvIHRydWUpXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogLy8gTWVyZ2Ugd2l0aCBleGlzdGluZyB0eXBlcyAoZGVmYXVsdCBiZWhhdmlvcilcbiAgICAgKiBjb25zdCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICogICAuZnJvbSgndXNlcnMnKVxuICAgICAqICAgLnNlbGVjdCgpXG4gICAgICogICAub3ZlcnJpZGVUeXBlczx7IGN1c3RvbV9maWVsZDogc3RyaW5nIH0+KClcbiAgICAgKlxuICAgICAqIC8vIFJlcGxhY2UgZXhpc3RpbmcgdHlwZXMgY29tcGxldGVseVxuICAgICAqIGNvbnN0IHJlcGxhY2VRdWVyeSA9IHN1cGFiYXNlXG4gICAgICogICAuZnJvbSgndXNlcnMnKVxuICAgICAqICAgLnNlbGVjdCgpXG4gICAgICogICAub3ZlcnJpZGVUeXBlczx7IGlkOiBudW1iZXI7IG5hbWU6IHN0cmluZyB9LCB7IG1lcmdlOiBmYWxzZSB9PigpXG4gICAgICogYGBgXG4gICAgICogQHJldHVybnMgQSBQb3N0Z3Jlc3RCdWlsZGVyIGluc3RhbmNlIHdpdGggdGhlIG5ldyB0eXBlXG4gICAgICovXG4gICAgb3ZlcnJpZGVUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gUG9zdGdyZXN0QnVpbGRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvc3RncmVzdEJ1aWxkZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBQb3N0Z3Jlc3RCdWlsZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUG9zdGdyZXN0QnVpbGRlclwiKSk7XG5jbGFzcyBQb3N0Z3Jlc3RUcmFuc2Zvcm1CdWlsZGVyIGV4dGVuZHMgUG9zdGdyZXN0QnVpbGRlcl8xLmRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBTRUxFQ1Qgb24gdGhlIHF1ZXJ5IHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGAuaW5zZXJ0KClgLCBgLnVwZGF0ZSgpYCwgYC51cHNlcnQoKWAsIGFuZCBgLmRlbGV0ZSgpYCBkbyBub3RcbiAgICAgKiByZXR1cm4gbW9kaWZpZWQgcm93cy4gQnkgY2FsbGluZyB0aGlzIG1ldGhvZCwgbW9kaWZpZWQgcm93cyBhcmUgcmV0dXJuZWQgaW5cbiAgICAgKiBgZGF0YWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1ucyAtIFRoZSBjb2x1bW5zIHRvIHJldHJpZXZlLCBzZXBhcmF0ZWQgYnkgY29tbWFzXG4gICAgICovXG4gICAgc2VsZWN0KGNvbHVtbnMpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHdoaXRlc3BhY2VzIGV4Y2VwdCB3aGVuIHF1b3RlZFxuICAgICAgICBsZXQgcXVvdGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNsZWFuZWRDb2x1bW5zID0gKGNvbHVtbnMgIT09IG51bGwgJiYgY29sdW1ucyAhPT0gdm9pZCAwID8gY29sdW1ucyA6ICcqJylcbiAgICAgICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgICAgIC5tYXAoKGMpID0+IHtcbiAgICAgICAgICAgIGlmICgvXFxzLy50ZXN0KGMpICYmICFxdW90ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA9PT0gJ1wiJykge1xuICAgICAgICAgICAgICAgIHF1b3RlZCA9ICFxdW90ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLnNldCgnc2VsZWN0JywgY2xlYW5lZENvbHVtbnMpO1xuICAgICAgICBpZiAodGhpcy5oZWFkZXJzWydQcmVmZXInXSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzWydQcmVmZXInXSArPSAnLCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oZWFkZXJzWydQcmVmZXInXSArPSAncmV0dXJuPXJlcHJlc2VudGF0aW9uJztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9yZGVyIHRoZSBxdWVyeSByZXN1bHQgYnkgYGNvbHVtbmAuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGNhbGwgdGhpcyBtZXRob2QgbXVsdGlwbGUgdGltZXMgdG8gb3JkZXIgYnkgbXVsdGlwbGUgY29sdW1ucy5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb3JkZXIgcmVmZXJlbmNlZCB0YWJsZXMsIGJ1dCBpdCBvbmx5IGFmZmVjdHMgdGhlIG9yZGVyaW5nIG9mIHRoZVxuICAgICAqIHBhcmVudCB0YWJsZSBpZiB5b3UgdXNlIGAhaW5uZXJgIGluIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIG9yZGVyIGJ5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYXNjZW5kaW5nIC0gSWYgYHRydWVgLCB0aGUgcmVzdWx0IHdpbGwgYmUgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgICogQHBhcmFtIG9wdGlvbnMubnVsbHNGaXJzdCAtIElmIGB0cnVlYCwgYG51bGxgcyBhcHBlYXIgZmlyc3QuIElmIGBmYWxzZWAsXG4gICAgICogYG51bGxgcyBhcHBlYXIgbGFzdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5yZWZlcmVuY2VkVGFibGUgLSBTZXQgdGhpcyB0byBvcmRlciBhIHJlZmVyZW5jZWQgdGFibGUgYnlcbiAgICAgKiBpdHMgY29sdW1uc1xuICAgICAqIEBwYXJhbSBvcHRpb25zLmZvcmVpZ25UYWJsZSAtIERlcHJlY2F0ZWQsIHVzZSBgb3B0aW9ucy5yZWZlcmVuY2VkVGFibGVgXG4gICAgICogaW5zdGVhZFxuICAgICAqL1xuICAgIG9yZGVyKGNvbHVtbiwgeyBhc2NlbmRpbmcgPSB0cnVlLCBudWxsc0ZpcnN0LCBmb3JlaWduVGFibGUsIHJlZmVyZW5jZWRUYWJsZSA9IGZvcmVpZ25UYWJsZSwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHJlZmVyZW5jZWRUYWJsZSA/IGAke3JlZmVyZW5jZWRUYWJsZX0ub3JkZXJgIDogJ29yZGVyJztcbiAgICAgICAgY29uc3QgZXhpc3RpbmdPcmRlciA9IHRoaXMudXJsLnNlYXJjaFBhcmFtcy5nZXQoa2V5KTtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIGAke2V4aXN0aW5nT3JkZXIgPyBgJHtleGlzdGluZ09yZGVyfSxgIDogJyd9JHtjb2x1bW59LiR7YXNjZW5kaW5nID8gJ2FzYycgOiAnZGVzYyd9JHtudWxsc0ZpcnN0ID09PSB1bmRlZmluZWQgPyAnJyA6IG51bGxzRmlyc3QgPyAnLm51bGxzZmlyc3QnIDogJy5udWxsc2xhc3QnfWApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGltaXQgdGhlIHF1ZXJ5IHJlc3VsdCBieSBgY291bnRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgdG8gcmV0dXJuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMucmVmZXJlbmNlZFRhYmxlIC0gU2V0IHRoaXMgdG8gbGltaXQgcm93cyBvZiByZWZlcmVuY2VkXG4gICAgICogdGFibGVzIGluc3RlYWQgb2YgdGhlIHBhcmVudCB0YWJsZVxuICAgICAqIEBwYXJhbSBvcHRpb25zLmZvcmVpZ25UYWJsZSAtIERlcHJlY2F0ZWQsIHVzZSBgb3B0aW9ucy5yZWZlcmVuY2VkVGFibGVgXG4gICAgICogaW5zdGVhZFxuICAgICAqL1xuICAgIGxpbWl0KGNvdW50LCB7IGZvcmVpZ25UYWJsZSwgcmVmZXJlbmNlZFRhYmxlID0gZm9yZWlnblRhYmxlLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdHlwZW9mIHJlZmVyZW5jZWRUYWJsZSA9PT0gJ3VuZGVmaW5lZCcgPyAnbGltaXQnIDogYCR7cmVmZXJlbmNlZFRhYmxlfS5saW1pdGA7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCBgJHtjb3VudH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpbWl0IHRoZSBxdWVyeSByZXN1bHQgYnkgc3RhcnRpbmcgYXQgYW4gb2Zmc2V0IGBmcm9tYCBhbmQgZW5kaW5nIGF0IHRoZSBvZmZzZXQgYHRvYC5cbiAgICAgKiBPbmx5IHJlY29yZHMgd2l0aGluIHRoaXMgcmFuZ2UgYXJlIHJldHVybmVkLlxuICAgICAqIFRoaXMgcmVzcGVjdHMgdGhlIHF1ZXJ5IG9yZGVyIGFuZCBpZiB0aGVyZSBpcyBubyBvcmRlciBjbGF1c2UgdGhlIHJhbmdlIGNvdWxkIGJlaGF2ZSB1bmV4cGVjdGVkbHkuXG4gICAgICogVGhlIGBmcm9tYCBhbmQgYHRvYCB2YWx1ZXMgYXJlIDAtYmFzZWQgYW5kIGluY2x1c2l2ZTogYHJhbmdlKDEsIDMpYCB3aWxsIGluY2x1ZGUgdGhlIHNlY29uZCwgdGhpcmRcbiAgICAgKiBhbmQgZm91cnRoIHJvd3Mgb2YgdGhlIHF1ZXJ5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZyb20gLSBUaGUgc3RhcnRpbmcgaW5kZXggZnJvbSB3aGljaCB0byBsaW1pdCB0aGUgcmVzdWx0XG4gICAgICogQHBhcmFtIHRvIC0gVGhlIGxhc3QgaW5kZXggdG8gd2hpY2ggdG8gbGltaXQgdGhlIHJlc3VsdFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gTmFtZWQgcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBvcHRpb25zLnJlZmVyZW5jZWRUYWJsZSAtIFNldCB0aGlzIHRvIGxpbWl0IHJvd3Mgb2YgcmVmZXJlbmNlZFxuICAgICAqIHRhYmxlcyBpbnN0ZWFkIG9mIHRoZSBwYXJlbnQgdGFibGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5mb3JlaWduVGFibGUgLSBEZXByZWNhdGVkLCB1c2UgYG9wdGlvbnMucmVmZXJlbmNlZFRhYmxlYFxuICAgICAqIGluc3RlYWRcbiAgICAgKi9cbiAgICByYW5nZShmcm9tLCB0bywgeyBmb3JlaWduVGFibGUsIHJlZmVyZW5jZWRUYWJsZSA9IGZvcmVpZ25UYWJsZSwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGtleU9mZnNldCA9IHR5cGVvZiByZWZlcmVuY2VkVGFibGUgPT09ICd1bmRlZmluZWQnID8gJ29mZnNldCcgOiBgJHtyZWZlcmVuY2VkVGFibGV9Lm9mZnNldGA7XG4gICAgICAgIGNvbnN0IGtleUxpbWl0ID0gdHlwZW9mIHJlZmVyZW5jZWRUYWJsZSA9PT0gJ3VuZGVmaW5lZCcgPyAnbGltaXQnIDogYCR7cmVmZXJlbmNlZFRhYmxlfS5saW1pdGA7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5T2Zmc2V0LCBgJHtmcm9tfWApO1xuICAgICAgICAvLyBSYW5nZSBpcyBpbmNsdXNpdmUsIHNvIGFkZCAxXG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5TGltaXQsIGAke3RvIC0gZnJvbSArIDF9YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIEFib3J0U2lnbmFsIGZvciB0aGUgZmV0Y2ggcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaWduYWwgLSBUaGUgQWJvcnRTaWduYWwgdG8gdXNlIGZvciB0aGUgZmV0Y2ggcmVxdWVzdFxuICAgICAqL1xuICAgIGFib3J0U2lnbmFsKHNpZ25hbCkge1xuICAgICAgICB0aGlzLnNpZ25hbCA9IHNpZ25hbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBgZGF0YWAgYXMgYSBzaW5nbGUgb2JqZWN0IGluc3RlYWQgb2YgYW4gYXJyYXkgb2Ygb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIFF1ZXJ5IHJlc3VsdCBtdXN0IGJlIG9uZSByb3cgKGUuZy4gdXNpbmcgYC5saW1pdCgxKWApLCBvdGhlcndpc2UgdGhpc1xuICAgICAqIHJldHVybnMgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc2luZ2xlKCkge1xuICAgICAgICB0aGlzLmhlYWRlcnNbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL3ZuZC5wZ3JzdC5vYmplY3QranNvbic7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYGRhdGFgIGFzIGEgc2luZ2xlIG9iamVjdCBpbnN0ZWFkIG9mIGFuIGFycmF5IG9mIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBRdWVyeSByZXN1bHQgbXVzdCBiZSB6ZXJvIG9yIG9uZSByb3cgKGUuZy4gdXNpbmcgYC5saW1pdCgxKWApLCBvdGhlcndpc2VcbiAgICAgKiB0aGlzIHJldHVybnMgYW4gZXJyb3IuXG4gICAgICovXG4gICAgbWF5YmVTaW5nbGUoKSB7XG4gICAgICAgIC8vIFRlbXBvcmFyeSBwYXJ0aWFsIGZpeCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3N1cGFiYXNlL3Bvc3RncmVzdC1qcy9pc3N1ZXMvMzYxXG4gICAgICAgIC8vIElzc3VlIHBlcnNpc3RzIGUuZy4gZm9yIGAuaW5zZXJ0KFsuLi5dKS5zZWxlY3QoKS5tYXliZVNpbmdsZSgpYFxuICAgICAgICBpZiAodGhpcy5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzWydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi92bmQucGdyc3Qub2JqZWN0K2pzb24nO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNNYXliZVNpbmdsZSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYGRhdGFgIGFzIGEgc3RyaW5nIGluIENTViBmb3JtYXQuXG4gICAgICovXG4gICAgY3N2KCkge1xuICAgICAgICB0aGlzLmhlYWRlcnNbJ0FjY2VwdCddID0gJ3RleHQvY3N2JztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBgZGF0YWAgYXMgYW4gb2JqZWN0IGluIFtHZW9KU09OXShodHRwczovL2dlb2pzb24ub3JnKSBmb3JtYXQuXG4gICAgICovXG4gICAgZ2VvanNvbigpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzWydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9nZW8ranNvbic7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYGRhdGFgIGFzIHRoZSBFWFBMQUlOIHBsYW4gZm9yIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFlvdSBuZWVkIHRvIGVuYWJsZSB0aGVcbiAgICAgKiBbZGJfcGxhbl9lbmFibGVkXShodHRwczovL3N1cGFiYXNlLmNvbS9kb2NzL2d1aWRlcy9kYXRhYmFzZS9kZWJ1Z2dpbmctcGVyZm9ybWFuY2UjZW5hYmxpbmctZXhwbGFpbilcbiAgICAgKiBzZXR0aW5nIGJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gTmFtZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYW5hbHl6ZSAtIElmIGB0cnVlYCwgdGhlIHF1ZXJ5IHdpbGwgYmUgZXhlY3V0ZWQgYW5kIHRoZVxuICAgICAqIGFjdHVhbCBydW4gdGltZSB3aWxsIGJlIHJldHVybmVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy52ZXJib3NlIC0gSWYgYHRydWVgLCB0aGUgcXVlcnkgaWRlbnRpZmllciB3aWxsIGJlIHJldHVybmVkXG4gICAgICogYW5kIGBkYXRhYCB3aWxsIGluY2x1ZGUgdGhlIG91dHB1dCBjb2x1bW5zIG9mIHRoZSBxdWVyeVxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMuc2V0dGluZ3MgLSBJZiBgdHJ1ZWAsIGluY2x1ZGUgaW5mb3JtYXRpb24gb24gY29uZmlndXJhdGlvblxuICAgICAqIHBhcmFtZXRlcnMgdGhhdCBhZmZlY3QgcXVlcnkgcGxhbm5pbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmJ1ZmZlcnMgLSBJZiBgdHJ1ZWAsIGluY2x1ZGUgaW5mb3JtYXRpb24gb24gYnVmZmVyIHVzYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy53YWwgLSBJZiBgdHJ1ZWAsIGluY2x1ZGUgaW5mb3JtYXRpb24gb24gV0FMIHJlY29yZCBnZW5lcmF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5mb3JtYXQgLSBUaGUgZm9ybWF0IG9mIHRoZSBvdXRwdXQsIGNhbiBiZSBgXCJ0ZXh0XCJgIChkZWZhdWx0KVxuICAgICAqIG9yIGBcImpzb25cImBcbiAgICAgKi9cbiAgICBleHBsYWluKHsgYW5hbHl6ZSA9IGZhbHNlLCB2ZXJib3NlID0gZmFsc2UsIHNldHRpbmdzID0gZmFsc2UsIGJ1ZmZlcnMgPSBmYWxzZSwgd2FsID0gZmFsc2UsIGZvcm1hdCA9ICd0ZXh0JywgfSA9IHt9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgICAgICAgIGFuYWx5emUgPyAnYW5hbHl6ZScgOiBudWxsLFxuICAgICAgICAgICAgdmVyYm9zZSA/ICd2ZXJib3NlJyA6IG51bGwsXG4gICAgICAgICAgICBzZXR0aW5ncyA/ICdzZXR0aW5ncycgOiBudWxsLFxuICAgICAgICAgICAgYnVmZmVycyA/ICdidWZmZXJzJyA6IG51bGwsXG4gICAgICAgICAgICB3YWwgPyAnd2FsJyA6IG51bGwsXG4gICAgICAgIF1cbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgICAgIC5qb2luKCd8Jyk7XG4gICAgICAgIC8vIEFuIEFjY2VwdCBoZWFkZXIgY2FuIGNhcnJ5IG11bHRpcGxlIG1lZGlhIHR5cGVzIGJ1dCBwb3N0Z3Jlc3QtanMgYWx3YXlzIHNlbmRzIG9uZVxuICAgICAgICBjb25zdCBmb3JNZWRpYXR5cGUgPSAoX2EgPSB0aGlzLmhlYWRlcnNbJ0FjY2VwdCddKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgIHRoaXMuaGVhZGVyc1snQWNjZXB0J10gPSBgYXBwbGljYXRpb24vdm5kLnBncnN0LnBsYW4rJHtmb3JtYXR9OyBmb3I9XCIke2Zvck1lZGlhdHlwZX1cIjsgb3B0aW9ucz0ke29wdGlvbnN9O2A7XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdqc29uJylcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUm9sbGJhY2sgdGhlIHF1ZXJ5LlxuICAgICAqXG4gICAgICogYGRhdGFgIHdpbGwgc3RpbGwgYmUgcmV0dXJuZWQsIGJ1dCB0aGUgcXVlcnkgaXMgbm90IGNvbW1pdHRlZC5cbiAgICAgKi9cbiAgICByb2xsYmFjaygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoKChfYSA9IHRoaXMuaGVhZGVyc1snUHJlZmVyJ10pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnKS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzWydQcmVmZXInXSArPSAnLHR4PXJvbGxiYWNrJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1snUHJlZmVyJ10gPSAndHg9cm9sbGJhY2snO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSB0aGUgdHlwZSBvZiB0aGUgcmV0dXJuZWQgYGRhdGFgLlxuICAgICAqXG4gICAgICogQHR5cGVQYXJhbSBOZXdSZXN1bHQgLSBUaGUgbmV3IHJlc3VsdCB0eXBlIHRvIG92ZXJyaWRlIHdpdGhcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Ugb3ZlcnJpZGVUeXBlczx5b3VyVHlwZSwgeyBtZXJnZTogZmFsc2UgfT4oKSBtZXRob2QgYXQgdGhlIGVuZCBvZiB5b3VyIGNhbGwgY2hhaW4gaW5zdGVhZFxuICAgICAqL1xuICAgIHJldHVybnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFBvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb3N0Z3Jlc3RUcmFuc2Zvcm1CdWlsZGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgUG9zdGdyZXN0VHJhbnNmb3JtQnVpbGRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Bvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXJcIikpO1xuY2xhc3MgUG9zdGdyZXN0RmlsdGVyQnVpbGRlciBleHRlbmRzIFBvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXJfMS5kZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmUgYGNvbHVtbmAgaXMgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIFRvIGNoZWNrIGlmIHRoZSB2YWx1ZSBvZiBgY29sdW1uYCBpcyBOVUxMLCB5b3Ugc2hvdWxkIHVzZSBgLmlzKClgIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICBlcShjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgZXEuJHt2YWx1ZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBpcyBub3QgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBmaWx0ZXIgd2l0aFxuICAgICAqL1xuICAgIG5lcShjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgbmVxLiR7dmFsdWV9YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmUgYGNvbHVtbmAgaXMgZ3JlYXRlciB0aGFuIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICBndChjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgZ3QuJHt2YWx1ZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBmaWx0ZXIgd2l0aFxuICAgICAqL1xuICAgIGd0ZShjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgZ3RlLiR7dmFsdWV9YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmUgYGNvbHVtbmAgaXMgbGVzcyB0aGFuIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICBsdChjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgbHQuJHt2YWx1ZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBmaWx0ZXIgd2l0aFxuICAgICAqL1xuICAgIGx0ZShjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgbHRlLiR7dmFsdWV9YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmUgYGNvbHVtbmAgbWF0Y2hlcyBgcGF0dGVybmAgY2FzZS1zZW5zaXRpdmVseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSBwYXR0ZXJuIC0gVGhlIHBhdHRlcm4gdG8gbWF0Y2ggd2l0aFxuICAgICAqL1xuICAgIGxpa2UoY29sdW1uLCBwYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgbGlrZS4ke3BhdHRlcm59YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmUgYGNvbHVtbmAgbWF0Y2hlcyBhbGwgb2YgYHBhdHRlcm5zYCBjYXNlLXNlbnNpdGl2ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbHVtbiAtIFRoZSBjb2x1bW4gdG8gZmlsdGVyIG9uXG4gICAgICogQHBhcmFtIHBhdHRlcm5zIC0gVGhlIHBhdHRlcm5zIHRvIG1hdGNoIHdpdGhcbiAgICAgKi9cbiAgICBsaWtlQWxsT2YoY29sdW1uLCBwYXR0ZXJucykge1xuICAgICAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGNvbHVtbiwgYGxpa2UoYWxsKS57JHtwYXR0ZXJucy5qb2luKCcsJyl9fWApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWF0Y2ggb25seSByb3dzIHdoZXJlIGBjb2x1bW5gIG1hdGNoZXMgYW55IG9mIGBwYXR0ZXJuc2AgY2FzZS1zZW5zaXRpdmVseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSBwYXR0ZXJucyAtIFRoZSBwYXR0ZXJucyB0byBtYXRjaCB3aXRoXG4gICAgICovXG4gICAgbGlrZUFueU9mKGNvbHVtbiwgcGF0dGVybnMpIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBsaWtlKGFueSkueyR7cGF0dGVybnMuam9pbignLCcpfX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBtYXRjaGVzIGBwYXR0ZXJuYCBjYXNlLWluc2Vuc2l0aXZlbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gcGF0dGVybiAtIFRoZSBwYXR0ZXJuIHRvIG1hdGNoIHdpdGhcbiAgICAgKi9cbiAgICBpbGlrZShjb2x1bW4sIHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBpbGlrZS4ke3BhdHRlcm59YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmUgYGNvbHVtbmAgbWF0Y2hlcyBhbGwgb2YgYHBhdHRlcm5zYCBjYXNlLWluc2Vuc2l0aXZlbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gcGF0dGVybnMgLSBUaGUgcGF0dGVybnMgdG8gbWF0Y2ggd2l0aFxuICAgICAqL1xuICAgIGlsaWtlQWxsT2YoY29sdW1uLCBwYXR0ZXJucykge1xuICAgICAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGNvbHVtbiwgYGlsaWtlKGFsbCkueyR7cGF0dGVybnMuam9pbignLCcpfX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBtYXRjaGVzIGFueSBvZiBgcGF0dGVybnNgIGNhc2UtaW5zZW5zaXRpdmVseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSBwYXR0ZXJucyAtIFRoZSBwYXR0ZXJucyB0byBtYXRjaCB3aXRoXG4gICAgICovXG4gICAgaWxpa2VBbnlPZihjb2x1bW4sIHBhdHRlcm5zKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgaWxpa2UoYW55KS57JHtwYXR0ZXJucy5qb2luKCcsJyl9fWApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWF0Y2ggb25seSByb3dzIHdoZXJlIGBjb2x1bW5gIElTIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBGb3Igbm9uLWJvb2xlYW4gY29sdW1ucywgdGhpcyBpcyBvbmx5IHJlbGV2YW50IGZvciBjaGVja2luZyBpZiB0aGUgdmFsdWUgb2ZcbiAgICAgKiBgY29sdW1uYCBpcyBOVUxMIGJ5IHNldHRpbmcgYHZhbHVlYCB0byBgbnVsbGAuXG4gICAgICpcbiAgICAgKiBGb3IgYm9vbGVhbiBjb2x1bW5zLCB5b3UgY2FuIGFsc28gc2V0IGB2YWx1ZWAgdG8gYHRydWVgIG9yIGBmYWxzZWAgYW5kIGl0XG4gICAgICogd2lsbCBiZWhhdmUgdGhlIHNhbWUgd2F5IGFzIGAuZXEoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICBpcyhjb2x1bW4sIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgaXMuJHt2YWx1ZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBpcyBpbmNsdWRlZCBpbiB0aGUgYHZhbHVlc2AgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gdmFsdWVzIC0gVGhlIHZhbHVlcyBhcnJheSB0byBmaWx0ZXIgd2l0aFxuICAgICAqL1xuICAgIGluKGNvbHVtbiwgdmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuZWRWYWx1ZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQodmFsdWVzKSlcbiAgICAgICAgICAgIC5tYXAoKHMpID0+IHtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBwb3N0Z3Jlc3QgcmVzZXJ2ZWQgY2hhcmFjdGVyc1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly9wb3N0Z3Jlc3Qub3JnL2VuL3Y3LjAuMC9hcGkuaHRtbCNyZXNlcnZlZC1jaGFyYWN0ZXJzXG4gICAgICAgICAgICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnICYmIG5ldyBSZWdFeHAoJ1ssKCldJykudGVzdChzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYFwiJHtzfVwiYDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c31gO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oJywnKTtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBpbi4oJHtjbGVhbmVkVmFsdWVzfSlgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcmVsZXZhbnQgZm9yIGpzb25iLCBhcnJheSwgYW5kIHJhbmdlIGNvbHVtbnMuIE1hdGNoIG9ubHkgcm93cyB3aGVyZVxuICAgICAqIGBjb2x1bW5gIGNvbnRhaW5zIGV2ZXJ5IGVsZW1lbnQgYXBwZWFyaW5nIGluIGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGpzb25iLCBhcnJheSwgb3IgcmFuZ2UgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBqc29uYiwgYXJyYXksIG9yIHJhbmdlIHZhbHVlIHRvIGZpbHRlciB3aXRoXG4gICAgICovXG4gICAgY29udGFpbnMoY29sdW1uLCB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gcmFuZ2UgdHlwZXMgY2FuIGJlIGluY2x1c2l2ZSAnWycsICddJyBvciBleGNsdXNpdmUgJygnLCAnKScgc28ganVzdFxuICAgICAgICAgICAgLy8ga2VlcCBpdCBzaW1wbGUgYW5kIGFjY2VwdCBhIHN0cmluZ1xuICAgICAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBjcy4ke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAvLyBhcnJheVxuICAgICAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBjcy57JHt2YWx1ZS5qb2luKCcsJyl9fWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8ganNvblxuICAgICAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBjcy4ke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSByZWxldmFudCBmb3IganNvbmIsIGFycmF5LCBhbmQgcmFuZ2UgY29sdW1ucy4gTWF0Y2ggb25seSByb3dzIHdoZXJlXG4gICAgICogZXZlcnkgZWxlbWVudCBhcHBlYXJpbmcgaW4gYGNvbHVtbmAgaXMgY29udGFpbmVkIGJ5IGB2YWx1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGpzb25iLCBhcnJheSwgb3IgcmFuZ2UgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBqc29uYiwgYXJyYXksIG9yIHJhbmdlIHZhbHVlIHRvIGZpbHRlciB3aXRoXG4gICAgICovXG4gICAgY29udGFpbmVkQnkoY29sdW1uLCB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gcmFuZ2VcbiAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgY2QuJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgLy8gYXJyYXlcbiAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgY2QueyR7dmFsdWUuam9pbignLCcpfX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGpzb25cbiAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgY2QuJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcmVsZXZhbnQgZm9yIHJhbmdlIGNvbHVtbnMuIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBldmVyeSBlbGVtZW50IGluXG4gICAgICogYGNvbHVtbmAgaXMgZ3JlYXRlciB0aGFuIGFueSBlbGVtZW50IGluIGByYW5nZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIHJhbmdlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gcmFuZ2UgLSBUaGUgcmFuZ2UgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICByYW5nZUd0KGNvbHVtbiwgcmFuZ2UpIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBzci4ke3JhbmdlfWApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSByZWxldmFudCBmb3IgcmFuZ2UgY29sdW1ucy4gTWF0Y2ggb25seSByb3dzIHdoZXJlIGV2ZXJ5IGVsZW1lbnQgaW5cbiAgICAgKiBgY29sdW1uYCBpcyBlaXRoZXIgY29udGFpbmVkIGluIGByYW5nZWAgb3IgZ3JlYXRlciB0aGFuIGFueSBlbGVtZW50IGluXG4gICAgICogYHJhbmdlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgcmFuZ2UgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSByYW5nZSAtIFRoZSByYW5nZSB0byBmaWx0ZXIgd2l0aFxuICAgICAqL1xuICAgIHJhbmdlR3RlKGNvbHVtbiwgcmFuZ2UpIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBueGwuJHtyYW5nZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcmVsZXZhbnQgZm9yIHJhbmdlIGNvbHVtbnMuIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBldmVyeSBlbGVtZW50IGluXG4gICAgICogYGNvbHVtbmAgaXMgbGVzcyB0aGFuIGFueSBlbGVtZW50IGluIGByYW5nZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIHJhbmdlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gcmFuZ2UgLSBUaGUgcmFuZ2UgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICByYW5nZUx0KGNvbHVtbiwgcmFuZ2UpIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBzbC4ke3JhbmdlfWApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25seSByZWxldmFudCBmb3IgcmFuZ2UgY29sdW1ucy4gTWF0Y2ggb25seSByb3dzIHdoZXJlIGV2ZXJ5IGVsZW1lbnQgaW5cbiAgICAgKiBgY29sdW1uYCBpcyBlaXRoZXIgY29udGFpbmVkIGluIGByYW5nZWAgb3IgbGVzcyB0aGFuIGFueSBlbGVtZW50IGluXG4gICAgICogYHJhbmdlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW4gLSBUaGUgcmFuZ2UgY29sdW1uIHRvIGZpbHRlciBvblxuICAgICAqIEBwYXJhbSByYW5nZSAtIFRoZSByYW5nZSB0byBmaWx0ZXIgd2l0aFxuICAgICAqL1xuICAgIHJhbmdlTHRlKGNvbHVtbiwgcmFuZ2UpIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBueHIuJHtyYW5nZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcmVsZXZhbnQgZm9yIHJhbmdlIGNvbHVtbnMuIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBgY29sdW1uYCBpc1xuICAgICAqIG11dHVhbGx5IGV4Y2x1c2l2ZSB0byBgcmFuZ2VgIGFuZCB0aGVyZSBjYW4gYmUgbm8gZWxlbWVudCBiZXR3ZWVuIHRoZSB0d29cbiAgICAgKiByYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIHJhbmdlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gcmFuZ2UgLSBUaGUgcmFuZ2UgdG8gZmlsdGVyIHdpdGhcbiAgICAgKi9cbiAgICByYW5nZUFkamFjZW50KGNvbHVtbiwgcmFuZ2UpIHtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGBhZGouJHtyYW5nZX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcmVsZXZhbnQgZm9yIGFycmF5IGFuZCByYW5nZSBjb2x1bW5zLiBNYXRjaCBvbmx5IHJvd3Mgd2hlcmVcbiAgICAgKiBgY29sdW1uYCBhbmQgYHZhbHVlYCBoYXZlIGFuIGVsZW1lbnQgaW4gY29tbW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbHVtbiAtIFRoZSBhcnJheSBvciByYW5nZSBjb2x1bW4gdG8gZmlsdGVyIG9uXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGFycmF5IG9yIHJhbmdlIHZhbHVlIHRvIGZpbHRlciB3aXRoXG4gICAgICovXG4gICAgb3ZlcmxhcHMoY29sdW1uLCB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gcmFuZ2VcbiAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgb3YuJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFycmF5XG4gICAgICAgICAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGNvbHVtbiwgYG92Lnske3ZhbHVlLmpvaW4oJywnKX19YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcmVsZXZhbnQgZm9yIHRleHQgYW5kIHRzdmVjdG9yIGNvbHVtbnMuIE1hdGNoIG9ubHkgcm93cyB3aGVyZVxuICAgICAqIGBjb2x1bW5gIG1hdGNoZXMgdGhlIHF1ZXJ5IHN0cmluZyBpbiBgcXVlcnlgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbHVtbiAtIFRoZSB0ZXh0IG9yIHRzdmVjdG9yIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdGV4dCB0byBtYXRjaCB3aXRoXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY29uZmlnIC0gVGhlIHRleHQgc2VhcmNoIGNvbmZpZ3VyYXRpb24gdG8gdXNlXG4gICAgICogQHBhcmFtIG9wdGlvbnMudHlwZSAtIENoYW5nZSBob3cgdGhlIGBxdWVyeWAgdGV4dCBpcyBpbnRlcnByZXRlZFxuICAgICAqL1xuICAgIHRleHRTZWFyY2goY29sdW1uLCBxdWVyeSwgeyBjb25maWcsIHR5cGUgfSA9IHt9KSB7XG4gICAgICAgIGxldCB0eXBlUGFydCA9ICcnO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3BsYWluJykge1xuICAgICAgICAgICAgdHlwZVBhcnQgPSAncGwnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwaHJhc2UnKSB7XG4gICAgICAgICAgICB0eXBlUGFydCA9ICdwaCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3dlYnNlYXJjaCcpIHtcbiAgICAgICAgICAgIHR5cGVQYXJ0ID0gJ3cnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ1BhcnQgPSBjb25maWcgPT09IHVuZGVmaW5lZCA/ICcnIDogYCgke2NvbmZpZ30pYDtcbiAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChjb2x1bW4sIGAke3R5cGVQYXJ0fWZ0cyR7Y29uZmlnUGFydH0uJHtxdWVyeX1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGNoIG9ubHkgcm93cyB3aGVyZSBlYWNoIGNvbHVtbiBpbiBgcXVlcnlgIGtleXMgaXMgZXF1YWwgdG8gaXRzXG4gICAgICogYXNzb2NpYXRlZCB2YWx1ZS4gU2hvcnRoYW5kIGZvciBtdWx0aXBsZSBgLmVxKClgcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBvYmplY3QgdG8gZmlsdGVyIHdpdGgsIHdpdGggY29sdW1uIG5hbWVzIGFzIGtleXMgbWFwcGVkXG4gICAgICogdG8gdGhlaXIgZmlsdGVyIHZhbHVlc1xuICAgICAqL1xuICAgIG1hdGNoKHF1ZXJ5KSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChbY29sdW1uLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgZXEuJHt2YWx1ZX1gKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hpY2ggZG9lc24ndCBzYXRpc2Z5IHRoZSBmaWx0ZXIuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgbW9zdCBmaWx0ZXJzLCBgb3BlYXJhdG9yYCBhbmQgYHZhbHVlYCBhcmUgdXNlZCBhcy1pcyBhbmQgbmVlZCB0b1xuICAgICAqIGZvbGxvdyBbUG9zdGdSRVNUXG4gICAgICogc3ludGF4XShodHRwczovL3Bvc3RncmVzdC5vcmcvZW4vc3RhYmxlL2FwaS5odG1sI29wZXJhdG9ycykuIFlvdSBhbHNvIG5lZWRcbiAgICAgKiB0byBtYWtlIHN1cmUgdGhleSBhcmUgcHJvcGVybHkgc2FuaXRpemVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbHVtbiAtIFRoZSBjb2x1bW4gdG8gZmlsdGVyIG9uXG4gICAgICogQHBhcmFtIG9wZXJhdG9yIC0gVGhlIG9wZXJhdG9yIHRvIGJlIG5lZ2F0ZWQgdG8gZmlsdGVyIHdpdGgsIGZvbGxvd2luZ1xuICAgICAqIFBvc3RnUkVTVCBzeW50YXhcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZmlsdGVyIHdpdGgsIGZvbGxvd2luZyBQb3N0Z1JFU1Qgc3ludGF4XG4gICAgICovXG4gICAgbm90KGNvbHVtbiwgb3BlcmF0b3IsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoY29sdW1uLCBgbm90LiR7b3BlcmF0b3J9LiR7dmFsdWV9YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXRjaCBvbmx5IHJvd3Mgd2hpY2ggc2F0aXNmeSBhdCBsZWFzdCBvbmUgb2YgdGhlIGZpbHRlcnMuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgbW9zdCBmaWx0ZXJzLCBgZmlsdGVyc2AgaXMgdXNlZCBhcy1pcyBhbmQgbmVlZHMgdG8gZm9sbG93IFtQb3N0Z1JFU1RcbiAgICAgKiBzeW50YXhdKGh0dHBzOi8vcG9zdGdyZXN0Lm9yZy9lbi9zdGFibGUvYXBpLmh0bWwjb3BlcmF0b3JzKS4gWW91IGFsc28gbmVlZFxuICAgICAqIHRvIG1ha2Ugc3VyZSBpdCdzIHByb3Blcmx5IHNhbml0aXplZC5cbiAgICAgKlxuICAgICAqIEl0J3MgY3VycmVudGx5IG5vdCBwb3NzaWJsZSB0byBkbyBhbiBgLm9yKClgIGZpbHRlciBhY3Jvc3MgbXVsdGlwbGUgdGFibGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbHRlcnMgLSBUaGUgZmlsdGVycyB0byB1c2UsIGZvbGxvd2luZyBQb3N0Z1JFU1Qgc3ludGF4XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMucmVmZXJlbmNlZFRhYmxlIC0gU2V0IHRoaXMgdG8gZmlsdGVyIG9uIHJlZmVyZW5jZWQgdGFibGVzXG4gICAgICogaW5zdGVhZCBvZiB0aGUgcGFyZW50IHRhYmxlXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZm9yZWlnblRhYmxlIC0gRGVwcmVjYXRlZCwgdXNlIGByZWZlcmVuY2VkVGFibGVgIGluc3RlYWRcbiAgICAgKi9cbiAgICBvcihmaWx0ZXJzLCB7IGZvcmVpZ25UYWJsZSwgcmVmZXJlbmNlZFRhYmxlID0gZm9yZWlnblRhYmxlLCB9ID0ge30pIHtcbiAgICAgICAgY29uc3Qga2V5ID0gcmVmZXJlbmNlZFRhYmxlID8gYCR7cmVmZXJlbmNlZFRhYmxlfS5vcmAgOiAnb3InO1xuICAgICAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgYCgke2ZpbHRlcnN9KWApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWF0Y2ggb25seSByb3dzIHdoaWNoIHNhdGlzZnkgdGhlIGZpbHRlci4gVGhpcyBpcyBhbiBlc2NhcGUgaGF0Y2ggLSB5b3VcbiAgICAgKiBzaG91bGQgdXNlIHRoZSBzcGVjaWZpYyBmaWx0ZXIgbWV0aG9kcyB3aGVyZXZlciBwb3NzaWJsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBtb3N0IGZpbHRlcnMsIGBvcGVhcmF0b3JgIGFuZCBgdmFsdWVgIGFyZSB1c2VkIGFzLWlzIGFuZCBuZWVkIHRvXG4gICAgICogZm9sbG93IFtQb3N0Z1JFU1RcbiAgICAgKiBzeW50YXhdKGh0dHBzOi8vcG9zdGdyZXN0Lm9yZy9lbi9zdGFibGUvYXBpLmh0bWwjb3BlcmF0b3JzKS4gWW91IGFsc28gbmVlZFxuICAgICAqIHRvIG1ha2Ugc3VyZSB0aGV5IGFyZSBwcm9wZXJseSBzYW5pdGl6ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sdW1uIC0gVGhlIGNvbHVtbiB0byBmaWx0ZXIgb25cbiAgICAgKiBAcGFyYW0gb3BlcmF0b3IgLSBUaGUgb3BlcmF0b3IgdG8gZmlsdGVyIHdpdGgsIGZvbGxvd2luZyBQb3N0Z1JFU1Qgc3ludGF4XG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGZpbHRlciB3aXRoLCBmb2xsb3dpbmcgUG9zdGdSRVNUIHN5bnRheFxuICAgICAqL1xuICAgIGZpbHRlcihjb2x1bW4sIG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGNvbHVtbiwgYCR7b3BlcmF0b3J9LiR7dmFsdWV9YCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFBvc3RncmVzdEZpbHRlckJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgUG9zdGdyZXN0RmlsdGVyQnVpbGRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Bvc3RncmVzdEZpbHRlckJ1aWxkZXJcIikpO1xuY2xhc3MgUG9zdGdyZXN0UXVlcnlCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmwsIHsgaGVhZGVycyA9IHt9LCBzY2hlbWEsIGZldGNoLCB9KSB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgdGhpcy5mZXRjaCA9IGZldGNoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgU0VMRUNUIHF1ZXJ5IG9uIHRoZSB0YWJsZSBvciB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbHVtbnMgLSBUaGUgY29sdW1ucyB0byByZXRyaWV2ZSwgc2VwYXJhdGVkIGJ5IGNvbW1hcy4gQ29sdW1ucyBjYW4gYmUgcmVuYW1lZCB3aGVuIHJldHVybmVkIHdpdGggYGN1c3RvbU5hbWU6Y29sdW1uTmFtZWBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gTmFtZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMuaGVhZCAtIFdoZW4gc2V0IHRvIGB0cnVlYCwgYGRhdGFgIHdpbGwgbm90IGJlIHJldHVybmVkLlxuICAgICAqIFVzZWZ1bCBpZiB5b3Ugb25seSBuZWVkIHRoZSBjb3VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNvdW50IC0gQ291bnQgYWxnb3JpdGhtIHRvIHVzZSB0byBjb3VudCByb3dzIGluIHRoZSB0YWJsZSBvciB2aWV3LlxuICAgICAqXG4gICAgICogYFwiZXhhY3RcImA6IEV4YWN0IGJ1dCBzbG93IGNvdW50IGFsZ29yaXRobS4gUGVyZm9ybXMgYSBgQ09VTlQoKilgIHVuZGVyIHRoZVxuICAgICAqIGhvb2QuXG4gICAgICpcbiAgICAgKiBgXCJwbGFubmVkXCJgOiBBcHByb3hpbWF0ZWQgYnV0IGZhc3QgY291bnQgYWxnb3JpdGhtLiBVc2VzIHRoZSBQb3N0Z3Jlc1xuICAgICAqIHN0YXRpc3RpY3MgdW5kZXIgdGhlIGhvb2QuXG4gICAgICpcbiAgICAgKiBgXCJlc3RpbWF0ZWRcImA6IFVzZXMgZXhhY3QgY291bnQgZm9yIGxvdyBudW1iZXJzIGFuZCBwbGFubmVkIGNvdW50IGZvciBoaWdoXG4gICAgICogbnVtYmVycy5cbiAgICAgKi9cbiAgICBzZWxlY3QoY29sdW1ucywgeyBoZWFkID0gZmFsc2UsIGNvdW50LCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gaGVhZCA/ICdIRUFEJyA6ICdHRVQnO1xuICAgICAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZXMgZXhjZXB0IHdoZW4gcXVvdGVkXG4gICAgICAgIGxldCBxdW90ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY2xlYW5lZENvbHVtbnMgPSAoY29sdW1ucyAhPT0gbnVsbCAmJiBjb2x1bW5zICE9PSB2b2lkIDAgPyBjb2x1bW5zIDogJyonKVxuICAgICAgICAgICAgLnNwbGl0KCcnKVxuICAgICAgICAgICAgLm1hcCgoYykgPT4ge1xuICAgICAgICAgICAgaWYgKC9cXHMvLnRlc3QoYykgJiYgIXF1b3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjID09PSAnXCInKSB7XG4gICAgICAgICAgICAgICAgcXVvdGVkID0gIXF1b3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oJycpO1xuICAgICAgICB0aGlzLnVybC5zZWFyY2hQYXJhbXMuc2V0KCdzZWxlY3QnLCBjbGVhbmVkQ29sdW1ucyk7XG4gICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzWydQcmVmZXInXSA9IGBjb3VudD0ke2NvdW50fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyXzEuZGVmYXVsdCh7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLnNjaGVtYSxcbiAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFuIElOU0VSVCBpbnRvIHRoZSB0YWJsZSBvciB2aWV3LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgaW5zZXJ0ZWQgcm93cyBhcmUgbm90IHJldHVybmVkLiBUbyByZXR1cm4gaXQsIGNoYWluIHRoZSBjYWxsXG4gICAgICogd2l0aCBgLnNlbGVjdCgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgLSBUaGUgdmFsdWVzIHRvIGluc2VydC4gUGFzcyBhbiBvYmplY3QgdG8gaW5zZXJ0IGEgc2luZ2xlIHJvd1xuICAgICAqIG9yIGFuIGFycmF5IHRvIGluc2VydCBtdWx0aXBsZSByb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb3VudCAtIENvdW50IGFsZ29yaXRobSB0byB1c2UgdG8gY291bnQgaW5zZXJ0ZWQgcm93cy5cbiAgICAgKlxuICAgICAqIGBcImV4YWN0XCJgOiBFeGFjdCBidXQgc2xvdyBjb3VudCBhbGdvcml0aG0uIFBlcmZvcm1zIGEgYENPVU5UKCopYCB1bmRlciB0aGVcbiAgICAgKiBob29kLlxuICAgICAqXG4gICAgICogYFwicGxhbm5lZFwiYDogQXBwcm94aW1hdGVkIGJ1dCBmYXN0IGNvdW50IGFsZ29yaXRobS4gVXNlcyB0aGUgUG9zdGdyZXNcbiAgICAgKiBzdGF0aXN0aWNzIHVuZGVyIHRoZSBob29kLlxuICAgICAqXG4gICAgICogYFwiZXN0aW1hdGVkXCJgOiBVc2VzIGV4YWN0IGNvdW50IGZvciBsb3cgbnVtYmVycyBhbmQgcGxhbm5lZCBjb3VudCBmb3IgaGlnaFxuICAgICAqIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5kZWZhdWx0VG9OdWxsIC0gTWFrZSBtaXNzaW5nIGZpZWxkcyBkZWZhdWx0IHRvIGBudWxsYC5cbiAgICAgKiBPdGhlcndpc2UsIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGNvbHVtbi4gT25seSBhcHBsaWVzIGZvciBidWxrXG4gICAgICogaW5zZXJ0cy5cbiAgICAgKi9cbiAgICBpbnNlcnQodmFsdWVzLCB7IGNvdW50LCBkZWZhdWx0VG9OdWxsID0gdHJ1ZSwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9ICdQT1NUJztcbiAgICAgICAgY29uc3QgcHJlZmVyc0hlYWRlcnMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc1snUHJlZmVyJ10pIHtcbiAgICAgICAgICAgIHByZWZlcnNIZWFkZXJzLnB1c2godGhpcy5oZWFkZXJzWydQcmVmZXInXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICBwcmVmZXJzSGVhZGVycy5wdXNoKGBjb3VudD0ke2NvdW50fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVmYXVsdFRvTnVsbCkge1xuICAgICAgICAgICAgcHJlZmVyc0hlYWRlcnMucHVzaCgnbWlzc2luZz1kZWZhdWx0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oZWFkZXJzWydQcmVmZXInXSA9IHByZWZlcnNIZWFkZXJzLmpvaW4oJywnKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSkge1xuICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IHZhbHVlcy5yZWR1Y2UoKGFjYywgeCkgPT4gYWNjLmNvbmNhdChPYmplY3Qua2V5cyh4KSksIFtdKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVDb2x1bW5zID0gWy4uLm5ldyBTZXQoY29sdW1ucyldLm1hcCgoY29sdW1uKSA9PiBgXCIke2NvbHVtbn1cImApO1xuICAgICAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NvbHVtbnMnLCB1bmlxdWVDb2x1bW5zLmpvaW4oJywnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyXzEuZGVmYXVsdCh7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLnNjaGVtYSxcbiAgICAgICAgICAgIGJvZHk6IHZhbHVlcyxcbiAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFuIFVQU0VSVCBvbiB0aGUgdGFibGUgb3Igdmlldy4gRGVwZW5kaW5nIG9uIHRoZSBjb2x1bW4ocykgcGFzc2VkXG4gICAgICogdG8gYG9uQ29uZmxpY3RgLCBgLnVwc2VydCgpYCBhbGxvd3MgeW91IHRvIHBlcmZvcm0gdGhlIGVxdWl2YWxlbnQgb2ZcbiAgICAgKiBgLmluc2VydCgpYCBpZiBhIHJvdyB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGBvbkNvbmZsaWN0YCBjb2x1bW5zIGRvZXNuJ3RcbiAgICAgKiBleGlzdCwgb3IgaWYgaXQgZG9lcyBleGlzdCwgcGVyZm9ybSBhbiBhbHRlcm5hdGl2ZSBhY3Rpb24gZGVwZW5kaW5nIG9uXG4gICAgICogYGlnbm9yZUR1cGxpY2F0ZXNgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgdXBzZXJ0ZWQgcm93cyBhcmUgbm90IHJldHVybmVkLiBUbyByZXR1cm4gaXQsIGNoYWluIHRoZSBjYWxsXG4gICAgICogd2l0aCBgLnNlbGVjdCgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgLSBUaGUgdmFsdWVzIHRvIHVwc2VydCB3aXRoLiBQYXNzIGFuIG9iamVjdCB0byB1cHNlcnQgYVxuICAgICAqIHNpbmdsZSByb3cgb3IgYW4gYXJyYXkgdG8gdXBzZXJ0IG11bHRpcGxlIHJvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE5hbWVkIHBhcmFtZXRlcnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zLm9uQ29uZmxpY3QgLSBDb21tYS1zZXBhcmF0ZWQgVU5JUVVFIGNvbHVtbihzKSB0byBzcGVjaWZ5IGhvd1xuICAgICAqIGR1cGxpY2F0ZSByb3dzIGFyZSBkZXRlcm1pbmVkLiBUd28gcm93cyBhcmUgZHVwbGljYXRlcyBpZiBhbGwgdGhlXG4gICAgICogYG9uQ29uZmxpY3RgIGNvbHVtbnMgYXJlIGVxdWFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMuaWdub3JlRHVwbGljYXRlcyAtIElmIGB0cnVlYCwgZHVwbGljYXRlIHJvd3MgYXJlIGlnbm9yZWQuIElmXG4gICAgICogYGZhbHNlYCwgZHVwbGljYXRlIHJvd3MgYXJlIG1lcmdlZCB3aXRoIGV4aXN0aW5nIHJvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb3VudCAtIENvdW50IGFsZ29yaXRobSB0byB1c2UgdG8gY291bnQgdXBzZXJ0ZWQgcm93cy5cbiAgICAgKlxuICAgICAqIGBcImV4YWN0XCJgOiBFeGFjdCBidXQgc2xvdyBjb3VudCBhbGdvcml0aG0uIFBlcmZvcm1zIGEgYENPVU5UKCopYCB1bmRlciB0aGVcbiAgICAgKiBob29kLlxuICAgICAqXG4gICAgICogYFwicGxhbm5lZFwiYDogQXBwcm94aW1hdGVkIGJ1dCBmYXN0IGNvdW50IGFsZ29yaXRobS4gVXNlcyB0aGUgUG9zdGdyZXNcbiAgICAgKiBzdGF0aXN0aWNzIHVuZGVyIHRoZSBob29kLlxuICAgICAqXG4gICAgICogYFwiZXN0aW1hdGVkXCJgOiBVc2VzIGV4YWN0IGNvdW50IGZvciBsb3cgbnVtYmVycyBhbmQgcGxhbm5lZCBjb3VudCBmb3IgaGlnaFxuICAgICAqIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5kZWZhdWx0VG9OdWxsIC0gTWFrZSBtaXNzaW5nIGZpZWxkcyBkZWZhdWx0IHRvIGBudWxsYC5cbiAgICAgKiBPdGhlcndpc2UsIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGNvbHVtbi4gVGhpcyBvbmx5IGFwcGxpZXMgd2hlblxuICAgICAqIGluc2VydGluZyBuZXcgcm93cywgbm90IHdoZW4gbWVyZ2luZyB3aXRoIGV4aXN0aW5nIHJvd3MgdW5kZXJcbiAgICAgKiBgaWdub3JlRHVwbGljYXRlczogZmFsc2VgLiBUaGlzIGFsc28gb25seSBhcHBsaWVzIHdoZW4gZG9pbmcgYnVsayB1cHNlcnRzLlxuICAgICAqL1xuICAgIHVwc2VydCh2YWx1ZXMsIHsgb25Db25mbGljdCwgaWdub3JlRHVwbGljYXRlcyA9IGZhbHNlLCBjb3VudCwgZGVmYXVsdFRvTnVsbCA9IHRydWUsIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSAnUE9TVCc7XG4gICAgICAgIGNvbnN0IHByZWZlcnNIZWFkZXJzID0gW2ByZXNvbHV0aW9uPSR7aWdub3JlRHVwbGljYXRlcyA/ICdpZ25vcmUnIDogJ21lcmdlJ30tZHVwbGljYXRlc2BdO1xuICAgICAgICBpZiAob25Db25mbGljdCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhpcy51cmwuc2VhcmNoUGFyYW1zLnNldCgnb25fY29uZmxpY3QnLCBvbkNvbmZsaWN0KTtcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc1snUHJlZmVyJ10pIHtcbiAgICAgICAgICAgIHByZWZlcnNIZWFkZXJzLnB1c2godGhpcy5oZWFkZXJzWydQcmVmZXInXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICBwcmVmZXJzSGVhZGVycy5wdXNoKGBjb3VudD0ke2NvdW50fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVmYXVsdFRvTnVsbCkge1xuICAgICAgICAgICAgcHJlZmVyc0hlYWRlcnMucHVzaCgnbWlzc2luZz1kZWZhdWx0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oZWFkZXJzWydQcmVmZXInXSA9IHByZWZlcnNIZWFkZXJzLmpvaW4oJywnKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSkge1xuICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IHZhbHVlcy5yZWR1Y2UoKGFjYywgeCkgPT4gYWNjLmNvbmNhdChPYmplY3Qua2V5cyh4KSksIFtdKTtcbiAgICAgICAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVDb2x1bW5zID0gWy4uLm5ldyBTZXQoY29sdW1ucyldLm1hcCgoY29sdW1uKSA9PiBgXCIke2NvbHVtbn1cImApO1xuICAgICAgICAgICAgICAgIHRoaXMudXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NvbHVtbnMnLCB1bmlxdWVDb2x1bW5zLmpvaW4oJywnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyXzEuZGVmYXVsdCh7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLnNjaGVtYSxcbiAgICAgICAgICAgIGJvZHk6IHZhbHVlcyxcbiAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgYWxsb3dFbXB0eTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFuIFVQREFURSBvbiB0aGUgdGFibGUgb3Igdmlldy5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIHVwZGF0ZWQgcm93cyBhcmUgbm90IHJldHVybmVkLiBUbyByZXR1cm4gaXQsIGNoYWluIHRoZSBjYWxsXG4gICAgICogd2l0aCBgLnNlbGVjdCgpYCBhZnRlciBmaWx0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlcyAtIFRoZSB2YWx1ZXMgdG8gdXBkYXRlIHdpdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gTmFtZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY291bnQgLSBDb3VudCBhbGdvcml0aG0gdG8gdXNlIHRvIGNvdW50IHVwZGF0ZWQgcm93cy5cbiAgICAgKlxuICAgICAqIGBcImV4YWN0XCJgOiBFeGFjdCBidXQgc2xvdyBjb3VudCBhbGdvcml0aG0uIFBlcmZvcm1zIGEgYENPVU5UKCopYCB1bmRlciB0aGVcbiAgICAgKiBob29kLlxuICAgICAqXG4gICAgICogYFwicGxhbm5lZFwiYDogQXBwcm94aW1hdGVkIGJ1dCBmYXN0IGNvdW50IGFsZ29yaXRobS4gVXNlcyB0aGUgUG9zdGdyZXNcbiAgICAgKiBzdGF0aXN0aWNzIHVuZGVyIHRoZSBob29kLlxuICAgICAqXG4gICAgICogYFwiZXN0aW1hdGVkXCJgOiBVc2VzIGV4YWN0IGNvdW50IGZvciBsb3cgbnVtYmVycyBhbmQgcGxhbm5lZCBjb3VudCBmb3IgaGlnaFxuICAgICAqIG51bWJlcnMuXG4gICAgICovXG4gICAgdXBkYXRlKHZhbHVlcywgeyBjb3VudCwgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9ICdQQVRDSCc7XG4gICAgICAgIGNvbnN0IHByZWZlcnNIZWFkZXJzID0gW107XG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNbJ1ByZWZlciddKSB7XG4gICAgICAgICAgICBwcmVmZXJzSGVhZGVycy5wdXNoKHRoaXMuaGVhZGVyc1snUHJlZmVyJ10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgcHJlZmVyc0hlYWRlcnMucHVzaChgY291bnQ9JHtjb3VudH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhlYWRlcnNbJ1ByZWZlciddID0gcHJlZmVyc0hlYWRlcnMuam9pbignLCcpO1xuICAgICAgICByZXR1cm4gbmV3IFBvc3RncmVzdEZpbHRlckJ1aWxkZXJfMS5kZWZhdWx0KHtcbiAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMuc2NoZW1hLFxuICAgICAgICAgICAgYm9keTogdmFsdWVzLFxuICAgICAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2gsXG4gICAgICAgICAgICBhbGxvd0VtcHR5OiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBERUxFVEUgb24gdGhlIHRhYmxlIG9yIHZpZXcuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBkZWxldGVkIHJvd3MgYXJlIG5vdCByZXR1cm5lZC4gVG8gcmV0dXJuIGl0LCBjaGFpbiB0aGUgY2FsbFxuICAgICAqIHdpdGggYC5zZWxlY3QoKWAgYWZ0ZXIgZmlsdGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gTmFtZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY291bnQgLSBDb3VudCBhbGdvcml0aG0gdG8gdXNlIHRvIGNvdW50IGRlbGV0ZWQgcm93cy5cbiAgICAgKlxuICAgICAqIGBcImV4YWN0XCJgOiBFeGFjdCBidXQgc2xvdyBjb3VudCBhbGdvcml0aG0uIFBlcmZvcm1zIGEgYENPVU5UKCopYCB1bmRlciB0aGVcbiAgICAgKiBob29kLlxuICAgICAqXG4gICAgICogYFwicGxhbm5lZFwiYDogQXBwcm94aW1hdGVkIGJ1dCBmYXN0IGNvdW50IGFsZ29yaXRobS4gVXNlcyB0aGUgUG9zdGdyZXNcbiAgICAgKiBzdGF0aXN0aWNzIHVuZGVyIHRoZSBob29kLlxuICAgICAqXG4gICAgICogYFwiZXN0aW1hdGVkXCJgOiBVc2VzIGV4YWN0IGNvdW50IGZvciBsb3cgbnVtYmVycyBhbmQgcGxhbm5lZCBjb3VudCBmb3IgaGlnaFxuICAgICAqIG51bWJlcnMuXG4gICAgICovXG4gICAgZGVsZXRlKHsgY291bnQsIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSAnREVMRVRFJztcbiAgICAgICAgY29uc3QgcHJlZmVyc0hlYWRlcnMgPSBbXTtcbiAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICBwcmVmZXJzSGVhZGVycy5wdXNoKGBjb3VudD0ke2NvdW50fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNbJ1ByZWZlciddKSB7XG4gICAgICAgICAgICBwcmVmZXJzSGVhZGVycy51bnNoaWZ0KHRoaXMuaGVhZGVyc1snUHJlZmVyJ10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGVhZGVyc1snUHJlZmVyJ10gPSBwcmVmZXJzSGVhZGVycy5qb2luKCcsJyk7XG4gICAgICAgIHJldHVybiBuZXcgUG9zdGdyZXN0RmlsdGVyQnVpbGRlcl8xLmRlZmF1bHQoe1xuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcy5zY2hlbWEsXG4gICAgICAgICAgICBmZXRjaDogdGhpcy5mZXRjaCxcbiAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBQb3N0Z3Jlc3RRdWVyeUJ1aWxkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb3N0Z3Jlc3RRdWVyeUJ1aWxkZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnZlcnNpb24gPSB2b2lkIDA7XG5leHBvcnRzLnZlcnNpb24gPSAnMC4wLjAtYXV0b21hdGVkJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRFRkFVTFRfSEVBREVSUyA9IHZvaWQgMDtcbmNvbnN0IHZlcnNpb25fMSA9IHJlcXVpcmUoXCIuL3ZlcnNpb25cIik7XG5leHBvcnRzLkRFRkFVTFRfSEVBREVSUyA9IHsgJ1gtQ2xpZW50LUluZm8nOiBgcG9zdGdyZXN0LWpzLyR7dmVyc2lvbl8xLnZlcnNpb259YCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgUG9zdGdyZXN0UXVlcnlCdWlsZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUG9zdGdyZXN0UXVlcnlCdWlsZGVyXCIpKTtcbmNvbnN0IFBvc3RncmVzdEZpbHRlckJ1aWxkZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Qb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyXCIpKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuLyoqXG4gKiBQb3N0Z1JFU1QgY2xpZW50LlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0YWJhc2UgLSBUeXBlcyBmb3IgdGhlIHNjaGVtYSBmcm9tIHRoZSBbdHlwZVxuICogZ2VuZXJhdG9yXShodHRwczovL3N1cGFiYXNlLmNvbS9kb2NzL3JlZmVyZW5jZS9qYXZhc2NyaXB0L25leHQvdHlwZXNjcmlwdC1zdXBwb3J0KVxuICpcbiAqIEB0eXBlUGFyYW0gU2NoZW1hTmFtZSAtIFBvc3RncmVzIHNjaGVtYSB0byBzd2l0Y2ggdG8uIE11c3QgYmUgYSBzdHJpbmdcbiAqIGxpdGVyYWwsIHRoZSBzYW1lIG9uZSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yLiBJZiB0aGUgc2NoZW1hIGlzIG5vdFxuICogYFwicHVibGljXCJgLCB0aGlzIG11c3QgYmUgc3VwcGxpZWQgbWFudWFsbHkuXG4gKi9cbmNsYXNzIFBvc3RncmVzdENsaWVudCB7XG4gICAgLy8gVE9ETzogQWRkIGJhY2sgc2hvdWxkVGhyb3dPbkVycm9yIG9uY2Ugd2UgZmlndXJlIG91dCB0aGUgdHlwaW5nc1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBQb3N0Z1JFU1QgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHVybCAtIFVSTCBvZiB0aGUgUG9zdGdSRVNUIGVuZHBvaW50XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMuaGVhZGVycyAtIEN1c3RvbSBoZWFkZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMuc2NoZW1hIC0gUG9zdGdyZXMgc2NoZW1hIHRvIHN3aXRjaCB0b1xuICAgICAqIEBwYXJhbSBvcHRpb25zLmZldGNoIC0gQ3VzdG9tIGZldGNoXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodXJsLCB7IGhlYWRlcnMgPSB7fSwgc2NoZW1hLCBmZXRjaCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbnN0YW50c18xLkRFRkFVTFRfSEVBREVSUyksIGhlYWRlcnMpO1xuICAgICAgICB0aGlzLnNjaGVtYU5hbWUgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuZmV0Y2ggPSBmZXRjaDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhIHF1ZXJ5IG9uIGEgdGFibGUgb3IgYSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbGF0aW9uIC0gVGhlIHRhYmxlIG9yIHZpZXcgbmFtZSB0byBxdWVyeVxuICAgICAqL1xuICAgIGZyb20ocmVsYXRpb24pIHtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt0aGlzLnVybH0vJHtyZWxhdGlvbn1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQb3N0Z3Jlc3RRdWVyeUJ1aWxkZXJfMS5kZWZhdWx0KHVybCwge1xuICAgICAgICAgICAgaGVhZGVyczogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5oZWFkZXJzKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcy5zY2hlbWFOYW1lLFxuICAgICAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2gsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3QgYSBzY2hlbWEgdG8gcXVlcnkgb3IgcGVyZm9ybSBhbiBmdW5jdGlvbiAocnBjKSBjYWxsLlxuICAgICAqXG4gICAgICogVGhlIHNjaGVtYSBuZWVkcyB0byBiZSBvbiB0aGUgbGlzdCBvZiBleHBvc2VkIHNjaGVtYXMgaW5zaWRlIFN1cGFiYXNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjaGVtYSAtIFRoZSBzY2hlbWEgdG8gcXVlcnlcbiAgICAgKi9cbiAgICBzY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9zdGdyZXN0Q2xpZW50KHRoaXMudXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBzY2hlbWEsXG4gICAgICAgICAgICBmZXRjaDogdGhpcy5mZXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBmdW5jdGlvbiBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIG5hbWUgdG8gY2FsbFxuICAgICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBmdW5jdGlvbiBjYWxsXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBOYW1lZCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIG9wdGlvbnMuaGVhZCAtIFdoZW4gc2V0IHRvIGB0cnVlYCwgYGRhdGFgIHdpbGwgbm90IGJlIHJldHVybmVkLlxuICAgICAqIFVzZWZ1bCBpZiB5b3Ugb25seSBuZWVkIHRoZSBjb3VudC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5nZXQgLSBXaGVuIHNldCB0byBgdHJ1ZWAsIHRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoXG4gICAgICogcmVhZC1vbmx5IGFjY2VzcyBtb2RlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNvdW50IC0gQ291bnQgYWxnb3JpdGhtIHRvIHVzZSB0byBjb3VudCByb3dzIHJldHVybmVkIGJ5IHRoZVxuICAgICAqIGZ1bmN0aW9uLiBPbmx5IGFwcGxpY2FibGUgZm9yIFtzZXQtcmV0dXJuaW5nXG4gICAgICogZnVuY3Rpb25zXShodHRwczovL3d3dy5wb3N0Z3Jlc3FsLm9yZy9kb2NzL2N1cnJlbnQvZnVuY3Rpb25zLXNyZi5odG1sKS5cbiAgICAgKlxuICAgICAqIGBcImV4YWN0XCJgOiBFeGFjdCBidXQgc2xvdyBjb3VudCBhbGdvcml0aG0uIFBlcmZvcm1zIGEgYENPVU5UKCopYCB1bmRlciB0aGVcbiAgICAgKiBob29kLlxuICAgICAqXG4gICAgICogYFwicGxhbm5lZFwiYDogQXBwcm94aW1hdGVkIGJ1dCBmYXN0IGNvdW50IGFsZ29yaXRobS4gVXNlcyB0aGUgUG9zdGdyZXNcbiAgICAgKiBzdGF0aXN0aWNzIHVuZGVyIHRoZSBob29kLlxuICAgICAqXG4gICAgICogYFwiZXN0aW1hdGVkXCJgOiBVc2VzIGV4YWN0IGNvdW50IGZvciBsb3cgbnVtYmVycyBhbmQgcGxhbm5lZCBjb3VudCBmb3IgaGlnaFxuICAgICAqIG51bWJlcnMuXG4gICAgICovXG4gICAgcnBjKGZuLCBhcmdzID0ge30sIHsgaGVhZCA9IGZhbHNlLCBnZXQgPSBmYWxzZSwgY291bnQsIH0gPSB7fSkge1xuICAgICAgICBsZXQgbWV0aG9kO1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMudXJsfS9ycGMvJHtmbn1gKTtcbiAgICAgICAgbGV0IGJvZHk7XG4gICAgICAgIGlmIChoZWFkIHx8IGdldCkge1xuICAgICAgICAgICAgbWV0aG9kID0gaGVhZCA/ICdIRUFEJyA6ICdHRVQnO1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoYXJncylcbiAgICAgICAgICAgICAgICAvLyBwYXJhbXMgd2l0aCB1bmRlZmluZWQgdmFsdWUgbmVlZHMgdG8gYmUgZmlsdGVyZWQgb3V0LCBvdGhlcndpc2UgaXQnbGxcbiAgICAgICAgICAgICAgICAvLyBzaG93IHVwIGFzIGA/cGFyYW09dW5kZWZpbmVkYFxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgLy8gYXJyYXkgdmFsdWVzIG5lZWQgc3BlY2lhbCBzeW50YXhcbiAgICAgICAgICAgICAgICAubWFwKChbbmFtZSwgdmFsdWVdKSA9PiBbbmFtZSwgQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBgeyR7dmFsdWUuam9pbignLCcpfX1gIDogYCR7dmFsdWV9YF0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1ldGhvZCA9ICdQT1NUJztcbiAgICAgICAgICAgIGJvZHkgPSBhcmdzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmhlYWRlcnMpO1xuICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbJ1ByZWZlciddID0gYGNvdW50PSR7Y291bnR9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBvc3RncmVzdEZpbHRlckJ1aWxkZXJfMS5kZWZhdWx0KHtcbiAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMuc2NoZW1hTmFtZSxcbiAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICBmZXRjaDogdGhpcy5mZXRjaCxcbiAgICAgICAgICAgIGFsbG93RW1wdHk6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBQb3N0Z3Jlc3RDbGllbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb3N0Z3Jlc3RDbGllbnQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBvc3RncmVzdEVycm9yID0gZXhwb3J0cy5Qb3N0Z3Jlc3RCdWlsZGVyID0gZXhwb3J0cy5Qb3N0Z3Jlc3RUcmFuc2Zvcm1CdWlsZGVyID0gZXhwb3J0cy5Qb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyID0gZXhwb3J0cy5Qb3N0Z3Jlc3RRdWVyeUJ1aWxkZXIgPSBleHBvcnRzLlBvc3RncmVzdENsaWVudCA9IHZvaWQgMDtcbi8vIEFsd2F5cyB1cGRhdGUgd3JhcHBlci5tanMgd2hlbiB1cGRhdGluZyB0aGlzIGZpbGUuXG5jb25zdCBQb3N0Z3Jlc3RDbGllbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Qb3N0Z3Jlc3RDbGllbnRcIikpO1xuZXhwb3J0cy5Qb3N0Z3Jlc3RDbGllbnQgPSBQb3N0Z3Jlc3RDbGllbnRfMS5kZWZhdWx0O1xuY29uc3QgUG9zdGdyZXN0UXVlcnlCdWlsZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUG9zdGdyZXN0UXVlcnlCdWlsZGVyXCIpKTtcbmV4cG9ydHMuUG9zdGdyZXN0UXVlcnlCdWlsZGVyID0gUG9zdGdyZXN0UXVlcnlCdWlsZGVyXzEuZGVmYXVsdDtcbmNvbnN0IFBvc3RncmVzdEZpbHRlckJ1aWxkZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Qb3N0Z3Jlc3RGaWx0ZXJCdWlsZGVyXCIpKTtcbmV4cG9ydHMuUG9zdGdyZXN0RmlsdGVyQnVpbGRlciA9IFBvc3RncmVzdEZpbHRlckJ1aWxkZXJfMS5kZWZhdWx0O1xuY29uc3QgUG9zdGdyZXN0VHJhbnNmb3JtQnVpbGRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Bvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXJcIikpO1xuZXhwb3J0cy5Qb3N0Z3Jlc3RUcmFuc2Zvcm1CdWlsZGVyID0gUG9zdGdyZXN0VHJhbnNmb3JtQnVpbGRlcl8xLmRlZmF1bHQ7XG5jb25zdCBQb3N0Z3Jlc3RCdWlsZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUG9zdGdyZXN0QnVpbGRlclwiKSk7XG5leHBvcnRzLlBvc3RncmVzdEJ1aWxkZXIgPSBQb3N0Z3Jlc3RCdWlsZGVyXzEuZGVmYXVsdDtcbmNvbnN0IFBvc3RncmVzdEVycm9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUG9zdGdyZXN0RXJyb3JcIikpO1xuZXhwb3J0cy5Qb3N0Z3Jlc3RFcnJvciA9IFBvc3RncmVzdEVycm9yXzEuZGVmYXVsdDtcbmV4cG9ydHMuZGVmYXVsdCA9IHtcbiAgICBQb3N0Z3Jlc3RDbGllbnQ6IFBvc3RncmVzdENsaWVudF8xLmRlZmF1bHQsXG4gICAgUG9zdGdyZXN0UXVlcnlCdWlsZGVyOiBQb3N0Z3Jlc3RRdWVyeUJ1aWxkZXJfMS5kZWZhdWx0LFxuICAgIFBvc3RncmVzdEZpbHRlckJ1aWxkZXI6IFBvc3RncmVzdEZpbHRlckJ1aWxkZXJfMS5kZWZhdWx0LFxuICAgIFBvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXI6IFBvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXJfMS5kZWZhdWx0LFxuICAgIFBvc3RncmVzdEJ1aWxkZXI6IFBvc3RncmVzdEJ1aWxkZXJfMS5kZWZhdWx0LFxuICAgIFBvc3RncmVzdEVycm9yOiBQb3N0Z3Jlc3RFcnJvcl8xLmRlZmF1bHQsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IGluZGV4IGZyb20gJy4uL2Nqcy9pbmRleC5qcydcbmNvbnN0IHtcbiAgUG9zdGdyZXN0Q2xpZW50LFxuICBQb3N0Z3Jlc3RRdWVyeUJ1aWxkZXIsXG4gIFBvc3RncmVzdEZpbHRlckJ1aWxkZXIsXG4gIFBvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXIsXG4gIFBvc3RncmVzdEJ1aWxkZXIsXG4gIFBvc3RncmVzdEVycm9yLFxufSA9IGluZGV4XG5cbmV4cG9ydCB7XG4gIFBvc3RncmVzdEJ1aWxkZXIsXG4gIFBvc3RncmVzdENsaWVudCxcbiAgUG9zdGdyZXN0RmlsdGVyQnVpbGRlcixcbiAgUG9zdGdyZXN0UXVlcnlCdWlsZGVyLFxuICBQb3N0Z3Jlc3RUcmFuc2Zvcm1CdWlsZGVyLFxuICBQb3N0Z3Jlc3RFcnJvcixcbn1cblxuLy8gY29tcGF0aWJpbGl0eSB3aXRoIENKUyBvdXRwdXRcbmV4cG9ydCBkZWZhdWx0IHtcbiAgUG9zdGdyZXN0Q2xpZW50LFxuICBQb3N0Z3Jlc3RRdWVyeUJ1aWxkZXIsXG4gIFBvc3RncmVzdEZpbHRlckJ1aWxkZXIsXG4gIFBvc3RncmVzdFRyYW5zZm9ybUJ1aWxkZXIsXG4gIFBvc3RncmVzdEJ1aWxkZXIsXG4gIFBvc3RncmVzdEVycm9yLFxufVxuIiwiZXhwb3J0IGNvbnN0IHZlcnNpb24gPSAnMi4xMS4yJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIiwiaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4vdmVyc2lvbic7XG5leHBvcnQgY29uc3QgREVGQVVMVF9IRUFERVJTID0geyAnWC1DbGllbnQtSW5mbyc6IGByZWFsdGltZS1qcy8ke3ZlcnNpb259YCB9O1xuZXhwb3J0IGNvbnN0IFZTTiA9ICcxLjAuMCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FT1VUID0gMTAwMDA7XG5leHBvcnQgY29uc3QgV1NfQ0xPU0VfTk9STUFMID0gMTAwMDtcbmV4cG9ydCB2YXIgU09DS0VUX1NUQVRFUztcbihmdW5jdGlvbiAoU09DS0VUX1NUQVRFUykge1xuICAgIFNPQ0tFVF9TVEFURVNbU09DS0VUX1NUQVRFU1tcImNvbm5lY3RpbmdcIl0gPSAwXSA9IFwiY29ubmVjdGluZ1wiO1xuICAgIFNPQ0tFVF9TVEFURVNbU09DS0VUX1NUQVRFU1tcIm9wZW5cIl0gPSAxXSA9IFwib3BlblwiO1xuICAgIFNPQ0tFVF9TVEFURVNbU09DS0VUX1NUQVRFU1tcImNsb3NpbmdcIl0gPSAyXSA9IFwiY2xvc2luZ1wiO1xuICAgIFNPQ0tFVF9TVEFURVNbU09DS0VUX1NUQVRFU1tcImNsb3NlZFwiXSA9IDNdID0gXCJjbG9zZWRcIjtcbn0pKFNPQ0tFVF9TVEFURVMgfHwgKFNPQ0tFVF9TVEFURVMgPSB7fSkpO1xuZXhwb3J0IHZhciBDSEFOTkVMX1NUQVRFUztcbihmdW5jdGlvbiAoQ0hBTk5FTF9TVEFURVMpIHtcbiAgICBDSEFOTkVMX1NUQVRFU1tcImNsb3NlZFwiXSA9IFwiY2xvc2VkXCI7XG4gICAgQ0hBTk5FTF9TVEFURVNbXCJlcnJvcmVkXCJdID0gXCJlcnJvcmVkXCI7XG4gICAgQ0hBTk5FTF9TVEFURVNbXCJqb2luZWRcIl0gPSBcImpvaW5lZFwiO1xuICAgIENIQU5ORUxfU1RBVEVTW1wiam9pbmluZ1wiXSA9IFwiam9pbmluZ1wiO1xuICAgIENIQU5ORUxfU1RBVEVTW1wibGVhdmluZ1wiXSA9IFwibGVhdmluZ1wiO1xufSkoQ0hBTk5FTF9TVEFURVMgfHwgKENIQU5ORUxfU1RBVEVTID0ge30pKTtcbmV4cG9ydCB2YXIgQ0hBTk5FTF9FVkVOVFM7XG4oZnVuY3Rpb24gKENIQU5ORUxfRVZFTlRTKSB7XG4gICAgQ0hBTk5FTF9FVkVOVFNbXCJjbG9zZVwiXSA9IFwicGh4X2Nsb3NlXCI7XG4gICAgQ0hBTk5FTF9FVkVOVFNbXCJlcnJvclwiXSA9IFwicGh4X2Vycm9yXCI7XG4gICAgQ0hBTk5FTF9FVkVOVFNbXCJqb2luXCJdID0gXCJwaHhfam9pblwiO1xuICAgIENIQU5ORUxfRVZFTlRTW1wicmVwbHlcIl0gPSBcInBoeF9yZXBseVwiO1xuICAgIENIQU5ORUxfRVZFTlRTW1wibGVhdmVcIl0gPSBcInBoeF9sZWF2ZVwiO1xuICAgIENIQU5ORUxfRVZFTlRTW1wiYWNjZXNzX3Rva2VuXCJdID0gXCJhY2Nlc3NfdG9rZW5cIjtcbn0pKENIQU5ORUxfRVZFTlRTIHx8IChDSEFOTkVMX0VWRU5UUyA9IHt9KSk7XG5leHBvcnQgdmFyIFRSQU5TUE9SVFM7XG4oZnVuY3Rpb24gKFRSQU5TUE9SVFMpIHtcbiAgICBUUkFOU1BPUlRTW1wid2Vic29ja2V0XCJdID0gXCJ3ZWJzb2NrZXRcIjtcbn0pKFRSQU5TUE9SVFMgfHwgKFRSQU5TUE9SVFMgPSB7fSkpO1xuZXhwb3J0IHZhciBDT05ORUNUSU9OX1NUQVRFO1xuKGZ1bmN0aW9uIChDT05ORUNUSU9OX1NUQVRFKSB7XG4gICAgQ09OTkVDVElPTl9TVEFURVtcIkNvbm5lY3RpbmdcIl0gPSBcImNvbm5lY3RpbmdcIjtcbiAgICBDT05ORUNUSU9OX1NUQVRFW1wiT3BlblwiXSA9IFwib3BlblwiO1xuICAgIENPTk5FQ1RJT05fU1RBVEVbXCJDbG9zaW5nXCJdID0gXCJjbG9zaW5nXCI7XG4gICAgQ09OTkVDVElPTl9TVEFURVtcIkNsb3NlZFwiXSA9IFwiY2xvc2VkXCI7XG59KShDT05ORUNUSU9OX1NUQVRFIHx8IChDT05ORUNUSU9OX1NUQVRFID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiLCIvLyBUaGlzIGZpbGUgZHJhd3MgaGVhdmlseSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9waG9lbml4ZnJhbWV3b3JrL3Bob2VuaXgvY29tbWl0L2NmMDk4ZTljZjdhNDRlZTY0NzlkMzFkOTExYTk3ZDNjNzQzMGM2ZmVcbi8vIExpY2Vuc2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9waG9lbml4ZnJhbWV3b3JrL3Bob2VuaXgvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZFxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSEVBREVSX0xFTkdUSCA9IDE7XG4gICAgfVxuICAgIGRlY29kZShyYXdQYXlsb2FkLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAocmF3UGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLl9iaW5hcnlEZWNvZGUocmF3UGF5bG9hZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmF3UGF5bG9hZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhKU09OLnBhcnNlKHJhd1BheWxvYWQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2soe30pO1xuICAgIH1cbiAgICBfYmluYXJ5RGVjb2RlKGJ1ZmZlcikge1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUJyb2FkY2FzdChidWZmZXIsIHZpZXcsIGRlY29kZXIpO1xuICAgIH1cbiAgICBfZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2Rlcikge1xuICAgICAgICBjb25zdCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDEpO1xuICAgICAgICBjb25zdCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDIpO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgMjtcbiAgICAgICAgY29uc3QgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKTtcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdG9waWNTaXplO1xuICAgICAgICBjb25zdCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpO1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyBldmVudFNpemU7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKSkpO1xuICAgICAgICByZXR1cm4geyByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXplci5qcy5tYXAiLCIvKipcbiAqIENyZWF0ZXMgYSB0aW1lciB0aGF0IGFjY2VwdHMgYSBgdGltZXJDYWxjYCBmdW5jdGlvbiB0byBwZXJmb3JtIGNhbGN1bGF0ZWQgdGltZW91dCByZXRyaWVzLCBzdWNoIGFzIGV4cG9uZW50aWFsIGJhY2tvZmYuXG4gKlxuICogQGV4YW1wbGVcbiAqICAgIGxldCByZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcigoKSA9PiB0aGlzLmNvbm5lY3QoKSwgZnVuY3Rpb24odHJpZXMpe1xuICogICAgICByZXR1cm4gWzEwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gKiAgICB9KVxuICogICAgcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICogICAgcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgNTAwMFxuICogICAgcmVjb25uZWN0VGltZXIucmVzZXQoKVxuICogICAgcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHRpbWVyQ2FsYykge1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMudGltZXJDYWxjID0gdGltZXJDYWxjO1xuICAgICAgICB0aGlzLnRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRyaWVzID0gMDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLnRpbWVyQ2FsYyA9IHRpbWVyQ2FsYztcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudHJpZXMgPSAwO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgYW55IHByZXZpb3VzIHNjaGVkdWxlVGltZW91dCBhbmQgc2NoZWR1bGVzIGNhbGxiYWNrXG4gICAgc2NoZWR1bGVUaW1lb3V0KCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJpZXMgPSB0aGlzLnRyaWVzICsgMTtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soKTtcbiAgICAgICAgfSwgdGhpcy50aW1lckNhbGModGhpcy50cmllcyArIDEpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMgdG8gY29udmVydCB0aGUgY2hhbmdlIFBheWxvYWQgaW50byBuYXRpdmUgSlMgdHlwZXMuXG4gKi9cbi8vIEFkYXB0ZWQgZnJvbSBlcGdzcWwgKHNyYy9lcGdzcWxfYmluYXJ5LmVybCksIHRoaXMgbW9kdWxlIGxpY2Vuc2VkIHVuZGVyXG4vLyAzLWNsYXVzZSBCU0QgZm91bmQgaGVyZTogaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2VwZ3NxbC9lcGdzcWwvZGV2ZWwvTElDRU5TRVxuZXhwb3J0IHZhciBQb3N0Z3Jlc1R5cGVzO1xuKGZ1bmN0aW9uIChQb3N0Z3Jlc1R5cGVzKSB7XG4gICAgUG9zdGdyZXNUeXBlc1tcImFic3RpbWVcIl0gPSBcImFic3RpbWVcIjtcbiAgICBQb3N0Z3Jlc1R5cGVzW1wiYm9vbFwiXSA9IFwiYm9vbFwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJkYXRlXCJdID0gXCJkYXRlXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcImRhdGVyYW5nZVwiXSA9IFwiZGF0ZXJhbmdlXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcImZsb2F0NFwiXSA9IFwiZmxvYXQ0XCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcImZsb2F0OFwiXSA9IFwiZmxvYXQ4XCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcImludDJcIl0gPSBcImludDJcIjtcbiAgICBQb3N0Z3Jlc1R5cGVzW1wiaW50NFwiXSA9IFwiaW50NFwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJpbnQ0cmFuZ2VcIl0gPSBcImludDRyYW5nZVwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJpbnQ4XCJdID0gXCJpbnQ4XCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcImludDhyYW5nZVwiXSA9IFwiaW50OHJhbmdlXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcImpzb25cIl0gPSBcImpzb25cIjtcbiAgICBQb3N0Z3Jlc1R5cGVzW1wianNvbmJcIl0gPSBcImpzb25iXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcIm1vbmV5XCJdID0gXCJtb25leVwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJudW1lcmljXCJdID0gXCJudW1lcmljXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcIm9pZFwiXSA9IFwib2lkXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcInJlbHRpbWVcIl0gPSBcInJlbHRpbWVcIjtcbiAgICBQb3N0Z3Jlc1R5cGVzW1widGV4dFwiXSA9IFwidGV4dFwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJ0aW1lXCJdID0gXCJ0aW1lXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcInRpbWVzdGFtcFwiXSA9IFwidGltZXN0YW1wXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcInRpbWVzdGFtcHR6XCJdID0gXCJ0aW1lc3RhbXB0elwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJ0aW1ldHpcIl0gPSBcInRpbWV0elwiO1xuICAgIFBvc3RncmVzVHlwZXNbXCJ0c3JhbmdlXCJdID0gXCJ0c3JhbmdlXCI7XG4gICAgUG9zdGdyZXNUeXBlc1tcInRzdHpyYW5nZVwiXSA9IFwidHN0enJhbmdlXCI7XG59KShQb3N0Z3Jlc1R5cGVzIHx8IChQb3N0Z3Jlc1R5cGVzID0ge30pKTtcbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgY29sdW1ucyBhbmQgYW4gb2JqZWN0IG9mIHN0cmluZyB2YWx1ZXMgdGhlbiBjb252ZXJ0cyBlYWNoIHN0cmluZyB2YWx1ZVxuICogdG8gaXRzIG1hcHBlZCB0eXBlLlxuICpcbiAqIEBwYXJhbSB7e25hbWU6IFN0cmluZywgdHlwZTogU3RyaW5nfVtdfSBjb2x1bW5zXG4gKiBAcGFyYW0ge09iamVjdH0gcmVjb3JkXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBUaGUgbWFwIG9mIHZhcmlvdXMgb3B0aW9ucyB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvIHRoZSBtYXBwZXJcbiAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbnMuc2tpcFR5cGVzIFRoZSBhcnJheSBvZiB0eXBlcyB0aGF0IHNob3VsZCBub3QgYmUgY29udmVydGVkXG4gKlxuICogQGV4YW1wbGUgY29udmVydENoYW5nZURhdGEoW3tuYW1lOiAnZmlyc3RfbmFtZScsIHR5cGU6ICd0ZXh0J30sIHtuYW1lOiAnYWdlJywgdHlwZTogJ2ludDQnfV0sIHtmaXJzdF9uYW1lOiAnUGF1bCcsIGFnZTonMzMnfSwge30pXG4gKiAvLz0+eyBmaXJzdF9uYW1lOiAnUGF1bCcsIGFnZTogMzMgfVxuICovXG5leHBvcnQgY29uc3QgY29udmVydENoYW5nZURhdGEgPSAoY29sdW1ucywgcmVjb3JkLCBvcHRpb25zID0ge30pID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3Qgc2tpcFR5cGVzID0gKF9hID0gb3B0aW9ucy5za2lwVHlwZXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhyZWNvcmQpLnJlZHVjZSgoYWNjLCByZWNfa2V5KSA9PiB7XG4gICAgICAgIGFjY1tyZWNfa2V5XSA9IGNvbnZlcnRDb2x1bW4ocmVjX2tleSwgY29sdW1ucywgcmVjb3JkLCBza2lwVHlwZXMpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn07XG4vKipcbiAqIENvbnZlcnRzIHRoZSB2YWx1ZSBvZiBhbiBpbmRpdmlkdWFsIGNvbHVtbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29sdW1uTmFtZSBUaGUgY29sdW1uIHRoYXQgeW91IHdhbnQgdG8gY29udmVydFxuICogQHBhcmFtIHt7bmFtZTogU3RyaW5nLCB0eXBlOiBTdHJpbmd9W119IGNvbHVtbnMgQWxsIG9mIHRoZSBjb2x1bW5zXG4gKiBAcGFyYW0ge09iamVjdH0gcmVjb3JkIFRoZSBtYXAgb2Ygc3RyaW5nIHZhbHVlc1xuICogQHBhcmFtIHtBcnJheX0gc2tpcFR5cGVzIEFuIGFycmF5IG9mIHR5cGVzIHRoYXQgc2hvdWxkIG5vdCBiZSBjb252ZXJ0ZWRcbiAqIEByZXR1cm4ge29iamVjdH0gVXNlbGVzcyBpbmZvcm1hdGlvblxuICpcbiAqIEBleGFtcGxlIGNvbnZlcnRDb2x1bW4oJ2FnZScsIFt7bmFtZTogJ2ZpcnN0X25hbWUnLCB0eXBlOiAndGV4dCd9LCB7bmFtZTogJ2FnZScsIHR5cGU6ICdpbnQ0J31dLCB7Zmlyc3RfbmFtZTogJ1BhdWwnLCBhZ2U6ICczMyd9LCBbXSlcbiAqIC8vPT4gMzNcbiAqIEBleGFtcGxlIGNvbnZlcnRDb2x1bW4oJ2FnZScsIFt7bmFtZTogJ2ZpcnN0X25hbWUnLCB0eXBlOiAndGV4dCd9LCB7bmFtZTogJ2FnZScsIHR5cGU6ICdpbnQ0J31dLCB7Zmlyc3RfbmFtZTogJ1BhdWwnLCBhZ2U6ICczMyd9LCBbJ2ludDQnXSlcbiAqIC8vPT4gXCIzM1wiXG4gKi9cbmV4cG9ydCBjb25zdCBjb252ZXJ0Q29sdW1uID0gKGNvbHVtbk5hbWUsIGNvbHVtbnMsIHJlY29yZCwgc2tpcFR5cGVzKSA9PiB7XG4gICAgY29uc3QgY29sdW1uID0gY29sdW1ucy5maW5kKCh4KSA9PiB4Lm5hbWUgPT09IGNvbHVtbk5hbWUpO1xuICAgIGNvbnN0IGNvbFR5cGUgPSBjb2x1bW4gPT09IG51bGwgfHwgY29sdW1uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb2x1bW4udHlwZTtcbiAgICBjb25zdCB2YWx1ZSA9IHJlY29yZFtjb2x1bW5OYW1lXTtcbiAgICBpZiAoY29sVHlwZSAmJiAhc2tpcFR5cGVzLmluY2x1ZGVzKGNvbFR5cGUpKSB7XG4gICAgICAgIHJldHVybiBjb252ZXJ0Q2VsbChjb2xUeXBlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBub29wKHZhbHVlKTtcbn07XG4vKipcbiAqIElmIHRoZSB2YWx1ZSBvZiB0aGUgY2VsbCBpcyBgbnVsbGAsIHJldHVybnMgbnVsbC5cbiAqIE90aGVyd2lzZSBjb252ZXJ0cyB0aGUgc3RyaW5nIHZhbHVlIHRvIHRoZSBjb3JyZWN0IHR5cGUuXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBBIHBvc3RncmVzIGNvbHVtbiB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgVGhlIGNlbGwgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZSBjb252ZXJ0Q2VsbCgnYm9vbCcsICd0JylcbiAqIC8vPT4gdHJ1ZVxuICogQGV4YW1wbGUgY29udmVydENlbGwoJ2ludDgnLCAnMTAnKVxuICogLy89PiAxMFxuICogQGV4YW1wbGUgY29udmVydENlbGwoJ19pbnQ0JywgJ3sxLDIsMyw0fScpXG4gKiAvLz0+IFsxLDIsMyw0XVxuICovXG5leHBvcnQgY29uc3QgY29udmVydENlbGwgPSAodHlwZSwgdmFsdWUpID0+IHtcbiAgICAvLyBpZiBkYXRhIHR5cGUgaXMgYW4gYXJyYXlcbiAgICBpZiAodHlwZS5jaGFyQXQoMCkgPT09ICdfJykge1xuICAgICAgICBjb25zdCBkYXRhVHlwZSA9IHR5cGUuc2xpY2UoMSwgdHlwZS5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gdG9BcnJheSh2YWx1ZSwgZGF0YVR5cGUpO1xuICAgIH1cbiAgICAvLyBJZiBub3QgbnVsbCwgY29udmVydCB0byBjb3JyZWN0IHR5cGUuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy5ib29sOlxuICAgICAgICAgICAgcmV0dXJuIHRvQm9vbGVhbih2YWx1ZSk7XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy5mbG9hdDQ6XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy5mbG9hdDg6XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy5pbnQyOlxuICAgICAgICBjYXNlIFBvc3RncmVzVHlwZXMuaW50NDpcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmludDg6XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy5udW1lcmljOlxuICAgICAgICBjYXNlIFBvc3RncmVzVHlwZXMub2lkOlxuICAgICAgICAgICAgcmV0dXJuIHRvTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmpzb246XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy5qc29uYjpcbiAgICAgICAgICAgIHJldHVybiB0b0pzb24odmFsdWUpO1xuICAgICAgICBjYXNlIFBvc3RncmVzVHlwZXMudGltZXN0YW1wOlxuICAgICAgICAgICAgcmV0dXJuIHRvVGltZXN0YW1wU3RyaW5nKHZhbHVlKTsgLy8gRm9ybWF0IHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBQb3N0Z1JFU1RcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmFic3RpbWU6IC8vIFRvIGFsbG93IHVzZXJzIHRvIGNhc3QgaXQgYmFzZWQgb24gVGltZXpvbmVcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmRhdGU6IC8vIFRvIGFsbG93IHVzZXJzIHRvIGNhc3QgaXQgYmFzZWQgb24gVGltZXpvbmVcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmRhdGVyYW5nZTpcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmludDRyYW5nZTpcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLmludDhyYW5nZTpcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLm1vbmV5OlxuICAgICAgICBjYXNlIFBvc3RncmVzVHlwZXMucmVsdGltZTogLy8gVG8gYWxsb3cgdXNlcnMgdG8gY2FzdCBpdCBiYXNlZCBvbiBUaW1lem9uZVxuICAgICAgICBjYXNlIFBvc3RncmVzVHlwZXMudGV4dDpcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLnRpbWU6IC8vIFRvIGFsbG93IHVzZXJzIHRvIGNhc3QgaXQgYmFzZWQgb24gVGltZXpvbmVcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLnRpbWVzdGFtcHR6OiAvLyBUbyBhbGxvdyB1c2VycyB0byBjYXN0IGl0IGJhc2VkIG9uIFRpbWV6b25lXG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy50aW1ldHo6IC8vIFRvIGFsbG93IHVzZXJzIHRvIGNhc3QgaXQgYmFzZWQgb24gVGltZXpvbmVcbiAgICAgICAgY2FzZSBQb3N0Z3Jlc1R5cGVzLnRzcmFuZ2U6XG4gICAgICAgIGNhc2UgUG9zdGdyZXNUeXBlcy50c3R6cmFuZ2U6XG4gICAgICAgICAgICByZXR1cm4gbm9vcCh2YWx1ZSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlIGZvciByZW1haW5pbmcgdHlwZXNcbiAgICAgICAgICAgIHJldHVybiBub29wKHZhbHVlKTtcbiAgICB9XG59O1xuY29uc3Qgbm9vcCA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgdG9Cb29sZWFuID0gKHZhbHVlKSA9PiB7XG4gICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICBjYXNlICd0JzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRvTnVtYmVyID0gKHZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VkVmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkVmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCB0b0pzb24gPSAodmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEpTT04gcGFyc2UgZXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbi8qKlxuICogQ29udmVydHMgYSBQb3N0Z3JlcyBBcnJheSBpbnRvIGEgbmF0aXZlIEpTIGFycmF5XG4gKlxuICogQGV4YW1wbGUgdG9BcnJheSgne30nLCAnaW50NCcpXG4gKiAvLz0+IFtdXG4gKiBAZXhhbXBsZSB0b0FycmF5KCd7XCJbMjAyMS0wMS0wMSwyMDIxLTEyLTMxKVwiLFwiKDIwMjEtMDEtMDEsMjAyMS0xMi0zMl1cIn0nLCAnZGF0ZXJhbmdlJylcbiAqIC8vPT4gWydbMjAyMS0wMS0wMSwyMDIxLTEyLTMxKScsICcoMjAyMS0wMS0wMSwyMDIxLTEyLTMyXSddXG4gKiBAZXhhbXBsZSB0b0FycmF5KFsxLDIsMyw0XSwgJ2ludDQnKVxuICogLy89PiBbMSwyLDMsNF1cbiAqL1xuZXhwb3J0IGNvbnN0IHRvQXJyYXkgPSAodmFsdWUsIHR5cGUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RJZHggPSB2YWx1ZS5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGNsb3NlQnJhY2UgPSB2YWx1ZVtsYXN0SWR4XTtcbiAgICBjb25zdCBvcGVuQnJhY2UgPSB2YWx1ZVswXTtcbiAgICAvLyBDb25maXJtIHZhbHVlIGlzIGEgUG9zdGdyZXMgYXJyYXkgYnkgY2hlY2tpbmcgY3VybHkgYnJhY2tldHNcbiAgICBpZiAob3BlbkJyYWNlID09PSAneycgJiYgY2xvc2VCcmFjZSA9PT0gJ30nKSB7XG4gICAgICAgIGxldCBhcnI7XG4gICAgICAgIGNvbnN0IHZhbFRyaW0gPSB2YWx1ZS5zbGljZSgxLCBsYXN0SWR4KTtcbiAgICAgICAgLy8gVE9ETzogZmluZCBhIGJldHRlciBzb2x1dGlvbiB0byBzZXBhcmF0ZSBQb3N0Z3JlcyBhcnJheSBkYXRhXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhcnIgPSBKU09OLnBhcnNlKCdbJyArIHZhbFRyaW0gKyAnXScpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICAvLyBXQVJOSU5HOiBzcGxpdHRpbmcgb24gY29tbWEgZG9lcyBub3QgY292ZXIgYWxsIGVkZ2UgY2FzZXNcbiAgICAgICAgICAgIGFyciA9IHZhbFRyaW0gPyB2YWxUcmltLnNwbGl0KCcsJykgOiBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyLm1hcCgodmFsKSA9PiBjb252ZXJ0Q2VsbCh0eXBlLCB2YWwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbi8qKlxuICogRml4ZXMgdGltZXN0YW1wIHRvIGJlIElTTy04NjAxLiBTd2FwcyB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgZGF0ZSBhbmQgdGltZSBmb3IgYSAnVCdcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vc3VwYWJhc2Uvc3VwYWJhc2UvaXNzdWVzLzE4XG4gKlxuICogQGV4YW1wbGUgdG9UaW1lc3RhbXBTdHJpbmcoJzIwMTktMDktMTAgMDA6MDA6MDAnKVxuICogLy89PiAnMjAxOS0wOS0xMFQwMDowMDowMCdcbiAqL1xuZXhwb3J0IGNvbnN0IHRvVGltZXN0YW1wU3RyaW5nID0gKHZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoJyAnLCAnVCcpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IGh0dHBFbmRwb2ludFVSTCA9IChzb2NrZXRVcmwpID0+IHtcbiAgICBsZXQgdXJsID0gc29ja2V0VXJsO1xuICAgIHVybCA9IHVybC5yZXBsYWNlKC9ed3MvaSwgJ2h0dHAnKTtcbiAgICB1cmwgPSB1cmwucmVwbGFjZSgvKFxcL3NvY2tldFxcL3dlYnNvY2tldHxcXC9zb2NrZXR8XFwvd2Vic29ja2V0KVxcLz8kL2ksICcnKTtcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcLyskLywgJycpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybWVycy5qcy5tYXAiLCJpbXBvcnQgeyBERUZBVUxUX1RJTUVPVVQgfSBmcm9tICcuLi9saWIvY29uc3RhbnRzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1c2gge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIHRoZSBQdXNoXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhbm5lbCBUaGUgQ2hhbm5lbFxuICAgICAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQsIGZvciBleGFtcGxlIGBcInBoeF9qb2luXCJgXG4gICAgICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogMTIzfWBcbiAgICAgKiBAcGFyYW0gdGltZW91dCBUaGUgcHVzaCB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNoYW5uZWwsIGV2ZW50LCBwYXlsb2FkID0ge30sIHRpbWVvdXQgPSBERUZBVUxUX1RJTUVPVVQpIHtcbiAgICAgICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbDtcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLnBheWxvYWQgPSBwYXlsb2FkO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICB0aGlzLnNlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lb3V0VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVmID0gJyc7XG4gICAgICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZWNIb29rcyA9IFtdO1xuICAgICAgICB0aGlzLnJlZkV2ZW50ID0gbnVsbDtcbiAgICB9XG4gICAgcmVzZW5kKHRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgdGhpcy5fY2FuY2VsUmVmRXZlbnQoKTtcbiAgICAgICAgdGhpcy5yZWYgPSAnJztcbiAgICAgICAgdGhpcy5yZWZFdmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VuZCgpO1xuICAgIH1cbiAgICBzZW5kKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzUmVjZWl2ZWQoJ3RpbWVvdXQnKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuc2VudCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7XG4gICAgICAgICAgICB0b3BpYzogdGhpcy5jaGFubmVsLnRvcGljLFxuICAgICAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgICAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQsXG4gICAgICAgICAgICByZWY6IHRoaXMucmVmLFxuICAgICAgICAgICAgam9pbl9yZWY6IHRoaXMuY2hhbm5lbC5fam9pblJlZigpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlUGF5bG9hZChwYXlsb2FkKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXlsb2FkKSwgcGF5bG9hZCk7XG4gICAgfVxuICAgIHJlY2VpdmUoc3RhdHVzLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLl9oYXNSZWNlaXZlZChzdGF0dXMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygoX2EgPSB0aGlzLnJlY2VpdmVkUmVzcCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlY0hvb2tzLnB1c2goeyBzdGF0dXMsIGNhbGxiYWNrIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RhcnRUaW1lb3V0KCkge1xuICAgICAgICBpZiAodGhpcy50aW1lb3V0VGltZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZiA9IHRoaXMuY2hhbm5lbC5zb2NrZXQuX21ha2VSZWYoKTtcbiAgICAgICAgdGhpcy5yZWZFdmVudCA9IHRoaXMuY2hhbm5lbC5fcmVwbHlFdmVudE5hbWUodGhpcy5yZWYpO1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxSZWZFdmVudCgpO1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsVGltZW91dCgpO1xuICAgICAgICAgICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBwYXlsb2FkO1xuICAgICAgICAgICAgdGhpcy5fbWF0Y2hSZWNlaXZlKHBheWxvYWQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYW5uZWwuX29uKHRoaXMucmVmRXZlbnQsIHt9LCBjYWxsYmFjayk7XG4gICAgICAgIHRoaXMudGltZW91dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3RpbWVvdXQnLCB7fSk7XG4gICAgICAgIH0sIHRoaXMudGltZW91dCk7XG4gICAgfVxuICAgIHRyaWdnZXIoc3RhdHVzLCByZXNwb25zZSkge1xuICAgICAgICBpZiAodGhpcy5yZWZFdmVudClcbiAgICAgICAgICAgIHRoaXMuY2hhbm5lbC5fdHJpZ2dlcih0aGlzLnJlZkV2ZW50LCB7IHN0YXR1cywgcmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbFJlZkV2ZW50KCk7XG4gICAgICAgIHRoaXMuX2NhbmNlbFRpbWVvdXQoKTtcbiAgICB9XG4gICAgX2NhbmNlbFJlZkV2ZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMucmVmRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5uZWwuX29mZih0aGlzLnJlZkV2ZW50LCB7fSk7XG4gICAgfVxuICAgIF9jYW5jZWxUaW1lb3V0KCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpO1xuICAgICAgICB0aGlzLnRpbWVvdXRUaW1lciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgX21hdGNoUmVjZWl2ZSh7IHN0YXR1cywgcmVzcG9uc2UsIH0pIHtcbiAgICAgICAgdGhpcy5yZWNIb29rc1xuICAgICAgICAgICAgLmZpbHRlcigoaCkgPT4gaC5zdGF0dXMgPT09IHN0YXR1cylcbiAgICAgICAgICAgIC5mb3JFYWNoKChoKSA9PiBoLmNhbGxiYWNrKHJlc3BvbnNlKSk7XG4gICAgfVxuICAgIF9oYXNSZWNlaXZlZChzdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwICYmIHRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cyA9PT0gc3RhdHVzO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1c2guanMubWFwIiwiLypcbiAgVGhpcyBmaWxlIGRyYXdzIGhlYXZpbHkgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vcGhvZW5peGZyYW1ld29yay9waG9lbml4L2Jsb2IvZDM0NGVjMGE3MzJhYjRlZTIwNDIxNWIzMWRlNjljZjRiZTcyZTNiZi9hc3NldHMvanMvcGhvZW5peC9wcmVzZW5jZS5qc1xuICBMaWNlbnNlOiBodHRwczovL2dpdGh1Yi5jb20vcGhvZW5peGZyYW1ld29yay9waG9lbml4L2Jsb2IvZDM0NGVjMGE3MzJhYjRlZTIwNDIxNWIzMWRlNjljZjRiZTcyZTNiZi9MSUNFTlNFLm1kXG4qL1xuZXhwb3J0IHZhciBSRUFMVElNRV9QUkVTRU5DRV9MSVNURU5fRVZFTlRTO1xuKGZ1bmN0aW9uIChSRUFMVElNRV9QUkVTRU5DRV9MSVNURU5fRVZFTlRTKSB7XG4gICAgUkVBTFRJTUVfUFJFU0VOQ0VfTElTVEVOX0VWRU5UU1tcIlNZTkNcIl0gPSBcInN5bmNcIjtcbiAgICBSRUFMVElNRV9QUkVTRU5DRV9MSVNURU5fRVZFTlRTW1wiSk9JTlwiXSA9IFwiam9pblwiO1xuICAgIFJFQUxUSU1FX1BSRVNFTkNFX0xJU1RFTl9FVkVOVFNbXCJMRUFWRVwiXSA9IFwibGVhdmVcIjtcbn0pKFJFQUxUSU1FX1BSRVNFTkNFX0xJU1RFTl9FVkVOVFMgfHwgKFJFQUxUSU1FX1BSRVNFTkNFX0xJU1RFTl9FVkVOVFMgPSB7fSkpO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVhbHRpbWVQcmVzZW5jZSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIFByZXNlbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYW5uZWwgLSBUaGUgUmVhbHRpbWVDaGFubmVsXG4gICAgICogQHBhcmFtIG9wdHMgLSBUaGUgb3B0aW9ucyxcbiAgICAgKiAgICAgICAgZm9yIGV4YW1wbGUgYHtldmVudHM6IHtzdGF0ZTogJ3N0YXRlJywgZGlmZjogJ2RpZmYnfX1gXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2hhbm5lbCwgb3B0cykge1xuICAgICAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsO1xuICAgICAgICB0aGlzLnN0YXRlID0ge307XG4gICAgICAgIHRoaXMucGVuZGluZ0RpZmZzID0gW107XG4gICAgICAgIHRoaXMuam9pblJlZiA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FsbGVyID0ge1xuICAgICAgICAgICAgb25Kb2luOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICBvbkxlYXZlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICBvblN5bmM6ICgpID0+IHsgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5ldmVudHMpIHx8IHtcbiAgICAgICAgICAgIHN0YXRlOiAncHJlc2VuY2Vfc3RhdGUnLFxuICAgICAgICAgICAgZGlmZjogJ3ByZXNlbmNlX2RpZmYnLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYW5uZWwuX29uKGV2ZW50cy5zdGF0ZSwge30sIChuZXdTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBvbkpvaW4sIG9uTGVhdmUsIG9uU3luYyB9ID0gdGhpcy5jYWxsZXI7XG4gICAgICAgICAgICB0aGlzLmpvaW5SZWYgPSB0aGlzLmNoYW5uZWwuX2pvaW5SZWYoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBSZWFsdGltZVByZXNlbmNlLnN5bmNTdGF0ZSh0aGlzLnN0YXRlLCBuZXdTdGF0ZSwgb25Kb2luLCBvbkxlYXZlKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0RpZmZzLmZvckVhY2goKGRpZmYpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gUmVhbHRpbWVQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdO1xuICAgICAgICAgICAgb25TeW5jKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoYW5uZWwuX29uKGV2ZW50cy5kaWZmLCB7fSwgKGRpZmYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25Kb2luLCBvbkxlYXZlLCBvblN5bmMgfSA9IHRoaXMuY2FsbGVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5QZW5kaW5nU3luY1N0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdEaWZmcy5wdXNoKGRpZmYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFJlYWx0aW1lUHJlc2VuY2Uuc3luY0RpZmYodGhpcy5zdGF0ZSwgZGlmZiwgb25Kb2luLCBvbkxlYXZlKTtcbiAgICAgICAgICAgICAgICBvblN5bmMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub25Kb2luKChrZXksIGN1cnJlbnRQcmVzZW5jZXMsIG5ld1ByZXNlbmNlcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsLl90cmlnZ2VyKCdwcmVzZW5jZScsIHtcbiAgICAgICAgICAgICAgICBldmVudDogJ2pvaW4nLFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJlc2VuY2VzLFxuICAgICAgICAgICAgICAgIG5ld1ByZXNlbmNlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbkxlYXZlKChrZXksIGN1cnJlbnRQcmVzZW5jZXMsIGxlZnRQcmVzZW5jZXMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hhbm5lbC5fdHJpZ2dlcigncHJlc2VuY2UnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdsZWF2ZScsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmVzZW5jZXMsXG4gICAgICAgICAgICAgICAgbGVmdFByZXNlbmNlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vblN5bmMoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsLl90cmlnZ2VyKCdwcmVzZW5jZScsIHsgZXZlbnQ6ICdzeW5jJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gc3luYyB0aGUgbGlzdCBvZiBwcmVzZW5jZXMgb24gdGhlIHNlcnZlciB3aXRoIHRoZVxuICAgICAqIGNsaWVudCdzIHN0YXRlLlxuICAgICAqXG4gICAgICogQW4gb3B0aW9uYWwgYG9uSm9pbmAgYW5kIGBvbkxlYXZlYCBjYWxsYmFjayBjYW4gYmUgcHJvdmlkZWQgdG9cbiAgICAgKiByZWFjdCB0byBjaGFuZ2VzIGluIHRoZSBjbGllbnQncyBsb2NhbCBwcmVzZW5jZXMgYWNyb3NzXG4gICAgICogZGlzY29ubmVjdHMgYW5kIHJlY29ubmVjdHMgd2l0aCB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3RhdGljIHN5bmNTdGF0ZShjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmNsb25lRGVlcChjdXJyZW50U3RhdGUpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZFN0YXRlID0gdGhpcy50cmFuc2Zvcm1TdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgIGNvbnN0IGpvaW5zID0ge307XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHt9O1xuICAgICAgICB0aGlzLm1hcChzdGF0ZSwgKGtleSwgcHJlc2VuY2VzKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybWVkU3RhdGVba2V5XSkge1xuICAgICAgICAgICAgICAgIGxlYXZlc1trZXldID0gcHJlc2VuY2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXAodHJhbnNmb3JtZWRTdGF0ZSwgKGtleSwgbmV3UHJlc2VuY2VzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UHJlc2VuY2VzID0gc3RhdGVba2V5XTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UHJlc2VuY2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UHJlc2VuY2VSZWZzID0gbmV3UHJlc2VuY2VzLm1hcCgobSkgPT4gbS5wcmVzZW5jZV9yZWYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1clByZXNlbmNlUmVmcyA9IGN1cnJlbnRQcmVzZW5jZXMubWFwKChtKSA9PiBtLnByZXNlbmNlX3JlZik7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbmVkUHJlc2VuY2VzID0gbmV3UHJlc2VuY2VzLmZpbHRlcigobSkgPT4gY3VyUHJlc2VuY2VSZWZzLmluZGV4T2YobS5wcmVzZW5jZV9yZWYpIDwgMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdFByZXNlbmNlcyA9IGN1cnJlbnRQcmVzZW5jZXMuZmlsdGVyKChtKSA9PiBuZXdQcmVzZW5jZVJlZnMuaW5kZXhPZihtLnByZXNlbmNlX3JlZikgPCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoam9pbmVkUHJlc2VuY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgam9pbnNba2V5XSA9IGpvaW5lZFByZXNlbmNlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxlZnRQcmVzZW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZWF2ZXNba2V5XSA9IGxlZnRQcmVzZW5jZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNEaWZmKHN0YXRlLCB7IGpvaW5zLCBsZWF2ZXMgfSwgb25Kb2luLCBvbkxlYXZlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXNlZCB0byBzeW5jIGEgZGlmZiBvZiBwcmVzZW5jZSBqb2luIGFuZCBsZWF2ZSBldmVudHMgZnJvbSB0aGVcbiAgICAgKiBzZXJ2ZXIsIGFzIHRoZXkgaGFwcGVuLlxuICAgICAqXG4gICAgICogTGlrZSBgc3luY1N0YXRlYCwgYHN5bmNEaWZmYCBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZFxuICAgICAqIGBvbkxlYXZlYCBjYWxsYmFja3MgdG8gcmVhY3QgdG8gYSB1c2VyIGpvaW5pbmcgb3IgbGVhdmluZyBmcm9tIGFcbiAgICAgKiBkZXZpY2UuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgc3luY0RpZmYoc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSkge1xuICAgICAgICBjb25zdCB7IGpvaW5zLCBsZWF2ZXMgfSA9IHtcbiAgICAgICAgICAgIGpvaW5zOiB0aGlzLnRyYW5zZm9ybVN0YXRlKGRpZmYuam9pbnMpLFxuICAgICAgICAgICAgbGVhdmVzOiB0aGlzLnRyYW5zZm9ybVN0YXRlKGRpZmYubGVhdmVzKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFvbkpvaW4pIHtcbiAgICAgICAgICAgIG9uSm9pbiA9ICgpID0+IHsgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9uTGVhdmUpIHtcbiAgICAgICAgICAgIG9uTGVhdmUgPSAoKSA9PiB7IH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXAoam9pbnMsIChrZXksIG5ld1ByZXNlbmNlcykgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFByZXNlbmNlcyA9IChfYSA9IHN0YXRlW2tleV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICAgICAgc3RhdGVba2V5XSA9IHRoaXMuY2xvbmVEZWVwKG5ld1ByZXNlbmNlcyk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFByZXNlbmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbmVkUHJlc2VuY2VSZWZzID0gc3RhdGVba2V5XS5tYXAoKG0pID0+IG0ucHJlc2VuY2VfcmVmKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJQcmVzZW5jZXMgPSBjdXJyZW50UHJlc2VuY2VzLmZpbHRlcigobSkgPT4gam9pbmVkUHJlc2VuY2VSZWZzLmluZGV4T2YobS5wcmVzZW5jZV9yZWYpIDwgMCk7XG4gICAgICAgICAgICAgICAgc3RhdGVba2V5XS51bnNoaWZ0KC4uLmN1clByZXNlbmNlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbkpvaW4oa2V5LCBjdXJyZW50UHJlc2VuY2VzLCBuZXdQcmVzZW5jZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXAobGVhdmVzLCAoa2V5LCBsZWZ0UHJlc2VuY2VzKSA9PiB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFByZXNlbmNlcyA9IHN0YXRlW2tleV07XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRQcmVzZW5jZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgcHJlc2VuY2VSZWZzVG9SZW1vdmUgPSBsZWZ0UHJlc2VuY2VzLm1hcCgobSkgPT4gbS5wcmVzZW5jZV9yZWYpO1xuICAgICAgICAgICAgY3VycmVudFByZXNlbmNlcyA9IGN1cnJlbnRQcmVzZW5jZXMuZmlsdGVyKChtKSA9PiBwcmVzZW5jZVJlZnNUb1JlbW92ZS5pbmRleE9mKG0ucHJlc2VuY2VfcmVmKSA8IDApO1xuICAgICAgICAgICAgc3RhdGVba2V5XSA9IGN1cnJlbnRQcmVzZW5jZXM7XG4gICAgICAgICAgICBvbkxlYXZlKGtleSwgY3VycmVudFByZXNlbmNlcywgbGVmdFByZXNlbmNlcyk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFByZXNlbmNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YXRlW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBzdGF0aWMgbWFwKG9iaiwgZnVuYykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5tYXAoKGtleSkgPT4gZnVuYyhrZXksIG9ialtrZXldKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSAnbWV0YXMnIGtleVxuICAgICAqIENoYW5nZSAncGh4X3JlZicgdG8gJ3ByZXNlbmNlX3JlZidcbiAgICAgKiBSZW1vdmUgJ3BoeF9yZWYnIGFuZCAncGh4X3JlZl9wcmV2J1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAvLyByZXR1cm5zIHtcbiAgICAgKiAgYWJjMTIzOiBbXG4gICAgICogICAgeyBwcmVzZW5jZV9yZWY6ICcyJywgdXNlcl9pZDogMSB9LFxuICAgICAqICAgIHsgcHJlc2VuY2VfcmVmOiAnMycsIHVzZXJfaWQ6IDIgfVxuICAgICAqICBdXG4gICAgICogfVxuICAgICAqIFJlYWx0aW1lUHJlc2VuY2UudHJhbnNmb3JtU3RhdGUoe1xuICAgICAqICBhYmMxMjM6IHtcbiAgICAgKiAgICBtZXRhczogW1xuICAgICAqICAgICAgeyBwaHhfcmVmOiAnMicsIHBoeF9yZWZfcHJldjogJzEnIHVzZXJfaWQ6IDEgfSxcbiAgICAgKiAgICAgIHsgcGh4X3JlZjogJzMnLCB1c2VyX2lkOiAyIH1cbiAgICAgKiAgICBdXG4gICAgICogIH1cbiAgICAgKiB9KVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3RhdGljIHRyYW5zZm9ybVN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHN0YXRlID0gdGhpcy5jbG9uZURlZXAoc3RhdGUpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc3RhdGUpLnJlZHVjZSgobmV3U3RhdGUsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJlc2VuY2VzID0gc3RhdGVba2V5XTtcbiAgICAgICAgICAgIGlmICgnbWV0YXMnIGluIHByZXNlbmNlcykge1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlW2tleV0gPSBwcmVzZW5jZXMubWV0YXMubWFwKChwcmVzZW5jZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwcmVzZW5jZVsncHJlc2VuY2VfcmVmJ10gPSBwcmVzZW5jZVsncGh4X3JlZiddO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJlc2VuY2VbJ3BoeF9yZWYnXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHByZXNlbmNlWydwaHhfcmVmX3ByZXYnXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXNlbmNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U3RhdGVba2V5XSA9IHByZXNlbmNlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIGNsb25lRGVlcChvYmopIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBvbkpvaW4oY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jYWxsZXIub25Kb2luID0gY2FsbGJhY2s7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBvbkxlYXZlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGVyLm9uTGVhdmUgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIG9uU3luYyhjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmNhbGxlci5vblN5bmMgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGluUGVuZGluZ1N5bmNTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmpvaW5SZWYgfHwgdGhpcy5qb2luUmVmICE9PSB0aGlzLmNoYW5uZWwuX2pvaW5SZWYoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWFsdGltZVByZXNlbmNlLmpzLm1hcCIsImltcG9ydCB7IENIQU5ORUxfRVZFTlRTLCBDSEFOTkVMX1NUQVRFUyB9IGZyb20gJy4vbGliL2NvbnN0YW50cyc7XG5pbXBvcnQgUHVzaCBmcm9tICcuL2xpYi9wdXNoJztcbmltcG9ydCBUaW1lciBmcm9tICcuL2xpYi90aW1lcic7XG5pbXBvcnQgUmVhbHRpbWVQcmVzZW5jZSBmcm9tICcuL1JlYWx0aW1lUHJlc2VuY2UnO1xuaW1wb3J0ICogYXMgVHJhbnNmb3JtZXJzIGZyb20gJy4vbGliL3RyYW5zZm9ybWVycyc7XG5pbXBvcnQgeyBodHRwRW5kcG9pbnRVUkwgfSBmcm9tICcuL2xpYi90cmFuc2Zvcm1lcnMnO1xuZXhwb3J0IHZhciBSRUFMVElNRV9QT1NUR1JFU19DSEFOR0VTX0xJU1RFTl9FVkVOVDtcbihmdW5jdGlvbiAoUkVBTFRJTUVfUE9TVEdSRVNfQ0hBTkdFU19MSVNURU5fRVZFTlQpIHtcbiAgICBSRUFMVElNRV9QT1NUR1JFU19DSEFOR0VTX0xJU1RFTl9FVkVOVFtcIkFMTFwiXSA9IFwiKlwiO1xuICAgIFJFQUxUSU1FX1BPU1RHUkVTX0NIQU5HRVNfTElTVEVOX0VWRU5UW1wiSU5TRVJUXCJdID0gXCJJTlNFUlRcIjtcbiAgICBSRUFMVElNRV9QT1NUR1JFU19DSEFOR0VTX0xJU1RFTl9FVkVOVFtcIlVQREFURVwiXSA9IFwiVVBEQVRFXCI7XG4gICAgUkVBTFRJTUVfUE9TVEdSRVNfQ0hBTkdFU19MSVNURU5fRVZFTlRbXCJERUxFVEVcIl0gPSBcIkRFTEVURVwiO1xufSkoUkVBTFRJTUVfUE9TVEdSRVNfQ0hBTkdFU19MSVNURU5fRVZFTlQgfHwgKFJFQUxUSU1FX1BPU1RHUkVTX0NIQU5HRVNfTElTVEVOX0VWRU5UID0ge30pKTtcbmV4cG9ydCB2YXIgUkVBTFRJTUVfTElTVEVOX1RZUEVTO1xuKGZ1bmN0aW9uIChSRUFMVElNRV9MSVNURU5fVFlQRVMpIHtcbiAgICBSRUFMVElNRV9MSVNURU5fVFlQRVNbXCJCUk9BRENBU1RcIl0gPSBcImJyb2FkY2FzdFwiO1xuICAgIFJFQUxUSU1FX0xJU1RFTl9UWVBFU1tcIlBSRVNFTkNFXCJdID0gXCJwcmVzZW5jZVwiO1xuICAgIFJFQUxUSU1FX0xJU1RFTl9UWVBFU1tcIlBPU1RHUkVTX0NIQU5HRVNcIl0gPSBcInBvc3RncmVzX2NoYW5nZXNcIjtcbiAgICBSRUFMVElNRV9MSVNURU5fVFlQRVNbXCJTWVNURU1cIl0gPSBcInN5c3RlbVwiO1xufSkoUkVBTFRJTUVfTElTVEVOX1RZUEVTIHx8IChSRUFMVElNRV9MSVNURU5fVFlQRVMgPSB7fSkpO1xuZXhwb3J0IHZhciBSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTO1xuKGZ1bmN0aW9uIChSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTKSB7XG4gICAgUkVBTFRJTUVfU1VCU0NSSUJFX1NUQVRFU1tcIlNVQlNDUklCRURcIl0gPSBcIlNVQlNDUklCRURcIjtcbiAgICBSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTW1wiVElNRURfT1VUXCJdID0gXCJUSU1FRF9PVVRcIjtcbiAgICBSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTW1wiQ0xPU0VEXCJdID0gXCJDTE9TRURcIjtcbiAgICBSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTW1wiQ0hBTk5FTF9FUlJPUlwiXSA9IFwiQ0hBTk5FTF9FUlJPUlwiO1xufSkoUkVBTFRJTUVfU1VCU0NSSUJFX1NUQVRFUyB8fCAoUkVBTFRJTUVfU1VCU0NSSUJFX1NUQVRFUyA9IHt9KSk7XG5leHBvcnQgY29uc3QgUkVBTFRJTUVfQ0hBTk5FTF9TVEFURVMgPSBDSEFOTkVMX1NUQVRFUztcbi8qKiBBIGNoYW5uZWwgaXMgdGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrIG9mIFJlYWx0aW1lXG4gKiBhbmQgbmFycm93cyB0aGUgc2NvcGUgb2YgZGF0YSBmbG93IHRvIHN1YnNjcmliZWQgY2xpZW50cy5cbiAqIFlvdSBjYW4gdGhpbmsgb2YgYSBjaGFubmVsIGFzIGEgY2hhdHJvb20gd2hlcmUgcGFydGljaXBhbnRzIGFyZSBhYmxlIHRvIHNlZSB3aG8ncyBvbmxpbmVcbiAqIGFuZCBzZW5kIGFuZCByZWNlaXZlIG1lc3NhZ2VzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWFsdGltZUNoYW5uZWwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUb3BpYyBuYW1lIGNhbiBiZSBhbnkgc3RyaW5nLiAqL1xuICAgIHRvcGljLCBwYXJhbXMgPSB7IGNvbmZpZzoge30gfSwgc29ja2V0KSB7XG4gICAgICAgIHRoaXMudG9waWMgPSB0b3BpYztcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0ge307XG4gICAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWQ7XG4gICAgICAgIHRoaXMuam9pbmVkT25jZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5zdWJUb3BpYyA9IHRvcGljLnJlcGxhY2UoL15yZWFsdGltZTovaSwgJycpO1xuICAgICAgICB0aGlzLnBhcmFtcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGJyb2FkY2FzdDogeyBhY2s6IGZhbHNlLCBzZWxmOiBmYWxzZSB9LFxuICAgICAgICAgICAgcHJlc2VuY2U6IHsga2V5OiAnJyB9LFxuICAgICAgICAgICAgcHJpdmF0ZTogZmFsc2UsXG4gICAgICAgIH0sIHBhcmFtcy5jb25maWcpO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnNvY2tldC50aW1lb3V0O1xuICAgICAgICB0aGlzLmpvaW5QdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMuam9pbiwgdGhpcy5wYXJhbXMsIHRoaXMudGltZW91dCk7XG4gICAgICAgIHRoaXMucmVqb2luVGltZXIgPSBuZXcgVGltZXIoKCkgPT4gdGhpcy5fcmVqb2luVW50aWxDb25uZWN0ZWQoKSwgdGhpcy5zb2NrZXQucmVjb25uZWN0QWZ0ZXJNcyk7XG4gICAgICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZSgnb2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuam9pbmVkO1xuICAgICAgICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5wdXNoQnVmZmVyLmZvckVhY2goKHB1c2hFdmVudCkgPT4gcHVzaEV2ZW50LnNlbmQoKSk7XG4gICAgICAgICAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX29uQ2xvc2UoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zb2NrZXQubG9nKCdjaGFubmVsJywgYGNsb3NlICR7dGhpcy50b3BpY30gJHt0aGlzLl9qb2luUmVmKCl9YCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkO1xuICAgICAgICAgICAgdGhpcy5zb2NrZXQuX3JlbW92ZSh0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX29uRXJyb3IoKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzTGVhdmluZygpIHx8IHRoaXMuX2lzQ2xvc2VkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5sb2coJ2NoYW5uZWwnLCBgZXJyb3IgJHt0aGlzLnRvcGljfWAsIHJlYXNvbik7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZDtcbiAgICAgICAgICAgIHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoJ3RpbWVvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2lzSm9pbmluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zb2NrZXQubG9nKCdjaGFubmVsJywgYHRpbWVvdXQgJHt0aGlzLnRvcGljfWAsIHRoaXMuam9pblB1c2gudGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZDtcbiAgICAgICAgICAgIHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9vbihDSEFOTkVMX0VWRU5UUy5yZXBseSwge30sIChwYXlsb2FkLCByZWYpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RyaWdnZXIodGhpcy5fcmVwbHlFdmVudE5hbWUocmVmKSwgcGF5bG9hZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByZXNlbmNlID0gbmV3IFJlYWx0aW1lUHJlc2VuY2UodGhpcyk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0RW5kcG9pbnRVUkwgPVxuICAgICAgICAgICAgaHR0cEVuZHBvaW50VVJMKHRoaXMuc29ja2V0LmVuZFBvaW50KSArICcvYXBpL2Jyb2FkY2FzdCc7XG4gICAgICAgIHRoaXMucHJpdmF0ZSA9IHRoaXMucGFyYW1zLmNvbmZpZy5wcml2YXRlIHx8IGZhbHNlO1xuICAgIH1cbiAgICAvKiogU3Vic2NyaWJlIHJlZ2lzdGVycyB5b3VyIGNsaWVudCB3aXRoIHRoZSBzZXJ2ZXIgKi9cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2ssIHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKCF0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuam9pbmVkT25jZSkge1xuICAgICAgICAgICAgdGhyb3cgYHRyaWVkIHRvIHN1YnNjcmliZSBtdWx0aXBsZSB0aW1lcy4gJ3N1YnNjcmliZScgY2FuIG9ubHkgYmUgY2FsbGVkIGEgc2luZ2xlIHRpbWUgcGVyIGNoYW5uZWwgaW5zdGFuY2VgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeyBjb25maWc6IHsgYnJvYWRjYXN0LCBwcmVzZW5jZSwgcHJpdmF0ZTogaXNQcml2YXRlIH0sIH0gPSB0aGlzLnBhcmFtcztcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoKGUpID0+IGNhbGxiYWNrID09PSBudWxsIHx8IGNhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjYWxsYmFjayhSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTLkNIQU5ORUxfRVJST1IsIGUpKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKCkgPT4gY2FsbGJhY2sgPT09IG51bGwgfHwgY2FsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhbGxiYWNrKFJFQUxUSU1FX1NVQlNDUklCRV9TVEFURVMuQ0xPU0VEKSk7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlblBheWxvYWQgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3QsXG4gICAgICAgICAgICAgICAgcHJlc2VuY2UsXG4gICAgICAgICAgICAgICAgcG9zdGdyZXNfY2hhbmdlczogKF9iID0gKF9hID0gdGhpcy5iaW5kaW5ncy5wb3N0Z3Jlc19jaGFuZ2VzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChyKSA9PiByLmZpbHRlcikpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdLFxuICAgICAgICAgICAgICAgIHByaXZhdGU6IGlzUHJpdmF0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQuYWNjZXNzVG9rZW5WYWx1ZSkge1xuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuUGF5bG9hZC5hY2Nlc3NfdG9rZW4gPSB0aGlzLnNvY2tldC5hY2Nlc3NUb2tlblZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVKb2luUGF5bG9hZChPYmplY3QuYXNzaWduKHsgY29uZmlnIH0sIGFjY2Vzc1Rva2VuUGF5bG9hZCkpO1xuICAgICAgICAgICAgdGhpcy5qb2luZWRPbmNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3Jlam9pbih0aW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMuam9pblB1c2hcbiAgICAgICAgICAgICAgICAucmVjZWl2ZSgnb2snLCBhc3luYyAoeyBwb3N0Z3Jlc19jaGFuZ2VzIH0pID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuc2V0QXV0aCgpO1xuICAgICAgICAgICAgICAgIGlmIChwb3N0Z3Jlc19jaGFuZ2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPT09IG51bGwgfHwgY2FsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhbGxiYWNrKFJFQUxUSU1FX1NVQlNDUklCRV9TVEFURVMuU1VCU0NSSUJFRCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudFBvc3RncmVzQmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLnBvc3RncmVzX2NoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdzTGVuID0gKF9hID0gY2xpZW50UG9zdGdyZXNCaW5kaW5ncyA9PT0gbnVsbCB8fCBjbGllbnRQb3N0Z3Jlc0JpbmRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbGllbnRQb3N0Z3Jlc0JpbmRpbmdzLmxlbmd0aCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UG9zdGdyZXNCaW5kaW5ncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmRpbmdzTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudFBvc3RncmVzQmluZGluZyA9IGNsaWVudFBvc3RncmVzQmluZGluZ3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZpbHRlcjogeyBldmVudCwgc2NoZW1hLCB0YWJsZSwgZmlsdGVyIH0sIH0gPSBjbGllbnRQb3N0Z3Jlc0JpbmRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJQb3N0Z3Jlc0ZpbHRlciA9IHBvc3RncmVzX2NoYW5nZXMgJiYgcG9zdGdyZXNfY2hhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJQb3N0Z3Jlc0ZpbHRlciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclBvc3RncmVzRmlsdGVyLmV2ZW50ID09PSBldmVudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclBvc3RncmVzRmlsdGVyLnNjaGVtYSA9PT0gc2NoZW1hICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyUG9zdGdyZXNGaWx0ZXIudGFibGUgPT09IHRhYmxlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyUG9zdGdyZXNGaWx0ZXIuZmlsdGVyID09PSBmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQb3N0Z3Jlc0JpbmRpbmdzLnB1c2goT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjbGllbnRQb3N0Z3Jlc0JpbmRpbmcpLCB7IGlkOiBzZXJ2ZXJQb3N0Z3Jlc0ZpbHRlci5pZCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPT09IG51bGwgfHwgY2FsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhbGxiYWNrKFJFQUxUSU1FX1NVQlNDUklCRV9TVEFURVMuQ0hBTk5FTF9FUlJPUiwgbmV3IEVycm9yKCdtaXNtYXRjaCBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50IGJpbmRpbmdzIGZvciBwb3N0Z3JlcyBjaGFuZ2VzJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdzLnBvc3RncmVzX2NoYW5nZXMgPSBuZXdQb3N0Z3Jlc0JpbmRpbmdzO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhSRUFMVElNRV9TVUJTQ1JJQkVfU1RBVEVTLlNVQlNDUklCRUQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAucmVjZWl2ZSgnZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9PT0gbnVsbCB8fCBjYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FsbGJhY2soUkVBTFRJTUVfU1VCU0NSSUJFX1NUQVRFUy5DSEFOTkVMX0VSUk9SLCBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoT2JqZWN0LnZhbHVlcyhlcnJvcikuam9pbignLCAnKSB8fCAnZXJyb3InKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnJlY2VpdmUoJ3RpbWVvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPT09IG51bGwgfHwgY2FsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhbGxiYWNrKFJFQUxUSU1FX1NVQlNDUklCRV9TVEFURVMuVElNRURfT1VUKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcHJlc2VuY2VTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlc2VuY2Uuc3RhdGU7XG4gICAgfVxuICAgIGFzeW5jIHRyYWNrKHBheWxvYWQsIG9wdHMgPSB7fSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIHR5cGU6ICdwcmVzZW5jZScsXG4gICAgICAgICAgICBldmVudDogJ3RyYWNrJyxcbiAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgIH0sIG9wdHMudGltZW91dCB8fCB0aGlzLnRpbWVvdXQpO1xuICAgIH1cbiAgICBhc3luYyB1bnRyYWNrKG9wdHMgPSB7fSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kKHtcbiAgICAgICAgICAgIHR5cGU6ICdwcmVzZW5jZScsXG4gICAgICAgICAgICBldmVudDogJ3VudHJhY2snLFxuICAgICAgICB9LCBvcHRzKTtcbiAgICB9XG4gICAgb24odHlwZSwgZmlsdGVyLCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5fb24odHlwZSwgZmlsdGVyLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgbWVzc2FnZSBpbnRvIHRoZSBjaGFubmVsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFyZ3MgQXJndW1lbnRzIHRvIHNlbmQgdG8gY2hhbm5lbFxuICAgICAqIEBwYXJhbSBhcmdzLnR5cGUgVGhlIHR5cGUgb2YgZXZlbnQgdG8gc2VuZFxuICAgICAqIEBwYXJhbSBhcmdzLmV2ZW50IFRoZSBuYW1lIG9mIHRoZSBldmVudCBiZWluZyBzZW50XG4gICAgICogQHBhcmFtIGFyZ3MucGF5bG9hZCBQYXlsb2FkIHRvIGJlIHNlbnRcbiAgICAgKiBAcGFyYW0gb3B0cyBPcHRpb25zIHRvIGJlIHVzZWQgZHVyaW5nIHRoZSBzZW5kIHByb2Nlc3NcbiAgICAgKi9cbiAgICBhc3luYyBzZW5kKGFyZ3MsIG9wdHMgPSB7fSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBpZiAoIXRoaXMuX2NhblB1c2goKSAmJiBhcmdzLnR5cGUgPT09ICdicm9hZGNhc3QnKSB7XG4gICAgICAgICAgICBjb25zdCB7IGV2ZW50LCBwYXlsb2FkOiBlbmRwb2ludF9wYXlsb2FkIH0gPSBhcmdzO1xuICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IHRoaXMuc29ja2V0LmFjY2Vzc1Rva2VuVmFsdWVcbiAgICAgICAgICAgICAgICA/IGBCZWFyZXIgJHt0aGlzLnNvY2tldC5hY2Nlc3NUb2tlblZhbHVlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGFwaWtleTogdGhpcy5zb2NrZXQuYXBpS2V5ID8gdGhpcy5zb2NrZXQuYXBpS2V5IDogJycsXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9waWM6IHRoaXMuc3ViVG9waWMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogZW5kcG9pbnRfcGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2YXRlOiB0aGlzLnByaXZhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9mZXRjaFdpdGhUaW1lb3V0KHRoaXMuYnJvYWRjYXN0RW5kcG9pbnRVUkwsIG9wdGlvbnMsIChfYSA9IG9wdHMudGltZW91dCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICBhd2FpdCAoKF9iID0gcmVzcG9uc2UuYm9keSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbmNlbCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uub2sgPyAnb2snIDogJ2Vycm9yJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0aW1lZCBvdXQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdlcnJvcic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVzaCA9IHRoaXMuX3B1c2goYXJncy50eXBlLCBhcmdzLCBvcHRzLnRpbWVvdXQgfHwgdGhpcy50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy50eXBlID09PSAnYnJvYWRjYXN0JyAmJiAhKChfYyA9IChfYiA9IChfYSA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlnKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYnJvYWRjYXN0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuYWNrKSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCdvaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwdXNoLnJlY2VpdmUoJ29rJywgKCkgPT4gcmVzb2x2ZSgnb2snKSk7XG4gICAgICAgICAgICAgICAgcHVzaC5yZWNlaXZlKCdlcnJvcicsICgpID0+IHJlc29sdmUoJ2Vycm9yJykpO1xuICAgICAgICAgICAgICAgIHB1c2gucmVjZWl2ZSgndGltZW91dCcsICgpID0+IHJlc29sdmUoJ3RpbWVkIG91dCcpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUpvaW5QYXlsb2FkKHBheWxvYWQpIHtcbiAgICAgICAgdGhpcy5qb2luUHVzaC51cGRhdGVQYXlsb2FkKHBheWxvYWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMZWF2ZXMgdGhlIGNoYW5uZWwuXG4gICAgICpcbiAgICAgKiBVbnN1YnNjcmliZXMgZnJvbSBzZXJ2ZXIgZXZlbnRzLCBhbmQgaW5zdHJ1Y3RzIGNoYW5uZWwgdG8gdGVybWluYXRlIG9uIHNlcnZlci5cbiAgICAgKiBUcmlnZ2VycyBvbkNsb3NlKCkgaG9va3MuXG4gICAgICpcbiAgICAgKiBUbyByZWNlaXZlIGxlYXZlIGFja25vd2xlZGdlbWVudHMsIHVzZSB0aGUgYSBgcmVjZWl2ZWAgaG9vayB0byBiaW5kIHRvIHRoZSBzZXJ2ZXIgYWNrLCBpZTpcbiAgICAgKiBjaGFubmVsLnVuc3Vic2NyaWJlKCkucmVjZWl2ZShcIm9rXCIsICgpID0+IGFsZXJ0KFwibGVmdCFcIikgKVxuICAgICAqL1xuICAgIHVuc3Vic2NyaWJlKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmxlYXZpbmc7XG4gICAgICAgIGNvbnN0IG9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5sb2coJ2NoYW5uZWwnLCBgbGVhdmUgJHt0aGlzLnRvcGljfWApO1xuICAgICAgICAgICAgdGhpcy5fdHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgJ2xlYXZlJywgdGhpcy5fam9pblJlZigpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpO1xuICAgICAgICAvLyBEZXN0cm95IGpvaW5QdXNoIHRvIGF2b2lkIGNvbm5lY3Rpb24gdGltZW91dHMgZHVyaW5nIHVuc2NyaXB0aW9uIHBoYXNlXG4gICAgICAgIHRoaXMuam9pblB1c2guZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxlYXZlUHVzaCA9IG5ldyBQdXNoKHRoaXMsIENIQU5ORUxfRVZFTlRTLmxlYXZlLCB7fSwgdGltZW91dCk7XG4gICAgICAgICAgICBsZWF2ZVB1c2hcbiAgICAgICAgICAgICAgICAucmVjZWl2ZSgnb2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoJ29rJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5yZWNlaXZlKCd0aW1lb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIG9uQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCd0aW1lZCBvdXQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnJlY2VpdmUoJ2Vycm9yJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoJ2Vycm9yJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxlYXZlUHVzaC5zZW5kKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NhblB1c2goKSkge1xuICAgICAgICAgICAgICAgIGxlYXZlUHVzaC50cmlnZ2VyKCdvaycsIHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfZmV0Y2hXaXRoVGltZW91dCh1cmwsIG9wdGlvbnMsIHRpbWVvdXQpIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgY29uc3QgaWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zb2NrZXQuZmV0Y2godXJsLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgfSkpO1xuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcHVzaChldmVudCwgcGF5bG9hZCwgdGltZW91dCA9IHRoaXMudGltZW91dCkge1xuICAgICAgICBpZiAoIXRoaXMuam9pbmVkT25jZSkge1xuICAgICAgICAgICAgdGhyb3cgYHRyaWVkIHRvIHB1c2ggJyR7ZXZlbnR9JyB0byAnJHt0aGlzLnRvcGljfScgYmVmb3JlIGpvaW5pbmcuIFVzZSBjaGFubmVsLnN1YnNjcmliZSgpIGJlZm9yZSBwdXNoaW5nIGV2ZW50c2A7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHB1c2hFdmVudCA9IG5ldyBQdXNoKHRoaXMsIGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0KTtcbiAgICAgICAgaWYgKHRoaXMuX2NhblB1c2goKSkge1xuICAgICAgICAgICAgcHVzaEV2ZW50LnNlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHB1c2hFdmVudC5zdGFydFRpbWVvdXQoKTtcbiAgICAgICAgICAgIHRoaXMucHVzaEJ1ZmZlci5wdXNoKHB1c2hFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHB1c2hFdmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGFibGUgbWVzc2FnZSBob29rXG4gICAgICpcbiAgICAgKiBSZWNlaXZlcyBhbGwgZXZlbnRzIGZvciBzcGVjaWFsaXplZCBtZXNzYWdlIGhhbmRsaW5nIGJlZm9yZSBkaXNwYXRjaGluZyB0byB0aGUgY2hhbm5lbCBjYWxsYmFja3MuXG4gICAgICogTXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfb25NZXNzYWdlKF9ldmVudCwgcGF5bG9hZCwgX3JlZikge1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9pc01lbWJlcih0b3BpYykge1xuICAgICAgICByZXR1cm4gdGhpcy50b3BpYyA9PT0gdG9waWM7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfam9pblJlZigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9pblB1c2gucmVmO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3RyaWdnZXIodHlwZSwgcGF5bG9hZCwgcmVmKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IHR5cGVMb3dlciA9IHR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgeyBjbG9zZSwgZXJyb3IsIGxlYXZlLCBqb2luIH0gPSBDSEFOTkVMX0VWRU5UUztcbiAgICAgICAgY29uc3QgZXZlbnRzID0gW2Nsb3NlLCBlcnJvciwgbGVhdmUsIGpvaW5dO1xuICAgICAgICBpZiAocmVmICYmIGV2ZW50cy5pbmRleE9mKHR5cGVMb3dlcikgPj0gMCAmJiByZWYgIT09IHRoaXMuX2pvaW5SZWYoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoYW5kbGVkUGF5bG9hZCA9IHRoaXMuX29uTWVzc2FnZSh0eXBlTG93ZXIsIHBheWxvYWQsIHJlZik7XG4gICAgICAgIGlmIChwYXlsb2FkICYmICFoYW5kbGVkUGF5bG9hZCkge1xuICAgICAgICAgICAgdGhyb3cgJ2NoYW5uZWwgb25NZXNzYWdlIGNhbGxiYWNrcyBtdXN0IHJldHVybiB0aGUgcGF5bG9hZCwgbW9kaWZpZWQgb3IgdW5tb2RpZmllZCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnaW5zZXJ0JywgJ3VwZGF0ZScsICdkZWxldGUnXS5pbmNsdWRlcyh0eXBlTG93ZXIpKSB7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLmJpbmRpbmdzLnBvc3RncmVzX2NoYW5nZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWx0ZXIoKGJpbmQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgICAgICByZXR1cm4gKCgoX2EgPSBiaW5kLmZpbHRlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmV2ZW50KSA9PT0gJyonIHx8XG4gICAgICAgICAgICAgICAgICAgICgoX2MgPSAoX2IgPSBiaW5kLmZpbHRlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmV2ZW50KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9Mb2NhbGVMb3dlckNhc2UoKSkgPT09IHR5cGVMb3dlcik7XG4gICAgICAgICAgICB9KS5tYXAoKGJpbmQpID0+IGJpbmQuY2FsbGJhY2soaGFuZGxlZFBheWxvYWQsIHJlZikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgKF9iID0gdGhpcy5iaW5kaW5nc1t0eXBlTG93ZXJdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZmlsdGVyKChiaW5kKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgICAgICAgICAgaWYgKFsnYnJvYWRjYXN0JywgJ3ByZXNlbmNlJywgJ3Bvc3RncmVzX2NoYW5nZXMnXS5pbmNsdWRlcyh0eXBlTG93ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgnaWQnIGluIGJpbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRJZCA9IGJpbmQuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5kRXZlbnQgPSAoX2EgPSBiaW5kLmZpbHRlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmV2ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChiaW5kSWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKF9iID0gcGF5bG9hZC5pZHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcyhiaW5kSWQpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChiaW5kRXZlbnQgPT09ICcqJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYmluZEV2ZW50ID09PSBudWxsIHx8IGJpbmRFdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmluZEV2ZW50LnRvTG9jYWxlTG93ZXJDYXNlKCkpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChfYyA9IHBheWxvYWQuZGF0YSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRFdmVudCA9IChfZSA9IChfZCA9IGJpbmQgPT09IG51bGwgfHwgYmluZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmluZC5maWx0ZXIpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5ldmVudCkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGJpbmRFdmVudCA9PT0gJyonIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZEV2ZW50ID09PSAoKF9mID0gcGF5bG9hZCA9PT0gbnVsbCB8fCBwYXlsb2FkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXlsb2FkLmV2ZW50KSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YudG9Mb2NhbGVMb3dlckNhc2UoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmluZC50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHR5cGVMb3dlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5tYXAoKGJpbmQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZWRQYXlsb2FkID09PSAnb2JqZWN0JyAmJiAnaWRzJyBpbiBoYW5kbGVkUGF5bG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3N0Z3Jlc0NoYW5nZXMgPSBoYW5kbGVkUGF5bG9hZC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNjaGVtYSwgdGFibGUsIGNvbW1pdF90aW1lc3RhbXAsIHR5cGUsIGVycm9ycyB9ID0gcG9zdGdyZXNDaGFuZ2VzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnJpY2hlZFBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdF90aW1lc3RhbXA6IGNvbW1pdF90aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXc6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yczogZXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVkUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZW5yaWNoZWRQYXlsb2FkKSwgdGhpcy5fZ2V0UGF5bG9hZFJlY29yZHMocG9zdGdyZXNDaGFuZ2VzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJpbmQuY2FsbGJhY2soaGFuZGxlZFBheWxvYWQsIHJlZik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2lzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2lzSm9pbmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmVkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2lzSm9pbmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5pbmc7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfaXNMZWF2aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMubGVhdmluZztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9yZXBseUV2ZW50TmFtZShyZWYpIHtcbiAgICAgICAgcmV0dXJuIGBjaGFuX3JlcGx5XyR7cmVmfWA7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfb24odHlwZSwgZmlsdGVyLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCB0eXBlTG93ZXIgPSB0eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGJpbmRpbmcgPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlTG93ZXIsXG4gICAgICAgICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYmluZGluZ3NbdHlwZUxvd2VyXSkge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc1t0eXBlTG93ZXJdLnB1c2goYmluZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdzW3R5cGVMb3dlcl0gPSBbYmluZGluZ107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfb2ZmKHR5cGUsIGZpbHRlcikge1xuICAgICAgICBjb25zdCB0eXBlTG93ZXIgPSB0eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoaXMuYmluZGluZ3NbdHlwZUxvd2VyXSA9IHRoaXMuYmluZGluZ3NbdHlwZUxvd2VyXS5maWx0ZXIoKGJpbmQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiAhKCgoX2EgPSBiaW5kLnR5cGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA9PT0gdHlwZUxvd2VyICYmXG4gICAgICAgICAgICAgICAgUmVhbHRpbWVDaGFubmVsLmlzRXF1YWwoYmluZC5maWx0ZXIsIGZpbHRlcikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBzdGF0aWMgaXNFcXVhbChvYmoxLCBvYmoyKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmoxKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKG9iajIpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgayBpbiBvYmoxKSB7XG4gICAgICAgICAgICBpZiAob2JqMVtrXSAhPT0gb2JqMltrXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9yZWpvaW5VbnRpbENvbm5lY3RlZCgpIHtcbiAgICAgICAgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICAgICAgaWYgKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlam9pbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBjaGFubmVsIGNsb3Nlcy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9vbkNsb3NlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX29uKENIQU5ORUxfRVZFTlRTLmNsb3NlLCB7fSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgY2hhbm5lbCBlbmNvdW50ZXJlcyBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9vbkVycm9yKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX29uKENIQU5ORUxfRVZFTlRTLmVycm9yLCB7fSwgKHJlYXNvbikgPT4gY2FsbGJhY2socmVhc29uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzb2NrZXQgaXMgY29ubmVjdGVkIGFuZCB0aGUgY2hhbm5lbCBoYXMgYmVlbiBqb2luZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfY2FuUHVzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5faXNKb2luZWQoKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9yZWpvaW4odGltZW91dCA9IHRoaXMudGltZW91dCkge1xuICAgICAgICBpZiAodGhpcy5faXNMZWF2aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNvY2tldC5fbGVhdmVPcGVuVG9waWModGhpcy50b3BpYyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nO1xuICAgICAgICB0aGlzLmpvaW5QdXNoLnJlc2VuZCh0aW1lb3V0KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9nZXRQYXlsb2FkUmVjb3JkcyhwYXlsb2FkKSB7XG4gICAgICAgIGNvbnN0IHJlY29yZHMgPSB7XG4gICAgICAgICAgICBuZXc6IHt9LFxuICAgICAgICAgICAgb2xkOiB7fSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHBheWxvYWQudHlwZSA9PT0gJ0lOU0VSVCcgfHwgcGF5bG9hZC50eXBlID09PSAnVVBEQVRFJykge1xuICAgICAgICAgICAgcmVjb3Jkcy5uZXcgPSBUcmFuc2Zvcm1lcnMuY29udmVydENoYW5nZURhdGEocGF5bG9hZC5jb2x1bW5zLCBwYXlsb2FkLnJlY29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBheWxvYWQudHlwZSA9PT0gJ1VQREFURScgfHwgcGF5bG9hZC50eXBlID09PSAnREVMRVRFJykge1xuICAgICAgICAgICAgcmVjb3Jkcy5vbGQgPSBUcmFuc2Zvcm1lcnMuY29udmVydENoYW5nZURhdGEocGF5bG9hZC5jb2x1bW5zLCBwYXlsb2FkLm9sZF9yZWNvcmQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWNvcmRzO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlYWx0aW1lQ2hhbm5lbC5qcy5tYXAiLCJpbXBvcnQgeyBDSEFOTkVMX0VWRU5UUywgQ09OTkVDVElPTl9TVEFURSwgREVGQVVMVF9IRUFERVJTLCBERUZBVUxUX1RJTUVPVVQsIFNPQ0tFVF9TVEFURVMsIFRSQU5TUE9SVFMsIFZTTiwgV1NfQ0xPU0VfTk9STUFMLCB9IGZyb20gJy4vbGliL2NvbnN0YW50cyc7XG5pbXBvcnQgU2VyaWFsaXplciBmcm9tICcuL2xpYi9zZXJpYWxpemVyJztcbmltcG9ydCBUaW1lciBmcm9tICcuL2xpYi90aW1lcic7XG5pbXBvcnQgeyBodHRwRW5kcG9pbnRVUkwgfSBmcm9tICcuL2xpYi90cmFuc2Zvcm1lcnMnO1xuaW1wb3J0IFJlYWx0aW1lQ2hhbm5lbCBmcm9tICcuL1JlYWx0aW1lQ2hhbm5lbCc7XG5jb25zdCBub29wID0gKCkgPT4geyB9O1xuY29uc3QgTkFUSVZFX1dFQlNPQ0tFVF9BVkFJTEFCTEUgPSB0eXBlb2YgV2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJztcbmNvbnN0IFdPUktFUl9TQ1JJUFQgPSBgXG4gIGFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChlKSA9PiB7XG4gICAgaWYgKGUuZGF0YS5ldmVudCA9PT0gXCJzdGFydFwiKSB7XG4gICAgICBzZXRJbnRlcnZhbCgoKSA9PiBwb3N0TWVzc2FnZSh7IGV2ZW50OiBcImtlZXBBbGl2ZVwiIH0pLCBlLmRhdGEuaW50ZXJ2YWwpO1xuICAgIH1cbiAgfSk7YDtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlYWx0aW1lQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgU29ja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGVuZFBvaW50IFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgXCJ3czovL2V4YW1wbGUuY29tL3NvY2tldFwiLCBcIndzczovL2V4YW1wbGUuY29tXCIsIFwiL3NvY2tldFwiIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICAgICAqIEBwYXJhbSBodHRwRW5kcG9pbnQgVGhlIHN0cmluZyBIVFRQIGVuZHBvaW50LCBpZSwgXCJodHRwczovL2V4YW1wbGUuY29tXCIsIFwiL1wiIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICAgICAqIEBwYXJhbSBvcHRpb25zLnRyYW5zcG9ydCBUaGUgV2Vic29ja2V0IFRyYW5zcG9ydCwgZm9yIGV4YW1wbGUgV2ViU29ja2V0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zLnRpbWVvdXQgVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLnBhcmFtcyBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmhlYWRlcnMgVGhlIG9wdGlvbmFsIGhlYWRlcnMgdG8gcGFzcyB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuaGVhcnRiZWF0SW50ZXJ2YWxNcyBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmxvZ2dlciBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gZm9yIHNwZWNpYWxpemVkIGxvZ2dpbmcsIGllOiBsb2dnZXI6IChraW5kLCBtc2csIGRhdGEpID0+IHsgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpIH1cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5lbmNvZGUgVGhlIGZ1bmN0aW9uIHRvIGVuY29kZSBvdXRnb2luZyBtZXNzYWdlcy4gRGVmYXVsdHMgdG8gSlNPTjogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5kZWNvZGUgVGhlIGZ1bmN0aW9uIHRvIGRlY29kZSBpbmNvbWluZyBtZXNzYWdlcy4gRGVmYXVsdHMgdG8gU2VyaWFsaXplcidzIGRlY29kZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5yZWNvbm5lY3RBZnRlck1zIGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWlsbHNlYyByZWNvbm5lY3QgaW50ZXJ2YWwuIERlZmF1bHRzIHRvIHN0ZXBwZWQgYmFja29mZiBvZmYuXG4gICAgICogQHBhcmFtIG9wdGlvbnMud29ya2VyIFVzZSBXZWIgV29ya2VyIHRvIHNldCBhIHNpZGUgZmxvdy4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICogQHBhcmFtIG9wdGlvbnMud29ya2VyVXJsIFRoZSBVUkwgb2YgdGhlIHdvcmtlciBzY3JpcHQuIERlZmF1bHRzIHRvIGh0dHBzOi8vcmVhbHRpbWUuc3VwYWJhc2UuY29tL3dvcmtlci5qcyB0aGF0IGluY2x1ZGVzIGEgaGVhcnRiZWF0IGV2ZW50IGNhbGwgdG8ga2VlcCB0aGUgY29ubmVjdGlvbiBhbGl2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmRQb2ludCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW5WYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jaGFubmVscyA9IFtdO1xuICAgICAgICB0aGlzLmVuZFBvaW50ID0gJyc7XG4gICAgICAgIHRoaXMuaHR0cEVuZHBvaW50ID0gJyc7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IERFRkFVTFRfSEVBREVSUztcbiAgICAgICAgdGhpcy5wYXJhbXMgPSB7fTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gREVGQVVMVF9USU1FT1VUO1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMgPSAzMDAwMDtcbiAgICAgICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZWYgPSAwO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IG5vb3A7XG4gICAgICAgIHRoaXMuY29ubiA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgU2VyaWFsaXplcigpO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb3BlbjogW10sXG4gICAgICAgICAgICBjbG9zZTogW10sXG4gICAgICAgICAgICBlcnJvcjogW10sXG4gICAgICAgICAgICBtZXNzYWdlOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2UgZWl0aGVyIGN1c3RvbSBmZXRjaCwgaWYgcHJvdmlkZWQsIG9yIGRlZmF1bHQgZmV0Y2ggdG8gbWFrZSBIVFRQIHJlcXVlc3RzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcmVzb2x2ZUZldGNoID0gKGN1c3RvbUZldGNoKSA9PiB7XG4gICAgICAgICAgICBsZXQgX2ZldGNoO1xuICAgICAgICAgICAgaWYgKGN1c3RvbUZldGNoKSB7XG4gICAgICAgICAgICAgICAgX2ZldGNoID0gY3VzdG9tRmV0Y2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZmV0Y2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgX2ZldGNoID0gKC4uLmFyZ3MpID0+IGltcG9ydCgnQHN1cGFiYXNlL25vZGUtZmV0Y2gnKS50aGVuKCh7IGRlZmF1bHQ6IGZldGNoIH0pID0+IGZldGNoKC4uLmFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF9mZXRjaCA9IGZldGNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiBfZmV0Y2goLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW5kUG9pbnQgPSBgJHtlbmRQb2ludH0vJHtUUkFOU1BPUlRTLndlYnNvY2tldH1gO1xuICAgICAgICB0aGlzLmh0dHBFbmRwb2ludCA9IGh0dHBFbmRwb2ludFVSTChlbmRQb2ludCk7XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudHJhbnNwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucGFyYW1zKVxuICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSBvcHRpb25zLnBhcmFtcztcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5oZWFkZXJzKVxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmhlYWRlcnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnRpbWVvdXQpXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQ7XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubG9nZ2VyKVxuICAgICAgICAgICAgdGhpcy5sb2dnZXIgPSBvcHRpb25zLmxvZ2dlcjtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICAgICAgICAgICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zID0gb3B0aW9ucy5oZWFydGJlYXRJbnRlcnZhbE1zO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlblZhbHVlID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnBhcmFtcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwaWtleTtcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW5WYWx1ZSA9IGFjY2Vzc1Rva2VuVmFsdWU7XG4gICAgICAgICAgICB0aGlzLmFwaUtleSA9IGFjY2Vzc1Rva2VuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNvbm5lY3RBZnRlck1zID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZWNvbm5lY3RBZnRlck1zKVxuICAgICAgICAgICAgPyBvcHRpb25zLnJlY29ubmVjdEFmdGVyTXNcbiAgICAgICAgICAgIDogKHRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsxMDAwLCAyMDAwLCA1MDAwLCAxMDAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMuZW5jb2RlID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5lbmNvZGUpXG4gICAgICAgICAgICA/IG9wdGlvbnMuZW5jb2RlXG4gICAgICAgICAgICA6IChwYXlsb2FkLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlY29kZSA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGVjb2RlKVxuICAgICAgICAgICAgPyBvcHRpb25zLmRlY29kZVxuICAgICAgICAgICAgOiB0aGlzLnNlcmlhbGl6ZXIuZGVjb2RlLmJpbmQodGhpcy5zZXJpYWxpemVyKTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdCgpO1xuICAgICAgICB9LCB0aGlzLnJlY29ubmVjdEFmdGVyTXMpO1xuICAgICAgICB0aGlzLmZldGNoID0gdGhpcy5fcmVzb2x2ZUZldGNoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5mZXRjaCk7XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud29ya2VyKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvdy5Xb3JrZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYiBXb3JrZXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53b3JrZXIgPSAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLndvcmtlcikgfHwgZmFsc2U7XG4gICAgICAgICAgICB0aGlzLndvcmtlclVybCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy53b3JrZXJVcmw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuYWNjZXNzVG9rZW4pIHx8IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3RzIHRoZSBzb2NrZXQsIHVubGVzcyBhbHJlYWR5IGNvbm5lY3RlZC5cbiAgICAgKi9cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5jb25uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbm4gPSBuZXcgdGhpcy50cmFuc3BvcnQodGhpcy5lbmRwb2ludFVSTCgpLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTkFUSVZFX1dFQlNPQ0tFVF9BVkFJTEFCTEUpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubiA9IG5ldyBXZWJTb2NrZXQodGhpcy5lbmRwb2ludFVSTCgpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uID0gbmV3IFdTV2ViU29ja2V0RHVtbXkodGhpcy5lbmRwb2ludFVSTCgpLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uID0gbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpbXBvcnQoJ3dzJykudGhlbigoeyBkZWZhdWx0OiBXUyB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbm4gPSBuZXcgV1ModGhpcy5lbmRwb2ludFVSTCgpLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBDb25uZWN0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBVUkwgb2YgdGhlIHdlYnNvY2tldC5cbiAgICAgKiBAcmV0dXJucyBzdHJpbmcgVGhlIFVSTCBvZiB0aGUgd2Vic29ja2V0LlxuICAgICAqL1xuICAgIGVuZHBvaW50VVJMKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGFyYW1zLCB7IHZzbjogVlNOIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdHMgdGhlIHNvY2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2RlIEEgbnVtZXJpYyBzdGF0dXMgY29kZSB0byBzZW5kIG9uIGRpc2Nvbm5lY3QuXG4gICAgICogQHBhcmFtIHJlYXNvbiBBIGN1c3RvbSByZWFzb24gZm9yIHRoZSBkaXNjb25uZWN0LlxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3QoY29kZSwgcmVhc29uKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm4pIHtcbiAgICAgICAgICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZnVuY3Rpb24gKCkgeyB9OyAvLyBub29wXG4gICAgICAgICAgICBpZiAoY29kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubi5jbG9zZShjb2RlLCByZWFzb24gIT09IG51bGwgJiYgcmVhc29uICE9PSB2b2lkIDAgPyByZWFzb24gOiAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm4uY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29ubiA9IG51bGw7XG4gICAgICAgICAgICAvLyByZW1vdmUgb3BlbiBoYW5kbGVzXG4gICAgICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lcik7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgY3JlYXRlZCBjaGFubmVsc1xuICAgICAqL1xuICAgIGdldENoYW5uZWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVscztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmVzIGFuZCByZW1vdmVzIGEgc2luZ2xlIGNoYW5uZWxcbiAgICAgKiBAcGFyYW0gY2hhbm5lbCBBIFJlYWx0aW1lQ2hhbm5lbCBpbnN0YW5jZVxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUNoYW5uZWwoY2hhbm5lbCkge1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCBjaGFubmVsLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGlmICh0aGlzLmNoYW5uZWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmVzIGFuZCByZW1vdmVzIGFsbCBjaGFubmVsc1xuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUFsbENoYW5uZWxzKCkge1xuICAgICAgICBjb25zdCB2YWx1ZXNfMSA9IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuY2hhbm5lbHMubWFwKChjaGFubmVsKSA9PiBjaGFubmVsLnVuc3Vic2NyaWJlKCkpKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgIHJldHVybiB2YWx1ZXNfMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyB0aGUgbWVzc2FnZS5cbiAgICAgKlxuICAgICAqIEZvciBjdXN0b21pemVkIGxvZ2dpbmcsIGB0aGlzLmxvZ2dlcmAgY2FuIGJlIG92ZXJyaWRkZW4uXG4gICAgICovXG4gICAgbG9nKGtpbmQsIG1zZywgZGF0YSkge1xuICAgICAgICB0aGlzLmxvZ2dlcihraW5kLCBtc2csIGRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBzb2NrZXQuXG4gICAgICovXG4gICAgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4ucmVhZHlTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLmNvbm5lY3Rpbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIENPTk5FQ1RJT05fU1RBVEUuQ29ubmVjdGluZztcbiAgICAgICAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5vcGVuOlxuICAgICAgICAgICAgICAgIHJldHVybiBDT05ORUNUSU9OX1NUQVRFLk9wZW47XG4gICAgICAgICAgICBjYXNlIFNPQ0tFVF9TVEFURVMuY2xvc2luZzpcbiAgICAgICAgICAgICAgICByZXR1cm4gQ09OTkVDVElPTl9TVEFURS5DbG9zaW5nO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gQ09OTkVDVElPTl9TVEFURS5DbG9zZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaXMgdGhlIGNvbm5lY3Rpb24gaXMgb3Blbi5cbiAgICAgKi9cbiAgICBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlKCkgPT09IENPTk5FQ1RJT05fU1RBVEUuT3BlbjtcbiAgICB9XG4gICAgY2hhbm5lbCh0b3BpYywgcGFyYW1zID0geyBjb25maWc6IHt9IH0pIHtcbiAgICAgICAgY29uc3QgY2hhbiA9IG5ldyBSZWFsdGltZUNoYW5uZWwoYHJlYWx0aW1lOiR7dG9waWN9YCwgcGFyYW1zLCB0aGlzKTtcbiAgICAgICAgdGhpcy5jaGFubmVscy5wdXNoKGNoYW4pO1xuICAgICAgICByZXR1cm4gY2hhbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVzaCBvdXQgYSBtZXNzYWdlIGlmIHRoZSBzb2NrZXQgaXMgY29ubmVjdGVkLlxuICAgICAqXG4gICAgICogSWYgdGhlIHNvY2tldCBpcyBub3QgY29ubmVjdGVkLCB0aGUgbWVzc2FnZSBnZXRzIGVucXVldWVkIHdpdGhpbiBhIGxvY2FsIGJ1ZmZlciwgYW5kIHNlbnQgb3V0IHdoZW4gYSBjb25uZWN0aW9uIGlzIG5leHQgZXN0YWJsaXNoZWQuXG4gICAgICovXG4gICAgcHVzaChkYXRhKSB7XG4gICAgICAgIGNvbnN0IHsgdG9waWMsIGV2ZW50LCBwYXlsb2FkLCByZWYgfSA9IGRhdGE7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGUoZGF0YSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLmNvbm4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZW5kKHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sb2coJ3B1c2gnLCBgJHt0b3BpY30gJHtldmVudH0gKCR7cmVmfSlgLCBwYXlsb2FkKTtcbiAgICAgICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBKV1QgYWNjZXNzIHRva2VuIHVzZWQgZm9yIGNoYW5uZWwgc3Vic2NyaXB0aW9uIGF1dGhvcml6YXRpb24gYW5kIFJlYWx0aW1lIFJMUy5cbiAgICAgKlxuICAgICAqIElmIHBhcmFtIGlzIG51bGwgaXQgd2lsbCB1c2UgdGhlIGBhY2Nlc3NUb2tlbmAgY2FsbGJhY2sgZnVuY3Rpb24gb3IgdGhlIHRva2VuIHNldCBvbiB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogT24gY2FsbGJhY2sgdXNlZCwgaXQgd2lsbCBzZXQgdGhlIHZhbHVlIG9mIHRoZSB0b2tlbiBpbnRlcm5hbCB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRva2VuIEEgSldUIHN0cmluZyB0byBvdmVycmlkZSB0aGUgdG9rZW4gc2V0IG9uIHRoZSBjbGllbnQuXG4gICAgICovXG4gICAgYXN5bmMgc2V0QXV0aCh0b2tlbiA9IG51bGwpIHtcbiAgICAgICAgbGV0IHRva2VuVG9TZW5kID0gdG9rZW4gfHxcbiAgICAgICAgICAgICh0aGlzLmFjY2Vzc1Rva2VuICYmIChhd2FpdCB0aGlzLmFjY2Vzc1Rva2VuKCkpKSB8fFxuICAgICAgICAgICAgdGhpcy5hY2Nlc3NUb2tlblZhbHVlO1xuICAgICAgICBpZiAodG9rZW5Ub1NlbmQpIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKGF0b2IodG9rZW5Ub1NlbmQuc3BsaXQoJy4nKVsxXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9lcnJvcikgeyB9XG4gICAgICAgICAgICBpZiAocGFyc2VkICYmIHBhcnNlZC5leHApIHtcbiAgICAgICAgICAgICAgICBsZXQgbm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gICAgICAgICAgICAgICAgbGV0IHZhbGlkID0gbm93IC0gcGFyc2VkLmV4cCA8IDA7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZygnYXV0aCcsIGBJbnZhbGlkSldUVG9rZW46IEludmFsaWQgdmFsdWUgZm9yIEpXVCBjbGFpbSBcImV4cFwiIHdpdGggdmFsdWUgJHtwYXJzZWQuZXhwfWApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEludmFsaWRKV1RUb2tlbjogSW52YWxpZCB2YWx1ZSBmb3IgSldUIGNsYWltIFwiZXhwXCIgd2l0aCB2YWx1ZSAke3BhcnNlZC5leHB9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY2Nlc3NUb2tlblZhbHVlID0gdG9rZW5Ub1NlbmQ7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWxzLmZvckVhY2goKGNoYW5uZWwpID0+IHtcbiAgICAgICAgICAgICAgICB0b2tlblRvU2VuZCAmJiBjaGFubmVsLnVwZGF0ZUpvaW5QYXlsb2FkKHsgYWNjZXNzX3Rva2VuOiB0b2tlblRvU2VuZCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbC5qb2luZWRPbmNlICYmIGNoYW5uZWwuX2lzSm9pbmVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5fcHVzaChDSEFOTkVMX0VWRU5UUy5hY2Nlc3NfdG9rZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5Ub1NlbmQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgaGVhcnRiZWF0IG1lc3NhZ2UgaWYgdGhlIHNvY2tldCBpcyBjb25uZWN0ZWQuXG4gICAgICovXG4gICAgYXN5bmMgc2VuZEhlYXJ0YmVhdCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYpIHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxvZygndHJhbnNwb3J0JywgJ2hlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uJyk7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLmNvbm4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbG9zZShXU19DTE9TRV9OT1JNQUwsICdoZWFyYmVhdCB0aW1lb3V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gdGhpcy5fbWFrZVJlZigpO1xuICAgICAgICB0aGlzLnB1c2goe1xuICAgICAgICAgICAgdG9waWM6ICdwaG9lbml4JyxcbiAgICAgICAgICAgIGV2ZW50OiAnaGVhcnRiZWF0JyxcbiAgICAgICAgICAgIHBheWxvYWQ6IHt9LFxuICAgICAgICAgICAgcmVmOiB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNldEF1dGgoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmx1c2hlcyBzZW5kIGJ1ZmZlclxuICAgICAqL1xuICAgIGZsdXNoU2VuZEJ1ZmZlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLnNlbmRCdWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjaygpKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbmV4dCBtZXNzYWdlIHJlZiwgYWNjb3VudGluZyBmb3Igb3ZlcmZsb3dzXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfbWFrZVJlZigpIHtcbiAgICAgICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmICsgMTtcbiAgICAgICAgaWYgKG5ld1JlZiA9PT0gdGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucmVmID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVmID0gbmV3UmVmO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlZi50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnN1YnNjcmliZSBmcm9tIGNoYW5uZWxzIHdpdGggdGhlIHNwZWNpZmllZCB0b3BpYy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9sZWF2ZU9wZW5Ub3BpYyh0b3BpYykge1xuICAgICAgICBsZXQgZHVwQ2hhbm5lbCA9IHRoaXMuY2hhbm5lbHMuZmluZCgoYykgPT4gYy50b3BpYyA9PT0gdG9waWMgJiYgKGMuX2lzSm9pbmVkKCkgfHwgYy5faXNKb2luaW5nKCkpKTtcbiAgICAgICAgaWYgKGR1cENoYW5uZWwpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKCd0cmFuc3BvcnQnLCBgbGVhdmluZyBkdXBsaWNhdGUgdG9waWMgXCIke3RvcGljfVwiYCk7XG4gICAgICAgICAgICBkdXBDaGFubmVsLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhbm5lbCBBbiBvcGVuIHN1YnNjcmlwdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9yZW1vdmUoY2hhbm5lbCkge1xuICAgICAgICB0aGlzLmNoYW5uZWxzID0gdGhpcy5jaGFubmVscy5maWx0ZXIoKGMpID0+IGMuX2pvaW5SZWYoKSAhPT0gY2hhbm5lbC5fam9pblJlZigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBjb25uZWN0aW9uIGhhbmRsZXJzLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0dXBDb25uZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm4uYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgICAgICB0aGlzLmNvbm4ub25vcGVuID0gKCkgPT4gdGhpcy5fb25Db25uT3BlbigpO1xuICAgICAgICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSAoZXJyb3IpID0+IHRoaXMuX29uQ29ubkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuY29ubi5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHRoaXMuX29uQ29ubk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5jb25uLm9uY2xvc2UgPSAoZXZlbnQpID0+IHRoaXMuX29uQ29ubkNsb3NlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX29uQ29ubk1lc3NhZ2UocmF3TWVzc2FnZSkge1xuICAgICAgICB0aGlzLmRlY29kZShyYXdNZXNzYWdlLmRhdGEsIChtc2cpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHRvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmIH0gPSBtc2c7XG4gICAgICAgICAgICBpZiAocmVmICYmIHJlZiA9PT0gdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9nKCdyZWNlaXZlJywgYCR7cGF5bG9hZC5zdGF0dXMgfHwgJyd9ICR7dG9waWN9ICR7ZXZlbnR9ICR7KHJlZiAmJiAnKCcgKyByZWYgKyAnKScpIHx8ICcnfWAsIHBheWxvYWQpO1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGNoYW5uZWwpID0+IGNoYW5uZWwuX2lzTWVtYmVyKHRvcGljKSlcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoY2hhbm5lbCkgPT4gY2hhbm5lbC5fdHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmKSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKG1zZykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9vbkNvbm5PcGVuKCkge1xuICAgICAgICB0aGlzLmxvZygndHJhbnNwb3J0JywgYGNvbm5lY3RlZCB0byAke3RoaXMuZW5kcG9pbnRVUkwoKX1gKTtcbiAgICAgICAgdGhpcy5mbHVzaFNlbmRCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpO1xuICAgICAgICBpZiAoIXRoaXMud29ya2VyKSB7XG4gICAgICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lcik7XG4gICAgICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5zZW5kSGVhcnRiZWF0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy53b3JrZXJVcmwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZygnd29ya2VyJywgYHN0YXJ0aW5nIHdvcmtlciBmb3IgZnJvbSAke3RoaXMud29ya2VyVXJsfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2coJ3dvcmtlcicsIGBzdGFydGluZyBkZWZhdWx0IHdvcmtlcmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0VXJsID0gdGhpcy5fd29ya2VyT2JqZWN0VXJsKHRoaXMud29ya2VyVXJsKTtcbiAgICAgICAgICAgIHRoaXMud29ya2VyUmVmID0gbmV3IFdvcmtlcihvYmplY3RVcmwpO1xuICAgICAgICAgICAgdGhpcy53b3JrZXJSZWYub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nKCd3b3JrZXInLCAnd29ya2VyIGVycm9yJywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJSZWYudGVybWluYXRlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy53b3JrZXJSZWYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuZXZlbnQgPT09ICdrZWVwQWxpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZEhlYXJ0YmVhdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLndvcmtlclJlZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdzdGFydCcsXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWw6IHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soKSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfb25Db25uQ2xvc2UoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5sb2coJ3RyYW5zcG9ydCcsICdjbG9zZScsIGV2ZW50KTtcbiAgICAgICAgdGhpcy5fdHJpZ2dlckNoYW5FcnJvcigpO1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyICYmIGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lcik7XG4gICAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfb25Db25uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5sb2coJ3RyYW5zcG9ydCcsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aGlzLl90cmlnZ2VyQ2hhbkVycm9yKCk7XG4gICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKGVycm9yKSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfdHJpZ2dlckNoYW5FcnJvcigpIHtcbiAgICAgICAgdGhpcy5jaGFubmVscy5mb3JFYWNoKChjaGFubmVsKSA9PiBjaGFubmVsLl90cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmVycm9yKSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmVmaXggPSB1cmwubWF0Y2goL1xcPy8pID8gJyYnIDogJz8nO1xuICAgICAgICBjb25zdCBxdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIGAke3VybH0ke3ByZWZpeH0ke3F1ZXJ5fWA7XG4gICAgfVxuICAgIF93b3JrZXJPYmplY3RVcmwodXJsKSB7XG4gICAgICAgIGxldCByZXN1bHRfdXJsO1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICByZXN1bHRfdXJsID0gdXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtXT1JLRVJfU0NSSVBUXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSk7XG4gICAgICAgICAgICByZXN1bHRfdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0X3VybDtcbiAgICB9XG59XG5jbGFzcyBXU1dlYlNvY2tldER1bW15IHtcbiAgICBjb25zdHJ1Y3RvcihhZGRyZXNzLCBfcHJvdG9jb2xzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgIHRoaXMub25jbG9zZSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5vbmVycm9yID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLm9ubWVzc2FnZSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5vbm9wZW4gPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZztcbiAgICAgICAgdGhpcy5zZW5kID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLnVybCA9IG51bGw7XG4gICAgICAgIHRoaXMudXJsID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5jbG9zZSA9IG9wdGlvbnMuY2xvc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVhbHRpbWVDbGllbnQuanMubWFwIiwiZXhwb3J0IGNsYXNzIFN0b3JhZ2VFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLl9faXNTdG9yYWdlRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLm5hbWUgPSAnU3RvcmFnZUVycm9yJztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTdG9yYWdlRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnX19pc1N0b3JhZ2VFcnJvcicgaW4gZXJyb3I7XG59XG5leHBvcnQgY2xhc3MgU3RvcmFnZUFwaUVycm9yIGV4dGVuZHMgU3RvcmFnZUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdTdG9yYWdlQXBpRXJyb3InO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU3RvcmFnZVVua25vd25FcnJvciBleHRlbmRzIFN0b3JhZ2VFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3JpZ2luYWxFcnJvcikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ1N0b3JhZ2VVbmtub3duRXJyb3InO1xuICAgICAgICB0aGlzLm9yaWdpbmFsRXJyb3IgPSBvcmlnaW5hbEVycm9yO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCByZXNvbHZlRmV0Y2ggPSAoY3VzdG9tRmV0Y2gpID0+IHtcbiAgICBsZXQgX2ZldGNoO1xuICAgIGlmIChjdXN0b21GZXRjaCkge1xuICAgICAgICBfZmV0Y2ggPSBjdXN0b21GZXRjaDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZldGNoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBfZmV0Y2ggPSAoLi4uYXJncykgPT4gaW1wb3J0KCdAc3VwYWJhc2Uvbm9kZS1mZXRjaCcpLnRoZW4oKHsgZGVmYXVsdDogZmV0Y2ggfSkgPT4gZmV0Y2goLi4uYXJncykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgX2ZldGNoID0gZmV0Y2g7XG4gICAgfVxuICAgIHJldHVybiAoLi4uYXJncykgPT4gX2ZldGNoKC4uLmFyZ3MpO1xufTtcbmV4cG9ydCBjb25zdCByZXNvbHZlUmVzcG9uc2UgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAodHlwZW9mIFJlc3BvbnNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiAoeWllbGQgaW1wb3J0KCdAc3VwYWJhc2Uvbm9kZS1mZXRjaCcpKS5SZXNwb25zZTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3BvbnNlO1xufSk7XG5leHBvcnQgY29uc3QgcmVjdXJzaXZlVG9DYW1lbCA9IChpdGVtKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ubWFwKChlbCkgPT4gcmVjdXJzaXZlVG9DYW1lbChlbCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gJ2Z1bmN0aW9uJyB8fCBpdGVtICE9PSBPYmplY3QoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIE9iamVjdC5lbnRyaWVzKGl0ZW0pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdLZXkgPSBrZXkucmVwbGFjZSgvKFstX11bYS16XSkvZ2ksIChjKSA9PiBjLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvWy1fXS9nLCAnJykpO1xuICAgICAgICByZXN1bHRbbmV3S2V5XSA9IHJlY3Vyc2l2ZVRvQ2FtZWwodmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IFN0b3JhZ2VBcGlFcnJvciwgU3RvcmFnZVVua25vd25FcnJvciB9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7IHJlc29sdmVSZXNwb25zZSB9IGZyb20gJy4vaGVscGVycyc7XG5jb25zdCBfZ2V0RXJyb3JNZXNzYWdlID0gKGVycikgPT4gZXJyLm1zZyB8fCBlcnIubWVzc2FnZSB8fCBlcnIuZXJyb3JfZGVzY3JpcHRpb24gfHwgZXJyLmVycm9yIHx8IEpTT04uc3RyaW5naWZ5KGVycik7XG5jb25zdCBoYW5kbGVFcnJvciA9IChlcnJvciwgcmVqZWN0LCBvcHRpb25zKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBSZXMgPSB5aWVsZCByZXNvbHZlUmVzcG9uc2UoKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZXMgJiYgIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubm9SZXNvbHZlSnNvbikpIHtcbiAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIC5qc29uKClcbiAgICAgICAgICAgIC50aGVuKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgU3RvcmFnZUFwaUVycm9yKF9nZXRFcnJvck1lc3NhZ2UoZXJyKSwgZXJyb3Iuc3RhdHVzIHx8IDUwMCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgU3RvcmFnZVVua25vd25FcnJvcihfZ2V0RXJyb3JNZXNzYWdlKGVyciksIGVycikpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlamVjdChuZXcgU3RvcmFnZVVua25vd25FcnJvcihfZ2V0RXJyb3JNZXNzYWdlKGVycm9yKSwgZXJyb3IpKTtcbiAgICB9XG59KTtcbmNvbnN0IF9nZXRSZXF1ZXN0UGFyYW1zID0gKG1ldGhvZCwgb3B0aW9ucywgcGFyYW1ldGVycywgYm9keSkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHsgbWV0aG9kLCBoZWFkZXJzOiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhlYWRlcnMpIHx8IHt9IH07XG4gICAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgcGFyYW1zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaGVhZGVycyk7XG4gICAgaWYgKGJvZHkpIHtcbiAgICAgICAgcGFyYW1zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShib2R5KTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgcGFyYW1ldGVycyk7XG59O1xuZnVuY3Rpb24gX2hhbmRsZVJlcXVlc3QoZmV0Y2hlciwgbWV0aG9kLCB1cmwsIG9wdGlvbnMsIHBhcmFtZXRlcnMsIGJvZHkpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgZmV0Y2hlcih1cmwsIF9nZXRSZXF1ZXN0UGFyYW1zKG1ldGhvZCwgb3B0aW9ucywgcGFyYW1ldGVycywgYm9keSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0Lm9rKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ub1Jlc29sdmVKc29uKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBoYW5kbGVFcnJvcihlcnJvciwgcmVqZWN0LCBvcHRpb25zKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldChmZXRjaGVyLCB1cmwsIG9wdGlvbnMsIHBhcmFtZXRlcnMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZVJlcXVlc3QoZmV0Y2hlciwgJ0dFVCcsIHVybCwgb3B0aW9ucywgcGFyYW1ldGVycyk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcG9zdChmZXRjaGVyLCB1cmwsIGJvZHksIG9wdGlvbnMsIHBhcmFtZXRlcnMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZVJlcXVlc3QoZmV0Y2hlciwgJ1BPU1QnLCB1cmwsIG9wdGlvbnMsIHBhcmFtZXRlcnMsIGJvZHkpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHB1dChmZXRjaGVyLCB1cmwsIGJvZHksIG9wdGlvbnMsIHBhcmFtZXRlcnMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZVJlcXVlc3QoZmV0Y2hlciwgJ1BVVCcsIHVybCwgb3B0aW9ucywgcGFyYW1ldGVycywgYm9keSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGVhZChmZXRjaGVyLCB1cmwsIG9wdGlvbnMsIHBhcmFtZXRlcnMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZVJlcXVlc3QoZmV0Y2hlciwgJ0hFQUQnLCB1cmwsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgbm9SZXNvbHZlSnNvbjogdHJ1ZSB9KSwgcGFyYW1ldGVycyk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGZldGNoZXIsIHVybCwgYm9keSwgb3B0aW9ucywgcGFyYW1ldGVycykge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHJldHVybiBfaGFuZGxlUmVxdWVzdChmZXRjaGVyLCAnREVMRVRFJywgdXJsLCBvcHRpb25zLCBwYXJhbWV0ZXJzLCBib2R5KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZldGNoLmpzLm1hcCIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgaXNTdG9yYWdlRXJyb3IsIFN0b3JhZ2VFcnJvciwgU3RvcmFnZVVua25vd25FcnJvciB9IGZyb20gJy4uL2xpYi9lcnJvcnMnO1xuaW1wb3J0IHsgZ2V0LCBoZWFkLCBwb3N0LCByZW1vdmUgfSBmcm9tICcuLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgcmVjdXJzaXZlVG9DYW1lbCwgcmVzb2x2ZUZldGNoIH0gZnJvbSAnLi4vbGliL2hlbHBlcnMnO1xuY29uc3QgREVGQVVMVF9TRUFSQ0hfT1BUSU9OUyA9IHtcbiAgICBsaW1pdDogMTAwLFxuICAgIG9mZnNldDogMCxcbiAgICBzb3J0Qnk6IHtcbiAgICAgICAgY29sdW1uOiAnbmFtZScsXG4gICAgICAgIG9yZGVyOiAnYXNjJyxcbiAgICB9LFxufTtcbmNvbnN0IERFRkFVTFRfRklMRV9PUFRJT05TID0ge1xuICAgIGNhY2hlQ29udHJvbDogJzM2MDAnLFxuICAgIGNvbnRlbnRUeXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JyxcbiAgICB1cHNlcnQ6IGZhbHNlLFxufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2VGaWxlQXBpIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmwsIGhlYWRlcnMgPSB7fSwgYnVja2V0SWQsIGZldGNoKSB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLmJ1Y2tldElkID0gYnVja2V0SWQ7XG4gICAgICAgIHRoaXMuZmV0Y2ggPSByZXNvbHZlRmV0Y2goZmV0Y2gpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIGEgZmlsZSB0byBhbiBleGlzdGluZyBidWNrZXQgb3IgcmVwbGFjZXMgYW4gZXhpc3RpbmcgZmlsZSBhdCB0aGUgc3BlY2lmaWVkIHBhdGggd2l0aCBhIG5ldyBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWV0aG9kIEhUVFAgbWV0aG9kLlxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSByZWxhdGl2ZSBmaWxlIHBhdGguIFNob3VsZCBiZSBvZiB0aGUgZm9ybWF0IGBmb2xkZXIvc3ViZm9sZGVyL2ZpbGVuYW1lLnBuZ2AuIFRoZSBidWNrZXQgbXVzdCBhbHJlYWR5IGV4aXN0IGJlZm9yZSBhdHRlbXB0aW5nIHRvIHVwbG9hZC5cbiAgICAgKiBAcGFyYW0gZmlsZUJvZHkgVGhlIGJvZHkgb2YgdGhlIGZpbGUgdG8gYmUgc3RvcmVkIGluIHRoZSBidWNrZXQuXG4gICAgICovXG4gICAgdXBsb2FkT3JVcGRhdGUobWV0aG9kLCBwYXRoLCBmaWxlQm9keSwgZmlsZU9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IGJvZHk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9GSUxFX09QVElPTlMpLCBmaWxlT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaGVhZGVycyksIChtZXRob2QgPT09ICdQT1NUJyAmJiB7ICd4LXVwc2VydCc6IFN0cmluZyhvcHRpb25zLnVwc2VydCkgfSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gb3B0aW9ucy5tZXRhZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIGZpbGVCb2R5IGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICAgICAgICAgICAgICBib2R5ID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIGJvZHkuYXBwZW5kKCdjYWNoZUNvbnRyb2wnLCBvcHRpb25zLmNhY2hlQ29udHJvbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5hcHBlbmQoJ21ldGFkYXRhJywgdGhpcy5lbmNvZGVNZXRhZGF0YShtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJvZHkuYXBwZW5kKCcnLCBmaWxlQm9keSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiYgZmlsZUJvZHkgaW5zdGFuY2VvZiBGb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBib2R5ID0gZmlsZUJvZHk7XG4gICAgICAgICAgICAgICAgICAgIGJvZHkuYXBwZW5kKCdjYWNoZUNvbnRyb2wnLCBvcHRpb25zLmNhY2hlQ29udHJvbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5hcHBlbmQoJ21ldGFkYXRhJywgdGhpcy5lbmNvZGVNZXRhZGF0YShtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBib2R5ID0gZmlsZUJvZHk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NhY2hlLWNvbnRyb2wnXSA9IGBtYXgtYWdlPSR7b3B0aW9ucy5jYWNoZUNvbnRyb2x9YDtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10gPSBvcHRpb25zLmNvbnRlbnRUeXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ3gtbWV0YWRhdGEnXSA9IHRoaXMudG9CYXNlNjQodGhpcy5lbmNvZGVNZXRhZGF0YShtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaWxlT3B0aW9ucyA9PT0gbnVsbCB8fCBmaWxlT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmlsZU9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBoZWFkZXJzKSwgZmlsZU9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUGF0aCA9IHRoaXMuX3JlbW92ZUVtcHR5Rm9sZGVycyhwYXRoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfcGF0aCA9IHRoaXMuX2dldEZpbmFsUGF0aChjbGVhblBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHlpZWxkIHRoaXMuZmV0Y2goYCR7dGhpcy51cmx9L29iamVjdC8ke19wYXRofWAsIE9iamVjdC5hc3NpZ24oeyBtZXRob2QsIGJvZHk6IGJvZHksIGhlYWRlcnMgfSwgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZHVwbGV4KSA/IHsgZHVwbGV4OiBvcHRpb25zLmR1cGxleCB9IDoge30pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBwYXRoOiBjbGVhblBhdGgsIGlkOiBkYXRhLklkLCBmdWxsUGF0aDogZGF0YS5LZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIGEgZmlsZSB0byBhbiBleGlzdGluZyBidWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgZmlsZSBwYXRoLCBpbmNsdWRpbmcgdGhlIGZpbGUgbmFtZS4gU2hvdWxkIGJlIG9mIHRoZSBmb3JtYXQgYGZvbGRlci9zdWJmb2xkZXIvZmlsZW5hbWUucG5nYC4gVGhlIGJ1Y2tldCBtdXN0IGFscmVhZHkgZXhpc3QgYmVmb3JlIGF0dGVtcHRpbmcgdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSBmaWxlQm9keSBUaGUgYm9keSBvZiB0aGUgZmlsZSB0byBiZSBzdG9yZWQgaW4gdGhlIGJ1Y2tldC5cbiAgICAgKi9cbiAgICB1cGxvYWQocGF0aCwgZmlsZUJvZHksIGZpbGVPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRPclVwZGF0ZSgnUE9TVCcsIHBhdGgsIGZpbGVCb2R5LCBmaWxlT3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGxvYWQgYSBmaWxlIHdpdGggYSB0b2tlbiBnZW5lcmF0ZWQgZnJvbSBgY3JlYXRlU2lnbmVkVXBsb2FkVXJsYC5cbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgZmlsZSBwYXRoLCBpbmNsdWRpbmcgdGhlIGZpbGUgbmFtZS4gU2hvdWxkIGJlIG9mIHRoZSBmb3JtYXQgYGZvbGRlci9zdWJmb2xkZXIvZmlsZW5hbWUucG5nYC4gVGhlIGJ1Y2tldCBtdXN0IGFscmVhZHkgZXhpc3QgYmVmb3JlIGF0dGVtcHRpbmcgdG8gdXBsb2FkLlxuICAgICAqIEBwYXJhbSB0b2tlbiBUaGUgdG9rZW4gZ2VuZXJhdGVkIGZyb20gYGNyZWF0ZVNpZ25lZFVwbG9hZFVybGBcbiAgICAgKiBAcGFyYW0gZmlsZUJvZHkgVGhlIGJvZHkgb2YgdGhlIGZpbGUgdG8gYmUgc3RvcmVkIGluIHRoZSBidWNrZXQuXG4gICAgICovXG4gICAgdXBsb2FkVG9TaWduZWRVcmwocGF0aCwgdG9rZW4sIGZpbGVCb2R5LCBmaWxlT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5QYXRoID0gdGhpcy5fcmVtb3ZlRW1wdHlGb2xkZXJzKHBhdGgpO1xuICAgICAgICAgICAgY29uc3QgX3BhdGggPSB0aGlzLl9nZXRGaW5hbFBhdGgoY2xlYW5QYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy51cmwgKyBgL29iamVjdC91cGxvYWQvc2lnbi8ke19wYXRofWApO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3Rva2VuJywgdG9rZW4pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgYm9keTtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IHVwc2VydDogREVGQVVMVF9GSUxFX09QVElPTlMudXBzZXJ0IH0sIGZpbGVPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmhlYWRlcnMpLCB7ICd4LXVwc2VydCc6IFN0cmluZyhvcHRpb25zLnVwc2VydCkgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBCbG9iICE9PSAndW5kZWZpbmVkJyAmJiBmaWxlQm9keSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICBib2R5LmFwcGVuZCgnY2FjaGVDb250cm9sJywgb3B0aW9ucy5jYWNoZUNvbnRyb2wpO1xuICAgICAgICAgICAgICAgICAgICBib2R5LmFwcGVuZCgnJywgZmlsZUJvZHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnICYmIGZpbGVCb2R5IGluc3RhbmNlb2YgRm9ybURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IGZpbGVCb2R5O1xuICAgICAgICAgICAgICAgICAgICBib2R5LmFwcGVuZCgnY2FjaGVDb250cm9sJywgb3B0aW9ucy5jYWNoZUNvbnRyb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSA9IGZpbGVCb2R5O1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjYWNoZS1jb250cm9sJ10gPSBgbWF4LWFnZT0ke29wdGlvbnMuY2FjaGVDb250cm9sfWA7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gb3B0aW9ucy5jb250ZW50VHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0geWllbGQgdGhpcy5mZXRjaCh1cmwudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBib2R5LFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgcGF0aDogY2xlYW5QYXRoLCBmdWxsUGF0aDogZGF0YS5LZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2lnbmVkIHVwbG9hZCBVUkwuXG4gICAgICogU2lnbmVkIHVwbG9hZCBVUkxzIGNhbiBiZSB1c2VkIHRvIHVwbG9hZCBmaWxlcyB0byB0aGUgYnVja2V0IHdpdGhvdXQgZnVydGhlciBhdXRoZW50aWNhdGlvbi5cbiAgICAgKiBUaGV5IGFyZSB2YWxpZCBmb3IgMiBob3Vycy5cbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgZmlsZSBwYXRoLCBpbmNsdWRpbmcgdGhlIGN1cnJlbnQgZmlsZSBuYW1lLiBGb3IgZXhhbXBsZSBgZm9sZGVyL2ltYWdlLnBuZ2AuXG4gICAgICogQHBhcmFtIG9wdGlvbnMudXBzZXJ0IElmIHNldCB0byB0cnVlLCBhbGxvd3MgdGhlIGZpbGUgdG8gYmUgb3ZlcndyaXR0ZW4gaWYgaXQgYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgY3JlYXRlU2lnbmVkVXBsb2FkVXJsKHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IF9wYXRoID0gdGhpcy5fZ2V0RmluYWxQYXRoKHBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudXBzZXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ3gtdXBzZXJ0J10gPSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBwb3N0KHRoaXMuZmV0Y2gsIGAke3RoaXMudXJsfS9vYmplY3QvdXBsb2FkL3NpZ24vJHtfcGF0aH1gLCB7fSwgeyBoZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy51cmwgKyBkYXRhLnVybCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgndG9rZW4nKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdG9yYWdlRXJyb3IoJ05vIHRva2VuIHJldHVybmVkIGJ5IEFQSScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHNpZ25lZFVybDogdXJsLnRvU3RyaW5nKCksIHBhdGgsIHRva2VuIH0sIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdG9yYWdlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwbGFjZXMgYW4gZXhpc3RpbmcgZmlsZSBhdCB0aGUgc3BlY2lmaWVkIHBhdGggd2l0aCBhIG5ldyBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcmVsYXRpdmUgZmlsZSBwYXRoLiBTaG91bGQgYmUgb2YgdGhlIGZvcm1hdCBgZm9sZGVyL3N1YmZvbGRlci9maWxlbmFtZS5wbmdgLiBUaGUgYnVja2V0IG11c3QgYWxyZWFkeSBleGlzdCBiZWZvcmUgYXR0ZW1wdGluZyB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIGZpbGVCb2R5IFRoZSBib2R5IG9mIHRoZSBmaWxlIHRvIGJlIHN0b3JlZCBpbiB0aGUgYnVja2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZShwYXRoLCBmaWxlQm9keSwgZmlsZU9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwbG9hZE9yVXBkYXRlKCdQVVQnLCBwYXRoLCBmaWxlQm9keSwgZmlsZU9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgYW4gZXhpc3RpbmcgZmlsZSB0byBhIG5ldyBwYXRoIGluIHRoZSBzYW1lIGJ1Y2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmcm9tUGF0aCBUaGUgb3JpZ2luYWwgZmlsZSBwYXRoLCBpbmNsdWRpbmcgdGhlIGN1cnJlbnQgZmlsZSBuYW1lLiBGb3IgZXhhbXBsZSBgZm9sZGVyL2ltYWdlLnBuZ2AuXG4gICAgICogQHBhcmFtIHRvUGF0aCBUaGUgbmV3IGZpbGUgcGF0aCwgaW5jbHVkaW5nIHRoZSBuZXcgZmlsZSBuYW1lLiBGb3IgZXhhbXBsZSBgZm9sZGVyL2ltYWdlLW5ldy5wbmdgLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBkZXN0aW5hdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIG1vdmUoZnJvbVBhdGgsIHRvUGF0aCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgcG9zdCh0aGlzLmZldGNoLCBgJHt0aGlzLnVybH0vb2JqZWN0L21vdmVgLCB7XG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldElkOiB0aGlzLmJ1Y2tldElkLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VLZXk6IGZyb21QYXRoLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbktleTogdG9QYXRoLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkJ1Y2tldDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRlc3RpbmF0aW9uQnVja2V0LFxuICAgICAgICAgICAgICAgIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdG9yYWdlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29waWVzIGFuIGV4aXN0aW5nIGZpbGUgdG8gYSBuZXcgcGF0aCBpbiB0aGUgc2FtZSBidWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJvbVBhdGggVGhlIG9yaWdpbmFsIGZpbGUgcGF0aCwgaW5jbHVkaW5nIHRoZSBjdXJyZW50IGZpbGUgbmFtZS4gRm9yIGV4YW1wbGUgYGZvbGRlci9pbWFnZS5wbmdgLlxuICAgICAqIEBwYXJhbSB0b1BhdGggVGhlIG5ldyBmaWxlIHBhdGgsIGluY2x1ZGluZyB0aGUgbmV3IGZpbGUgbmFtZS4gRm9yIGV4YW1wbGUgYGZvbGRlci9pbWFnZS1jb3B5LnBuZ2AuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGRlc3RpbmF0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgY29weShmcm9tUGF0aCwgdG9QYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBwb3N0KHRoaXMuZmV0Y2gsIGAke3RoaXMudXJsfS9vYmplY3QvY29weWAsIHtcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0SWQ6IHRoaXMuYnVja2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUtleTogZnJvbVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uS2V5OiB0b1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uQnVja2V0OiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGVzdGluYXRpb25CdWNrZXQsXG4gICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyBwYXRoOiBkYXRhLktleSB9LCBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3RvcmFnZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaWduZWQgVVJMLiBVc2UgYSBzaWduZWQgVVJMIHRvIHNoYXJlIGEgZmlsZSBmb3IgYSBmaXhlZCBhbW91bnQgb2YgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBmaWxlIHBhdGgsIGluY2x1ZGluZyB0aGUgY3VycmVudCBmaWxlIG5hbWUuIEZvciBleGFtcGxlIGBmb2xkZXIvaW1hZ2UucG5nYC5cbiAgICAgKiBAcGFyYW0gZXhwaXJlc0luIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB1bnRpbCB0aGUgc2lnbmVkIFVSTCBleHBpcmVzLiBGb3IgZXhhbXBsZSwgYDYwYCBmb3IgYSBVUkwgd2hpY2ggaXMgdmFsaWQgZm9yIG9uZSBtaW51dGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZG93bmxvYWQgdHJpZ2dlcnMgdGhlIGZpbGUgYXMgYSBkb3dubG9hZCBpZiBzZXQgdG8gdHJ1ZS4gU2V0IHRoaXMgcGFyYW1ldGVyIGFzIHRoZSBuYW1lIG9mIHRoZSBmaWxlIGlmIHlvdSB3YW50IHRvIHRyaWdnZXIgdGhlIGRvd25sb2FkIHdpdGggYSBkaWZmZXJlbnQgZmlsZW5hbWUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMudHJhbnNmb3JtIFRyYW5zZm9ybSB0aGUgYXNzZXQgYmVmb3JlIHNlcnZpbmcgaXQgdG8gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBjcmVhdGVTaWduZWRVcmwocGF0aCwgZXhwaXJlc0luLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBfcGF0aCA9IHRoaXMuX2dldEZpbmFsUGF0aChwYXRoKTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHlpZWxkIHBvc3QodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L29iamVjdC9zaWduLyR7X3BhdGh9YCwgT2JqZWN0LmFzc2lnbih7IGV4cGlyZXNJbiB9LCAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50cmFuc2Zvcm0pID8geyB0cmFuc2Zvcm06IG9wdGlvbnMudHJhbnNmb3JtIH0gOiB7fSkpLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZFF1ZXJ5UGFyYW0gPSAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRvd25sb2FkKVxuICAgICAgICAgICAgICAgICAgICA/IGAmZG93bmxvYWQ9JHtvcHRpb25zLmRvd25sb2FkID09PSB0cnVlID8gJycgOiBvcHRpb25zLmRvd25sb2FkfWBcbiAgICAgICAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRVcmwgPSBlbmNvZGVVUkkoYCR7dGhpcy51cmx9JHtkYXRhLnNpZ25lZFVSTH0ke2Rvd25sb2FkUXVlcnlQYXJhbX1gKTtcbiAgICAgICAgICAgICAgICBkYXRhID0geyBzaWduZWRVcmwgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3RvcmFnZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbXVsdGlwbGUgc2lnbmVkIFVSTHMuIFVzZSBhIHNpZ25lZCBVUkwgdG8gc2hhcmUgYSBmaWxlIGZvciBhIGZpeGVkIGFtb3VudCBvZiB0aW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhzIFRoZSBmaWxlIHBhdGhzIHRvIGJlIGRvd25sb2FkZWQsIGluY2x1ZGluZyB0aGUgY3VycmVudCBmaWxlIG5hbWVzLiBGb3IgZXhhbXBsZSBgWydmb2xkZXIvaW1hZ2UucG5nJywgJ2ZvbGRlcjIvaW1hZ2UyLnBuZyddYC5cbiAgICAgKiBAcGFyYW0gZXhwaXJlc0luIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB1bnRpbCB0aGUgc2lnbmVkIFVSTHMgZXhwaXJlLiBGb3IgZXhhbXBsZSwgYDYwYCBmb3IgVVJMcyB3aGljaCBhcmUgdmFsaWQgZm9yIG9uZSBtaW51dGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZG93bmxvYWQgdHJpZ2dlcnMgdGhlIGZpbGUgYXMgYSBkb3dubG9hZCBpZiBzZXQgdG8gdHJ1ZS4gU2V0IHRoaXMgcGFyYW1ldGVyIGFzIHRoZSBuYW1lIG9mIHRoZSBmaWxlIGlmIHlvdSB3YW50IHRvIHRyaWdnZXIgdGhlIGRvd25sb2FkIHdpdGggYSBkaWZmZXJlbnQgZmlsZW5hbWUuXG4gICAgICovXG4gICAgY3JlYXRlU2lnbmVkVXJscyhwYXRocywgZXhwaXJlc0luLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBwb3N0KHRoaXMuZmV0Y2gsIGAke3RoaXMudXJsfS9vYmplY3Qvc2lnbi8ke3RoaXMuYnVja2V0SWR9YCwgeyBleHBpcmVzSW4sIHBhdGhzIH0sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkUXVlcnlQYXJhbSA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZG93bmxvYWQpXG4gICAgICAgICAgICAgICAgICAgID8gYCZkb3dubG9hZD0ke29wdGlvbnMuZG93bmxvYWQgPT09IHRydWUgPyAnJyA6IG9wdGlvbnMuZG93bmxvYWR9YFxuICAgICAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEubWFwKChkYXR1bSkgPT4gKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGF0dW0pLCB7IHNpZ25lZFVybDogZGF0dW0uc2lnbmVkVVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlbmNvZGVVUkkoYCR7dGhpcy51cmx9JHtkYXR1bS5zaWduZWRVUkx9JHtkb3dubG9hZFF1ZXJ5UGFyYW19YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwgfSkpKSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZHMgYSBmaWxlIGZyb20gYSBwcml2YXRlIGJ1Y2tldC4gRm9yIHB1YmxpYyBidWNrZXRzLCBtYWtlIGEgcmVxdWVzdCB0byB0aGUgVVJMIHJldHVybmVkIGZyb20gYGdldFB1YmxpY1VybGAgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBmdWxsIHBhdGggYW5kIGZpbGUgbmFtZSBvZiB0aGUgZmlsZSB0byBiZSBkb3dubG9hZGVkLiBGb3IgZXhhbXBsZSBgZm9sZGVyL2ltYWdlLnBuZ2AuXG4gICAgICogQHBhcmFtIG9wdGlvbnMudHJhbnNmb3JtIFRyYW5zZm9ybSB0aGUgYXNzZXQgYmVmb3JlIHNlcnZpbmcgaXQgdG8gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBkb3dubG9hZChwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB3YW50c1RyYW5zZm9ybWF0aW9uID0gdHlwZW9mIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudHJhbnNmb3JtKSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJQYXRoID0gd2FudHNUcmFuc2Zvcm1hdGlvbiA/ICdyZW5kZXIvaW1hZ2UvYXV0aGVudGljYXRlZCcgOiAnb2JqZWN0JztcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWF0aW9uUXVlcnkgPSB0aGlzLnRyYW5zZm9ybU9wdHNUb1F1ZXJ5U3RyaW5nKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudHJhbnNmb3JtKSB8fCB7fSk7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IHRyYW5zZm9ybWF0aW9uUXVlcnkgPyBgPyR7dHJhbnNmb3JtYXRpb25RdWVyeX1gIDogJyc7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IF9wYXRoID0gdGhpcy5fZ2V0RmluYWxQYXRoKHBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHlpZWxkIGdldCh0aGlzLmZldGNoLCBgJHt0aGlzLnVybH0vJHtyZW5kZXJQYXRofS8ke19wYXRofSR7cXVlcnlTdHJpbmd9YCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIG5vUmVzb2x2ZUpzb246IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHJlcy5ibG9iKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGRldGFpbHMgb2YgYW4gZXhpc3RpbmcgZmlsZS5cbiAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAqL1xuICAgIGluZm8ocGF0aCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgX3BhdGggPSB0aGlzLl9nZXRGaW5hbFBhdGgocGF0aCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBnZXQodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L29iamVjdC9pbmZvLyR7X3BhdGh9YCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogcmVjdXJzaXZlVG9DYW1lbChkYXRhKSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIGV4aXN0ZW5jZSBvZiBhIGZpbGUuXG4gICAgICogQHBhcmFtIHBhdGhcbiAgICAgKi9cbiAgICBleGlzdHMocGF0aCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgX3BhdGggPSB0aGlzLl9nZXRGaW5hbFBhdGgocGF0aCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGhlYWQodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L29iamVjdC8ke19wYXRofWAsIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHRydWUsIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdG9yYWdlRXJyb3IoZXJyb3IpICYmIGVycm9yIGluc3RhbmNlb2YgU3RvcmFnZVVua25vd25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbEVycm9yID0gZXJyb3Iub3JpZ2luYWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFs0MDAsIDQwNF0uaW5jbHVkZXMob3JpZ2luYWxFcnJvciA9PT0gbnVsbCB8fCBvcmlnaW5hbEVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcmlnaW5hbEVycm9yLnN0YXR1cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGZhbHNlLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzaW1wbGUgY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gZ2V0IHRoZSBVUkwgZm9yIGFuIGFzc2V0IGluIGEgcHVibGljIGJ1Y2tldC4gSWYgeW91IGRvIG5vdCB3YW50IHRvIHVzZSB0aGlzIGZ1bmN0aW9uLCB5b3UgY2FuIGNvbnN0cnVjdCB0aGUgcHVibGljIFVSTCBieSBjb25jYXRlbmF0aW5nIHRoZSBidWNrZXQgVVJMIHdpdGggdGhlIHBhdGggdG8gdGhlIGFzc2V0LlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgdmVyaWZ5IGlmIHRoZSBidWNrZXQgaXMgcHVibGljLiBJZiBhIHB1YmxpYyBVUkwgaXMgY3JlYXRlZCBmb3IgYSBidWNrZXQgd2hpY2ggaXMgbm90IHB1YmxpYywgeW91IHdpbGwgbm90IGJlIGFibGUgdG8gZG93bmxvYWQgdGhlIGFzc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggVGhlIHBhdGggYW5kIG5hbWUgb2YgdGhlIGZpbGUgdG8gZ2VuZXJhdGUgdGhlIHB1YmxpYyBVUkwgZm9yLiBGb3IgZXhhbXBsZSBgZm9sZGVyL2ltYWdlLnBuZ2AuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZG93bmxvYWQgVHJpZ2dlcnMgdGhlIGZpbGUgYXMgYSBkb3dubG9hZCBpZiBzZXQgdG8gdHJ1ZS4gU2V0IHRoaXMgcGFyYW1ldGVyIGFzIHRoZSBuYW1lIG9mIHRoZSBmaWxlIGlmIHlvdSB3YW50IHRvIHRyaWdnZXIgdGhlIGRvd25sb2FkIHdpdGggYSBkaWZmZXJlbnQgZmlsZW5hbWUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMudHJhbnNmb3JtIFRyYW5zZm9ybSB0aGUgYXNzZXQgYmVmb3JlIHNlcnZpbmcgaXQgdG8gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBnZXRQdWJsaWNVcmwocGF0aCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBfcGF0aCA9IHRoaXMuX2dldEZpbmFsUGF0aChwYXRoKTtcbiAgICAgICAgY29uc3QgX3F1ZXJ5U3RyaW5nID0gW107XG4gICAgICAgIGNvbnN0IGRvd25sb2FkUXVlcnlQYXJhbSA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZG93bmxvYWQpXG4gICAgICAgICAgICA/IGBkb3dubG9hZD0ke29wdGlvbnMuZG93bmxvYWQgPT09IHRydWUgPyAnJyA6IG9wdGlvbnMuZG93bmxvYWR9YFxuICAgICAgICAgICAgOiAnJztcbiAgICAgICAgaWYgKGRvd25sb2FkUXVlcnlQYXJhbSAhPT0gJycpIHtcbiAgICAgICAgICAgIF9xdWVyeVN0cmluZy5wdXNoKGRvd25sb2FkUXVlcnlQYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FudHNUcmFuc2Zvcm1hdGlvbiA9IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnRyYW5zZm9ybSkgIT09ICd1bmRlZmluZWQnO1xuICAgICAgICBjb25zdCByZW5kZXJQYXRoID0gd2FudHNUcmFuc2Zvcm1hdGlvbiA/ICdyZW5kZXIvaW1hZ2UnIDogJ29iamVjdCc7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWF0aW9uUXVlcnkgPSB0aGlzLnRyYW5zZm9ybU9wdHNUb1F1ZXJ5U3RyaW5nKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudHJhbnNmb3JtKSB8fCB7fSk7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1hdGlvblF1ZXJ5ICE9PSAnJykge1xuICAgICAgICAgICAgX3F1ZXJ5U3RyaW5nLnB1c2godHJhbnNmb3JtYXRpb25RdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHF1ZXJ5U3RyaW5nID0gX3F1ZXJ5U3RyaW5nLmpvaW4oJyYnKTtcbiAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnJykge1xuICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSBgPyR7cXVlcnlTdHJpbmd9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogeyBwdWJsaWNVcmw6IGVuY29kZVVSSShgJHt0aGlzLnVybH0vJHtyZW5kZXJQYXRofS9wdWJsaWMvJHtfcGF0aH0ke3F1ZXJ5U3RyaW5nfWApIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgZmlsZXMgd2l0aGluIHRoZSBzYW1lIGJ1Y2tldFxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhzIEFuIGFycmF5IG9mIGZpbGVzIHRvIGRlbGV0ZSwgaW5jbHVkaW5nIHRoZSBwYXRoIGFuZCBmaWxlIG5hbWUuIEZvciBleGFtcGxlIFtgJ2ZvbGRlci9pbWFnZS5wbmcnYF0uXG4gICAgICovXG4gICAgcmVtb3ZlKHBhdGhzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCByZW1vdmUodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L29iamVjdC8ke3RoaXMuYnVja2V0SWR9YCwgeyBwcmVmaXhlczogcGF0aHMgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZmlsZSBtZXRhZGF0YVxuICAgICAqIEBwYXJhbSBpZCB0aGUgZmlsZSBpZCB0byByZXRyaWV2ZSBtZXRhZGF0YVxuICAgICAqL1xuICAgIC8vIGFzeW5jIGdldE1ldGFkYXRhKFxuICAgIC8vICAgaWQ6IHN0cmluZ1xuICAgIC8vICk6IFByb21pc2U8XG4gICAgLy8gICB8IHtcbiAgICAvLyAgICAgICBkYXRhOiBNZXRhZGF0YVxuICAgIC8vICAgICAgIGVycm9yOiBudWxsXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIHwge1xuICAgIC8vICAgICAgIGRhdGE6IG51bGxcbiAgICAvLyAgICAgICBlcnJvcjogU3RvcmFnZUVycm9yXG4gICAgLy8gICAgIH1cbiAgICAvLyA+IHtcbiAgICAvLyAgIHRyeSB7XG4gICAgLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXQodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L21ldGFkYXRhLyR7aWR9YCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSlcbiAgICAvLyAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfVxuICAgIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyAgICAgaWYgKGlzU3RvcmFnZUVycm9yKGVycm9yKSkge1xuICAgIC8vICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB0aHJvdyBlcnJvclxuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgZmlsZSBtZXRhZGF0YVxuICAgICAqIEBwYXJhbSBpZCB0aGUgZmlsZSBpZCB0byB1cGRhdGUgbWV0YWRhdGFcbiAgICAgKiBAcGFyYW0gbWV0YSB0aGUgbmV3IGZpbGUgbWV0YWRhdGFcbiAgICAgKi9cbiAgICAvLyBhc3luYyB1cGRhdGVNZXRhZGF0YShcbiAgICAvLyAgIGlkOiBzdHJpbmcsXG4gICAgLy8gICBtZXRhOiBNZXRhZGF0YVxuICAgIC8vICk6IFByb21pc2U8XG4gICAgLy8gICB8IHtcbiAgICAvLyAgICAgICBkYXRhOiBNZXRhZGF0YVxuICAgIC8vICAgICAgIGVycm9yOiBudWxsXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIHwge1xuICAgIC8vICAgICAgIGRhdGE6IG51bGxcbiAgICAvLyAgICAgICBlcnJvcjogU3RvcmFnZUVycm9yXG4gICAgLy8gICAgIH1cbiAgICAvLyA+IHtcbiAgICAvLyAgIHRyeSB7XG4gICAgLy8gICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwb3N0KFxuICAgIC8vICAgICAgIHRoaXMuZmV0Y2gsXG4gICAgLy8gICAgICAgYCR7dGhpcy51cmx9L21ldGFkYXRhLyR7aWR9YCxcbiAgICAvLyAgICAgICB7IC4uLm1ldGEgfSxcbiAgICAvLyAgICAgICB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9XG4gICAgLy8gICAgIClcbiAgICAvLyAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfVxuICAgIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyAgICAgaWYgKGlzU3RvcmFnZUVycm9yKGVycm9yKSkge1xuICAgIC8vICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICB0aHJvdyBlcnJvclxuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyBhbGwgdGhlIGZpbGVzIHdpdGhpbiBhIGJ1Y2tldC5cbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgZm9sZGVyIHBhdGguXG4gICAgICovXG4gICAgbGlzdChwYXRoLCBvcHRpb25zLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRUFSQ0hfT1BUSU9OUyksIG9wdGlvbnMpLCB7IHByZWZpeDogcGF0aCB8fCAnJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgcG9zdCh0aGlzLmZldGNoLCBgJHt0aGlzLnVybH0vb2JqZWN0L2xpc3QvJHt0aGlzLmJ1Y2tldElkfWAsIGJvZHksIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0sIHBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdG9yYWdlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5jb2RlTWV0YWRhdGEobWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhKTtcbiAgICB9XG4gICAgdG9CYXNlNjQoZGF0YSkge1xuICAgICAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ0b2EoZGF0YSk7XG4gICAgfVxuICAgIF9nZXRGaW5hbFBhdGgocGF0aCkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5idWNrZXRJZH0vJHtwYXRofWA7XG4gICAgfVxuICAgIF9yZW1vdmVFbXB0eUZvbGRlcnMocGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9eXFwvfFxcLyQvZywgJycpLnJlcGxhY2UoL1xcLysvZywgJy8nKTtcbiAgICB9XG4gICAgdHJhbnNmb3JtT3B0c1RvUXVlcnlTdHJpbmcodHJhbnNmb3JtKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuICAgICAgICBpZiAodHJhbnNmb3JtLndpZHRoKSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChgd2lkdGg9JHt0cmFuc2Zvcm0ud2lkdGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zZm9ybS5oZWlnaHQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGBoZWlnaHQ9JHt0cmFuc2Zvcm0uaGVpZ2h0fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFuc2Zvcm0ucmVzaXplKSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChgcmVzaXplPSR7dHJhbnNmb3JtLnJlc2l6ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhbnNmb3JtLmZvcm1hdCkge1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goYGZvcm1hdD0ke3RyYW5zZm9ybS5mb3JtYXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zZm9ybS5xdWFsaXR5KSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChgcXVhbGl0eT0ke3RyYW5zZm9ybS5xdWFsaXR5fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbXMuam9pbignJicpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JhZ2VGaWxlQXBpLmpzLm1hcCIsIi8vIGdlbmVyYXRlZCBieSBnZW52ZXJzaW9uXG5leHBvcnQgY29uc3QgdmVyc2lvbiA9ICcyLjcuMSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLmpzLm1hcCIsImltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuL3ZlcnNpb24nO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfSEVBREVSUyA9IHsgJ1gtQ2xpZW50LUluZm8nOiBgc3RvcmFnZS1qcy8ke3ZlcnNpb259YCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgREVGQVVMVF9IRUFERVJTIH0gZnJvbSAnLi4vbGliL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBpc1N0b3JhZ2VFcnJvciB9IGZyb20gJy4uL2xpYi9lcnJvcnMnO1xuaW1wb3J0IHsgZ2V0LCBwb3N0LCBwdXQsIHJlbW92ZSB9IGZyb20gJy4uL2xpYi9mZXRjaCc7XG5pbXBvcnQgeyByZXNvbHZlRmV0Y2ggfSBmcm9tICcuLi9saWIvaGVscGVycyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yYWdlQnVja2V0QXBpIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmwsIGhlYWRlcnMgPSB7fSwgZmV0Y2gpIHtcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9IRUFERVJTKSwgaGVhZGVycyk7XG4gICAgICAgIHRoaXMuZmV0Y2ggPSByZXNvbHZlRmV0Y2goZmV0Y2gpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGRldGFpbHMgb2YgYWxsIFN0b3JhZ2UgYnVja2V0cyB3aXRoaW4gYW4gZXhpc3RpbmcgcHJvamVjdC5cbiAgICAgKi9cbiAgICBsaXN0QnVja2V0cygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIGdldCh0aGlzLmZldGNoLCBgJHt0aGlzLnVybH0vYnVja2V0YCwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGRldGFpbHMgb2YgYW4gZXhpc3RpbmcgU3RvcmFnZSBidWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgVGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBidWNrZXQgeW91IHdvdWxkIGxpa2UgdG8gcmV0cmlldmUuXG4gICAgICovXG4gICAgZ2V0QnVja2V0KGlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBnZXQodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L2J1Y2tldC8ke2lkfWAsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdG9yYWdlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdG9yYWdlIGJ1Y2tldFxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBidWNrZXQgeW91IGFyZSBjcmVhdGluZy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5wdWJsaWMgVGhlIHZpc2liaWxpdHkgb2YgdGhlIGJ1Y2tldC4gUHVibGljIGJ1Y2tldHMgZG9uJ3QgcmVxdWlyZSBhbiBhdXRob3JpemF0aW9uIHRva2VuIHRvIGRvd25sb2FkIG9iamVjdHMsIGJ1dCBzdGlsbCByZXF1aXJlIGEgdmFsaWQgdG9rZW4gZm9yIGFsbCBvdGhlciBvcGVyYXRpb25zLiBCeSBkZWZhdWx0LCBidWNrZXRzIGFyZSBwcml2YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmZpbGVTaXplTGltaXQgc3BlY2lmaWVzIHRoZSBtYXggZmlsZSBzaXplIGluIGJ5dGVzIHRoYXQgY2FuIGJlIHVwbG9hZGVkIHRvIHRoaXMgYnVja2V0LlxuICAgICAqIFRoZSBnbG9iYWwgZmlsZSBzaXplIGxpbWl0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGlzIHZhbHVlLlxuICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIG51bGwsIHdoaWNoIGRvZXNuJ3Qgc2V0IGEgcGVyIGJ1Y2tldCBmaWxlIHNpemUgbGltaXQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWxsb3dlZE1pbWVUeXBlcyBzcGVjaWZpZXMgdGhlIGFsbG93ZWQgbWltZSB0eXBlcyB0aGF0IHRoaXMgYnVja2V0IGNhbiBhY2NlcHQgZHVyaW5nIHVwbG9hZC5cbiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBudWxsLCB3aGljaCBhbGxvd3MgZmlsZXMgd2l0aCBhbGwgbWltZSB0eXBlcyB0byBiZSB1cGxvYWRlZC5cbiAgICAgKiBFYWNoIG1pbWUgdHlwZSBzcGVjaWZpZWQgY2FuIGJlIGEgd2lsZGNhcmQsIGUuZy4gaW1hZ2UvKiwgb3IgYSBzcGVjaWZpYyBtaW1lIHR5cGUsIGUuZy4gaW1hZ2UvcG5nLlxuICAgICAqIEByZXR1cm5zIG5ld2x5IGNyZWF0ZWQgYnVja2V0IGlkXG4gICAgICovXG4gICAgY3JlYXRlQnVja2V0KGlkLCBvcHRpb25zID0ge1xuICAgICAgICBwdWJsaWM6IGZhbHNlLFxuICAgIH0pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHBvc3QodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L2J1Y2tldGAsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGlkLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaWM6IG9wdGlvbnMucHVibGljLFxuICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemVfbGltaXQ6IG9wdGlvbnMuZmlsZVNpemVMaW1pdCxcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZF9taW1lX3R5cGVzOiBvcHRpb25zLmFsbG93ZWRNaW1lVHlwZXMsXG4gICAgICAgICAgICAgICAgfSwgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChpc1N0b3JhZ2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGEgU3RvcmFnZSBidWNrZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgYnVja2V0IHlvdSBhcmUgdXBkYXRpbmcuXG4gICAgICogQHBhcmFtIG9wdGlvbnMucHVibGljIFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBidWNrZXQuIFB1YmxpYyBidWNrZXRzIGRvbid0IHJlcXVpcmUgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiB0byBkb3dubG9hZCBvYmplY3RzLCBidXQgc3RpbGwgcmVxdWlyZSBhIHZhbGlkIHRva2VuIGZvciBhbGwgb3RoZXIgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5maWxlU2l6ZUxpbWl0IHNwZWNpZmllcyB0aGUgbWF4IGZpbGUgc2l6ZSBpbiBieXRlcyB0aGF0IGNhbiBiZSB1cGxvYWRlZCB0byB0aGlzIGJ1Y2tldC5cbiAgICAgKiBUaGUgZ2xvYmFsIGZpbGUgc2l6ZSBsaW1pdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgdGhpcyB2YWx1ZS5cbiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBudWxsLCB3aGljaCBkb2Vzbid0IHNldCBhIHBlciBidWNrZXQgZmlsZSBzaXplIGxpbWl0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsbG93ZWRNaW1lVHlwZXMgc3BlY2lmaWVzIHRoZSBhbGxvd2VkIG1pbWUgdHlwZXMgdGhhdCB0aGlzIGJ1Y2tldCBjYW4gYWNjZXB0IGR1cmluZyB1cGxvYWQuXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgbnVsbCwgd2hpY2ggYWxsb3dzIGZpbGVzIHdpdGggYWxsIG1pbWUgdHlwZXMgdG8gYmUgdXBsb2FkZWQuXG4gICAgICogRWFjaCBtaW1lIHR5cGUgc3BlY2lmaWVkIGNhbiBiZSBhIHdpbGRjYXJkLCBlLmcuIGltYWdlLyosIG9yIGEgc3BlY2lmaWMgbWltZSB0eXBlLCBlLmcuIGltYWdlL3BuZy5cbiAgICAgKi9cbiAgICB1cGRhdGVCdWNrZXQoaWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHB1dCh0aGlzLmZldGNoLCBgJHt0aGlzLnVybH0vYnVja2V0LyR7aWR9YCwge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaWQsXG4gICAgICAgICAgICAgICAgICAgIHB1YmxpYzogb3B0aW9ucy5wdWJsaWMsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVfc2l6ZV9saW1pdDogb3B0aW9ucy5maWxlU2l6ZUxpbWl0LFxuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkX21pbWVfdHlwZXM6IG9wdGlvbnMuYWxsb3dlZE1pbWVUeXBlcyxcbiAgICAgICAgICAgICAgICB9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3RvcmFnZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIG9iamVjdHMgaW5zaWRlIGEgc2luZ2xlIGJ1Y2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGJ1Y2tldCB5b3Ugd291bGQgbGlrZSB0byBlbXB0eS5cbiAgICAgKi9cbiAgICBlbXB0eUJ1Y2tldChpZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgcG9zdCh0aGlzLmZldGNoLCBgJHt0aGlzLnVybH0vYnVja2V0LyR7aWR9L2VtcHR5YCwge30sIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdG9yYWdlRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhbiBleGlzdGluZyBidWNrZXQuIEEgYnVja2V0IGNhbid0IGJlIGRlbGV0ZWQgd2l0aCBleGlzdGluZyBvYmplY3RzIGluc2lkZSBpdC5cbiAgICAgKiBZb3UgbXVzdCBmaXJzdCBgZW1wdHkoKWAgdGhlIGJ1Y2tldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGJ1Y2tldCB5b3Ugd291bGQgbGlrZSB0byBkZWxldGUuXG4gICAgICovXG4gICAgZGVsZXRlQnVja2V0KGlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCByZW1vdmUodGhpcy5mZXRjaCwgYCR7dGhpcy51cmx9L2J1Y2tldC8ke2lkfWAsIHt9LCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzU3RvcmFnZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RvcmFnZUJ1Y2tldEFwaS5qcy5tYXAiLCJpbXBvcnQgU3RvcmFnZUZpbGVBcGkgZnJvbSAnLi9wYWNrYWdlcy9TdG9yYWdlRmlsZUFwaSc7XG5pbXBvcnQgU3RvcmFnZUJ1Y2tldEFwaSBmcm9tICcuL3BhY2thZ2VzL1N0b3JhZ2VCdWNrZXRBcGknO1xuZXhwb3J0IGNsYXNzIFN0b3JhZ2VDbGllbnQgZXh0ZW5kcyBTdG9yYWdlQnVja2V0QXBpIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmwsIGhlYWRlcnMgPSB7fSwgZmV0Y2gpIHtcbiAgICAgICAgc3VwZXIodXJsLCBoZWFkZXJzLCBmZXRjaCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gZmlsZSBvcGVyYXRpb24gaW4gYSBidWNrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgVGhlIGJ1Y2tldCBpZCB0byBvcGVyYXRlIG9uLlxuICAgICAqL1xuICAgIGZyb20oaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdG9yYWdlRmlsZUFwaSh0aGlzLnVybCwgdGhpcy5oZWFkZXJzLCBpZCwgdGhpcy5mZXRjaCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RvcmFnZUNsaWVudC5qcy5tYXAiLCJleHBvcnQgY29uc3QgdmVyc2lvbiA9ICcyLjQ5LjQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiLCJpbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi92ZXJzaW9uJztcbmxldCBKU19FTlYgPSAnJztcbi8vIEB0cy1pZ25vcmVcbmlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBKU19FTlYgPSAnZGVubyc7XG59XG5lbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgSlNfRU5WID0gJ3dlYic7XG59XG5lbHNlIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJykge1xuICAgIEpTX0VOViA9ICdyZWFjdC1uYXRpdmUnO1xufVxuZWxzZSB7XG4gICAgSlNfRU5WID0gJ25vZGUnO1xufVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfSEVBREVSUyA9IHsgJ1gtQ2xpZW50LUluZm8nOiBgc3VwYWJhc2UtanMtJHtKU19FTlZ9LyR7dmVyc2lvbn1gIH07XG5leHBvcnQgY29uc3QgREVGQVVMVF9HTE9CQUxfT1BUSU9OUyA9IHtcbiAgICBoZWFkZXJzOiBERUZBVUxUX0hFQURFUlMsXG59O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfREJfT1BUSU9OUyA9IHtcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxufTtcbmV4cG9ydCBjb25zdCBERUZBVUxUX0FVVEhfT1BUSU9OUyA9IHtcbiAgICBhdXRvUmVmcmVzaFRva2VuOiB0cnVlLFxuICAgIHBlcnNpc3RTZXNzaW9uOiB0cnVlLFxuICAgIGRldGVjdFNlc3Npb25JblVybDogdHJ1ZSxcbiAgICBmbG93VHlwZTogJ2ltcGxpY2l0Jyxcbn07XG5leHBvcnQgY29uc3QgREVGQVVMVF9SRUFMVElNRV9PUFRJT05TID0ge307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgbm9kZUZldGNoLCB7IEhlYWRlcnMgYXMgTm9kZUZldGNoSGVhZGVycyB9IGZyb20gJ0BzdXBhYmFzZS9ub2RlLWZldGNoJztcbmV4cG9ydCBjb25zdCByZXNvbHZlRmV0Y2ggPSAoY3VzdG9tRmV0Y2gpID0+IHtcbiAgICBsZXQgX2ZldGNoO1xuICAgIGlmIChjdXN0b21GZXRjaCkge1xuICAgICAgICBfZmV0Y2ggPSBjdXN0b21GZXRjaDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZldGNoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBfZmV0Y2ggPSBub2RlRmV0Y2g7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBfZmV0Y2ggPSBmZXRjaDtcbiAgICB9XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiBfZmV0Y2goLi4uYXJncyk7XG59O1xuZXhwb3J0IGNvbnN0IHJlc29sdmVIZWFkZXJzQ29uc3RydWN0b3IgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBIZWFkZXJzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gTm9kZUZldGNoSGVhZGVycztcbiAgICB9XG4gICAgcmV0dXJuIEhlYWRlcnM7XG59O1xuZXhwb3J0IGNvbnN0IGZldGNoV2l0aEF1dGggPSAoc3VwYWJhc2VLZXksIGdldEFjY2Vzc1Rva2VuLCBjdXN0b21GZXRjaCkgPT4ge1xuICAgIGNvbnN0IGZldGNoID0gcmVzb2x2ZUZldGNoKGN1c3RvbUZldGNoKTtcbiAgICBjb25zdCBIZWFkZXJzQ29uc3RydWN0b3IgPSByZXNvbHZlSGVhZGVyc0NvbnN0cnVjdG9yKCk7XG4gICAgcmV0dXJuIChpbnB1dCwgaW5pdCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSAoX2EgPSAoeWllbGQgZ2V0QWNjZXNzVG9rZW4oKSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHN1cGFiYXNlS2V5O1xuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzQ29uc3RydWN0b3IoaW5pdCA9PT0gbnVsbCB8fCBpbml0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0LmhlYWRlcnMpO1xuICAgICAgICBpZiAoIWhlYWRlcnMuaGFzKCdhcGlrZXknKSkge1xuICAgICAgICAgICAgaGVhZGVycy5zZXQoJ2FwaWtleScsIHN1cGFiYXNlS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhlYWRlcnMuaGFzKCdBdXRob3JpemF0aW9uJykpIHtcbiAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FjY2Vzc1Rva2VufWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmZXRjaChpbnB1dCwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbml0KSwgeyBoZWFkZXJzIH0pKTtcbiAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZXRjaC5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB1dWlkKCkge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHZhciByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaXBUcmFpbGluZ1NsYXNoKHVybCkge1xuICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbn1cbmV4cG9ydCBjb25zdCBpc0Jyb3dzZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmV4cG9ydCBmdW5jdGlvbiBhcHBseVNldHRpbmdEZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0cykge1xuICAgIGNvbnN0IHsgZGI6IGRiT3B0aW9ucywgYXV0aDogYXV0aE9wdGlvbnMsIHJlYWx0aW1lOiByZWFsdGltZU9wdGlvbnMsIGdsb2JhbDogZ2xvYmFsT3B0aW9ucywgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgeyBkYjogREVGQVVMVF9EQl9PUFRJT05TLCBhdXRoOiBERUZBVUxUX0FVVEhfT1BUSU9OUywgcmVhbHRpbWU6IERFRkFVTFRfUkVBTFRJTUVfT1BUSU9OUywgZ2xvYmFsOiBERUZBVUxUX0dMT0JBTF9PUFRJT05TLCB9ID0gZGVmYXVsdHM7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBkYjogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX0RCX09QVElPTlMpLCBkYk9wdGlvbnMpLFxuICAgICAgICBhdXRoOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfQVVUSF9PUFRJT05TKSwgYXV0aE9wdGlvbnMpLFxuICAgICAgICByZWFsdGltZTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1JFQUxUSU1FX09QVElPTlMpLCByZWFsdGltZU9wdGlvbnMpLFxuICAgICAgICBnbG9iYWw6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9HTE9CQUxfT1BUSU9OUyksIGdsb2JhbE9wdGlvbnMpLFxuICAgICAgICBhY2Nlc3NUb2tlbjogKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyByZXR1cm4gJyc7IH0pLFxuICAgIH07XG4gICAgaWYgKG9wdGlvbnMuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgcmVzdWx0LmFjY2Vzc1Rva2VuID0gb3B0aW9ucy5hY2Nlc3NUb2tlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGhhY2sgYXJvdW5kIFJlcXVpcmVkPD5cbiAgICAgICAgZGVsZXRlIHJlc3VsdC5hY2Nlc3NUb2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMuanMubWFwIiwiZXhwb3J0IGNvbnN0IHZlcnNpb24gPSAnMi42OS4xJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIiwiaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4vdmVyc2lvbic7XG4vKiogQ3VycmVudCBzZXNzaW9uIHdpbGwgYmUgY2hlY2tlZCBmb3IgcmVmcmVzaCBhdCB0aGlzIGludGVydmFsLiAqL1xuZXhwb3J0IGNvbnN0IEFVVE9fUkVGUkVTSF9USUNLX0RVUkFUSU9OX01TID0gMzAgKiAxMDAwO1xuLyoqXG4gKiBBIHRva2VuIHJlZnJlc2ggd2lsbCBiZSBhdHRlbXB0ZWQgdGhpcyBtYW55IHRpY2tzIGJlZm9yZSB0aGUgY3VycmVudCBzZXNzaW9uIGV4cGlyZXMuICovXG5leHBvcnQgY29uc3QgQVVUT19SRUZSRVNIX1RJQ0tfVEhSRVNIT0xEID0gMztcbi8qXG4gKiBFYXJsaWVzdCB0aW1lIGJlZm9yZSBhbiBhY2Nlc3MgdG9rZW4gZXhwaXJlcyB0aGF0IHRoZSBzZXNzaW9uIHNob3VsZCBiZSByZWZyZXNoZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBFWFBJUllfTUFSR0lOX01TID0gQVVUT19SRUZSRVNIX1RJQ0tfVEhSRVNIT0xEICogQVVUT19SRUZSRVNIX1RJQ0tfRFVSQVRJT05fTVM7XG5leHBvcnQgY29uc3QgR09UUlVFX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0Ojk5OTknO1xuZXhwb3J0IGNvbnN0IFNUT1JBR0VfS0VZID0gJ3N1cGFiYXNlLmF1dGgudG9rZW4nO1xuZXhwb3J0IGNvbnN0IEFVRElFTkNFID0gJyc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9IRUFERVJTID0geyAnWC1DbGllbnQtSW5mbyc6IGBnb3RydWUtanMvJHt2ZXJzaW9ufWAgfTtcbmV4cG9ydCBjb25zdCBORVRXT1JLX0ZBSUxVUkUgPSB7XG4gICAgTUFYX1JFVFJJRVM6IDEwLFxuICAgIFJFVFJZX0lOVEVSVkFMOiAyLCAvLyBpbiBkZWNpc2Vjb25kc1xufTtcbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTl9IRUFERVJfTkFNRSA9ICdYLVN1cGFiYXNlLUFwaS1WZXJzaW9uJztcbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTlMgPSB7XG4gICAgJzIwMjQtMDEtMDEnOiB7XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5wYXJzZSgnMjAyNC0wMS0wMVQwMDowMDowMC4wWicpLFxuICAgICAgICBuYW1lOiAnMjAyNC0wMS0wMScsXG4gICAgfSxcbn07XG5leHBvcnQgY29uc3QgQkFTRTY0VVJMX1JFR0VYID0gL14oW2EtejAtOV8tXXs0fSkqKCR8W2EtejAtOV8tXXszfSR8W2EtejAtOV8tXXsyfSQpJC9pO1xuZXhwb3J0IGNvbnN0IEpXS1NfVFRMID0gNjAwMDAwOyAvLyAxMCBtaW51dGVzXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMuanMubWFwIiwiZXhwb3J0IGNsYXNzIEF1dGhFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXMsIGNvZGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuX19pc0F1dGhFcnJvciA9IHRydWU7XG4gICAgICAgIHRoaXMubmFtZSA9ICdBdXRoRXJyb3InO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRoRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnX19pc0F1dGhFcnJvcicgaW4gZXJyb3I7XG59XG5leHBvcnQgY2xhc3MgQXV0aEFwaUVycm9yIGV4dGVuZHMgQXV0aEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXMsIGNvZGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgc3RhdHVzLCBjb2RlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0F1dGhBcGlFcnJvcic7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhBcGlFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBpc0F1dGhFcnJvcihlcnJvcikgJiYgZXJyb3IubmFtZSA9PT0gJ0F1dGhBcGlFcnJvcic7XG59XG5leHBvcnQgY2xhc3MgQXV0aFVua25vd25FcnJvciBleHRlbmRzIEF1dGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3JpZ2luYWxFcnJvcikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0F1dGhVbmtub3duRXJyb3InO1xuICAgICAgICB0aGlzLm9yaWdpbmFsRXJyb3IgPSBvcmlnaW5hbEVycm9yO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDdXN0b21BdXRoRXJyb3IgZXh0ZW5kcyBBdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG5hbWUsIHN0YXR1cywgY29kZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0dXMsIGNvZGUpO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXV0aFNlc3Npb25NaXNzaW5nRXJyb3IgZXh0ZW5kcyBDdXN0b21BdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignQXV0aCBzZXNzaW9uIG1pc3NpbmchJywgJ0F1dGhTZXNzaW9uTWlzc2luZ0Vycm9yJywgNDAwLCB1bmRlZmluZWQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhTZXNzaW9uTWlzc2luZ0Vycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIGlzQXV0aEVycm9yKGVycm9yKSAmJiBlcnJvci5uYW1lID09PSAnQXV0aFNlc3Npb25NaXNzaW5nRXJyb3InO1xufVxuZXhwb3J0IGNsYXNzIEF1dGhJbnZhbGlkVG9rZW5SZXNwb25zZUVycm9yIGV4dGVuZHMgQ3VzdG9tQXV0aEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ0F1dGggc2Vzc2lvbiBvciB1c2VyIG1pc3NpbmcnLCAnQXV0aEludmFsaWRUb2tlblJlc3BvbnNlRXJyb3InLCA1MDAsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1dGhJbnZhbGlkQ3JlZGVudGlhbHNFcnJvciBleHRlbmRzIEN1c3RvbUF1dGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCAnQXV0aEludmFsaWRDcmVkZW50aWFsc0Vycm9yJywgNDAwLCB1bmRlZmluZWQpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdXRoSW1wbGljaXRHcmFudFJlZGlyZWN0RXJyb3IgZXh0ZW5kcyBDdXN0b21BdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGRldGFpbHMgPSBudWxsKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdBdXRoSW1wbGljaXRHcmFudFJlZGlyZWN0RXJyb3InLCA1MDAsIHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IG51bGw7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgICAgICBkZXRhaWxzOiB0aGlzLmRldGFpbHMsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIGlzQXV0aEVycm9yKGVycm9yKSAmJiBlcnJvci5uYW1lID09PSAnQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yJztcbn1cbmV4cG9ydCBjbGFzcyBBdXRoUEtDRUdyYW50Q29kZUV4Y2hhbmdlRXJyb3IgZXh0ZW5kcyBDdXN0b21BdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGRldGFpbHMgPSBudWxsKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdBdXRoUEtDRUdyYW50Q29kZUV4Y2hhbmdlRXJyb3InLCA1MDAsIHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IG51bGw7XG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgICAgICBkZXRhaWxzOiB0aGlzLmRldGFpbHMsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1dGhSZXRyeWFibGVGZXRjaEVycm9yIGV4dGVuZHMgQ3VzdG9tQXV0aEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ0F1dGhSZXRyeWFibGVGZXRjaEVycm9yJywgc3RhdHVzLCB1bmRlZmluZWQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhSZXRyeWFibGVGZXRjaEVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIGlzQXV0aEVycm9yKGVycm9yKSAmJiBlcnJvci5uYW1lID09PSAnQXV0aFJldHJ5YWJsZUZldGNoRXJyb3InO1xufVxuLyoqXG4gKiBUaGlzIGVycm9yIGlzIHRocm93biBvbiBjZXJ0YWluIG1ldGhvZHMgd2hlbiB0aGUgcGFzc3dvcmQgdXNlZCBpcyBkZWVtZWRcbiAqIHdlYWsuIEluc3BlY3QgdGhlIHJlYXNvbnMgdG8gaWRlbnRpZnkgd2hhdCBwYXNzd29yZCBzdHJlbmd0aCBydWxlcyBhcmVcbiAqIGluYWRlcXVhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdXRoV2Vha1Bhc3N3b3JkRXJyb3IgZXh0ZW5kcyBDdXN0b21BdXRoRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXR1cywgcmVhc29ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCAnQXV0aFdlYWtQYXNzd29yZEVycm9yJywgc3RhdHVzLCAnd2Vha19wYXNzd29yZCcpO1xuICAgICAgICB0aGlzLnJlYXNvbnMgPSByZWFzb25zO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhXZWFrUGFzc3dvcmRFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBpc0F1dGhFcnJvcihlcnJvcikgJiYgZXJyb3IubmFtZSA9PT0gJ0F1dGhXZWFrUGFzc3dvcmRFcnJvcic7XG59XG5leHBvcnQgY2xhc3MgQXV0aEludmFsaWRKd3RFcnJvciBleHRlbmRzIEN1c3RvbUF1dGhFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCAnQXV0aEludmFsaWRKd3RFcnJvcicsIDQwMCwgJ2ludmFsaWRfand0Jyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcCIsIi8qKlxuICogQXZvaWQgbW9kaWZ5aW5nIHRoaXMgZmlsZS4gSXQncyBwYXJ0IG9mXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc3VwYWJhc2UtY29tbXVuaXR5L2Jhc2U2NHVybC1qcy4gIFN1Ym1pdCBhbGwgZml4ZXMgb25cbiAqIHRoYXQgcmVwbyFcbiAqL1xuLyoqXG4gKiBBbiBhcnJheSBvZiBjaGFyYWN0ZXJzIHRoYXQgZW5jb2RlIDYgYml0cyBpbnRvIGEgQmFzZTY0LVVSTCBhbHBoYWJldFxuICogY2hhcmFjdGVyLlxuICovXG5jb25zdCBUT19CQVNFNjRVUkwgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODktXycuc3BsaXQoJycpO1xuLyoqXG4gKiBBbiBhcnJheSBvZiBjaGFyYWN0ZXJzIHRoYXQgY2FuIGFwcGVhciBpbiBhIEJhc2U2NC1VUkwgZW5jb2RlZCBzdHJpbmcgYnV0XG4gKiBzaG91bGQgYmUgaWdub3JlZC5cbiAqL1xuY29uc3QgSUdOT1JFX0JBU0U2NFVSTCA9ICcgXFx0XFxuXFxyPScuc3BsaXQoJycpO1xuLyoqXG4gKiBBbiBhcnJheSBvZiAxMjggbnVtYmVycyB0aGF0IG1hcCBhIEJhc2U2NC1VUkwgY2hhcmFjdGVyIHRvIDYgYml0cywgb3IgaWYgLTJcbiAqIHVzZWQgdG8gc2tpcCB0aGUgY2hhcmFjdGVyLCBvciBpZiAtMSB1c2VkIHRvIGVycm9yIG91dC5cbiAqL1xuY29uc3QgRlJPTV9CQVNFNjRVUkwgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGNoYXJNYXAgPSBuZXcgQXJyYXkoMTI4KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJNYXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY2hhck1hcFtpXSA9IC0xO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IElHTk9SRV9CQVNFNjRVUkwubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY2hhck1hcFtJR05PUkVfQkFTRTY0VVJMW2ldLmNoYXJDb2RlQXQoMCldID0gLTI7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVE9fQkFTRTY0VVJMLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNoYXJNYXBbVE9fQkFTRTY0VVJMW2ldLmNoYXJDb2RlQXQoMCldID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGNoYXJNYXA7XG59KSgpO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJ5dGUgdG8gYSBCYXNlNjQtVVJMIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gYnl0ZSBUaGUgYnl0ZSB0byBjb252ZXJ0LCBvciBudWxsIHRvIGZsdXNoIGF0IHRoZSBlbmQgb2YgdGhlIGJ5dGUgc2VxdWVuY2UuXG4gKiBAcGFyYW0gc3RhdGUgVGhlIEJhc2U2NCBjb252ZXJzaW9uIHN0YXRlLiBQYXNzIGFuIGluaXRpYWwgdmFsdWUgb2YgYHsgcXVldWU6IDAsIHF1ZXVlZEJpdHM6IDAgfWAuXG4gKiBAcGFyYW0gZW1pdCBBIGZ1bmN0aW9uIGNhbGxlZCB3aXRoIHRoZSBuZXh0IEJhc2U2NCBjaGFyYWN0ZXIgd2hlbiByZWFkeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVUb0Jhc2U2NFVSTChieXRlLCBzdGF0ZSwgZW1pdCkge1xuICAgIGlmIChieXRlICE9PSBudWxsKSB7XG4gICAgICAgIHN0YXRlLnF1ZXVlID0gKHN0YXRlLnF1ZXVlIDw8IDgpIHwgYnl0ZTtcbiAgICAgICAgc3RhdGUucXVldWVkQml0cyArPSA4O1xuICAgICAgICB3aGlsZSAoc3RhdGUucXVldWVkQml0cyA+PSA2KSB7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSAoc3RhdGUucXVldWUgPj4gKHN0YXRlLnF1ZXVlZEJpdHMgLSA2KSkgJiA2MztcbiAgICAgICAgICAgIGVtaXQoVE9fQkFTRTY0VVJMW3Bvc10pO1xuICAgICAgICAgICAgc3RhdGUucXVldWVkQml0cyAtPSA2O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0YXRlLnF1ZXVlZEJpdHMgPiAwKSB7XG4gICAgICAgIHN0YXRlLnF1ZXVlID0gc3RhdGUucXVldWUgPDwgKDYgLSBzdGF0ZS5xdWV1ZWRCaXRzKTtcbiAgICAgICAgc3RhdGUucXVldWVkQml0cyA9IDY7XG4gICAgICAgIHdoaWxlIChzdGF0ZS5xdWV1ZWRCaXRzID49IDYpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IChzdGF0ZS5xdWV1ZSA+PiAoc3RhdGUucXVldWVkQml0cyAtIDYpKSAmIDYzO1xuICAgICAgICAgICAgZW1pdChUT19CQVNFNjRVUkxbcG9zXSk7XG4gICAgICAgICAgICBzdGF0ZS5xdWV1ZWRCaXRzIC09IDY7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENvbnZlcnRzIGEgU3RyaW5nIGNoYXIgY29kZSAoZXh0cmFjdGVkIHVzaW5nIGBzdHJpbmcuY2hhckNvZGVBdChwb3NpdGlvbilgKSB0byBhIHNlcXVlbmNlIG9mIEJhc2U2NC1VUkwgY2hhcmFjdGVycy5cbiAqXG4gKiBAcGFyYW0gY2hhckNvZGUgVGhlIGNoYXIgY29kZSBvZiB0aGUgSmF2YVNjcmlwdCBzdHJpbmcuXG4gKiBAcGFyYW0gc3RhdGUgVGhlIEJhc2U2NCBzdGF0ZS4gUGFzcyBhbiBpbml0aWFsIHZhbHVlIG9mIGB7IHF1ZXVlOiAwLCBxdWV1ZWRCaXRzOiAwIH1gLlxuICogQHBhcmFtIGVtaXQgQSBmdW5jdGlvbiBjYWxsZWQgd2l0aCB0aGUgbmV4dCBieXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnl0ZUZyb21CYXNlNjRVUkwoY2hhckNvZGUsIHN0YXRlLCBlbWl0KSB7XG4gICAgY29uc3QgYml0cyA9IEZST01fQkFTRTY0VVJMW2NoYXJDb2RlXTtcbiAgICBpZiAoYml0cyA+IC0xKSB7XG4gICAgICAgIC8vIHZhbGlkIEJhc2U2NC1VUkwgY2hhcmFjdGVyXG4gICAgICAgIHN0YXRlLnF1ZXVlID0gKHN0YXRlLnF1ZXVlIDw8IDYpIHwgYml0cztcbiAgICAgICAgc3RhdGUucXVldWVkQml0cyArPSA2O1xuICAgICAgICB3aGlsZSAoc3RhdGUucXVldWVkQml0cyA+PSA4KSB7XG4gICAgICAgICAgICBlbWl0KChzdGF0ZS5xdWV1ZSA+PiAoc3RhdGUucXVldWVkQml0cyAtIDgpKSAmIDB4ZmYpO1xuICAgICAgICAgICAgc3RhdGUucXVldWVkQml0cyAtPSA4O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGJpdHMgPT09IC0yKSB7XG4gICAgICAgIC8vIGlnbm9yZSBzcGFjZXMsIHRhYnMsIG5ld2xpbmVzLCA9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBCYXNlNjQtVVJMIGNoYXJhY3RlciBcIiR7U3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSl9XCJgKTtcbiAgICB9XG59XG4vKipcbiAqIENvbnZlcnRzIGEgSmF2YVNjcmlwdCBzdHJpbmcgKHdoaWNoIG1heSBpbmNsdWRlIGFueSB2YWxpZCBjaGFyYWN0ZXIpIGludG8gYVxuICogQmFzZTY0LVVSTCBlbmNvZGVkIHN0cmluZy4gVGhlIHN0cmluZyBpcyBmaXJzdCBlbmNvZGVkIGluIFVURi04IHdoaWNoIGlzXG4gKiB0aGVuIGVuY29kZWQgYXMgQmFzZTY0LVVSTC5cbiAqXG4gKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvQmFzZTY0VVJMKHN0cikge1xuICAgIGNvbnN0IGJhc2U2NCA9IFtdO1xuICAgIGNvbnN0IGVtaXR0ZXIgPSAoY2hhcikgPT4ge1xuICAgICAgICBiYXNlNjQucHVzaChjaGFyKTtcbiAgICB9O1xuICAgIGNvbnN0IHN0YXRlID0geyBxdWV1ZTogMCwgcXVldWVkQml0czogMCB9O1xuICAgIHN0cmluZ1RvVVRGOChzdHIsIChieXRlKSA9PiB7XG4gICAgICAgIGJ5dGVUb0Jhc2U2NFVSTChieXRlLCBzdGF0ZSwgZW1pdHRlcik7XG4gICAgfSk7XG4gICAgYnl0ZVRvQmFzZTY0VVJMKG51bGwsIHN0YXRlLCBlbWl0dGVyKTtcbiAgICByZXR1cm4gYmFzZTY0LmpvaW4oJycpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIEJhc2U2NC1VUkwgZW5jb2RlZCBzdHJpbmcgaW50byBhIEphdmFTY3JpcHQgc3RyaW5nLiBJdCBpcyBhc3N1bWVkXG4gKiB0aGF0IHRoZSB1bmRlcmx5aW5nIHN0cmluZyBoYXMgYmVlbiBlbmNvZGVkIGFzIFVURi04LlxuICpcbiAqIEBwYXJhbSBzdHIgVGhlIEJhc2U2NC1VUkwgZW5jb2RlZCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdGcm9tQmFzZTY0VVJMKHN0cikge1xuICAgIGNvbnN0IGNvbnYgPSBbXTtcbiAgICBjb25zdCB1dGY4RW1pdCA9IChjb2RlcG9pbnQpID0+IHtcbiAgICAgICAgY29udi5wdXNoKFN0cmluZy5mcm9tQ29kZVBvaW50KGNvZGVwb2ludCkpO1xuICAgIH07XG4gICAgY29uc3QgdXRmOFN0YXRlID0ge1xuICAgICAgICB1dGY4c2VxOiAwLFxuICAgICAgICBjb2RlcG9pbnQ6IDAsXG4gICAgfTtcbiAgICBjb25zdCBiNjRTdGF0ZSA9IHsgcXVldWU6IDAsIHF1ZXVlZEJpdHM6IDAgfTtcbiAgICBjb25zdCBieXRlRW1pdCA9IChieXRlKSA9PiB7XG4gICAgICAgIHN0cmluZ0Zyb21VVEY4KGJ5dGUsIHV0ZjhTdGF0ZSwgdXRmOEVtaXQpO1xuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYnl0ZUZyb21CYXNlNjRVUkwoc3RyLmNoYXJDb2RlQXQoaSksIGI2NFN0YXRlLCBieXRlRW1pdCk7XG4gICAgfVxuICAgIHJldHVybiBjb252LmpvaW4oJycpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIFVuaWNvZGUgY29kZXBvaW50IHRvIGEgbXVsdGktYnl0ZSBVVEYtOCBzZXF1ZW5jZS5cbiAqXG4gKiBAcGFyYW0gY29kZXBvaW50IFRoZSBVbmljb2RlIGNvZGVwb2ludC5cbiAqIEBwYXJhbSBlbWl0ICAgICAgRnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggVVRGLTggYnl0ZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNvZGVwb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvZGVwb2ludFRvVVRGOChjb2RlcG9pbnQsIGVtaXQpIHtcbiAgICBpZiAoY29kZXBvaW50IDw9IDB4N2YpIHtcbiAgICAgICAgZW1pdChjb2RlcG9pbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVwb2ludCA8PSAweDdmZikge1xuICAgICAgICBlbWl0KDB4YzAgfCAoY29kZXBvaW50ID4+IDYpKTtcbiAgICAgICAgZW1pdCgweDgwIHwgKGNvZGVwb2ludCAmIDB4M2YpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlcG9pbnQgPD0gMHhmZmZmKSB7XG4gICAgICAgIGVtaXQoMHhlMCB8IChjb2RlcG9pbnQgPj4gMTIpKTtcbiAgICAgICAgZW1pdCgweDgwIHwgKChjb2RlcG9pbnQgPj4gNikgJiAweDNmKSk7XG4gICAgICAgIGVtaXQoMHg4MCB8IChjb2RlcG9pbnQgJiAweDNmKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZXBvaW50IDw9IDB4MTBmZmZmKSB7XG4gICAgICAgIGVtaXQoMHhmMCB8IChjb2RlcG9pbnQgPj4gMTgpKTtcbiAgICAgICAgZW1pdCgweDgwIHwgKChjb2RlcG9pbnQgPj4gMTIpICYgMHgzZikpO1xuICAgICAgICBlbWl0KDB4ODAgfCAoKGNvZGVwb2ludCA+PiA2KSAmIDB4M2YpKTtcbiAgICAgICAgZW1pdCgweDgwIHwgKGNvZGVwb2ludCAmIDB4M2YpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBVbmljb2RlIGNvZGVwb2ludDogJHtjb2RlcG9pbnQudG9TdHJpbmcoMTYpfWApO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIEphdmFTY3JpcHQgc3RyaW5nIHRvIGEgc2VxdWVuY2Ugb2YgVVRGLTggYnl0ZXMuXG4gKlxuICogQHBhcmFtIHN0ciAgVGhlIHN0cmluZyB0byBjb252ZXJ0IHRvIFVURi04LlxuICogQHBhcmFtIGVtaXQgRnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggVVRGLTggYnl0ZSBvZiB0aGUgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nVG9VVEY4KHN0ciwgZW1pdCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGxldCBjb2RlcG9pbnQgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA+IDB4ZDdmZiAmJiBjb2RlcG9pbnQgPD0gMHhkYmZmKSB7XG4gICAgICAgICAgICAvLyBtb3N0IFVURi0xNiBjb2RlcG9pbnRzIGFyZSBVbmljb2RlIGNvZGVwb2ludHMsIGV4Y2VwdCB2YWx1ZXMgaW4gdGhpc1xuICAgICAgICAgICAgLy8gcmFuZ2Ugd2hlcmUgdGhlIG5leHQgVVRGLTE2IGNvZGVwb2ludCBuZWVkcyB0byBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCBvbmUgdG8gZ2V0IHRoZSBVbmljb2RlIGNvZGVwb2ludFxuICAgICAgICAgICAgY29uc3QgaGlnaFN1cnJvZ2F0ZSA9ICgoY29kZXBvaW50IC0gMHhkODAwKSAqIDB4NDAwKSAmIDB4ZmZmZjtcbiAgICAgICAgICAgIGNvbnN0IGxvd1N1cnJvZ2F0ZSA9IChzdHIuY2hhckNvZGVBdChpICsgMSkgLSAweGRjMDApICYgMHhmZmZmO1xuICAgICAgICAgICAgY29kZXBvaW50ID0gKGxvd1N1cnJvZ2F0ZSB8IGhpZ2hTdXJyb2dhdGUpICsgMHgxMDAwMDtcbiAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcG9pbnRUb1VURjgoY29kZXBvaW50LCBlbWl0KTtcbiAgICB9XG59XG4vKipcbiAqIENvbnZlcnRzIGEgVVRGLTggYnl0ZSB0byBhIFVuaWNvZGUgY29kZXBvaW50LlxuICpcbiAqIEBwYXJhbSBieXRlICBUaGUgVVRGLTggYnl0ZSBuZXh0IGluIHRoZSBzZXF1ZW5jZS5cbiAqIEBwYXJhbSBzdGF0ZSBUaGUgc2hhcmVkIHN0YXRlIGJldHdlZW4gY29uc2VjdXRpdmUgVVRGLTggYnl0ZXMgaW4gdGhlXG4gKiAgICAgICAgICAgICAgc2VxdWVuY2UsIGFuIG9iamVjdCB3aXRoIHRoZSBzaGFwZSBgeyB1dGY4c2VxOiAwLCBjb2RlcG9pbnQ6IDAgfWAuXG4gKiBAcGFyYW0gZW1pdCAgRnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggY29kZXBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nRnJvbVVURjgoYnl0ZSwgc3RhdGUsIGVtaXQpIHtcbiAgICBpZiAoc3RhdGUudXRmOHNlcSA9PT0gMCkge1xuICAgICAgICBpZiAoYnl0ZSA8PSAweDdmKSB7XG4gICAgICAgICAgICBlbWl0KGJ5dGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvdW50IHRoZSBudW1iZXIgb2YgMSBsZWFkaW5nIGJpdHMgdW50aWwgeW91IHJlYWNoIDBcbiAgICAgICAgZm9yIChsZXQgbGVhZGluZ0JpdCA9IDE7IGxlYWRpbmdCaXQgPCA2OyBsZWFkaW5nQml0ICs9IDEpIHtcbiAgICAgICAgICAgIGlmICgoKGJ5dGUgPj4gKDcgLSBsZWFkaW5nQml0KSkgJiAxKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN0YXRlLnV0ZjhzZXEgPSBsZWFkaW5nQml0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS51dGY4c2VxID09PSAyKSB7XG4gICAgICAgICAgICBzdGF0ZS5jb2RlcG9pbnQgPSBieXRlICYgMzE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhdGUudXRmOHNlcSA9PT0gMykge1xuICAgICAgICAgICAgc3RhdGUuY29kZXBvaW50ID0gYnl0ZSAmIDE1O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLnV0ZjhzZXEgPT09IDQpIHtcbiAgICAgICAgICAgIHN0YXRlLmNvZGVwb2ludCA9IGJ5dGUgJiA3O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFVURi04IHNlcXVlbmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUudXRmOHNlcSAtPSAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdGF0ZS51dGY4c2VxID4gMCkge1xuICAgICAgICBpZiAoYnl0ZSA8PSAweDdmKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVVRGLTggc2VxdWVuY2UnKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5jb2RlcG9pbnQgPSAoc3RhdGUuY29kZXBvaW50IDw8IDYpIHwgKGJ5dGUgJiA2Myk7XG4gICAgICAgIHN0YXRlLnV0ZjhzZXEgLT0gMTtcbiAgICAgICAgaWYgKHN0YXRlLnV0ZjhzZXEgPT09IDApIHtcbiAgICAgICAgICAgIGVtaXQoc3RhdGUuY29kZXBvaW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGRpZmZlcmVudCB0eXBlcyBvZiBzdHJpbmdzIHRvIFVpbnQ4QXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFVybFRvVWludDhBcnJheShzdHIpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCBzdGF0ZSA9IHsgcXVldWU6IDAsIHF1ZXVlZEJpdHM6IDAgfTtcbiAgICBjb25zdCBvbkJ5dGUgPSAoYnl0ZSkgPT4ge1xuICAgICAgICByZXN1bHQucHVzaChieXRlKTtcbiAgICB9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGJ5dGVGcm9tQmFzZTY0VVJMKHN0ci5jaGFyQ29kZUF0KGkpLCBzdGF0ZSwgb25CeXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHJlc3VsdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nVG9VaW50OEFycmF5KHN0cikge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIHN0cmluZ1RvVVRGOChzdHIsIChieXRlKSA9PiByZXN1bHQucHVzaChieXRlKSk7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHJlc3VsdCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlNjR1cmwuanMubWFwIiwiaW1wb3J0IHsgQVBJX1ZFUlNJT05fSEVBREVSX05BTUUsIEJBU0U2NFVSTF9SRUdFWCB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IEF1dGhJbnZhbGlkSnd0RXJyb3IgfSBmcm9tICcuL2Vycm9ycyc7XG5pbXBvcnQgeyBiYXNlNjRVcmxUb1VpbnQ4QXJyYXksIHN0cmluZ0Zyb21CYXNlNjRVUkwgfSBmcm9tICcuL2Jhc2U2NHVybCc7XG5leHBvcnQgZnVuY3Rpb24gZXhwaXJlc0F0KGV4cGlyZXNJbikge1xuICAgIGNvbnN0IHRpbWVOb3cgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgLyAxMDAwKTtcbiAgICByZXR1cm4gdGltZU5vdyArIGV4cGlyZXNJbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1dWlkKCkge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsIHYgPSBjID09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBpc0Jyb3dzZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnO1xuY29uc3QgbG9jYWxTdG9yYWdlV3JpdGVUZXN0cyA9IHtcbiAgICB0ZXN0ZWQ6IGZhbHNlLFxuICAgIHdyaXRhYmxlOiBmYWxzZSxcbn07XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGxvY2FsU3RvcmFnZSBpcyBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyLlxuICovXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNMb2NhbFN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKCFpc0Jyb3dzZXIoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRE9NIGV4Y2VwdGlvbiB3aGVuIGFjY2Vzc2luZyBgbG9jYWxTdG9yYWdlYFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChsb2NhbFN0b3JhZ2VXcml0ZVRlc3RzLnRlc3RlZCkge1xuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlV3JpdGVUZXN0cy53cml0YWJsZTtcbiAgICB9XG4gICAgY29uc3QgcmFuZG9tS2V5ID0gYGxzd3QtJHtNYXRoLnJhbmRvbSgpfSR7TWF0aC5yYW5kb20oKX1gO1xuICAgIHRyeSB7XG4gICAgICAgIGdsb2JhbFRoaXMubG9jYWxTdG9yYWdlLnNldEl0ZW0ocmFuZG9tS2V5LCByYW5kb21LZXkpO1xuICAgICAgICBnbG9iYWxUaGlzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHJhbmRvbUtleSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZVdyaXRlVGVzdHMudGVzdGVkID0gdHJ1ZTtcbiAgICAgICAgbG9jYWxTdG9yYWdlV3JpdGVUZXN0cy53cml0YWJsZSA9IHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZSBjYW4ndCBiZSB3cml0dGVuIHRvXG4gICAgICAgIC8vIGh0dHBzOi8vd3d3LmNocm9taXVtLm9yZy9mb3ItdGVzdGVycy9idWctcmVwb3J0aW5nLWd1aWRlbGluZXMvdW5jYXVnaHQtc2VjdXJpdHllcnJvci1mYWlsZWQtdG8tcmVhZC10aGUtbG9jYWxzdG9yYWdlLXByb3BlcnR5LWZyb20td2luZG93LWFjY2Vzcy1pcy1kZW5pZWQtZm9yLXRoaXMtZG9jdW1lbnRcbiAgICAgICAgbG9jYWxTdG9yYWdlV3JpdGVUZXN0cy50ZXN0ZWQgPSB0cnVlO1xuICAgICAgICBsb2NhbFN0b3JhZ2VXcml0ZVRlc3RzLndyaXRhYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2VXcml0ZVRlc3RzLndyaXRhYmxlO1xufTtcbi8qKlxuICogRXh0cmFjdHMgcGFyYW1ldGVycyBlbmNvZGVkIGluIHRoZSBVUkwgYm90aCBpbiB0aGUgcXVlcnkgYW5kIGZyYWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQYXJhbWV0ZXJzRnJvbVVSTChocmVmKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChocmVmKTtcbiAgICBpZiAodXJsLmhhc2ggJiYgdXJsLmhhc2hbMF0gPT09ICcjJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaGFzaFNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLmhhc2guc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgICAgIGhhc2hTZWFyY2hQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gaGFzaCBpcyBub3QgYSBxdWVyeSBzdHJpbmdcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBzZWFyY2ggcGFyYW1ldGVycyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBoYXNoIHBhcmFtZXRlcnNcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGNvbnN0IHJlc29sdmVGZXRjaCA9IChjdXN0b21GZXRjaCkgPT4ge1xuICAgIGxldCBfZmV0Y2g7XG4gICAgaWYgKGN1c3RvbUZldGNoKSB7XG4gICAgICAgIF9mZXRjaCA9IGN1c3RvbUZldGNoO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmV0Y2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIF9mZXRjaCA9ICguLi5hcmdzKSA9PiBpbXBvcnQoJ0BzdXBhYmFzZS9ub2RlLWZldGNoJykudGhlbigoeyBkZWZhdWx0OiBmZXRjaCB9KSA9PiBmZXRjaCguLi5hcmdzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBfZmV0Y2ggPSBmZXRjaDtcbiAgICB9XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiBfZmV0Y2goLi4uYXJncyk7XG59O1xuZXhwb3J0IGNvbnN0IGxvb2tzTGlrZUZldGNoUmVzcG9uc2UgPSAobWF5YmVSZXNwb25zZSkgPT4ge1xuICAgIHJldHVybiAodHlwZW9mIG1heWJlUmVzcG9uc2UgPT09ICdvYmplY3QnICYmXG4gICAgICAgIG1heWJlUmVzcG9uc2UgIT09IG51bGwgJiZcbiAgICAgICAgJ3N0YXR1cycgaW4gbWF5YmVSZXNwb25zZSAmJlxuICAgICAgICAnb2snIGluIG1heWJlUmVzcG9uc2UgJiZcbiAgICAgICAgJ2pzb24nIGluIG1heWJlUmVzcG9uc2UgJiZcbiAgICAgICAgdHlwZW9mIG1heWJlUmVzcG9uc2UuanNvbiA9PT0gJ2Z1bmN0aW9uJyk7XG59O1xuLy8gU3RvcmFnZSBoZWxwZXJzXG5leHBvcnQgY29uc3Qgc2V0SXRlbUFzeW5jID0gYXN5bmMgKHN0b3JhZ2UsIGtleSwgZGF0YSkgPT4ge1xuICAgIGF3YWl0IHN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn07XG5leHBvcnQgY29uc3QgZ2V0SXRlbUFzeW5jID0gYXN5bmMgKHN0b3JhZ2UsIGtleSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgc3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcmVtb3ZlSXRlbUFzeW5jID0gYXN5bmMgKHN0b3JhZ2UsIGtleSkgPT4ge1xuICAgIGF3YWl0IHN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xufTtcbi8qKlxuICogQSBkZWZlcnJlZCByZXByZXNlbnRzIHNvbWUgYXN5bmNocm9ub3VzIHdvcmsgdGhhdCBpcyBub3QgeWV0IGZpbmlzaGVkLCB3aGljaFxuICogbWF5IG9yIG1heSBub3QgY3VsbWluYXRlIGluIGEgdmFsdWUuXG4gKiBUYWtlbiBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vbWlrZS1ub3J0aC90eXBlcy9ibG9iL21hc3Rlci9zcmMvYXN5bmMudHNcbiAqL1xuZXhwb3J0IGNsYXNzIERlZmVycmVkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYS1zZW1pXG4gICAgICAgIDtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IERlZmVycmVkLnByb21pc2VDb25zdHJ1Y3RvcigocmVzLCByZWopID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXh0cmEtc2VtaVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkRlZmVycmVkLnByb21pc2VDb25zdHJ1Y3RvciA9IFByb21pc2U7XG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlSldUKHRva2VuKSB7XG4gICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhJbnZhbGlkSnd0RXJyb3IoJ0ludmFsaWQgSldUIHN0cnVjdHVyZScpO1xuICAgIH1cbiAgICAvLyBSZWdleCBjaGVja3MgZm9yIGJhc2U2NHVybCBmb3JtYXRcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghQkFTRTY0VVJMX1JFR0VYLnRlc3QocGFydHNbaV0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXV0aEludmFsaWRKd3RFcnJvcignSldUIG5vdCBpbiBiYXNlNjR1cmwgZm9ybWF0Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgLy8gdXNpbmcgYmFzZTY0dXJsIGxpYlxuICAgICAgICBoZWFkZXI6IEpTT04ucGFyc2Uoc3RyaW5nRnJvbUJhc2U2NFVSTChwYXJ0c1swXSkpLFxuICAgICAgICBwYXlsb2FkOiBKU09OLnBhcnNlKHN0cmluZ0Zyb21CYXNlNjRVUkwocGFydHNbMV0pKSxcbiAgICAgICAgc2lnbmF0dXJlOiBiYXNlNjRVcmxUb1VpbnQ4QXJyYXkocGFydHNbMl0pLFxuICAgICAgICByYXc6IHtcbiAgICAgICAgICAgIGhlYWRlcjogcGFydHNbMF0sXG4gICAgICAgICAgICBwYXlsb2FkOiBwYXJ0c1sxXSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIG51bGwgYWZ0ZXIgc29tZSB0aW1lLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2xlZXAodGltZSkge1xuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgoYWNjZXB0KSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gYWNjZXB0KG51bGwpLCB0aW1lKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIHByb3ZpZGVkIGFzeW5jIGZ1bmN0aW9uIGludG8gYSByZXRyeWFibGUgZnVuY3Rpb24uIEVhY2ggcmVzdWx0XG4gKiBvciB0aHJvd24gZXJyb3IgaXMgc2VudCB0byB0aGUgaXNSZXRyeWFibGUgZnVuY3Rpb24gd2hpY2ggc2hvdWxkIHJldHVybiB0cnVlXG4gKiBpZiB0aGUgZnVuY3Rpb24gc2hvdWxkIHJ1biBhZ2Fpbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldHJ5YWJsZShmbiwgaXNSZXRyeWFibGUpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKGFjY2VwdCwgcmVqZWN0KSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXh0cmEtc2VtaVxuICAgICAgICA7XG4gICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IEluZmluaXR5OyBhdHRlbXB0KyspIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbihhdHRlbXB0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1JldHJ5YWJsZShhdHRlbXB0LCBudWxsLCByZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmV0cnlhYmxlKGF0dGVtcHQsIGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBkZWMyaGV4KGRlYykge1xuICAgIHJldHVybiAoJzAnICsgZGVjLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC0yKTtcbn1cbi8vIEZ1bmN0aW9ucyBiZWxvdyB0YWtlbiBmcm9tOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82MzMwOTQwOS9jcmVhdGluZy1hLWNvZGUtdmVyaWZpZXItYW5kLWNoYWxsZW5nZS1mb3ItcGtjZS1hdXRoLW9uLXNwb3RpZnktYXBpLWluLXJlYWN0anNcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBLQ0VWZXJpZmllcigpIHtcbiAgICBjb25zdCB2ZXJpZmllckxlbmd0aCA9IDU2O1xuICAgIGNvbnN0IGFycmF5ID0gbmV3IFVpbnQzMkFycmF5KHZlcmlmaWVyTGVuZ3RoKTtcbiAgICBpZiAodHlwZW9mIGNyeXB0byA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgY2hhclNldCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OS0uX34nO1xuICAgICAgICBjb25zdCBjaGFyU2V0TGVuID0gY2hhclNldC5sZW5ndGg7XG4gICAgICAgIGxldCB2ZXJpZmllciA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcmlmaWVyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZlcmlmaWVyICs9IGNoYXJTZXQuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJTZXRMZW4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVyaWZpZXI7XG4gICAgfVxuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyYXkpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFycmF5LCBkZWMyaGV4KS5qb2luKCcnKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHNoYTI1NihyYW5kb21TdHJpbmcpIHtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgY29uc3QgZW5jb2RlZERhdGEgPSBlbmNvZGVyLmVuY29kZShyYW5kb21TdHJpbmcpO1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGVuY29kZWREYXRhKTtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGhhc2gpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGJ5dGVzKVxuICAgICAgICAubWFwKChjKSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpKVxuICAgICAgICAuam9pbignJyk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQS0NFQ2hhbGxlbmdlKHZlcmlmaWVyKSB7XG4gICAgY29uc3QgaGFzQ3J5cHRvU3VwcG9ydCA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBjcnlwdG8uc3VidGxlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnO1xuICAgIGlmICghaGFzQ3J5cHRvU3VwcG9ydCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dlYkNyeXB0byBBUEkgaXMgbm90IHN1cHBvcnRlZC4gQ29kZSBjaGFsbGVuZ2UgbWV0aG9kIHdpbGwgZGVmYXVsdCB0byB1c2UgcGxhaW4gaW5zdGVhZCBvZiBzaGEyNTYuJyk7XG4gICAgICAgIHJldHVybiB2ZXJpZmllcjtcbiAgICB9XG4gICAgY29uc3QgaGFzaGVkID0gYXdhaXQgc2hhMjU2KHZlcmlmaWVyKTtcbiAgICByZXR1cm4gYnRvYShoYXNoZWQpLnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpLnJlcGxhY2UoLz0rJC8sICcnKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb2RlQ2hhbGxlbmdlQW5kTWV0aG9kKHN0b3JhZ2UsIHN0b3JhZ2VLZXksIGlzUGFzc3dvcmRSZWNvdmVyeSA9IGZhbHNlKSB7XG4gICAgY29uc3QgY29kZVZlcmlmaWVyID0gZ2VuZXJhdGVQS0NFVmVyaWZpZXIoKTtcbiAgICBsZXQgc3RvcmVkQ29kZVZlcmlmaWVyID0gY29kZVZlcmlmaWVyO1xuICAgIGlmIChpc1Bhc3N3b3JkUmVjb3ZlcnkpIHtcbiAgICAgICAgc3RvcmVkQ29kZVZlcmlmaWVyICs9ICcvUEFTU1dPUkRfUkVDT1ZFUlknO1xuICAgIH1cbiAgICBhd2FpdCBzZXRJdGVtQXN5bmMoc3RvcmFnZSwgYCR7c3RvcmFnZUtleX0tY29kZS12ZXJpZmllcmAsIHN0b3JlZENvZGVWZXJpZmllcik7XG4gICAgY29uc3QgY29kZUNoYWxsZW5nZSA9IGF3YWl0IGdlbmVyYXRlUEtDRUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpO1xuICAgIGNvbnN0IGNvZGVDaGFsbGVuZ2VNZXRob2QgPSBjb2RlVmVyaWZpZXIgPT09IGNvZGVDaGFsbGVuZ2UgPyAncGxhaW4nIDogJ3MyNTYnO1xuICAgIHJldHVybiBbY29kZUNoYWxsZW5nZSwgY29kZUNoYWxsZW5nZU1ldGhvZF07XG59XG4vKiogUGFyc2VzIHRoZSBBUEkgdmVyc2lvbiB3aGljaCBpcyAyWVlZLU1NLURELiAqL1xuY29uc3QgQVBJX1ZFUlNJT05fUkVHRVggPSAvXjJbMC05XXszfS0oMFsxLTldfDFbMC0yXSktKDBbMS05XXwxWzAtOV18MlswLTldfDNbMC0xXSkkL2k7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZUFQSVZlcnNpb24ocmVzcG9uc2UpIHtcbiAgICBjb25zdCBhcGlWZXJzaW9uID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoQVBJX1ZFUlNJT05fSEVBREVSX05BTUUpO1xuICAgIGlmICghYXBpVmVyc2lvbikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCFhcGlWZXJzaW9uLm1hdGNoKEFQSV9WRVJTSU9OX1JFR0VYKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGAke2FwaVZlcnNpb259VDAwOjAwOjAwLjBaYCk7XG4gICAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFeHAoZXhwKSB7XG4gICAgaWYgKCFleHApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGV4cCBjbGFpbScpO1xuICAgIH1cbiAgICBjb25zdCB0aW1lTm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gICAgaWYgKGV4cCA8PSB0aW1lTm93KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSldUIGhhcyBleHBpcmVkJyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsZ29yaXRobShhbGcpIHtcbiAgICBzd2l0Y2ggKGFsZykge1xuICAgICAgICBjYXNlICdSUzI1Nic6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdSU0FTU0EtUEtDUzEtdjFfNScsXG4gICAgICAgICAgICAgICAgaGFzaDogeyBuYW1lOiAnU0hBLTI1NicgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ0VTMjU2JzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0VDRFNBJyxcbiAgICAgICAgICAgICAgICBuYW1lZEN1cnZlOiAnUC0yNTYnLFxuICAgICAgICAgICAgICAgIGhhc2g6IHsgbmFtZTogJ1NIQS0yNTYnIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFsZyBjbGFpbScpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMuanMubWFwIiwidmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuaW1wb3J0IHsgQVBJX1ZFUlNJT05TLCBBUElfVkVSU0lPTl9IRUFERVJfTkFNRSB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGV4cGlyZXNBdCwgbG9va3NMaWtlRmV0Y2hSZXNwb25zZSwgcGFyc2VSZXNwb25zZUFQSVZlcnNpb24gfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgQXV0aEFwaUVycm9yLCBBdXRoUmV0cnlhYmxlRmV0Y2hFcnJvciwgQXV0aFdlYWtQYXNzd29yZEVycm9yLCBBdXRoVW5rbm93bkVycm9yLCBBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvciwgfSBmcm9tICcuL2Vycm9ycyc7XG5jb25zdCBfZ2V0RXJyb3JNZXNzYWdlID0gKGVycikgPT4gZXJyLm1zZyB8fCBlcnIubWVzc2FnZSB8fCBlcnIuZXJyb3JfZGVzY3JpcHRpb24gfHwgZXJyLmVycm9yIHx8IEpTT04uc3RyaW5naWZ5KGVycik7XG5jb25zdCBORVRXT1JLX0VSUk9SX0NPREVTID0gWzUwMiwgNTAzLCA1MDRdO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmICghbG9va3NMaWtlRmV0Y2hSZXNwb25zZShlcnJvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhSZXRyeWFibGVGZXRjaEVycm9yKF9nZXRFcnJvck1lc3NhZ2UoZXJyb3IpLCAwKTtcbiAgICB9XG4gICAgaWYgKE5FVFdPUktfRVJST1JfQ09ERVMuaW5jbHVkZXMoZXJyb3Iuc3RhdHVzKSkge1xuICAgICAgICAvLyBzdGF0dXMgaW4gNTAwLi4uNTk5IHJhbmdlIC0gc2VydmVyIGhhZCBhbiBlcnJvciwgcmVxdWVzdCBtaWdodCBiZSByZXRyeWVkLlxuICAgICAgICB0aHJvdyBuZXcgQXV0aFJldHJ5YWJsZUZldGNoRXJyb3IoX2dldEVycm9yTWVzc2FnZShlcnJvciksIGVycm9yLnN0YXR1cyk7XG4gICAgfVxuICAgIGxldCBkYXRhO1xuICAgIHRyeSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCBlcnJvci5qc29uKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoVW5rbm93bkVycm9yKF9nZXRFcnJvck1lc3NhZ2UoZSksIGUpO1xuICAgIH1cbiAgICBsZXQgZXJyb3JDb2RlID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHJlc3BvbnNlQVBJVmVyc2lvbiA9IHBhcnNlUmVzcG9uc2VBUElWZXJzaW9uKGVycm9yKTtcbiAgICBpZiAocmVzcG9uc2VBUElWZXJzaW9uICYmXG4gICAgICAgIHJlc3BvbnNlQVBJVmVyc2lvbi5nZXRUaW1lKCkgPj0gQVBJX1ZFUlNJT05TWycyMDI0LTAxLTAxJ10udGltZXN0YW1wICYmXG4gICAgICAgIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBkYXRhICYmXG4gICAgICAgIHR5cGVvZiBkYXRhLmNvZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVycm9yQ29kZSA9IGRhdGEuY29kZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEgJiYgdHlwZW9mIGRhdGEuZXJyb3JfY29kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZXJyb3JDb2RlID0gZGF0YS5lcnJvcl9jb2RlO1xuICAgIH1cbiAgICBpZiAoIWVycm9yQ29kZSkge1xuICAgICAgICAvLyBMZWdhY3kgc3VwcG9ydCBmb3Igd2VhayBwYXNzd29yZCBlcnJvcnMsIHdoZW4gdGhlcmUgd2VyZSBubyBlcnJvciBjb2Rlc1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBkYXRhICYmXG4gICAgICAgICAgICB0eXBlb2YgZGF0YS53ZWFrX3Bhc3N3b3JkID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgZGF0YS53ZWFrX3Bhc3N3b3JkICYmXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGRhdGEud2Vha19wYXNzd29yZC5yZWFzb25zKSAmJlxuICAgICAgICAgICAgZGF0YS53ZWFrX3Bhc3N3b3JkLnJlYXNvbnMubGVuZ3RoICYmXG4gICAgICAgICAgICBkYXRhLndlYWtfcGFzc3dvcmQucmVhc29ucy5yZWR1Y2UoKGEsIGkpID0+IGEgJiYgdHlwZW9mIGkgPT09ICdzdHJpbmcnLCB0cnVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhXZWFrUGFzc3dvcmRFcnJvcihfZ2V0RXJyb3JNZXNzYWdlKGRhdGEpLCBlcnJvci5zdGF0dXMsIGRhdGEud2Vha19wYXNzd29yZC5yZWFzb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChlcnJvckNvZGUgPT09ICd3ZWFrX3Bhc3N3b3JkJykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aFdlYWtQYXNzd29yZEVycm9yKF9nZXRFcnJvck1lc3NhZ2UoZGF0YSksIGVycm9yLnN0YXR1cywgKChfYSA9IGRhdGEud2Vha19wYXNzd29yZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlYXNvbnMpIHx8IFtdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXJyb3JDb2RlID09PSAnc2Vzc2lvbl9ub3RfZm91bmQnKSB7XG4gICAgICAgIC8vIFRoZSBgc2Vzc2lvbl9pZGAgaW5zaWRlIHRoZSBKV1QgZG9lcyBub3QgY29ycmVzcG9uZCB0byBhIHJvdyBpbiB0aGVcbiAgICAgICAgLy8gYHNlc3Npb25zYCB0YWJsZS4gVGhpcyB1c3VhbGx5IG1lYW5zIHRoZSB1c2VyIGhhcyBzaWduZWQgb3V0LCBoYXMgYmVlblxuICAgICAgICAvLyBkZWxldGVkLCBvciB0aGVpciBzZXNzaW9uIGhhcyBzb21laG93IGJlZW4gdGVybWluYXRlZC5cbiAgICAgICAgdGhyb3cgbmV3IEF1dGhTZXNzaW9uTWlzc2luZ0Vycm9yKCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBBdXRoQXBpRXJyb3IoX2dldEVycm9yTWVzc2FnZShkYXRhKSwgZXJyb3Iuc3RhdHVzIHx8IDUwMCwgZXJyb3JDb2RlKTtcbn1cbmNvbnN0IF9nZXRSZXF1ZXN0UGFyYW1zID0gKG1ldGhvZCwgb3B0aW9ucywgcGFyYW1ldGVycywgYm9keSkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHsgbWV0aG9kLCBoZWFkZXJzOiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhlYWRlcnMpIHx8IHt9IH07XG4gICAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgcGFyYW1zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnIH0sIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5oZWFkZXJzKTtcbiAgICBwYXJhbXMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHBhcmFtZXRlcnMpO1xufTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfcmVxdWVzdChmZXRjaGVyLCBtZXRob2QsIHVybCwgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBoZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmhlYWRlcnMpO1xuICAgIGlmICghaGVhZGVyc1tBUElfVkVSU0lPTl9IRUFERVJfTkFNRV0pIHtcbiAgICAgICAgaGVhZGVyc1tBUElfVkVSU0lPTl9IRUFERVJfTkFNRV0gPSBBUElfVkVSU0lPTlNbJzIwMjQtMDEtMDEnXS5uYW1lO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmp3dCkge1xuICAgICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7b3B0aW9ucy5qd3R9YDtcbiAgICB9XG4gICAgY29uc3QgcXMgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucXVlcnkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucmVkaXJlY3RUbykge1xuICAgICAgICBxc1sncmVkaXJlY3RfdG8nXSA9IG9wdGlvbnMucmVkaXJlY3RUbztcbiAgICB9XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBPYmplY3Qua2V5cyhxcykubGVuZ3RoID8gJz8nICsgbmV3IFVSTFNlYXJjaFBhcmFtcyhxcykudG9TdHJpbmcoKSA6ICcnO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBfaGFuZGxlUmVxdWVzdChmZXRjaGVyLCBtZXRob2QsIHVybCArIHF1ZXJ5U3RyaW5nLCB7XG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIG5vUmVzb2x2ZUpzb246IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ub1Jlc29sdmVKc29uLFxuICAgIH0sIHt9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuYm9keSk7XG4gICAgcmV0dXJuIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMueGZvcm0pID8gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnhmb3JtKGRhdGEpIDogeyBkYXRhOiBPYmplY3QuYXNzaWduKHt9LCBkYXRhKSwgZXJyb3I6IG51bGwgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9oYW5kbGVSZXF1ZXN0KGZldGNoZXIsIG1ldGhvZCwgdXJsLCBvcHRpb25zLCBwYXJhbWV0ZXJzLCBib2R5KSB7XG4gICAgY29uc3QgcmVxdWVzdFBhcmFtcyA9IF9nZXRSZXF1ZXN0UGFyYW1zKG1ldGhvZCwgb3B0aW9ucywgcGFyYW1ldGVycywgYm9keSk7XG4gICAgbGV0IHJlc3VsdDtcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBmZXRjaGVyKHVybCwgT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdFBhcmFtcykpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAvLyBmZXRjaCBmYWlsZWQsIGxpa2VseSBkdWUgdG8gYSBuZXR3b3JrIG9yIENPUlMgZXJyb3JcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhSZXRyeWFibGVGZXRjaEVycm9yKF9nZXRFcnJvck1lc3NhZ2UoZSksIDApO1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5vaykge1xuICAgICAgICBhd2FpdCBoYW5kbGVFcnJvcihyZXN1bHQpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm5vUmVzb2x2ZUpzb24pIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5qc29uKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZUVycm9yKGUpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBfc2Vzc2lvblJlc3BvbnNlKGRhdGEpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHNlc3Npb24gPSBudWxsO1xuICAgIGlmIChoYXNTZXNzaW9uKGRhdGEpKSB7XG4gICAgICAgIHNlc3Npb24gPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhKTtcbiAgICAgICAgaWYgKCFkYXRhLmV4cGlyZXNfYXQpIHtcbiAgICAgICAgICAgIHNlc3Npb24uZXhwaXJlc19hdCA9IGV4cGlyZXNBdChkYXRhLmV4cGlyZXNfaW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHVzZXIgPSAoX2EgPSBkYXRhLnVzZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGRhdGE7XG4gICAgcmV0dXJuIHsgZGF0YTogeyBzZXNzaW9uLCB1c2VyIH0sIGVycm9yOiBudWxsIH07XG59XG5leHBvcnQgZnVuY3Rpb24gX3Nlc3Npb25SZXNwb25zZVBhc3N3b3JkKGRhdGEpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IF9zZXNzaW9uUmVzcG9uc2UoZGF0YSk7XG4gICAgaWYgKCFyZXNwb25zZS5lcnJvciAmJlxuICAgICAgICBkYXRhLndlYWtfcGFzc3dvcmQgJiZcbiAgICAgICAgdHlwZW9mIGRhdGEud2Vha19wYXNzd29yZCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheShkYXRhLndlYWtfcGFzc3dvcmQucmVhc29ucykgJiZcbiAgICAgICAgZGF0YS53ZWFrX3Bhc3N3b3JkLnJlYXNvbnMubGVuZ3RoICYmXG4gICAgICAgIGRhdGEud2Vha19wYXNzd29yZC5tZXNzYWdlICYmXG4gICAgICAgIHR5cGVvZiBkYXRhLndlYWtfcGFzc3dvcmQubWVzc2FnZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgZGF0YS53ZWFrX3Bhc3N3b3JkLnJlYXNvbnMucmVkdWNlKChhLCBpKSA9PiBhICYmIHR5cGVvZiBpID09PSAnc3RyaW5nJywgdHJ1ZSkpIHtcbiAgICAgICAgcmVzcG9uc2UuZGF0YS53ZWFrX3Bhc3N3b3JkID0gZGF0YS53ZWFrX3Bhc3N3b3JkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gX3VzZXJSZXNwb25zZShkYXRhKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHVzZXIgPSAoX2EgPSBkYXRhLnVzZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGRhdGE7XG4gICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiBudWxsIH07XG59XG5leHBvcnQgZnVuY3Rpb24gX3Nzb1Jlc3BvbnNlKGRhdGEpIHtcbiAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9nZW5lcmF0ZUxpbmtSZXNwb25zZShkYXRhKSB7XG4gICAgY29uc3QgeyBhY3Rpb25fbGluaywgZW1haWxfb3RwLCBoYXNoZWRfdG9rZW4sIHJlZGlyZWN0X3RvLCB2ZXJpZmljYXRpb25fdHlwZSB9ID0gZGF0YSwgcmVzdCA9IF9fcmVzdChkYXRhLCBbXCJhY3Rpb25fbGlua1wiLCBcImVtYWlsX290cFwiLCBcImhhc2hlZF90b2tlblwiLCBcInJlZGlyZWN0X3RvXCIsIFwidmVyaWZpY2F0aW9uX3R5cGVcIl0pO1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICAgIGFjdGlvbl9saW5rLFxuICAgICAgICBlbWFpbF9vdHAsXG4gICAgICAgIGhhc2hlZF90b2tlbixcbiAgICAgICAgcmVkaXJlY3RfdG8sXG4gICAgICAgIHZlcmlmaWNhdGlvbl90eXBlLFxuICAgIH07XG4gICAgY29uc3QgdXNlciA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3QpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHByb3BlcnRpZXMsXG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9ub1Jlc29sdmVKc29uUmVzcG9uc2UoZGF0YSkge1xuICAgIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKiBoYXNTZXNzaW9uIGNoZWNrcyBpZiB0aGUgcmVzcG9uc2Ugb2JqZWN0IGNvbnRhaW5zIGEgdmFsaWQgc2Vzc2lvblxuICogQHBhcmFtIGRhdGEgQSByZXNwb25zZSBvYmplY3RcbiAqIEByZXR1cm5zIHRydWUgaWYgYSBzZXNzaW9uIGlzIGluIHRoZSByZXNwb25zZVxuICovXG5mdW5jdGlvbiBoYXNTZXNzaW9uKGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS5hY2Nlc3NfdG9rZW4gJiYgZGF0YS5yZWZyZXNoX3Rva2VuICYmIGRhdGEuZXhwaXJlc19pbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZldGNoLmpzLm1hcCIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgICB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgICAgfVxuICAgIHJldHVybiB0O1xufTtcbmltcG9ydCB7IF9nZW5lcmF0ZUxpbmtSZXNwb25zZSwgX25vUmVzb2x2ZUpzb25SZXNwb25zZSwgX3JlcXVlc3QsIF91c2VyUmVzcG9uc2UsIH0gZnJvbSAnLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgcmVzb2x2ZUZldGNoIH0gZnJvbSAnLi9saWIvaGVscGVycyc7XG5pbXBvcnQgeyBpc0F1dGhFcnJvciB9IGZyb20gJy4vbGliL2Vycm9ycyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHb1RydWVBZG1pbkFwaSB7XG4gICAgY29uc3RydWN0b3IoeyB1cmwgPSAnJywgaGVhZGVycyA9IHt9LCBmZXRjaCwgfSkge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgdGhpcy5mZXRjaCA9IHJlc29sdmVGZXRjaChmZXRjaCk7XG4gICAgICAgIHRoaXMubWZhID0ge1xuICAgICAgICAgICAgbGlzdEZhY3RvcnM6IHRoaXMuX2xpc3RGYWN0b3JzLmJpbmQodGhpcyksXG4gICAgICAgICAgICBkZWxldGVGYWN0b3I6IHRoaXMuX2RlbGV0ZUZhY3Rvci5iaW5kKHRoaXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbG9nZ2VkLWluIHNlc3Npb24uXG4gICAgICogQHBhcmFtIGp3dCBBIHZhbGlkLCBsb2dnZWQtaW4gSldULlxuICAgICAqIEBwYXJhbSBzY29wZSBUaGUgbG9nb3V0IHNvcGUuXG4gICAgICovXG4gICAgYXN5bmMgc2lnbk91dChqd3QsIHNjb3BlID0gJ2dsb2JhbCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdQT1NUJywgYCR7dGhpcy51cmx9L2xvZ291dD9zY29wZT0ke3Njb3BlfWAsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgand0LFxuICAgICAgICAgICAgICAgIG5vUmVzb2x2ZUpzb246IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGludml0ZSBsaW5rIHRvIGFuIGVtYWlsIGFkZHJlc3MuXG4gICAgICogQHBhcmFtIGVtYWlsIFRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyB0byBiZSBpbmNsdWRlZCB3aGVuIGludml0aW5nLlxuICAgICAqL1xuICAgIGFzeW5jIGludml0ZVVzZXJCeUVtYWlsKGVtYWlsLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS9pbnZpdGVgLCB7XG4gICAgICAgICAgICAgICAgYm9keTogeyBlbWFpbCwgZGF0YTogb3B0aW9ucy5kYXRhIH0sXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IG9wdGlvbnMucmVkaXJlY3RUbyxcbiAgICAgICAgICAgICAgICB4Zm9ybTogX3VzZXJSZXNwb25zZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGVtYWlsIGxpbmtzIGFuZCBPVFBzIHRvIGJlIHNlbnQgdmlhIGEgY3VzdG9tIGVtYWlsIHByb3ZpZGVyLlxuICAgICAqIEBwYXJhbSBlbWFpbCBUaGUgdXNlcidzIGVtYWlsLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLnBhc3N3b3JkIFVzZXIgcGFzc3dvcmQuIEZvciBzaWdudXAgb25seS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5kYXRhIE9wdGlvbmFsIHVzZXIgbWV0YWRhdGEuIEZvciBzaWdudXAgb25seS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5yZWRpcmVjdFRvIFRoZSByZWRpcmVjdCB1cmwgd2hpY2ggc2hvdWxkIGJlIGFwcGVuZGVkIHRvIHRoZSBnZW5lcmF0ZWQgbGlua1xuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlTGluayhwYXJhbXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyB9ID0gcGFyYW1zLCByZXN0ID0gX19yZXN0KHBhcmFtcywgW1wib3B0aW9uc1wiXSk7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN0KSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoJ25ld0VtYWlsJyBpbiByZXN0KSB7XG4gICAgICAgICAgICAgICAgLy8gcmVwbGFjZSBuZXdFbWFpbCB3aXRoIG5ld19lbWFpbCBpbiByZXF1ZXN0IGJvZHlcbiAgICAgICAgICAgICAgICBib2R5Lm5ld19lbWFpbCA9IHJlc3QgPT09IG51bGwgfHwgcmVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdC5uZXdFbWFpbDtcbiAgICAgICAgICAgICAgICBkZWxldGUgYm9keVsnbmV3RW1haWwnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS9hZG1pbi9nZW5lcmF0ZV9saW5rYCwge1xuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHhmb3JtOiBfZ2VuZXJhdGVMaW5rUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnJlZGlyZWN0VG8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFVzZXIgQWRtaW4gQVBJXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB1c2VyLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIGEgc2VydmVyLiBOZXZlciBleHBvc2UgeW91ciBgc2VydmljZV9yb2xlYCBrZXkgaW4gdGhlIGJyb3dzZXIuXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlVXNlcihhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBgJHt0aGlzLnVybH0vYWRtaW4vdXNlcnNgLCB7XG4gICAgICAgICAgICAgICAgYm9keTogYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgeGZvcm06IF91c2VyUmVzcG9uc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIGxpc3Qgb2YgdXNlcnMuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBhIHNlcnZlci4gTmV2ZXIgZXhwb3NlIHlvdXIgYHNlcnZpY2Vfcm9sZWAga2V5IGluIHRoZSBicm93c2VyLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IHdoaWNoIHN1cHBvcnRzIGBwYWdlYCBhbmQgYHBlclBhZ2VgIGFzIG51bWJlcnMsIHRvIGFsdGVyIHRoZSBwYWdpbmF0ZWQgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBhc3luYyBsaXN0VXNlcnMocGFyYW1zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2luYXRpb24gPSB7IG5leHRQYWdlOiBudWxsLCBsYXN0UGFnZTogMCwgdG90YWw6IDAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ0dFVCcsIGAke3RoaXMudXJsfS9hZG1pbi91c2Vyc2AsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgbm9SZXNvbHZlSnNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICBwYWdlOiAoX2IgPSAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMucGFnZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvU3RyaW5nKCkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnLFxuICAgICAgICAgICAgICAgICAgICBwZXJfcGFnZTogKF9kID0gKF9jID0gcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLnBlclBhZ2UpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b1N0cmluZygpKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHhmb3JtOiBfbm9SZXNvbHZlSnNvblJlc3BvbnNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpXG4gICAgICAgICAgICAgICAgdGhyb3cgcmVzcG9uc2UuZXJyb3I7XG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gKF9lID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtdG90YWwtY291bnQnKSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtzID0gKF9nID0gKF9mID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2xpbmsnKSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLnNwbGl0KCcsJykpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IFtdO1xuICAgICAgICAgICAgaWYgKGxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChsaW5rLnNwbGl0KCc7JylbMF0uc3BsaXQoJz0nKVsxXS5zdWJzdHJpbmcoMCwgMSkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWwgPSBKU09OLnBhcnNlKGxpbmsuc3BsaXQoJzsnKVsxXS5zcGxpdCgnPScpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbltgJHtyZWx9UGFnZWBdID0gcGFnZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uLnRvdGFsID0gcGFyc2VJbnQodG90YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB1c2VycyksIHBhZ2luYXRpb24pLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcnM6IFtdIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdXNlciBieSBpZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1aWQgVGhlIHVzZXIncyB1bmlxdWUgaWRlbnRpZmllclxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBzaG91bGQgb25seSBiZSBjYWxsZWQgb24gYSBzZXJ2ZXIuIE5ldmVyIGV4cG9zZSB5b3VyIGBzZXJ2aWNlX3JvbGVgIGtleSBpbiB0aGUgYnJvd3Nlci5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRVc2VyQnlJZCh1aWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnR0VUJywgYCR7dGhpcy51cmx9L2FkbWluL3VzZXJzLyR7dWlkfWAsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgeGZvcm06IF91c2VyUmVzcG9uc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHVzZXIgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdHRyaWJ1dGVzIFRoZSBkYXRhIHlvdSB3YW50IHRvIHVwZGF0ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIGEgc2VydmVyLiBOZXZlciBleHBvc2UgeW91ciBgc2VydmljZV9yb2xlYCBrZXkgaW4gdGhlIGJyb3dzZXIuXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlVXNlckJ5SWQodWlkLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BVVCcsIGAke3RoaXMudXJsfS9hZG1pbi91c2Vycy8ke3VpZH1gLCB7XG4gICAgICAgICAgICAgICAgYm9keTogYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgeGZvcm06IF91c2VyUmVzcG9uc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHVzZXIuIFJlcXVpcmVzIGEgYHNlcnZpY2Vfcm9sZWAga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIFRoZSB1c2VyIGlkIHlvdSB3YW50IHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gc2hvdWxkU29mdERlbGV0ZSBJZiB0cnVlLCB0aGVuIHRoZSB1c2VyIHdpbGwgYmUgc29mdC1kZWxldGVkIGZyb20gdGhlIGF1dGggc2NoZW1hLiBTb2Z0IGRlbGV0aW9uIGFsbG93cyB1c2VyIGlkZW50aWZpY2F0aW9uIGZyb20gdGhlIGhhc2hlZCB1c2VyIElEIGJ1dCBpcyBub3QgcmV2ZXJzaWJsZS5cbiAgICAgKiBEZWZhdWx0cyB0byBmYWxzZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uIGEgc2VydmVyLiBOZXZlciBleHBvc2UgeW91ciBgc2VydmljZV9yb2xlYCBrZXkgaW4gdGhlIGJyb3dzZXIuXG4gICAgICovXG4gICAgYXN5bmMgZGVsZXRlVXNlcihpZCwgc2hvdWxkU29mdERlbGV0ZSA9IGZhbHNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ0RFTEVURScsIGAke3RoaXMudXJsfS9hZG1pbi91c2Vycy8ke2lkfWAsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRfc29mdF9kZWxldGU6IHNob3VsZFNvZnREZWxldGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB4Zm9ybTogX3VzZXJSZXNwb25zZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX2xpc3RGYWN0b3JzKHBhcmFtcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ0dFVCcsIGAke3RoaXMudXJsfS9hZG1pbi91c2Vycy8ke3BhcmFtcy51c2VySWR9L2ZhY3RvcnNgLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHhmb3JtOiAoZmFjdG9ycykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IGZhY3RvcnMgfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfZGVsZXRlRmFjdG9yKHBhcmFtcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdERUxFVEUnLCBgJHt0aGlzLnVybH0vYWRtaW4vdXNlcnMvJHtwYXJhbXMudXNlcklkfS9mYWN0b3JzLyR7cGFyYW1zLmlkfWAsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGEsIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R29UcnVlQWRtaW5BcGkuanMubWFwIiwiaW1wb3J0IHsgc3VwcG9ydHNMb2NhbFN0b3JhZ2UgfSBmcm9tICcuL2hlbHBlcnMnO1xuLyoqXG4gKiBQcm92aWRlcyBzYWZlIGFjY2VzcyB0byB0aGUgZ2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UgcHJvcGVydHkuXG4gKi9cbmV4cG9ydCBjb25zdCBsb2NhbFN0b3JhZ2VBZGFwdGVyID0ge1xuICAgIGdldEl0ZW06IChrZXkpID0+IHtcbiAgICAgICAgaWYgKCFzdXBwb3J0c0xvY2FsU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIH0sXG4gICAgc2V0SXRlbTogKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFzdXBwb3J0c0xvY2FsU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IChrZXkpID0+IHtcbiAgICAgICAgaWYgKCFzdXBwb3J0c0xvY2FsU3RvcmFnZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgIH0sXG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgbG9jYWxTdG9yYWdlLWxpa2Ugb2JqZWN0IHRoYXQgc3RvcmVzIHRoZSBrZXktdmFsdWUgcGFpcnMgaW5cbiAqIG1lbW9yeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lbW9yeUxvY2FsU3RvcmFnZUFkYXB0ZXIoc3RvcmUgPSB7fSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldEl0ZW06IChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZVtrZXldIHx8IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEl0ZW06IChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBzdG9yZVtrZXldID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZUl0ZW06IChrZXkpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdG9yZVtrZXldO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2NhbC1zdG9yYWdlLmpzLm1hcCIsIi8qKlxuICogaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2dsb2JhbHRoaXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBvbHlmaWxsR2xvYmFsVGhpcygpIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKVxuICAgICAgICByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsICdfX21hZ2ljX18nLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yICdBbGxvdyBhY2Nlc3MgdG8gbWFnaWMnXG4gICAgICAgIF9fbWFnaWNfXy5nbG9iYWxUaGlzID0gX19tYWdpY19fO1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yICdBbGxvdyBhY2Nlc3MgdG8gbWFnaWMnXG4gICAgICAgIGRlbGV0ZSBPYmplY3QucHJvdG90eXBlLl9fbWFnaWNfXztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAnQWxsb3cgYWNjZXNzIHRvIGdsb2JhbHMnXG4gICAgICAgICAgICBzZWxmLmdsb2JhbFRoaXMgPSBzZWxmO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9seWZpbGxzLmpzLm1hcCIsImltcG9ydCB7IHN1cHBvcnRzTG9jYWxTdG9yYWdlIH0gZnJvbSAnLi9oZWxwZXJzJztcbi8qKlxuICogQGV4cGVyaW1lbnRhbFxuICovXG5leHBvcnQgY29uc3QgaW50ZXJuYWxzID0ge1xuICAgIC8qKlxuICAgICAqIEBleHBlcmltZW50YWxcbiAgICAgKi9cbiAgICBkZWJ1ZzogISEoZ2xvYmFsVGhpcyAmJlxuICAgICAgICBzdXBwb3J0c0xvY2FsU3RvcmFnZSgpICYmXG4gICAgICAgIGdsb2JhbFRoaXMubG9jYWxTdG9yYWdlICYmXG4gICAgICAgIGdsb2JhbFRoaXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N1cGFiYXNlLmdvdHJ1ZS1qcy5sb2Nrcy5kZWJ1ZycpID09PSAndHJ1ZScpLFxufTtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gYSBsb2NrIGNhbm5vdCBiZSBhY3F1aXJlZCBhZnRlciBzb21lIGFtb3VudCBvZiB0aW1lLlxuICpcbiAqIFVzZSB0aGUge0BsaW5rICNpc0FjcXVpcmVUaW1lb3V0fSBwcm9wZXJ0eSBpbnN0ZWFkIG9mIGNoZWNraW5nIHdpdGggYGluc3RhbmNlb2ZgLlxuICovXG5leHBvcnQgY2xhc3MgTG9ja0FjcXVpcmVUaW1lb3V0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5pc0FjcXVpcmVUaW1lb3V0ID0gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTmF2aWdhdG9yTG9ja0FjcXVpcmVUaW1lb3V0RXJyb3IgZXh0ZW5kcyBMb2NrQWNxdWlyZVRpbWVvdXRFcnJvciB7XG59XG5leHBvcnQgY2xhc3MgUHJvY2Vzc0xvY2tBY3F1aXJlVGltZW91dEVycm9yIGV4dGVuZHMgTG9ja0FjcXVpcmVUaW1lb3V0RXJyb3Ige1xufVxuLyoqXG4gKiBJbXBsZW1lbnRzIGEgZ2xvYmFsIGV4Y2x1c2l2ZSBsb2NrIHVzaW5nIHRoZSBOYXZpZ2F0b3IgTG9ja01hbmFnZXIgQVBJLiBJdFxuICogaXMgYXZhaWxhYmxlIG9uIGFsbCBicm93c2VycyByZWxlYXNlZCBhZnRlciAyMDIyLTAzLTE1IHdpdGggU2FmYXJpIGJlaW5nIHRoZVxuICogbGFzdCBvbmUgdG8gcmVsZWFzZSBzdXBwb3J0LiBJZiB0aGUgQVBJIGlzIG5vdCBhdmFpbGFibGUsIHRoaXMgZnVuY3Rpb24gd2lsbFxuICogdGhyb3cuIE1ha2Ugc3VyZSB5b3UgY2hlY2sgYXZhaWxhYmxpbGl0eSBiZWZvcmUgY29uZmlndXJpbmcge0BsaW5rXG4gKiBHb1RydWVDbGllbnR9LlxuICpcbiAqIFlvdSBjYW4gdHVybiBvbiBkZWJ1Z2dpbmcgYnkgc2V0dGluZyB0aGUgYHN1cGFiYXNlLmdvdHJ1ZS1qcy5sb2Nrcy5kZWJ1Z2BcbiAqIGxvY2FsIHN0b3JhZ2UgaXRlbSB0byBgdHJ1ZWAuXG4gKlxuICogSW50ZXJuYWxzOlxuICpcbiAqIFNpbmNlIHRoZSBMb2NrTWFuYWdlciBBUEkgZG9lcyBub3QgcHJlc2VydmUgc3RhY2sgdHJhY2VzIGZvciB0aGUgYXN5bmNcbiAqIGZ1bmN0aW9uIHBhc3NlZCBpbiB0aGUgYHJlcXVlc3RgIG1ldGhvZCwgYSB0cmljayBpcyB1c2VkIHdoZXJlIGFjcXVpcmluZyB0aGVcbiAqIGxvY2sgcmVsZWFzZXMgYSBwcmV2aW91c2x5IHN0YXJ0ZWQgcHJvbWlzZSB0byBydW4gdGhlIG9wZXJhdGlvbiBpbiB0aGUgYGZuYFxuICogZnVuY3Rpb24uIFRoZSBsb2NrIHdhaXRzIGZvciB0aGF0IHByb21pc2UgdG8gZmluaXNoICh3aXRoIG9yIHdpdGhvdXQgZXJyb3IpLFxuICogd2hpbGUgdGhlIGZ1bmN0aW9uIHdpbGwgZmluYWxseSB3YWl0IGZvciB0aGUgcmVzdWx0IGFueXdheS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBsb2NrIHRvIGJlIGFjcXVpcmVkLlxuICogQHBhcmFtIGFjcXVpcmVUaW1lb3V0IElmIG5lZ2F0aXZlLCBubyB0aW1lb3V0LiBJZiAwIGFuIGVycm9yIGlzIHRocm93biBpZlxuICogICAgICAgICAgICAgICAgICAgICAgIHRoZSBsb2NrIGNhbid0IGJlIGFjcXVpcmVkIHdpdGhvdXQgd2FpdGluZy4gSWYgcG9zaXRpdmUsIHRoZSBsb2NrIGFjcXVpcmVcbiAqICAgICAgICAgICAgICAgICAgICAgICB3aWxsIHRpbWUgb3V0IGFmdGVyIHNvIG1hbnkgbWlsbGlzZWNvbmRzLiBBbiBlcnJvciBpc1xuICogICAgICAgICAgICAgICAgICAgICAgIGEgdGltZW91dCBpZiBpdCBoYXMgYGlzQWNxdWlyZVRpbWVvdXRgIHNldCB0byB0cnVlLlxuICogQHBhcmFtIGZuIFRoZSBvcGVyYXRpb24gdG8gcnVuIG9uY2UgdGhlIGxvY2sgaXMgYWNxdWlyZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBuYXZpZ2F0b3JMb2NrKG5hbWUsIGFjcXVpcmVUaW1lb3V0LCBmbikge1xuICAgIGlmIChpbnRlcm5hbHMuZGVidWcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0BzdXBhYmFzZS9nb3RydWUtanM6IG5hdmlnYXRvckxvY2s6IGFjcXVpcmUgbG9jaycsIG5hbWUsIGFjcXVpcmVUaW1lb3V0KTtcbiAgICB9XG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IGdsb2JhbFRoaXMuQWJvcnRDb250cm9sbGVyKCk7XG4gICAgaWYgKGFjcXVpcmVUaW1lb3V0ID4gMCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgaWYgKGludGVybmFscy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdAc3VwYWJhc2UvZ290cnVlLWpzOiBuYXZpZ2F0b3JMb2NrIGFjcXVpcmUgdGltZWQgb3V0JywgbmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGFjcXVpcmVUaW1lb3V0KTtcbiAgICB9XG4gICAgLy8gTUROIGFydGljbGU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Mb2NrTWFuYWdlci9yZXF1ZXN0XG4gICAgLy8gV3JhcHBpbmcgbmF2aWdhdG9yLmxvY2tzLnJlcXVlc3QoKSB3aXRoIGEgcGxhaW4gUHJvbWlzZSBpcyBkb25lIGFzIHNvbWVcbiAgICAvLyBsaWJyYXJpZXMgbGlrZSB6b25lLmpzIHBhdGNoIHRoZSBQcm9taXNlIG9iamVjdCB0byB0cmFjayB0aGUgZXhlY3V0aW9uXG4gICAgLy8gY29udGV4dC4gSG93ZXZlciwgaXQgYXBwZWFycyB0aGF0IG1vc3QgYnJvd3NlcnMgdXNlIGFuIGludGVybmFsIHByb21pc2VcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiB3aGVuIHVzaW5nIHRoZSBuYXZpZ2F0b3IubG9ja3MucmVxdWVzdCgpIEFQSSBjYXVzaW5nIHRoZW1cbiAgICAvLyB0byBsb3NlIGNvbnRleHQgYW5kIGVtaXQgY29uZnVzaW5nIGxvZyBtZXNzYWdlcyBvciBicmVhayBjZXJ0YWluIGZlYXR1cmVzLlxuICAgIC8vIFRoaXMgd3JhcHBpbmcgaXMgYmVsaWV2ZWQgdG8gaGVscCB6b25lLmpzIHRyYWNrIHRoZSBleGVjdXRpb24gY29udGV4dFxuICAgIC8vIGJldHRlci5cbiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBnbG9iYWxUaGlzLm5hdmlnYXRvci5sb2Nrcy5yZXF1ZXN0KG5hbWUsIGFjcXVpcmVUaW1lb3V0ID09PSAwXG4gICAgICAgID8ge1xuICAgICAgICAgICAgbW9kZTogJ2V4Y2x1c2l2ZScsXG4gICAgICAgICAgICBpZkF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIG1vZGU6ICdleGNsdXNpdmUnLFxuICAgICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICB9LCBhc3luYyAobG9jaykgPT4ge1xuICAgICAgICBpZiAobG9jaykge1xuICAgICAgICAgICAgaWYgKGludGVybmFscy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdAc3VwYWJhc2UvZ290cnVlLWpzOiBuYXZpZ2F0b3JMb2NrOiBhY3F1aXJlZCcsIG5hbWUsIGxvY2submFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKGludGVybmFscy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQHN1cGFiYXNlL2dvdHJ1ZS1qczogbmF2aWdhdG9yTG9jazogcmVsZWFzZWQnLCBuYW1lLCBsb2NrLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhY3F1aXJlVGltZW91dCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbHMuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0BzdXBhYmFzZS9nb3RydWUtanM6IG5hdmlnYXRvckxvY2s6IG5vdCBpbW1lZGlhdGVseSBhdmFpbGFibGUnLCBuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5hdmlnYXRvckxvY2tBY3F1aXJlVGltZW91dEVycm9yKGBBY3F1aXJpbmcgYW4gZXhjbHVzaXZlIE5hdmlnYXRvciBMb2NrTWFuYWdlciBsb2NrIFwiJHtuYW1lfVwiIGltbWVkaWF0ZWx5IGZhaWxlZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGludGVybmFscy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2xvYmFsVGhpcy5uYXZpZ2F0b3IubG9ja3MucXVlcnkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdAc3VwYWJhc2UvZ290cnVlLWpzOiBOYXZpZ2F0b3IgTG9ja01hbmFnZXIgc3RhdGUnLCBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsICcgICcpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdAc3VwYWJhc2UvZ290cnVlLWpzOiBFcnJvciB3aGVuIHF1ZXJ5aW5nIE5hdmlnYXRvciBMb2NrTWFuYWdlciBzdGF0ZScsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEJyb3dzZXIgaXMgbm90IGZvbGxvd2luZyB0aGUgTmF2aWdhdG9yIExvY2tNYW5hZ2VyIHNwZWMsIGl0XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuZWQgYSBudWxsIGxvY2sgd2hlbiB3ZSBkaWRuJ3QgdXNlIGlmQXZhaWxhYmxlLiBTbyB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyBwcmV0ZW5kIHRoZSBsb2NrIGlzIGFjcXVpcmVkIGluIHRoZSBuYW1lIG9mIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICAvLyBhbmQgdXNlciBleHBlcmllbmNlIGFuZCBqdXN0IHJ1biB0aGUgZnVuY3Rpb24uXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdAc3VwYWJhc2UvZ290cnVlLWpzOiBOYXZpZ2F0b3IgTG9ja01hbmFnZXIgcmV0dXJuZWQgYSBudWxsIGxvY2sgd2hlbiB1c2luZyAjcmVxdWVzdCB3aXRob3V0IGlmQXZhaWxhYmxlIHNldCB0byB0cnVlLCBpdCBhcHBlYXJzIHRoaXMgYnJvd3NlciBpcyBub3QgZm9sbG93aW5nIHRoZSBMb2NrTWFuYWdlciBzcGVjIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Mb2NrTWFuYWdlci9yZXF1ZXN0Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KSk7XG59XG5jb25zdCBQUk9DRVNTX0xPQ0tTID0ge307XG4vKipcbiAqIEltcGxlbWVudHMgYSBnbG9iYWwgZXhjbHVzaXZlIGxvY2sgdGhhdCB3b3JrcyBvbmx5IGluIHRoZSBjdXJyZW50IHByb2Nlc3MuXG4gKiBVc2VmdWwgZm9yIGVudmlyb25tZW50cyBsaWtlIFJlYWN0IE5hdGl2ZSBvciBvdGhlciBub24tYnJvd3NlclxuICogc2luZ2xlLXByb2Nlc3MgKGkuZS4gbm8gY29uY2VwdCBvZiBcInRhYnNcIikgZW52aXJvbm1lbnRzLlxuICpcbiAqIFVzZSB7QGxpbmsgI25hdmlnYXRvckxvY2t9IGluIGJyb3dzZXIgZW52aXJvbm1lbnRzLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGxvY2sgdG8gYmUgYWNxdWlyZWQuXG4gKiBAcGFyYW0gYWNxdWlyZVRpbWVvdXQgSWYgbmVnYXRpdmUsIG5vIHRpbWVvdXQuIElmIDAgYW4gZXJyb3IgaXMgdGhyb3duIGlmXG4gKiAgICAgICAgICAgICAgICAgICAgICAgdGhlIGxvY2sgY2FuJ3QgYmUgYWNxdWlyZWQgd2l0aG91dCB3YWl0aW5nLiBJZiBwb3NpdGl2ZSwgdGhlIGxvY2sgYWNxdWlyZVxuICogICAgICAgICAgICAgICAgICAgICAgIHdpbGwgdGltZSBvdXQgYWZ0ZXIgc28gbWFueSBtaWxsaXNlY29uZHMuIEFuIGVycm9yIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgYSB0aW1lb3V0IGlmIGl0IGhhcyBgaXNBY3F1aXJlVGltZW91dGAgc2V0IHRvIHRydWUuXG4gKiBAcGFyYW0gZm4gVGhlIG9wZXJhdGlvbiB0byBydW4gb25jZSB0aGUgbG9jayBpcyBhY3F1aXJlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NMb2NrKG5hbWUsIGFjcXVpcmVUaW1lb3V0LCBmbikge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBwcmV2aW91c09wZXJhdGlvbiA9IChfYSA9IFBST0NFU1NfTE9DS1NbbmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGNvbnN0IGN1cnJlbnRPcGVyYXRpb24gPSBQcm9taXNlLnJhY2UoW1xuICAgICAgICBwcmV2aW91c09wZXJhdGlvbi5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3Igb2YgcHJldmlvdXMgb3BlcmF0aW9uIHRoYXQgd2UncmUgd2FpdGluZyB0byBmaW5pc2hcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSxcbiAgICAgICAgYWNxdWlyZVRpbWVvdXQgPj0gMFxuICAgICAgICAgICAgPyBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgUHJvY2Vzc0xvY2tBY3F1aXJlVGltZW91dEVycm9yKGBBY3F1cmluZyBwcm9jZXNzIGxvY2sgd2l0aCBuYW1lIFwiJHtuYW1lfVwiIHRpbWVkIG91dGApKTtcbiAgICAgICAgICAgICAgICB9LCBhY3F1aXJlVGltZW91dCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiBudWxsLFxuICAgIF0uZmlsdGVyKCh4KSA9PiB4KSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGlmIChlICYmIGUuaXNBY3F1aXJlVGltZW91dCkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KVxuICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIHByZXZpb3VzIG9wZXJhdGlvbnMgZmluaXNoZWQgYW5kIHdlIGRpZG4ndCBnZXQgYSByYWNlIG9uIHRoZSBhY3F1aXJlXG4gICAgICAgIC8vIHRpbWVvdXQsIHNvIHRoZSBjdXJyZW50IG9wZXJhdGlvbiBjYW4gZmluYWxseSBzdGFydFxuICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9KTtcbiAgICBQUk9DRVNTX0xPQ0tTW25hbWVdID0gY3VycmVudE9wZXJhdGlvbi5jYXRjaChhc3luYyAoZSkgPT4ge1xuICAgICAgICBpZiAoZSAmJiBlLmlzQWNxdWlyZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBjdXJyZW50IG9wZXJhdGlvbiB0aW1lZCBvdXQsIGl0IGRvZXNuJ3QgbWVhbiB0aGF0IHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGZpbmlzaGVkLCBzbyB3ZSBuZWVkIGNvbnRudWUgd2FpdGluZyBmb3IgaXQgdG8gZmluaXNoXG4gICAgICAgICAgICBhd2FpdCBwcmV2aW91c09wZXJhdGlvbjtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gICAgLy8gZmluYWxseSB3YWl0IGZvciB0aGUgY3VycmVudCBvcGVyYXRpb24gdG8gZmluaXNoIHN1Y2Nlc3NmdWxseSwgd2l0aCBhblxuICAgIC8vIGVycm9yIG9yIHdpdGggYW4gYWNxdWlyZSB0aW1lb3V0IGVycm9yXG4gICAgcmV0dXJuIGF3YWl0IGN1cnJlbnRPcGVyYXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2Nrcy5qcy5tYXAiLCJpbXBvcnQgR29UcnVlQWRtaW5BcGkgZnJvbSAnLi9Hb1RydWVBZG1pbkFwaSc7XG5pbXBvcnQgeyBERUZBVUxUX0hFQURFUlMsIEVYUElSWV9NQVJHSU5fTVMsIEFVVE9fUkVGUkVTSF9USUNLX0RVUkFUSU9OX01TLCBBVVRPX1JFRlJFU0hfVElDS19USFJFU0hPTEQsIEdPVFJVRV9VUkwsIFNUT1JBR0VfS0VZLCBKV0tTX1RUTCwgfSBmcm9tICcuL2xpYi9jb25zdGFudHMnO1xuaW1wb3J0IHsgQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yLCBBdXRoUEtDRUdyYW50Q29kZUV4Y2hhbmdlRXJyb3IsIEF1dGhJbnZhbGlkQ3JlZGVudGlhbHNFcnJvciwgQXV0aFNlc3Npb25NaXNzaW5nRXJyb3IsIEF1dGhJbnZhbGlkVG9rZW5SZXNwb25zZUVycm9yLCBBdXRoVW5rbm93bkVycm9yLCBpc0F1dGhBcGlFcnJvciwgaXNBdXRoRXJyb3IsIGlzQXV0aFJldHJ5YWJsZUZldGNoRXJyb3IsIGlzQXV0aFNlc3Npb25NaXNzaW5nRXJyb3IsIGlzQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yLCBBdXRoSW52YWxpZEp3dEVycm9yLCB9IGZyb20gJy4vbGliL2Vycm9ycyc7XG5pbXBvcnQgeyBfcmVxdWVzdCwgX3Nlc3Npb25SZXNwb25zZSwgX3Nlc3Npb25SZXNwb25zZVBhc3N3b3JkLCBfdXNlclJlc3BvbnNlLCBfc3NvUmVzcG9uc2UsIH0gZnJvbSAnLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgRGVmZXJyZWQsIGdldEl0ZW1Bc3luYywgaXNCcm93c2VyLCByZW1vdmVJdGVtQXN5bmMsIHJlc29sdmVGZXRjaCwgc2V0SXRlbUFzeW5jLCB1dWlkLCByZXRyeWFibGUsIHNsZWVwLCBzdXBwb3J0c0xvY2FsU3RvcmFnZSwgcGFyc2VQYXJhbWV0ZXJzRnJvbVVSTCwgZ2V0Q29kZUNoYWxsZW5nZUFuZE1ldGhvZCwgZ2V0QWxnb3JpdGhtLCB2YWxpZGF0ZUV4cCwgZGVjb2RlSldULCB9IGZyb20gJy4vbGliL2hlbHBlcnMnO1xuaW1wb3J0IHsgbG9jYWxTdG9yYWdlQWRhcHRlciwgbWVtb3J5TG9jYWxTdG9yYWdlQWRhcHRlciB9IGZyb20gJy4vbGliL2xvY2FsLXN0b3JhZ2UnO1xuaW1wb3J0IHsgcG9seWZpbGxHbG9iYWxUaGlzIH0gZnJvbSAnLi9saWIvcG9seWZpbGxzJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuL2xpYi92ZXJzaW9uJztcbmltcG9ydCB7IExvY2tBY3F1aXJlVGltZW91dEVycm9yLCBuYXZpZ2F0b3JMb2NrIH0gZnJvbSAnLi9saWIvbG9ja3MnO1xuaW1wb3J0IHsgc3RyaW5nVG9VaW50OEFycmF5IH0gZnJvbSAnLi9saWIvYmFzZTY0dXJsJztcbnBvbHlmaWxsR2xvYmFsVGhpcygpOyAvLyBNYWtlIFwiZ2xvYmFsVGhpc1wiIGF2YWlsYWJsZVxuY29uc3QgREVGQVVMVF9PUFRJT05TID0ge1xuICAgIHVybDogR09UUlVFX1VSTCxcbiAgICBzdG9yYWdlS2V5OiBTVE9SQUdFX0tFWSxcbiAgICBhdXRvUmVmcmVzaFRva2VuOiB0cnVlLFxuICAgIHBlcnNpc3RTZXNzaW9uOiB0cnVlLFxuICAgIGRldGVjdFNlc3Npb25JblVybDogdHJ1ZSxcbiAgICBoZWFkZXJzOiBERUZBVUxUX0hFQURFUlMsXG4gICAgZmxvd1R5cGU6ICdpbXBsaWNpdCcsXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIGhhc0N1c3RvbUF1dGhvcml6YXRpb25IZWFkZXI6IGZhbHNlLFxufTtcbmFzeW5jIGZ1bmN0aW9uIGxvY2tOb09wKG5hbWUsIGFjcXVpcmVUaW1lb3V0LCBmbikge1xuICAgIHJldHVybiBhd2FpdCBmbigpO1xufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR29UcnVlQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY2xpZW50IGZvciB1c2UgaW4gdGhlIGJyb3dzZXIuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLm1lbW9yeVN0b3JhZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlRW1pdHRlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYXV0b1JlZnJlc2hUaWNrZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnZpc2liaWxpdHlDaGFuZ2VkQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB0aGlzLnJlZnJlc2hpbmdEZWZlcnJlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgYXN5bmMgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICAgICAgICAgKiBXaGVuIG51bGwgb3Igbm90IHlldCByZXNvbHZlZCB0aGUgYXV0aCBzdGF0ZSBpcyBgdW5rbm93bmBcbiAgICAgICAgICogT25jZSByZXNvbHZlZCB0aGUgdGhlIGF1dGggc3RhdGUgaXMga25vd24gYW5kIGl0J3Mgc2F2ZSB0byBjYWxsIGFueSBmdXJ0aGVyIGNsaWVudCBtZXRob2RzLlxuICAgICAgICAgKiBLZWVwIGV4dHJhIGNhcmUgdG8gbmV2ZXIgcmVqZWN0IG9yIHRocm93IHVuY2F1Z2h0IGVycm9yc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsaXplUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZGV0ZWN0U2Vzc2lvbkluVXJsID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oYXNDdXN0b21BdXRob3JpemF0aW9uSGVhZGVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3VwcHJlc3NHZXRTZXNzaW9uV2FybmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvY2tBY3F1aXJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBlbmRpbmdJbkxvY2sgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgdG8gYnJvYWRjYXN0IHN0YXRlIGNoYW5nZSBldmVudHMgdG8gb3RoZXIgdGFicyBsaXN0ZW5pbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGNvbnNvbGUubG9nO1xuICAgICAgICB0aGlzLmluc3RhbmNlSUQgPSBHb1RydWVDbGllbnQubmV4dEluc3RhbmNlSUQ7XG4gICAgICAgIEdvVHJ1ZUNsaWVudC5uZXh0SW5zdGFuY2VJRCArPSAxO1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUlEID4gMCAmJiBpc0Jyb3dzZXIoKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdNdWx0aXBsZSBHb1RydWVDbGllbnQgaW5zdGFuY2VzIGRldGVjdGVkIGluIHRoZSBzYW1lIGJyb3dzZXIgY29udGV4dC4gSXQgaXMgbm90IGFuIGVycm9yLCBidXQgdGhpcyBzaG91bGQgYmUgYXZvaWRlZCBhcyBpdCBtYXkgcHJvZHVjZSB1bmRlZmluZWQgYmVoYXZpb3Igd2hlbiB1c2VkIGNvbmN1cnJlbnRseSB1bmRlciB0aGUgc2FtZSBzdG9yYWdlIGtleS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TKSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMubG9nRGVidWdNZXNzYWdlcyA9ICEhc2V0dGluZ3MuZGVidWc7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MuZGVidWcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyID0gc2V0dGluZ3MuZGVidWc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZXJzaXN0U2Vzc2lvbiA9IHNldHRpbmdzLnBlcnNpc3RTZXNzaW9uO1xuICAgICAgICB0aGlzLnN0b3JhZ2VLZXkgPSBzZXR0aW5ncy5zdG9yYWdlS2V5O1xuICAgICAgICB0aGlzLmF1dG9SZWZyZXNoVG9rZW4gPSBzZXR0aW5ncy5hdXRvUmVmcmVzaFRva2VuO1xuICAgICAgICB0aGlzLmFkbWluID0gbmV3IEdvVHJ1ZUFkbWluQXBpKHtcbiAgICAgICAgICAgIHVybDogc2V0dGluZ3MudXJsLFxuICAgICAgICAgICAgaGVhZGVyczogc2V0dGluZ3MuaGVhZGVycyxcbiAgICAgICAgICAgIGZldGNoOiBzZXR0aW5ncy5mZXRjaCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXJsID0gc2V0dGluZ3MudXJsO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBzZXR0aW5ncy5oZWFkZXJzO1xuICAgICAgICB0aGlzLmZldGNoID0gcmVzb2x2ZUZldGNoKHNldHRpbmdzLmZldGNoKTtcbiAgICAgICAgdGhpcy5sb2NrID0gc2V0dGluZ3MubG9jayB8fCBsb2NrTm9PcDtcbiAgICAgICAgdGhpcy5kZXRlY3RTZXNzaW9uSW5VcmwgPSBzZXR0aW5ncy5kZXRlY3RTZXNzaW9uSW5Vcmw7XG4gICAgICAgIHRoaXMuZmxvd1R5cGUgPSBzZXR0aW5ncy5mbG93VHlwZTtcbiAgICAgICAgdGhpcy5oYXNDdXN0b21BdXRob3JpemF0aW9uSGVhZGVyID0gc2V0dGluZ3MuaGFzQ3VzdG9tQXV0aG9yaXphdGlvbkhlYWRlcjtcbiAgICAgICAgaWYgKHNldHRpbmdzLmxvY2spIHtcbiAgICAgICAgICAgIHRoaXMubG9jayA9IHNldHRpbmdzLmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNCcm93c2VyKCkgJiYgKChfYSA9IGdsb2JhbFRoaXMgPT09IG51bGwgfHwgZ2xvYmFsVGhpcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ2xvYmFsVGhpcy5uYXZpZ2F0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sb2NrcykpIHtcbiAgICAgICAgICAgIHRoaXMubG9jayA9IG5hdmlnYXRvckxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvY2sgPSBsb2NrTm9PcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmp3a3MgPSB7IGtleXM6IFtdIH07XG4gICAgICAgIHRoaXMuandrc19jYWNoZWRfYXQgPSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbiAgICAgICAgdGhpcy5tZmEgPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IHRoaXMuX3ZlcmlmeS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgZW5yb2xsOiB0aGlzLl9lbnJvbGwuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHVuZW5yb2xsOiB0aGlzLl91bmVucm9sbC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgY2hhbGxlbmdlOiB0aGlzLl9jaGFsbGVuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGxpc3RGYWN0b3JzOiB0aGlzLl9saXN0RmFjdG9ycy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgY2hhbGxlbmdlQW5kVmVyaWZ5OiB0aGlzLl9jaGFsbGVuZ2VBbmRWZXJpZnkuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGdldEF1dGhlbnRpY2F0b3JBc3N1cmFuY2VMZXZlbDogdGhpcy5fZ2V0QXV0aGVudGljYXRvckFzc3VyYW5jZUxldmVsLmJpbmQodGhpcyksXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RTZXNzaW9uKSB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3RvcmFnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZSA9IHNldHRpbmdzLnN0b3JhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNMb2NhbFN0b3JhZ2UoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2VBZGFwdGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnlTdG9yYWdlID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZSA9IG1lbW9yeUxvY2FsU3RvcmFnZUFkYXB0ZXIodGhpcy5tZW1vcnlTdG9yYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lbW9yeVN0b3JhZ2UgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZSA9IG1lbW9yeUxvY2FsU3RvcmFnZUFkYXB0ZXIodGhpcy5tZW1vcnlTdG9yYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCcm93c2VyKCkgJiYgZ2xvYmFsVGhpcy5Ccm9hZGNhc3RDaGFubmVsICYmIHRoaXMucGVyc2lzdFNlc3Npb24gJiYgdGhpcy5zdG9yYWdlS2V5KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBnbG9iYWxUaGlzLkJyb2FkY2FzdENoYW5uZWwodGhpcy5zdG9yYWdlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBhIG5ldyBCcm9hZGNhc3RDaGFubmVsLCBtdWx0aS10YWIgc3RhdGUgY2hhbmdlcyB3aWxsIG5vdCBiZSBhdmFpbGFibGUnLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfYiA9IHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygncmVjZWl2ZWQgYnJvYWRjYXN0IG5vdGlmaWNhdGlvbiBmcm9tIG90aGVyIHRhYiBvciBjbGllbnQnLCBldmVudCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fbm90aWZ5QWxsU3Vic2NyaWJlcnMoZXZlbnQuZGF0YS5ldmVudCwgZXZlbnQuZGF0YS5zZXNzaW9uLCBmYWxzZSk7IC8vIGJyb2FkY2FzdCA9IGZhbHNlIHNvIHdlIGRvbid0IGdldCBhbiBlbmRsZXNzIGxvb3Agb2YgbWVzc2FnZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICBfZGVidWcoLi4uYXJncykge1xuICAgICAgICBpZiAodGhpcy5sb2dEZWJ1Z01lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcihgR29UcnVlQ2xpZW50QCR7dGhpcy5pbnN0YW5jZUlEfSAoJHt2ZXJzaW9ufSkgJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCwgLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIHRoZSBjbGllbnQgc2Vzc2lvbiBlaXRoZXIgZnJvbSB0aGUgdXJsIG9yIGZyb20gc3RvcmFnZS5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIGluc3RhbnRpYXRpbmcgdGhlIGNsaWVudCwgYnV0IHNob3VsZCBhbHNvIGJlIGNhbGxlZFxuICAgICAqIG1hbnVhbGx5IHdoZW4gY2hlY2tpbmcgZm9yIGFuIGVycm9yIGZyb20gYW4gYXV0aCByZWRpcmVjdCAob2F1dGgsIG1hZ2ljbGluaywgcGFzc3dvcmQgcmVjb3ZlcnksIGV0YykuXG4gICAgICovXG4gICAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZVByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluaXRpYWxpemVQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2luaXRpYWxpemUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSU1QT1JUQU5UOlxuICAgICAqIDEuIE5ldmVyIHRocm93IGluIHRoaXMgbWV0aG9kLCBhcyBpdCBpcyBjYWxsZWQgZnJvbSB0aGUgY29uc3RydWN0b3JcbiAgICAgKiAyLiBOZXZlciByZXR1cm4gYSBzZXNzaW9uIGZyb20gdGhpcyBtZXRob2QgYXMgaXQgd291bGQgYmUgY2FjaGVkIG92ZXJcbiAgICAgKiAgICB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIGNsaWVudFxuICAgICAqL1xuICAgIGFzeW5jIF9pbml0aWFsaXplKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBwYXJzZVBhcmFtZXRlcnNGcm9tVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgICAgIGxldCBjYWxsYmFja1VybFR5cGUgPSAnbm9uZSc7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNJbXBsaWNpdEdyYW50Q2FsbGJhY2socGFyYW1zKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrVXJsVHlwZSA9ICdpbXBsaWNpdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhd2FpdCB0aGlzLl9pc1BLQ0VDYWxsYmFjayhwYXJhbXMpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tVcmxUeXBlID0gJ3BrY2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBdHRlbXB0IHRvIGdldCB0aGUgc2Vzc2lvbiBmcm9tIHRoZSBVUkwgb25seSBpZiB0aGVzZSBjb25kaXRpb25zIGFyZSBmdWxmaWxsZWRcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBOb3RlOiBJZiB0aGUgVVJMIGlzbid0IG9uZSBvZiB0aGUgY2FsbGJhY2sgdXJsIHR5cGVzIChpbXBsaWNpdCBvciBwa2NlKSxcbiAgICAgICAgICAgICAqIHRoZW4gdGhlcmUgY291bGQgYmUgYW4gZXhpc3Rpbmcgc2Vzc2lvbiBzbyB3ZSBkb24ndCB3YW50IHRvIHByZW1hdHVyZWx5IHJlbW92ZSBpdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyKCkgJiYgdGhpcy5kZXRlY3RTZXNzaW9uSW5VcmwgJiYgY2FsbGJhY2tVcmxUeXBlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLl9nZXRTZXNzaW9uRnJvbVVSTChwYXJhbXMsIGNhbGxiYWNrVXJsVHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2luaXRpYWxpemUoKScsICdlcnJvciBkZXRlY3Rpbmcgc2Vzc2lvbiBmcm9tIFVSTCcsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JDb2RlID0gKF9hID0gZXJyb3IuZGV0YWlscykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JDb2RlID09PSAnaWRlbnRpdHlfYWxyZWFkeV9leGlzdHMnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlID09PSAnaWRlbnRpdHlfbm90X2ZvdW5kJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9PT0gJ3NpbmdsZV9pZGVudGl0eV9ub3RfZGVsZXRhYmxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbGVkIGxvZ2luIGF0dGVtcHQgdmlhIHVybCxcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBzZXNzaW9uIGFzIGluIHZlcmlmeU90cCwgc2lnblVwIGFuZCBzaWduSW5XaXRoKlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9yZW1vdmVTZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbiwgcmVkaXJlY3RUeXBlIH0gPSBkYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2luaXRpYWxpemUoKScsICdkZXRlY3RlZCBzZXNzaW9uIGluIFVSTCcsIHNlc3Npb24sICdyZWRpcmVjdCB0eXBlJywgcmVkaXJlY3RUeXBlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zYXZlU2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0VHlwZSA9PT0gJ3JlY292ZXJ5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fbm90aWZ5QWxsU3Vic2NyaWJlcnMoJ1BBU1NXT1JEX1JFQ09WRVJZJywgc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9ub3RpZnlBbGxTdWJzY3JpYmVycygnU0lHTkVEX0lOJywgc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm8gbG9naW4gYXR0ZW1wdCB2aWEgY2FsbGJhY2sgdXJsIHRyeSB0byByZWNvdmVyIHNlc3Npb24gZnJvbSBzdG9yYWdlXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9yZWNvdmVyQW5kUmVmcmVzaCgpO1xuICAgICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlcnJvcjogbmV3IEF1dGhVbmtub3duRXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3IgZHVyaW5nIGluaXRpYWxpemF0aW9uJywgZXJyb3IpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2luaXRpYWxpemUoKScsICdlbmQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGFub255bW91cyB1c2VyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzZXNzaW9uIHdoZXJlIHRoZSBpc19hbm9ueW1vdXMgY2xhaW0gaW4gdGhlIGFjY2VzcyB0b2tlbiBKV1Qgc2V0IHRvIHRydWVcbiAgICAgKi9cbiAgICBhc3luYyBzaWduSW5Bbm9ueW1vdXNseShjcmVkZW50aWFscykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdQT1NUJywgYCR7dGhpcy51cmx9L3NpZ251cGAsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiAoX2IgPSAoX2EgPSBjcmVkZW50aWFscyA9PT0gbnVsbCB8fCBjcmVkZW50aWFscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3JlZGVudGlhbHMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRhdGEpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9LFxuICAgICAgICAgICAgICAgICAgICBnb3RydWVfbWV0YV9zZWN1cml0eTogeyBjYXB0Y2hhX3Rva2VuOiAoX2MgPSBjcmVkZW50aWFscyA9PT0gbnVsbCB8fCBjcmVkZW50aWFscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3JlZGVudGlhbHMub3B0aW9ucykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhcHRjaGFUb2tlbiB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeGZvcm06IF9zZXNzaW9uUmVzcG9uc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJlcztcbiAgICAgICAgICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LCBlcnJvcjogZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBkYXRhLnNlc3Npb247XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gZGF0YS51c2VyO1xuICAgICAgICAgICAgaWYgKGRhdGEuc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NhdmVTZXNzaW9uKGRhdGEuc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fbm90aWZ5QWxsU3Vic2NyaWJlcnMoJ1NJR05FRF9JTicsIHNlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyLCBzZXNzaW9uIH0sIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHVzZXIuXG4gICAgICpcbiAgICAgKiBCZSBhd2FyZSB0aGF0IGlmIGEgdXNlciBhY2NvdW50IGV4aXN0cyBpbiB0aGUgc3lzdGVtIHlvdSBtYXkgZ2V0IGJhY2sgYW5cbiAgICAgKiBlcnJvciBtZXNzYWdlIHRoYXQgYXR0ZW1wdHMgdG8gaGlkZSB0aGlzIGluZm9ybWF0aW9uIGZyb20gdGhlIHVzZXIuXG4gICAgICogVGhpcyBtZXRob2QgaGFzIHN1cHBvcnQgZm9yIFBLQ0UgdmlhIGVtYWlsIHNpZ251cHMuIFRoZSBQS0NFIGZsb3cgY2Fubm90IGJlIHVzZWQgd2hlbiBhdXRvY29uZmlybSBpcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBsb2dnZWQtaW4gc2Vzc2lvbiBpZiB0aGUgc2VydmVyIGhhcyBcImF1dG9jb25maXJtXCIgT05cbiAgICAgKiBAcmV0dXJucyBBIHVzZXIgaWYgdGhlIHNlcnZlciBoYXMgXCJhdXRvY29uZmlybVwiIE9GRlxuICAgICAqL1xuICAgIGFzeW5jIHNpZ25VcChjcmVkZW50aWFscykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCByZXM7XG4gICAgICAgICAgICBpZiAoJ2VtYWlsJyBpbiBjcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBvcHRpb25zIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgICAgICAgICBsZXQgY29kZUNoYWxsZW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbGV0IGNvZGVDaGFsbGVuZ2VNZXRob2QgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsb3dUeXBlID09PSAncGtjZScpIHtcbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBbY29kZUNoYWxsZW5nZSwgY29kZUNoYWxsZW5nZU1ldGhvZF0gPSBhd2FpdCBnZXRDb2RlQ2hhbGxlbmdlQW5kTWV0aG9kKHRoaXMuc3RvcmFnZSwgdGhpcy5zdG9yYWdlS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBgJHt0aGlzLnVybH0vc2lnbnVwYCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbFJlZGlyZWN0VG8sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGF0YSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RydWVfbWV0YV9zZWN1cml0eTogeyBjYXB0Y2hhX3Rva2VuOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FwdGNoYVRva2VuIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlX2NoYWxsZW5nZTogY29kZUNoYWxsZW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVfY2hhbGxlbmdlX21ldGhvZDogY29kZUNoYWxsZW5nZU1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeGZvcm06IF9zZXNzaW9uUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgncGhvbmUnIGluIGNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwaG9uZSwgcGFzc3dvcmQsIG9wdGlvbnMgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICAgICAgICAgIHJlcyA9IGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdQT1NUJywgYCR7dGhpcy51cmx9L3NpZ251cGAsIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRhdGEpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogKF9jID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNoYW5uZWwpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICdzbXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ290cnVlX21ldGFfc2VjdXJpdHk6IHsgY2FwdGNoYV90b2tlbjogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNhcHRjaGFUb2tlbiB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB4Zm9ybTogX3Nlc3Npb25SZXNwb25zZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoSW52YWxpZENyZWRlbnRpYWxzRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGFuIGVtYWlsIG9yIHBob25lIG51bWJlciBhbmQgYSBwYXNzd29yZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcmVzO1xuICAgICAgICAgICAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yOiBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGRhdGEuc2Vzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBkYXRhLnVzZXI7XG4gICAgICAgICAgICBpZiAoZGF0YS5zZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2F2ZVNlc3Npb24oZGF0YS5zZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9ub3RpZnlBbGxTdWJzY3JpYmVycygnU0lHTkVEX0lOJywgc2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXIsIHNlc3Npb24gfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZyBpbiBhbiBleGlzdGluZyB1c2VyIHdpdGggYW4gZW1haWwgYW5kIHBhc3N3b3JkIG9yIHBob25lIGFuZCBwYXNzd29yZC5cbiAgICAgKlxuICAgICAqIEJlIGF3YXJlIHRoYXQgeW91IG1heSBnZXQgYmFjayBhbiBlcnJvciBtZXNzYWdlIHRoYXQgd2lsbCBub3QgZGlzdGluZ3Vpc2hcbiAgICAgKiBiZXR3ZWVuIHRoZSBjYXNlcyB3aGVyZSB0aGUgYWNjb3VudCBkb2VzIG5vdCBleGlzdCBvciB0aGF0IHRoZVxuICAgICAqIGVtYWlsL3Bob25lIGFuZCBwYXNzd29yZCBjb21iaW5hdGlvbiBpcyB3cm9uZyBvciB0aGF0IHRoZSBhY2NvdW50IGNhbiBvbmx5XG4gICAgICogYmUgYWNjZXNzZWQgdmlhIHNvY2lhbCBsb2dpbi5cbiAgICAgKi9cbiAgICBhc3luYyBzaWduSW5XaXRoUGFzc3dvcmQoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCByZXM7XG4gICAgICAgICAgICBpZiAoJ2VtYWlsJyBpbiBjcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBvcHRpb25zIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS90b2tlbj9ncmFudF90eXBlPXBhc3N3b3JkYCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RydWVfbWV0YV9zZWN1cml0eTogeyBjYXB0Y2hhX3Rva2VuOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FwdGNoYVRva2VuIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHhmb3JtOiBfc2Vzc2lvblJlc3BvbnNlUGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgncGhvbmUnIGluIGNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwaG9uZSwgcGFzc3dvcmQsIG9wdGlvbnMgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICAgICAgICAgIHJlcyA9IGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdQT1NUJywgYCR7dGhpcy51cmx9L3Rva2VuP2dyYW50X3R5cGU9cGFzc3dvcmRgLCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvdHJ1ZV9tZXRhX3NlY3VyaXR5OiB7IGNhcHRjaGFfdG9rZW46IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jYXB0Y2hhVG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeGZvcm06IF9zZXNzaW9uUmVzcG9uc2VQYXNzd29yZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoSW52YWxpZENyZWRlbnRpYWxzRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGFuIGVtYWlsIG9yIHBob25lIG51bWJlciBhbmQgYSBwYXNzd29yZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcmVzO1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZGF0YSB8fCAhZGF0YS5zZXNzaW9uIHx8ICFkYXRhLnVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3I6IG5ldyBBdXRoSW52YWxpZFRva2VuUmVzcG9uc2VFcnJvcigpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS5zZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2F2ZVNlc3Npb24oZGF0YS5zZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9ub3RpZnlBbGxTdWJzY3JpYmVycygnU0lHTkVEX0lOJywgZGF0YS5zZXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih7IHVzZXI6IGRhdGEudXNlciwgc2Vzc2lvbjogZGF0YS5zZXNzaW9uIH0sIChkYXRhLndlYWtfcGFzc3dvcmQgPyB7IHdlYWtQYXNzd29yZDogZGF0YS53ZWFrX3Bhc3N3b3JkIH0gOiBudWxsKSksXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9nIGluIGFuIGV4aXN0aW5nIHVzZXIgdmlhIGEgdGhpcmQtcGFydHkgcHJvdmlkZXIuXG4gICAgICogVGhpcyBtZXRob2Qgc3VwcG9ydHMgdGhlIFBLQ0UgZmxvdy5cbiAgICAgKi9cbiAgICBhc3luYyBzaWduSW5XaXRoT0F1dGgoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5faGFuZGxlUHJvdmlkZXJTaWduSW4oY3JlZGVudGlhbHMucHJvdmlkZXIsIHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86IChfYSA9IGNyZWRlbnRpYWxzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZWRpcmVjdFRvLFxuICAgICAgICAgICAgc2NvcGVzOiAoX2IgPSBjcmVkZW50aWFscy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc2NvcGVzLFxuICAgICAgICAgICAgcXVlcnlQYXJhbXM6IChfYyA9IGNyZWRlbnRpYWxzLm9wdGlvbnMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5xdWVyeVBhcmFtcyxcbiAgICAgICAgICAgIHNraXBCcm93c2VyUmVkaXJlY3Q6IChfZCA9IGNyZWRlbnRpYWxzLm9wdGlvbnMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5za2lwQnJvd3NlclJlZGlyZWN0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9nIGluIGFuIGV4aXN0aW5nIHVzZXIgYnkgZXhjaGFuZ2luZyBhbiBBdXRoIENvZGUgaXNzdWVkIGR1cmluZyB0aGUgUEtDRSBmbG93LlxuICAgICAqL1xuICAgIGFzeW5jIGV4Y2hhbmdlQ29kZUZvclNlc3Npb24oYXV0aENvZGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhjaGFuZ2VDb2RlRm9yU2Vzc2lvbihhdXRoQ29kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfZXhjaGFuZ2VDb2RlRm9yU2Vzc2lvbihhdXRoQ29kZSkge1xuICAgICAgICBjb25zdCBzdG9yYWdlSXRlbSA9IGF3YWl0IGdldEl0ZW1Bc3luYyh0aGlzLnN0b3JhZ2UsIGAke3RoaXMuc3RvcmFnZUtleX0tY29kZS12ZXJpZmllcmApO1xuICAgICAgICBjb25zdCBbY29kZVZlcmlmaWVyLCByZWRpcmVjdFR5cGVdID0gKHN0b3JhZ2VJdGVtICE9PSBudWxsICYmIHN0b3JhZ2VJdGVtICE9PSB2b2lkIDAgPyBzdG9yYWdlSXRlbSA6ICcnKS5zcGxpdCgnLycpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBgJHt0aGlzLnVybH0vdG9rZW4/Z3JhbnRfdHlwZT1wa2NlYCwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgIGF1dGhfY29kZTogYXV0aENvZGUsXG4gICAgICAgICAgICAgICAgICAgIGNvZGVfdmVyaWZpZXI6IGNvZGVWZXJpZmllcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHhmb3JtOiBfc2Vzc2lvblJlc3BvbnNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCByZW1vdmVJdGVtQXN5bmModGhpcy5zdG9yYWdlLCBgJHt0aGlzLnN0b3JhZ2VLZXl9LWNvZGUtdmVyaWZpZXJgKTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnNlc3Npb24gfHwgIWRhdGEudXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCwgcmVkaXJlY3RUeXBlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgQXV0aEludmFsaWRUb2tlblJlc3BvbnNlRXJyb3IoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NhdmVTZXNzaW9uKGRhdGEuc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fbm90aWZ5QWxsU3Vic2NyaWJlcnMoJ1NJR05FRF9JTicsIGRhdGEuc2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRhdGEpLCB7IHJlZGlyZWN0VHlwZTogcmVkaXJlY3RUeXBlICE9PSBudWxsICYmIHJlZGlyZWN0VHlwZSAhPT0gdm9pZCAwID8gcmVkaXJlY3RUeXBlIDogbnVsbCB9KSwgZXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwsIHJlZGlyZWN0VHlwZTogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHNpZ25pbmcgaW4gd2l0aCBhbiBPSURDIElEIHRva2VuLiBUaGUgYXV0aGVudGljYXRpb24gcHJvdmlkZXIgdXNlZFxuICAgICAqIHNob3VsZCBiZSBlbmFibGVkIGFuZCBjb25maWd1cmVkLlxuICAgICAqL1xuICAgIGFzeW5jIHNpZ25JbldpdGhJZFRva2VuKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IG9wdGlvbnMsIHByb3ZpZGVyLCB0b2tlbiwgYWNjZXNzX3Rva2VuLCBub25jZSB9ID0gY3JlZGVudGlhbHM7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS90b2tlbj9ncmFudF90eXBlPWlkX3Rva2VuYCwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICBpZF90b2tlbjogdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICAgICAgICAgIGdvdHJ1ZV9tZXRhX3NlY3VyaXR5OiB7IGNhcHRjaGFfdG9rZW46IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jYXB0Y2hhVG9rZW4gfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHhmb3JtOiBfc2Vzc2lvblJlc3BvbnNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSByZXM7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFkYXRhIHx8ICFkYXRhLnNlc3Npb24gfHwgIWRhdGEudXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IEF1dGhJbnZhbGlkVG9rZW5SZXNwb25zZUVycm9yKCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zYXZlU2Vzc2lvbihkYXRhLnNlc3Npb24pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX25vdGlmeUFsbFN1YnNjcmliZXJzKCdTSUdORURfSU4nLCBkYXRhLnNlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZyBpbiBhIHVzZXIgdXNpbmcgbWFnaWNsaW5rIG9yIGEgb25lLXRpbWUgcGFzc3dvcmQgKE9UUCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYHt7IC5Db25maXJtYXRpb25VUkwgfX1gIHZhcmlhYmxlIGlzIHNwZWNpZmllZCBpbiB0aGUgZW1haWwgdGVtcGxhdGUsIGEgbWFnaWNsaW5rIHdpbGwgYmUgc2VudC5cbiAgICAgKiBJZiB0aGUgYHt7IC5Ub2tlbiB9fWAgdmFyaWFibGUgaXMgc3BlY2lmaWVkIGluIHRoZSBlbWFpbCB0ZW1wbGF0ZSwgYW4gT1RQIHdpbGwgYmUgc2VudC5cbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgcGhvbmUgc2lnbi1pbnMsIG9ubHkgYW4gT1RQIHdpbGwgYmUgc2VudC4gWW91IHdvbid0IGJlIGFibGUgdG8gc2VuZCBhIG1hZ2ljbGluayBmb3IgcGhvbmUgc2lnbi1pbnMuXG4gICAgICpcbiAgICAgKiBCZSBhd2FyZSB0aGF0IHlvdSBtYXkgZ2V0IGJhY2sgYW4gZXJyb3IgbWVzc2FnZSB0aGF0IHdpbGwgbm90IGRpc3Rpbmd1aXNoXG4gICAgICogYmV0d2VlbiB0aGUgY2FzZXMgd2hlcmUgdGhlIGFjY291bnQgZG9lcyBub3QgZXhpc3Qgb3IsIHRoYXQgdGhlIGFjY291bnRcbiAgICAgKiBjYW4gb25seSBiZSBhY2Nlc3NlZCB2aWEgc29jaWFsIGxvZ2luLlxuICAgICAqXG4gICAgICogRG8gbm90ZSB0aGF0IHlvdSB3aWxsIG5lZWQgdG8gY29uZmlndXJlIGEgV2hhdHNhcHAgc2VuZGVyIG9uIFR3aWxpb1xuICAgICAqIGlmIHlvdSBhcmUgdXNpbmcgcGhvbmUgc2lnbiBpbiB3aXRoIHRoZSAnd2hhdHNhcHAnIGNoYW5uZWwuIFRoZSB3aGF0c2FwcFxuICAgICAqIGNoYW5uZWwgaXMgbm90IHN1cHBvcnRlZCBvbiBvdGhlciBwcm92aWRlcnNcbiAgICAgKiBhdCB0aGlzIHRpbWUuXG4gICAgICogVGhpcyBtZXRob2Qgc3VwcG9ydHMgUEtDRSB3aGVuIGFuIGVtYWlsIGlzIHBhc3NlZC5cbiAgICAgKi9cbiAgICBhc3luYyBzaWduSW5XaXRoT3RwKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoJ2VtYWlsJyBpbiBjcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZW1haWwsIG9wdGlvbnMgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICAgICAgICAgIGxldCBjb2RlQ2hhbGxlbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBsZXQgY29kZUNoYWxsZW5nZU1ldGhvZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmxvd1R5cGUgPT09ICdwa2NlJykge1xuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIFtjb2RlQ2hhbGxlbmdlLCBjb2RlQ2hhbGxlbmdlTWV0aG9kXSA9IGF3YWl0IGdldENvZGVDaGFsbGVuZ2VBbmRNZXRob2QodGhpcy5zdG9yYWdlLCB0aGlzLnN0b3JhZ2VLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS9vdHBgLCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGF0YSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfdXNlcjogKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNob3VsZENyZWF0ZVVzZXIpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RydWVfbWV0YV9zZWN1cml0eTogeyBjYXB0Y2hhX3Rva2VuOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY2FwdGNoYVRva2VuIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlX2NoYWxsZW5nZTogY29kZUNoYWxsZW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVfY2hhbGxlbmdlX21ldGhvZDogY29kZUNoYWxsZW5nZU1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsUmVkaXJlY3RUbyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgncGhvbmUnIGluIGNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwaG9uZSwgb3B0aW9ucyB9ID0gY3JlZGVudGlhbHM7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBgJHt0aGlzLnVybH0vb3RwYCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogKF9jID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRhdGEpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3VzZXI6IChfZCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zaG91bGRDcmVhdGVVc2VyKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ290cnVlX21ldGFfc2VjdXJpdHk6IHsgY2FwdGNoYV90b2tlbjogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNhcHRjaGFUb2tlbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogKF9lID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNoYW5uZWwpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6ICdzbXMnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCwgbWVzc2FnZUlkOiBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEubWVzc2FnZV9pZCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhJbnZhbGlkQ3JlZGVudGlhbHNFcnJvcignWW91IG11c3QgcHJvdmlkZSBlaXRoZXIgYW4gZW1haWwgb3IgcGhvbmUgbnVtYmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9nIGluIGEgdXNlciBnaXZlbiBhIFVzZXIgc3VwcGxpZWQgT1RQIG9yIFRva2VuSGFzaCByZWNlaXZlZCB0aHJvdWdoIG1vYmlsZSBvciBlbWFpbC5cbiAgICAgKi9cbiAgICBhc3luYyB2ZXJpZnlPdHAocGFyYW1zKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVkaXJlY3RUbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGxldCBjYXB0Y2hhVG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoJ29wdGlvbnMnIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG8gPSAoX2EgPSBwYXJhbXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlZGlyZWN0VG87XG4gICAgICAgICAgICAgICAgY2FwdGNoYVRva2VuID0gKF9iID0gcGFyYW1zLm9wdGlvbnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYXB0Y2hhVG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS92ZXJpZnlgLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBnb3RydWVfbWV0YV9zZWN1cml0eTogeyBjYXB0Y2hhX3Rva2VuOiBjYXB0Y2hhVG9rZW4gfSB9KSxcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvLFxuICAgICAgICAgICAgICAgIHhmb3JtOiBfc2Vzc2lvblJlc3BvbnNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQW4gZXJyb3Igb2NjdXJyZWQgb24gdG9rZW4gdmVyaWZpY2F0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGRhdGEuc2Vzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBkYXRhLnVzZXI7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiA9PT0gbnVsbCB8fCBzZXNzaW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXNzaW9uLmFjY2Vzc190b2tlbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NhdmVTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX25vdGlmeUFsbFN1YnNjcmliZXJzKHBhcmFtcy50eXBlID09ICdyZWNvdmVyeScgPyAnUEFTU1dPUkRfUkVDT1ZFUlknIDogJ1NJR05FRF9JTicsIHNlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyLCBzZXNzaW9uIH0sIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0cyBhIHNpbmdsZS1zaWduIG9uIHVzaW5nIGFuIGVudGVycHJpc2UgSWRlbnRpdHkgUHJvdmlkZXIuIEFcbiAgICAgKiBzdWNjZXNzZnVsIFNTTyBhdHRlbXB0IHdpbGwgcmVkaXJlY3QgdGhlIGN1cnJlbnQgcGFnZSB0byB0aGUgaWRlbnRpdHlcbiAgICAgKiBwcm92aWRlciBhdXRob3JpemF0aW9uIHBhZ2UuIFRoZSByZWRpcmVjdCBVUkwgaXMgaW1wbGVtZW50YXRpb24gYW5kIFNTT1xuICAgICAqIHByb3RvY29sIHNwZWNpZmljLlxuICAgICAqXG4gICAgICogWW91IGNhbiB1c2UgaXQgYnkgcHJvdmlkaW5nIGEgU1NPIGRvbWFpbi4gVHlwaWNhbGx5IHlvdSBjYW4gZXh0cmFjdCB0aGlzXG4gICAgICogZG9tYWluIGJ5IGFza2luZyB1c2VycyBmb3IgdGhlaXIgZW1haWwgYWRkcmVzcy4gSWYgdGhpcyBkb21haW4gaXNcbiAgICAgKiByZWdpc3RlcmVkIG9uIHRoZSBBdXRoIGluc3RhbmNlIHRoZSByZWRpcmVjdCB3aWxsIHVzZSB0aGF0IG9yZ2FuaXphdGlvbidzXG4gICAgICogY3VycmVudGx5IGFjdGl2ZSBTU08gSWRlbnRpdHkgUHJvdmlkZXIgZm9yIHRoZSBsb2dpbi5cbiAgICAgKlxuICAgICAqIElmIHlvdSBoYXZlIGJ1aWx0IGFuIG9yZ2FuaXphdGlvbi1zcGVjaWZpYyBsb2dpbiBwYWdlLCB5b3UgY2FuIHVzZSB0aGVcbiAgICAgKiBvcmdhbml6YXRpb24ncyBTU08gSWRlbnRpdHkgUHJvdmlkZXIgVVVJRCBkaXJlY3RseSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGFzeW5jIHNpZ25JbldpdGhTU08ocGFyYW1zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGNvZGVDaGFsbGVuZ2UgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGNvZGVDaGFsbGVuZ2VNZXRob2QgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmxvd1R5cGUgPT09ICdwa2NlJykge1xuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBbY29kZUNoYWxsZW5nZSwgY29kZUNoYWxsZW5nZU1ldGhvZF0gPSBhd2FpdCBnZXRDb2RlQ2hhbGxlbmdlQW5kTWV0aG9kKHRoaXMuc3RvcmFnZSwgdGhpcy5zdG9yYWdlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS9zc29gLCB7XG4gICAgICAgICAgICAgICAgYm9keTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAoJ3Byb3ZpZGVySWQnIGluIHBhcmFtcyA/IHsgcHJvdmlkZXJfaWQ6IHBhcmFtcy5wcm92aWRlcklkIH0gOiBudWxsKSksICgnZG9tYWluJyBpbiBwYXJhbXMgPyB7IGRvbWFpbjogcGFyYW1zLmRvbWFpbiB9IDogbnVsbCkpLCB7IHJlZGlyZWN0X3RvOiAoX2IgPSAoX2EgPSBwYXJhbXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlZGlyZWN0VG8pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZCB9KSwgKCgoX2MgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMub3B0aW9ucykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhcHRjaGFUb2tlbilcbiAgICAgICAgICAgICAgICAgICAgPyB7IGdvdHJ1ZV9tZXRhX3NlY3VyaXR5OiB7IGNhcHRjaGFfdG9rZW46IHBhcmFtcy5vcHRpb25zLmNhcHRjaGFUb2tlbiB9IH1cbiAgICAgICAgICAgICAgICAgICAgOiBudWxsKSksIHsgc2tpcF9odHRwX3JlZGlyZWN0OiB0cnVlLCBjb2RlX2NoYWxsZW5nZTogY29kZUNoYWxsZW5nZSwgY29kZV9jaGFsbGVuZ2VfbWV0aG9kOiBjb2RlQ2hhbGxlbmdlTWV0aG9kIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICB4Zm9ybTogX3Nzb1Jlc3BvbnNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgcmVhdXRoZW50aWNhdGlvbiBPVFAgdG8gdGhlIHVzZXIncyBlbWFpbCBvciBwaG9uZSBudW1iZXIuXG4gICAgICogUmVxdWlyZXMgdGhlIHVzZXIgdG8gYmUgc2lnbmVkLWluLlxuICAgICAqL1xuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQcm9taXNlO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fYWNxdWlyZUxvY2soLTEsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWF1dGhlbnRpY2F0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX3JlYXV0aGVudGljYXRlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0sIGVycm9yOiBzZXNzaW9uRXJyb3IsIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25FcnJvcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2Vzc2lvbkVycm9yO1xuICAgICAgICAgICAgICAgIGlmICghc2Vzc2lvbilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhTZXNzaW9uTWlzc2luZ0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ0dFVCcsIGAke3RoaXMudXJsfS9yZWF1dGhlbnRpY2F0ZWAsIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBqd3Q6IHNlc3Npb24uYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNlbmRzIGFuIGV4aXN0aW5nIHNpZ251cCBjb25maXJtYXRpb24gZW1haWwsIGVtYWlsIGNoYW5nZSBlbWFpbCwgU01TIE9UUCBvciBwaG9uZSBjaGFuZ2UgT1RQLlxuICAgICAqL1xuICAgIGFzeW5jIHJlc2VuZChjcmVkZW50aWFscykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLnVybH0vcmVzZW5kYDtcbiAgICAgICAgICAgIGlmICgnZW1haWwnIGluIGNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlbWFpbCwgdHlwZSwgb3B0aW9ucyB9ID0gY3JlZGVudGlhbHM7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBlbmRwb2ludCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvdHJ1ZV9tZXRhX3NlY3VyaXR5OiB7IGNhcHRjaGFfdG9rZW46IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jYXB0Y2hhVG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsUmVkaXJlY3RUbyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdwaG9uZScgaW4gY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBob25lLCB0eXBlLCBvcHRpb25zIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGVuZHBvaW50LCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ290cnVlX21ldGFfc2VjdXJpdHk6IHsgY2FwdGNoYV90b2tlbjogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNhcHRjaGFUb2tlbiB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCwgbWVzc2FnZUlkOiBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEubWVzc2FnZV9pZCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhJbnZhbGlkQ3JlZGVudGlhbHNFcnJvcignWW91IG11c3QgcHJvdmlkZSBlaXRoZXIgYW4gZW1haWwgb3IgcGhvbmUgbnVtYmVyIGFuZCBhIHR5cGUnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNlc3Npb24sIHJlZnJlc2hpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqXG4gICAgICogVGhlIHNlc3Npb24gcmV0dXJuZWQgY2FuIGJlIG51bGwgaWYgdGhlIHNlc3Npb24gaXMgbm90IGRldGVjdGVkIHdoaWNoIGNhbiBoYXBwZW4gaW4gdGhlIGV2ZW50IGEgdXNlciBpcyBub3Qgc2lnbmVkLWluIG9yIGhhcyBsb2dnZWQgb3V0LlxuICAgICAqXG4gICAgICogKipJTVBPUlRBTlQ6KiogVGhpcyBtZXRob2QgbG9hZHMgdmFsdWVzIGRpcmVjdGx5IGZyb20gdGhlIHN0b3JhZ2UgYXR0YWNoZWRcbiAgICAgKiB0byB0aGUgY2xpZW50LiBJZiB0aGF0IHN0b3JhZ2UgaXMgYmFzZWQgb24gcmVxdWVzdCBjb29raWVzIGZvciBleGFtcGxlLFxuICAgICAqIHRoZSB2YWx1ZXMgaW4gaXQgbWF5IG5vdCBiZSBhdXRoZW50aWMgYW5kIHRoZXJlZm9yZSBpdCdzIHN0cm9uZ2x5IGFkdmlzZWRcbiAgICAgKiBhZ2FpbnN0IHVzaW5nIHRoaXMgbWV0aG9kIGFuZCBpdHMgcmVzdWx0cyBpbiBzdWNoIGNpcmN1bXN0YW5jZXMuIEEgd2FybmluZ1xuICAgICAqIHdpbGwgYmUgZW1pdHRlZCBpZiB0aGlzIGlzIGRldGVjdGVkLiBVc2Uge0BsaW5rICNnZXRVc2VyKCl9IGluc3RlYWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUHJvbWlzZTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fYWNxdWlyZUxvY2soLTEsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3F1aXJlcyBhIGdsb2JhbCBsb2NrIGJhc2VkIG9uIHRoZSBzdG9yYWdlIGtleS5cbiAgICAgKi9cbiAgICBhc3luYyBfYWNxdWlyZUxvY2soYWNxdWlyZVRpbWVvdXQsIGZuKSB7XG4gICAgICAgIHRoaXMuX2RlYnVnKCcjX2FjcXVpcmVMb2NrJywgJ2JlZ2luJywgYWNxdWlyZVRpbWVvdXQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMubG9ja0FjcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMucGVuZGluZ0luTG9jay5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBlbmRpbmdJbkxvY2tbdGhpcy5wZW5kaW5nSW5Mb2NrLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGFzdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdJbkxvY2sucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBqdXN0IGNhcmUgaWYgaXQgZmluaXNoZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sb2NrKGBsb2NrOiR7dGhpcy5zdG9yYWdlS2V5fWAsIGFjcXVpcmVUaW1lb3V0LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJyNfYWNxdWlyZUxvY2snLCAnbG9jayBhY3F1aXJlZCBmb3Igc3RvcmFnZSBrZXknLCB0aGlzLnN0b3JhZ2VLZXkpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9ja0FjcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZm4oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nSW5Mb2NrLnB1c2goKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBqdXN0IGNhcmUgaWYgaXQgZmluaXNoZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkoKSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCBkcmFpbmluZyB0aGUgcXVldWUgdW50aWwgdGhlcmUncyBub3RoaW5nIHRvIHdhaXQgb25cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMucGVuZGluZ0luTG9jay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhaXRPbiA9IFsuLi50aGlzLnBlbmRpbmdJbkxvY2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwod2FpdE9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0luTG9jay5zcGxpY2UoMCwgd2FpdE9uLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2FjcXVpcmVMb2NrJywgJ2xvY2sgcmVsZWFzZWQgZm9yIHN0b3JhZ2Uga2V5JywgdGhpcy5zdG9yYWdlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NrQWNxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2FjcXVpcmVMb2NrJywgJ2VuZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZSBpbnN0ZWFkIG9mIHtAbGluayAjZ2V0U2Vzc2lvbn0gaW5zaWRlIHRoZSBsaWJyYXJ5LiBJdCBpc1xuICAgICAqIHNlbWFudGljYWxseSB1c3VhbGx5IHdoYXQgeW91IHdhbnQsIGFzIGdldHRpbmcgYSBzZXNzaW9uIGludm9sdmVzIHNvbWVcbiAgICAgKiBwcm9jZXNzaW5nIGFmdGVyd2FyZHMgdGhhdCByZXF1aXJlcyBvbmx5IG9uZSBjbGllbnQgb3BlcmF0aW5nIG9uIHRoZVxuICAgICAqIHNlc3Npb24gYXQgb25jZSBhY3Jvc3MgbXVsdGlwbGUgdGFicyBvciBwcm9jZXNzZXMuXG4gICAgICovXG4gICAgYXN5bmMgX3VzZVNlc3Npb24oZm4pIHtcbiAgICAgICAgdGhpcy5fZGVidWcoJyNfdXNlU2Vzc2lvbicsICdiZWdpbicpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gdGhlIHVzZSBvZiBfX2xvYWRTZXNzaW9uIGhlcmUgaXMgdGhlIG9ubHkgY29ycmVjdCB1c2Ugb2YgdGhlIGZ1bmN0aW9uIVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fX2xvYWRTZXNzaW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4ocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX3VzZVNlc3Npb24nLCAnZW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTkVWRVIgVVNFIERJUkVDVExZIVxuICAgICAqXG4gICAgICogQWx3YXlzIHVzZSB7QGxpbmsgI191c2VTZXNzaW9ufS5cbiAgICAgKi9cbiAgICBhc3luYyBfX2xvYWRTZXNzaW9uKCkge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnI19fbG9hZFNlc3Npb24oKScsICdiZWdpbicpO1xuICAgICAgICBpZiAoIXRoaXMubG9ja0FjcXVpcmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZygnI19fbG9hZFNlc3Npb24oKScsICd1c2VkIG91dHNpZGUgb2YgYW4gYWNxdWlyZWQgbG9jayEnLCBuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50U2Vzc2lvbiA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCBtYXliZVNlc3Npb24gPSBhd2FpdCBnZXRJdGVtQXN5bmModGhpcy5zdG9yYWdlLCB0aGlzLnN0b3JhZ2VLZXkpO1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJyNnZXRTZXNzaW9uKCknLCAnc2Vzc2lvbiBmcm9tIHN0b3JhZ2UnLCBtYXliZVNlc3Npb24pO1xuICAgICAgICAgICAgaWYgKG1heWJlU2Vzc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1ZhbGlkU2Vzc2lvbihtYXliZVNlc3Npb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZXNzaW9uID0gbWF5YmVTZXNzaW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJyNnZXRTZXNzaW9uKCknLCAnc2Vzc2lvbiBmcm9tIHN0b3JhZ2UgaXMgbm90IHZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3JlbW92ZVNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRTZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBIHNlc3Npb24gaXMgY29uc2lkZXJlZCBleHBpcmVkIGJlZm9yZSB0aGUgYWNjZXNzIHRva2VuIF9hY3R1YWxseV9cbiAgICAgICAgICAgIC8vIGV4cGlyZXMuIFdoZW4gdGhlIGF1dG9SZWZyZXNoVG9rZW4gb3B0aW9uIGlzIG9mZiAob3Igd2hlbiB0aGUgdGFiIGlzXG4gICAgICAgICAgICAvLyBpbiB0aGUgYmFja2dyb3VuZCksIHZlcnkgZWFnZXIgdXNlcnMgb2YgZ2V0U2Vzc2lvbigpIC0tIGxpa2VcbiAgICAgICAgICAgIC8vIHJlYWx0aW1lLWpzIC0tIG1pZ2h0IHNlbmQgYSB2YWxpZCBKV1Qgd2hpY2ggd2lsbCBleHBpcmUgYnkgdGhlIHRpbWUgaXRcbiAgICAgICAgICAgIC8vIHJlYWNoZXMgdGhlIHNlcnZlci5cbiAgICAgICAgICAgIGNvbnN0IGhhc0V4cGlyZWQgPSBjdXJyZW50U2Vzc2lvbi5leHBpcmVzX2F0XG4gICAgICAgICAgICAgICAgPyBjdXJyZW50U2Vzc2lvbi5leHBpcmVzX2F0ICogMTAwMCAtIERhdGUubm93KCkgPCBFWFBJUllfTUFSR0lOX01TXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX19sb2FkU2Vzc2lvbigpJywgYHNlc3Npb24gaGFzJHtoYXNFeHBpcmVkID8gJycgOiAnIG5vdCd9IGV4cGlyZWRgLCAnZXhwaXJlc19hdCcsIGN1cnJlbnRTZXNzaW9uLmV4cGlyZXNfYXQpO1xuICAgICAgICAgICAgaWYgKCFoYXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RvcmFnZS5pc1NlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3VwcHJlc3NXYXJuaW5nID0gdGhpcy5zdXBwcmVzc0dldFNlc3Npb25XYXJuaW5nO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm94eVNlc3Npb24gPSBuZXcgUHJveHkoY3VycmVudFNlc3Npb24sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1cHByZXNzV2FybmluZyAmJiBwcm9wID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBzaG93IHdhcm5pbmcgd2hlbiB0aGUgdXNlciBvYmplY3QgaXMgYmVpbmcgYWNjZXNzZWQgZnJvbSB0aGUgc2VydmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVXNpbmcgdGhlIHVzZXIgb2JqZWN0IGFzIHJldHVybmVkIGZyb20gc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCkgb3IgZnJvbSBzb21lIHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoKSBldmVudHMgY291bGQgYmUgaW5zZWN1cmUhIFRoaXMgdmFsdWUgY29tZXMgZGlyZWN0bHkgZnJvbSB0aGUgc3RvcmFnZSBtZWRpdW0gKHVzdWFsbHkgY29va2llcyBvbiB0aGUgc2VydmVyKSBhbmQgbWF5IG5vdCBiZSBhdXRoZW50aWMuIFVzZSBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKSBpbnN0ZWFkIHdoaWNoIGF1dGhlbnRpY2F0ZXMgdGhlIGRhdGEgYnkgY29udGFjdGluZyB0aGUgU3VwYWJhc2UgQXV0aCBzZXJ2ZXIuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHByZXNzV2FybmluZyA9IHRydWU7IC8vIGtlZXBzIHRoaXMgcHJveHkgaW5zdGFuY2UgZnJvbSBsb2dnaW5nIGFkZGl0aW9uYWwgd2FybmluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXBwcmVzc0dldFNlc3Npb25XYXJuaW5nID0gdHJ1ZTsgLy8ga2VlcHMgdGhpcyBjbGllbnQncyBmdXR1cmUgcHJveHkgaW5zdGFuY2VzIGZyb20gd2FybmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlc3Npb24gPSBwcm94eVNlc3Npb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgc2Vzc2lvbjogY3VycmVudFNlc3Npb24gfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbiwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuX2NhbGxSZWZyZXNoVG9rZW4oY3VycmVudFNlc3Npb24ucmVmcmVzaF90b2tlbik7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHNlc3Npb246IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogbnVsbCB9O1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoJyNfX2xvYWRTZXNzaW9uKCknLCAnZW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY3VycmVudCB1c2VyIGRldGFpbHMgaWYgdGhlcmUgaXMgYW4gZXhpc3Rpbmcgc2Vzc2lvbi4gVGhpcyBtZXRob2RcbiAgICAgKiBwZXJmb3JtcyBhIG5ldHdvcmsgcmVxdWVzdCB0byB0aGUgU3VwYWJhc2UgQXV0aCBzZXJ2ZXIsIHNvIHRoZSByZXR1cm5lZFxuICAgICAqIHZhbHVlIGlzIGF1dGhlbnRpYyBhbmQgY2FuIGJlIHVzZWQgdG8gYmFzZSBhdXRob3JpemF0aW9uIHJ1bGVzIG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGp3dCBUYWtlcyBpbiBhbiBvcHRpb25hbCBhY2Nlc3MgdG9rZW4gSldULiBJZiBubyBKV1QgaXMgcHJvdmlkZWQsIHRoZSBKV1QgZnJvbSB0aGUgY3VycmVudCBzZXNzaW9uIGlzIHVzZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VXNlcihqd3QpIHtcbiAgICAgICAgaWYgKGp3dCkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2dldFVzZXIoand0KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQcm9taXNlO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9hY3F1aXJlTG9jaygtMSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2dldFVzZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIF9nZXRVc2VyKGp3dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGp3dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnR0VUJywgYCR7dGhpcy51cmx9L3VzZXJgLCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgand0OiBqd3QsXG4gICAgICAgICAgICAgICAgICAgIHhmb3JtOiBfdXNlclJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJldHVybnMgYW4gZXJyb3IgaWYgdGhlcmUgaXMgbm8gYWNjZXNzX3Rva2VuIG9yIGN1c3RvbSBhdXRob3JpemF0aW9uIGhlYWRlclxuICAgICAgICAgICAgICAgIGlmICghKChfYSA9IGRhdGEuc2Vzc2lvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY2Vzc190b2tlbikgJiYgIXRoaXMuaGFzQ3VzdG9tQXV0aG9yaXphdGlvbkhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwgfSwgZXJyb3I6IG5ldyBBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvcigpIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnR0VUJywgYCR7dGhpcy51cmx9L3VzZXJgLCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgand0OiAoX2MgPSAoX2IgPSBkYXRhLnNlc3Npb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5hY2Nlc3NfdG9rZW4pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgeGZvcm06IF91c2VyUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSldUIGNvbnRhaW5zIGEgYHNlc3Npb25faWRgIHdoaWNoIGRvZXMgbm90IGNvcnJlc3BvbmQgdG8gYW4gYWN0aXZlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlc3Npb24gaW4gdGhlIGRhdGFiYXNlLCBpbmRpY2F0aW5nIHRoZSB1c2VyIGlzIHNpZ25lZCBvdXQuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3JlbW92ZVNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVtb3ZlSXRlbUFzeW5jKHRoaXMuc3RvcmFnZSwgYCR7dGhpcy5zdG9yYWdlS2V5fS1jb2RlLXZlcmlmaWVyYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB1c2VyIGRhdGEgZm9yIGEgbG9nZ2VkIGluIHVzZXIuXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlVXNlcihhdHRyaWJ1dGVzLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fdXBkYXRlVXNlcihhdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIF91cGRhdGVVc2VyKGF0dHJpYnV0ZXMsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvbkRhdGEsIGVycm9yOiBzZXNzaW9uRXJyb3IgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHNlc3Npb25FcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uRGF0YS5zZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvbkRhdGEuc2Vzc2lvbjtcbiAgICAgICAgICAgICAgICBsZXQgY29kZUNoYWxsZW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbGV0IGNvZGVDaGFsbGVuZ2VNZXRob2QgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsb3dUeXBlID09PSAncGtjZScgJiYgYXR0cmlidXRlcy5lbWFpbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgW2NvZGVDaGFsbGVuZ2UsIGNvZGVDaGFsbGVuZ2VNZXRob2RdID0gYXdhaXQgZ2V0Q29kZUNoYWxsZW5nZUFuZE1ldGhvZCh0aGlzLnN0b3JhZ2UsIHRoaXMuc3RvcmFnZUtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BVVCcsIGAke3RoaXMudXJsfS91c2VyYCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbFJlZGlyZWN0VG8sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYXR0cmlidXRlcyksIHsgY29kZV9jaGFsbGVuZ2U6IGNvZGVDaGFsbGVuZ2UsIGNvZGVfY2hhbGxlbmdlX21ldGhvZDogY29kZUNoYWxsZW5nZU1ldGhvZCB9KSxcbiAgICAgICAgICAgICAgICAgICAgand0OiBzZXNzaW9uLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICAgICAgeGZvcm06IF91c2VyUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXJFcnJvcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdXNlckVycm9yO1xuICAgICAgICAgICAgICAgIHNlc3Npb24udXNlciA9IGRhdGEudXNlcjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zYXZlU2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9ub3RpZnlBbGxTdWJzY3JpYmVycygnVVNFUl9VUERBVEVEJywgc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBzZXNzaW9uLnVzZXIgfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2Vzc2lvbiBkYXRhIGZyb20gdGhlIGN1cnJlbnQgc2Vzc2lvbi4gSWYgdGhlIGN1cnJlbnQgc2Vzc2lvbiBpcyBleHBpcmVkLCBzZXRTZXNzaW9uIHdpbGwgdGFrZSBjYXJlIG9mIHJlZnJlc2hpbmcgaXQgdG8gb2J0YWluIGEgbmV3IHNlc3Npb24uXG4gICAgICogSWYgdGhlIHJlZnJlc2ggdG9rZW4gb3IgYWNjZXNzIHRva2VuIGluIHRoZSBjdXJyZW50IHNlc3Npb24gaXMgaW52YWxpZCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gICAgICogQHBhcmFtIGN1cnJlbnRTZXNzaW9uIFRoZSBjdXJyZW50IHNlc3Npb24gdGhhdCBtaW5pbWFsbHkgY29udGFpbnMgYW4gYWNjZXNzIHRva2VuIGFuZCByZWZyZXNoIHRva2VuLlxuICAgICAqL1xuICAgIGFzeW5jIHNldFNlc3Npb24oY3VycmVudFNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fc2V0U2Vzc2lvbihjdXJyZW50U2Vzc2lvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfc2V0U2Vzc2lvbihjdXJyZW50U2Vzc2lvbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50U2Vzc2lvbi5hY2Nlc3NfdG9rZW4gfHwgIWN1cnJlbnRTZXNzaW9uLnJlZnJlc2hfdG9rZW4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aFNlc3Npb25NaXNzaW5nRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRpbWVOb3cgPSBEYXRlLm5vdygpIC8gMTAwMDtcbiAgICAgICAgICAgIGxldCBleHBpcmVzQXQgPSB0aW1lTm93O1xuICAgICAgICAgICAgbGV0IGhhc0V4cGlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IHNlc3Npb24gPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgeyBwYXlsb2FkIH0gPSBkZWNvZGVKV1QoY3VycmVudFNlc3Npb24uYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmV4cCkge1xuICAgICAgICAgICAgICAgIGV4cGlyZXNBdCA9IHBheWxvYWQuZXhwO1xuICAgICAgICAgICAgICAgIGhhc0V4cGlyZWQgPSBleHBpcmVzQXQgPD0gdGltZU5vdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uOiByZWZyZXNoZWRTZXNzaW9uLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5fY2FsbFJlZnJlc2hUb2tlbihjdXJyZW50U2Vzc2lvbi5yZWZyZXNoX3Rva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yOiBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXJlZnJlc2hlZFNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBudWxsLCBzZXNzaW9uOiBudWxsIH0sIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlc3Npb24gPSByZWZyZXNoZWRTZXNzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5fZ2V0VXNlcihjdXJyZW50U2Vzc2lvbi5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiBjdXJyZW50U2Vzc2lvbi5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IGN1cnJlbnRTZXNzaW9uLnJlZnJlc2hfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHVzZXI6IGRhdGEudXNlcixcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5fdHlwZTogJ2JlYXJlcicsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNfaW46IGV4cGlyZXNBdCAtIHRpbWVOb3csXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNfYXQ6IGV4cGlyZXNBdCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NhdmVTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX25vdGlmeUFsbFN1YnNjcmliZXJzKCdTSUdORURfSU4nLCBzZXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogc2Vzc2lvbi51c2VyLCBzZXNzaW9uIH0sIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyBzZXNzaW9uOiBudWxsLCB1c2VyOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNlc3Npb24sIHJlZ2FyZGxlc3Mgb2YgZXhwaXJ5IHN0YXR1cy5cbiAgICAgKiBUYWtlcyBpbiBhbiBvcHRpb25hbCBjdXJyZW50IHNlc3Npb24uIElmIG5vdCBwYXNzZWQgaW4sIHRoZW4gcmVmcmVzaFNlc3Npb24oKSB3aWxsIGF0dGVtcHQgdG8gcmV0cmlldmUgaXQgZnJvbSBnZXRTZXNzaW9uKCkuXG4gICAgICogSWYgdGhlIGN1cnJlbnQgc2Vzc2lvbidzIHJlZnJlc2ggdG9rZW4gaXMgaW52YWxpZCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gICAgICogQHBhcmFtIGN1cnJlbnRTZXNzaW9uIFRoZSBjdXJyZW50IHNlc3Npb24uIElmIHBhc3NlZCBpbiwgaXQgbXVzdCBjb250YWluIGEgcmVmcmVzaCB0b2tlbi5cbiAgICAgKi9cbiAgICBhc3luYyByZWZyZXNoU2Vzc2lvbihjdXJyZW50U2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQcm9taXNlO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fYWNxdWlyZUxvY2soLTEsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZWZyZXNoU2Vzc2lvbihjdXJyZW50U2Vzc2lvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfcmVmcmVzaFNlc3Npb24oY3VycmVudFNlc3Npb24pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlc3Npb24gPSAoX2EgPSBkYXRhLnNlc3Npb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEoY3VycmVudFNlc3Npb24gPT09IG51bGwgfHwgY3VycmVudFNlc3Npb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRTZXNzaW9uLnJlZnJlc2hfdG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHNlc3Npb24sIGVycm9yIH0gPSBhd2FpdCB0aGlzLl9jYWxsUmVmcmVzaFRva2VuKGN1cnJlbnRTZXNzaW9uLnJlZnJlc2hfdG9rZW4pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3I6IGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHVzZXI6IG51bGwsIHNlc3Npb246IG51bGwgfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogeyB1c2VyOiBzZXNzaW9uLnVzZXIsIHNlc3Npb24gfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgdXNlcjogbnVsbCwgc2Vzc2lvbjogbnVsbCB9LCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc2Vzc2lvbiBkYXRhIGZyb20gYSBVUkwgc3RyaW5nXG4gICAgICovXG4gICAgYXN5bmMgX2dldFNlc3Npb25Gcm9tVVJMKHBhcmFtcywgY2FsbGJhY2tVcmxUeXBlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIWlzQnJvd3NlcigpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoSW1wbGljaXRHcmFudFJlZGlyZWN0RXJyb3IoJ05vIGJyb3dzZXIgZGV0ZWN0ZWQuJyk7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGFuIGVycm9yIGluIHRoZSBVUkwsIGl0IGRvZXNuJ3QgbWF0dGVyIHdoYXQgZmxvdyBpdCBpcywgd2UganVzdCByZXR1cm4gdGhlIGVycm9yLlxuICAgICAgICAgICAgaWYgKHBhcmFtcy5lcnJvciB8fCBwYXJhbXMuZXJyb3JfZGVzY3JpcHRpb24gfHwgcGFyYW1zLmVycm9yX2NvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXJyb3IgY2xhc3MgcmV0dXJuZWQgaW1wbGllcyB0aGF0IHRoZSByZWRpcmVjdCBpcyBmcm9tIGFuIGltcGxpY2l0IGdyYW50IGZsb3dcbiAgICAgICAgICAgICAgICAvLyBidXQgaXQgY291bGQgYWxzbyBiZSBmcm9tIGEgcmVkaXJlY3QgZXJyb3IgZnJvbSBhIFBLQ0UgZmxvdy5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yKHBhcmFtcy5lcnJvcl9kZXNjcmlwdGlvbiB8fCAnRXJyb3IgaW4gVVJMIHdpdGggdW5zcGVjaWZpZWQgZXJyb3JfZGVzY3JpcHRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBwYXJhbXMuZXJyb3IgfHwgJ3Vuc3BlY2lmaWVkX2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogcGFyYW1zLmVycm9yX2NvZGUgfHwgJ3Vuc3BlY2lmaWVkX2NvZGUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2tzIGZvciBtaXNtYXRjaGVzIGJldHdlZW4gdGhlIGZsb3dUeXBlIGluaXRpYWxpc2VkIGluIHRoZSBjbGllbnQgYW5kIHRoZSBVUkwgcGFyYW1ldGVyc1xuICAgICAgICAgICAgc3dpdGNoIChjYWxsYmFja1VybFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdpbXBsaWNpdCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsb3dUeXBlID09PSAncGtjZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoUEtDRUdyYW50Q29kZUV4Y2hhbmdlRXJyb3IoJ05vdCBhIHZhbGlkIFBLQ0UgZmxvdyB1cmwuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGtjZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsb3dUeXBlID09PSAnaW1wbGljaXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aEltcGxpY2l0R3JhbnRSZWRpcmVjdEVycm9yKCdOb3QgYSB2YWxpZCBpbXBsaWNpdCBncmFudCBmbG93IHVybC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIHRoZXJlJ3Mgbm8gbWlzbWF0Y2ggc28gd2UgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSByZWRpcmVjdCBmb3IgUEtDRSwgd2UgYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgY29kZSBmcm9tIHRoZSBVUkwgZm9yIHRoZSBjb2RlIGV4Y2hhbmdlXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tVcmxUeXBlID09PSAncGtjZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnI19pbml0aWFsaXplKCknLCAnYmVnaW4nLCAnaXMgUEtDRSBmbG93JywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJhbXMuY29kZSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhQS0NFR3JhbnRDb2RlRXhjaGFuZ2VFcnJvcignTm8gY29kZSBkZXRlY3RlZC4nKTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLl9leGNoYW5nZUNvZGVGb3JTZXNzaW9uKHBhcmFtcy5jb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdjb2RlJyk7XG4gICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHdpbmRvdy5oaXN0b3J5LnN0YXRlLCAnJywgdXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgc2Vzc2lvbjogZGF0YS5zZXNzaW9uLCByZWRpcmVjdFR5cGU6IG51bGwgfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgcHJvdmlkZXJfdG9rZW4sIHByb3ZpZGVyX3JlZnJlc2hfdG9rZW4sIGFjY2Vzc190b2tlbiwgcmVmcmVzaF90b2tlbiwgZXhwaXJlc19pbiwgZXhwaXJlc19hdCwgdG9rZW5fdHlwZSwgfSA9IHBhcmFtcztcbiAgICAgICAgICAgIGlmICghYWNjZXNzX3Rva2VuIHx8ICFleHBpcmVzX2luIHx8ICFyZWZyZXNoX3Rva2VuIHx8ICF0b2tlbl90eXBlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhJbXBsaWNpdEdyYW50UmVkaXJlY3RFcnJvcignTm8gc2Vzc2lvbiBkZWZpbmVkIGluIFVSTCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGltZU5vdyA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luID0gcGFyc2VJbnQoZXhwaXJlc19pbik7XG4gICAgICAgICAgICBsZXQgZXhwaXJlc0F0ID0gdGltZU5vdyArIGV4cGlyZXNJbjtcbiAgICAgICAgICAgIGlmIChleHBpcmVzX2F0KSB7XG4gICAgICAgICAgICAgICAgZXhwaXJlc0F0ID0gcGFyc2VJbnQoZXhwaXJlc19hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhY3R1YWxseUV4cGlyZXNJbiA9IGV4cGlyZXNBdCAtIHRpbWVOb3c7XG4gICAgICAgICAgICBpZiAoYWN0dWFsbHlFeHBpcmVzSW4gKiAxMDAwIDw9IEFVVE9fUkVGUkVTSF9USUNLX0RVUkFUSU9OX01TKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBAc3VwYWJhc2UvZ290cnVlLWpzOiBTZXNzaW9uIGFzIHJldHJpZXZlZCBmcm9tIFVSTCBleHBpcmVzIGluICR7YWN0dWFsbHlFeHBpcmVzSW59cywgc2hvdWxkIGhhdmUgYmVlbiBjbG9zZXIgdG8gJHtleHBpcmVzSW59c2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNzdWVkQXQgPSBleHBpcmVzQXQgLSBleHBpcmVzSW47XG4gICAgICAgICAgICBpZiAodGltZU5vdyAtIGlzc3VlZEF0ID49IDEyMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQHN1cGFiYXNlL2dvdHJ1ZS1qczogU2Vzc2lvbiBhcyByZXRyaWV2ZWQgZnJvbSBVUkwgd2FzIGlzc3VlZCBvdmVyIDEyMHMgYWdvLCBVUkwgY291bGQgYmUgc3RhbGUnLCBpc3N1ZWRBdCwgZXhwaXJlc0F0LCB0aW1lTm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbWVOb3cgLSBpc3N1ZWRBdCA8IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0BzdXBhYmFzZS9nb3RydWUtanM6IFNlc3Npb24gYXMgcmV0cmlldmVkIGZyb20gVVJMIHdhcyBpc3N1ZWQgaW4gdGhlIGZ1dHVyZT8gQ2hlY2sgdGhlIGRldmljZSBjbG9jayBmb3Igc2tldycsIGlzc3VlZEF0LCBleHBpcmVzQXQsIHRpbWVOb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5fZ2V0VXNlcihhY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBwcm92aWRlcl90b2tlbixcbiAgICAgICAgICAgICAgICBwcm92aWRlcl9yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICBleHBpcmVzX2luOiBleHBpcmVzSW4sXG4gICAgICAgICAgICAgICAgZXhwaXJlc19hdDogZXhwaXJlc0F0LFxuICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW4sXG4gICAgICAgICAgICAgICAgdG9rZW5fdHlwZSxcbiAgICAgICAgICAgICAgICB1c2VyOiBkYXRhLnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRva2VucyBmcm9tIFVSTFxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnJztcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2dldFNlc3Npb25Gcm9tVVJMKCknLCAnY2xlYXJpbmcgd2luZG93LmxvY2F0aW9uLmhhc2gnKTtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgc2Vzc2lvbiwgcmVkaXJlY3RUeXBlOiBwYXJhbXMudHlwZSB9LCBlcnJvcjogbnVsbCB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgc2Vzc2lvbjogbnVsbCwgcmVkaXJlY3RUeXBlOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgVVJMIGNvbnRhaW5zIHBhcmFtZXRlcnMgZ2l2ZW4gYnkgYW4gaW1wbGljaXQgb2F1dGggZ3JhbnQgZmxvdyAoaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzY3NDkuaHRtbCNzZWN0aW9uLTQuMilcbiAgICAgKi9cbiAgICBfaXNJbXBsaWNpdEdyYW50Q2FsbGJhY2socGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHBhcmFtcy5hY2Nlc3NfdG9rZW4gfHwgcGFyYW1zLmVycm9yX2Rlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IFVSTCBhbmQgYmFja2luZyBzdG9yYWdlIGNvbnRhaW4gcGFyYW1ldGVycyBnaXZlbiBieSBhIFBLQ0UgZmxvd1xuICAgICAqL1xuICAgIGFzeW5jIF9pc1BLQ0VDYWxsYmFjayhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFN0b3JhZ2VDb250ZW50ID0gYXdhaXQgZ2V0SXRlbUFzeW5jKHRoaXMuc3RvcmFnZSwgYCR7dGhpcy5zdG9yYWdlS2V5fS1jb2RlLXZlcmlmaWVyYCk7XG4gICAgICAgIHJldHVybiAhIShwYXJhbXMuY29kZSAmJiBjdXJyZW50U3RvcmFnZUNvbnRlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNpZGUgYSBicm93c2VyIGNvbnRleHQsIGBzaWduT3V0KClgIHdpbGwgcmVtb3ZlIHRoZSBsb2dnZWQgaW4gdXNlciBmcm9tIHRoZSBicm93c2VyIHNlc3Npb24gYW5kIGxvZyB0aGVtIG91dCAtIHJlbW92aW5nIGFsbCBpdGVtcyBmcm9tIGxvY2Fsc3RvcmFnZSBhbmQgdGhlbiB0cmlnZ2VyIGEgYFwiU0lHTkVEX09VVFwiYCBldmVudC5cbiAgICAgKlxuICAgICAqIEZvciBzZXJ2ZXItc2lkZSBtYW5hZ2VtZW50LCB5b3UgY2FuIHJldm9rZSBhbGwgcmVmcmVzaCB0b2tlbnMgZm9yIGEgdXNlciBieSBwYXNzaW5nIGEgdXNlcidzIEpXVCB0aHJvdWdoIHRvIGBhdXRoLmFwaS5zaWduT3V0KEpXVDogc3RyaW5nKWAuXG4gICAgICogVGhlcmUgaXMgbm8gd2F5IHRvIHJldm9rZSBhIHVzZXIncyBhY2Nlc3MgdG9rZW4gand0IHVudGlsIGl0IGV4cGlyZXMuIEl0IGlzIHJlY29tbWVuZGVkIHRvIHNldCBhIHNob3J0ZXIgZXhwaXJ5IG9uIHRoZSBqd3QgZm9yIHRoaXMgcmVhc29uLlxuICAgICAqXG4gICAgICogSWYgdXNpbmcgYG90aGVyc2Agc2NvcGUsIG5vIGBTSUdORURfT1VUYCBldmVudCBpcyBmaXJlZCFcbiAgICAgKi9cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnMgPSB7IHNjb3BlOiAnZ2xvYmFsJyB9KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVByb21pc2U7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9hY3F1aXJlTG9jaygtMSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3NpZ25PdXQob3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfc2lnbk91dCh7IHNjb3BlIH0gPSB7IHNjb3BlOiAnZ2xvYmFsJyB9KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IHNlc3Npb25FcnJvciB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgaWYgKHNlc3Npb25FcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGVycm9yOiBzZXNzaW9uRXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gKF9hID0gZGF0YS5zZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWNjZXNzX3Rva2VuO1xuICAgICAgICAgICAgaWYgKGFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5hZG1pbi5zaWduT3V0KGFjY2Vzc1Rva2VuLCBzY29wZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSA0MDRzIHNpbmNlIHVzZXIgbWlnaHQgbm90IGV4aXN0IGFueW1vcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIDQwMXMgc2luY2UgYW4gaW52YWxpZCBvciBleHBpcmVkIEpXVCBzaG91bGQgc2lnbiBvdXQgdGhlIGN1cnJlbnQgc2Vzc2lvblxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpc0F1dGhBcGlFcnJvcihlcnJvcikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChlcnJvci5zdGF0dXMgPT09IDQwNCB8fCBlcnJvci5zdGF0dXMgPT09IDQwMSB8fCBlcnJvci5zdGF0dXMgPT09IDQwMykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjb3BlICE9PSAnb3RoZXJzJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3JlbW92ZVNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmVJdGVtQXN5bmModGhpcy5zdG9yYWdlLCBgJHt0aGlzLnN0b3JhZ2VLZXl9LWNvZGUtdmVyaWZpZXJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGVycm9yOiBudWxsIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNlaXZlIGEgbm90aWZpY2F0aW9uIGV2ZXJ5IHRpbWUgYW4gYXV0aCBldmVudCBoYXBwZW5zLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiBhbiBhdXRoIGV2ZW50IGhhcHBlbnMuXG4gICAgICovXG4gICAgb25BdXRoU3RhdGVDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgaWQgPSB1dWlkKCk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjdW5zdWJzY3JpYmUoKScsICdzdGF0ZSBjaGFuZ2UgY2FsbGJhY2sgd2l0aCBpZCByZW1vdmVkJywgaWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VFbWl0dGVycy5kZWxldGUoaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fZGVidWcoJyNvbkF1dGhTdGF0ZUNoYW5nZSgpJywgJ3JlZ2lzdGVyZWQgY2FsbGJhY2sgd2l0aCBpZCcsIGlkKTtcbiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZUVtaXR0ZXJzLnNldChpZCwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVByb21pc2U7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9hY3F1aXJlTG9jaygtMSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXRJbml0aWFsU2Vzc2lvbihpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogeyBzdWJzY3JpcHRpb24gfSB9O1xuICAgIH1cbiAgICBhc3luYyBfZW1pdEluaXRpYWxTZXNzaW9uKGlkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0sIGVycm9yLCB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgYXdhaXQgKChfYSA9IHRoaXMuc3RhdGVDaGFuZ2VFbWl0dGVycy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbGJhY2soJ0lOSVRJQUxfU0VTU0lPTicsIHNlc3Npb24pKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnSU5JVElBTF9TRVNTSU9OJywgJ2NhbGxiYWNrIGlkJywgaWQsICdzZXNzaW9uJywgc2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgKChfYiA9IHRoaXMuc3RhdGVDaGFuZ2VFbWl0dGVycy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbGJhY2soJ0lOSVRJQUxfU0VTU0lPTicsIG51bGwpKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnSU5JVElBTF9TRVNTSU9OJywgJ2NhbGxiYWNrIGlkJywgaWQsICdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBwYXNzd29yZCByZXNldCByZXF1ZXN0IHRvIGFuIGVtYWlsIGFkZHJlc3MuIFRoaXMgbWV0aG9kIHN1cHBvcnRzIHRoZSBQS0NFIGZsb3cuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW1haWwgVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIHVzZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMucmVkaXJlY3RUbyBUaGUgVVJMIHRvIHNlbmQgdGhlIHVzZXIgdG8gYWZ0ZXIgdGhleSBjbGljayB0aGUgcGFzc3dvcmQgcmVzZXQgbGluay5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jYXB0Y2hhVG9rZW4gVmVyaWZpY2F0aW9uIHRva2VuIHJlY2VpdmVkIHdoZW4gdGhlIHVzZXIgY29tcGxldGVzIHRoZSBjYXB0Y2hhIG9uIHRoZSBzaXRlLlxuICAgICAqL1xuICAgIGFzeW5jIHJlc2V0UGFzc3dvcmRGb3JFbWFpbChlbWFpbCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGxldCBjb2RlQ2hhbGxlbmdlID0gbnVsbDtcbiAgICAgICAgbGV0IGNvZGVDaGFsbGVuZ2VNZXRob2QgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5mbG93VHlwZSA9PT0gJ3BrY2UnKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBbY29kZUNoYWxsZW5nZSwgY29kZUNoYWxsZW5nZU1ldGhvZF0gPSBhd2FpdCBnZXRDb2RlQ2hhbGxlbmdlQW5kTWV0aG9kKHRoaXMuc3RvcmFnZSwgdGhpcy5zdG9yYWdlS2V5LCB0cnVlIC8vIGlzUGFzc3dvcmRSZWNvdmVyeVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdQT1NUJywgYCR7dGhpcy51cmx9L3JlY292ZXJgLCB7XG4gICAgICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgY29kZV9jaGFsbGVuZ2U6IGNvZGVDaGFsbGVuZ2UsXG4gICAgICAgICAgICAgICAgICAgIGNvZGVfY2hhbGxlbmdlX21ldGhvZDogY29kZUNoYWxsZW5nZU1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgZ290cnVlX21ldGFfc2VjdXJpdHk6IHsgY2FwdGNoYV90b2tlbjogb3B0aW9ucy5jYXB0Y2hhVG9rZW4gfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBvcHRpb25zLnJlZGlyZWN0VG8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbGwgdGhlIGlkZW50aXRpZXMgbGlua2VkIHRvIGEgdXNlci5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRVc2VySWRlbnRpdGllcygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5nZXRVc2VyKCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IGlkZW50aXRpZXM6IChfYSA9IGRhdGEudXNlci5pZGVudGl0aWVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSB9LCBlcnJvcjogbnVsbCB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaW5rcyBhbiBvYXV0aCBpZGVudGl0eSB0byBhbiBleGlzdGluZyB1c2VyLlxuICAgICAqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIHRoZSBQS0NFIGZsb3cuXG4gICAgICovXG4gICAgYXN5bmMgbGlua0lkZW50aXR5KGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5fZ2V0VXJsRm9yUHJvdmlkZXIoYCR7dGhpcy51cmx9L3VzZXIvaWRlbnRpdGllcy9hdXRob3JpemVgLCBjcmVkZW50aWFscy5wcm92aWRlciwge1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiAoX2EgPSBjcmVkZW50aWFscy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVkaXJlY3RUbyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVzOiAoX2IgPSBjcmVkZW50aWFscy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc2NvcGVzLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtczogKF9jID0gY3JlZGVudGlhbHMub3B0aW9ucykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnF1ZXJ5UGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBza2lwQnJvd3NlclJlZGlyZWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnR0VUJywgdXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgand0OiAoX2UgPSAoX2QgPSBkYXRhLnNlc3Npb24pID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5hY2Nlc3NfdG9rZW4pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgaWYgKGlzQnJvd3NlcigpICYmICEoKF9hID0gY3JlZGVudGlhbHMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNraXBCcm93c2VyUmVkaXJlY3QpKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEudXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgcHJvdmlkZXI6IGNyZWRlbnRpYWxzLnByb3ZpZGVyLCB1cmw6IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS51cmwgfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHByb3ZpZGVyOiBjcmVkZW50aWFscy5wcm92aWRlciwgdXJsOiBudWxsIH0sIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbmxpbmtzIGFuIGlkZW50aXR5IGZyb20gYSB1c2VyIGJ5IGRlbGV0aW5nIGl0LiBUaGUgdXNlciB3aWxsIG5vIGxvbmdlciBiZSBhYmxlIHRvIHNpZ24gaW4gd2l0aCB0aGF0IGlkZW50aXR5IG9uY2UgaXQncyB1bmxpbmtlZC5cbiAgICAgKi9cbiAgICBhc3luYyB1bmxpbmtJZGVudGl0eShpZGVudGl0eSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdERUxFVEUnLCBgJHt0aGlzLnVybH0vdXNlci9pZGVudGl0aWVzLyR7aWRlbnRpdHkuaWRlbnRpdHlfaWR9YCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGp3dDogKF9iID0gKF9hID0gZGF0YS5zZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWNjZXNzX3Rva2VuKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgbmV3IEpXVC5cbiAgICAgKiBAcGFyYW0gcmVmcmVzaFRva2VuIEEgdmFsaWQgcmVmcmVzaCB0b2tlbiB0aGF0IHdhcyByZXR1cm5lZCBvbiBsb2dpbi5cbiAgICAgKi9cbiAgICBhc3luYyBfcmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hUb2tlbikge1xuICAgICAgICBjb25zdCBkZWJ1Z05hbWUgPSBgI19yZWZyZXNoQWNjZXNzVG9rZW4oJHtyZWZyZXNoVG9rZW4uc3Vic3RyaW5nKDAsIDUpfS4uLilgO1xuICAgICAgICB0aGlzLl9kZWJ1ZyhkZWJ1Z05hbWUsICdiZWdpbicpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRlZEF0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8vIHdpbGwgYXR0ZW1wdCB0byByZWZyZXNoIHRoZSB0b2tlbiB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXRyeWFibGUoYXN5bmMgKGF0dGVtcHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoMjAwICogTWF0aC5wb3coMiwgYXR0ZW1wdCAtIDEpKTsgLy8gMjAwLCA0MDAsIDgwMCwgLi4uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKGRlYnVnTmFtZSwgJ3JlZnJlc2hpbmcgYXR0ZW1wdCcsIGF0dGVtcHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS90b2tlbj9ncmFudF90eXBlPXJlZnJlc2hfdG9rZW5gLCB7XG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHsgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuIH0sXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgeGZvcm06IF9zZXNzaW9uUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAoYXR0ZW1wdCwgZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0QmFja09mZkludGVydmFsID0gMjAwICogTWF0aC5wb3coMiwgYXR0ZW1wdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChlcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBpc0F1dGhSZXRyeWFibGVGZXRjaEVycm9yKGVycm9yKSAmJlxuICAgICAgICAgICAgICAgICAgICAvLyByZXRyeWFibGUgb25seSBpZiB0aGUgcmVxdWVzdCBjYW4gYmUgc2VudCBiZWZvcmUgdGhlIGJhY2tvZmYgb3ZlcmZsb3dzIHRoZSB0aWNrIGR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIERhdGUubm93KCkgKyBuZXh0QmFja09mZkludGVydmFsIC0gc3RhcnRlZEF0IDwgQVVUT19SRUZSRVNIX1RJQ0tfRFVSQVRJT05fTVMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZyhkZWJ1Z05hbWUsICdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiB7IHNlc3Npb246IG51bGwsIHVzZXI6IG51bGwgfSwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnZW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2lzVmFsaWRTZXNzaW9uKG1heWJlU2Vzc2lvbikge1xuICAgICAgICBjb25zdCBpc1ZhbGlkU2Vzc2lvbiA9IHR5cGVvZiBtYXliZVNlc3Npb24gPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBtYXliZVNlc3Npb24gIT09IG51bGwgJiZcbiAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nIGluIG1heWJlU2Vzc2lvbiAmJlxuICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nIGluIG1heWJlU2Vzc2lvbiAmJlxuICAgICAgICAgICAgJ2V4cGlyZXNfYXQnIGluIG1heWJlU2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWRTZXNzaW9uO1xuICAgIH1cbiAgICBhc3luYyBfaGFuZGxlUHJvdmlkZXJTaWduSW4ocHJvdmlkZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5fZ2V0VXJsRm9yUHJvdmlkZXIoYCR7dGhpcy51cmx9L2F1dGhvcml6ZWAsIHByb3ZpZGVyLCB7XG4gICAgICAgICAgICByZWRpcmVjdFRvOiBvcHRpb25zLnJlZGlyZWN0VG8sXG4gICAgICAgICAgICBzY29wZXM6IG9wdGlvbnMuc2NvcGVzLFxuICAgICAgICAgICAgcXVlcnlQYXJhbXM6IG9wdGlvbnMucXVlcnlQYXJhbXMsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kZWJ1ZygnI19oYW5kbGVQcm92aWRlclNpZ25JbigpJywgJ3Byb3ZpZGVyJywgcHJvdmlkZXIsICdvcHRpb25zJywgb3B0aW9ucywgJ3VybCcsIHVybCk7XG4gICAgICAgIC8vIHRyeSB0byBvcGVuIG9uIHRoZSBicm93c2VyXG4gICAgICAgIGlmIChpc0Jyb3dzZXIoKSAmJiAhb3B0aW9ucy5za2lwQnJvd3NlclJlZGlyZWN0KSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogeyBwcm92aWRlciwgdXJsIH0sIGVycm9yOiBudWxsIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY292ZXJzIHRoZSBzZXNzaW9uIGZyb20gTG9jYWxTdG9yYWdlIGFuZCByZWZyZXNoZXMgdGhlIHRva2VuXG4gICAgICogTm90ZTogdGhpcyBtZXRob2QgaXMgYXN5bmMgdG8gYWNjb21tb2RhdGUgZm9yIEFzeW5jU3RvcmFnZSBlLmcuIGluIFJlYWN0IG5hdGl2ZS5cbiAgICAgKi9cbiAgICBhc3luYyBfcmVjb3ZlckFuZFJlZnJlc2goKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgZGVidWdOYW1lID0gJyNfcmVjb3ZlckFuZFJlZnJlc2goKSc7XG4gICAgICAgIHRoaXMuX2RlYnVnKGRlYnVnTmFtZSwgJ2JlZ2luJyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2Vzc2lvbiA9IGF3YWl0IGdldEl0ZW1Bc3luYyh0aGlzLnN0b3JhZ2UsIHRoaXMuc3RvcmFnZUtleSk7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZyhkZWJ1Z05hbWUsICdzZXNzaW9uIGZyb20gc3RvcmFnZScsIGN1cnJlbnRTZXNzaW9uKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNWYWxpZFNlc3Npb24oY3VycmVudFNlc3Npb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnc2Vzc2lvbiBpcyBub3QgdmFsaWQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlc3Npb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcmVtb3ZlU2Vzc2lvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleHBpcmVzV2l0aE1hcmdpbiA9ICgoX2EgPSBjdXJyZW50U2Vzc2lvbi5leHBpcmVzX2F0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBJbmZpbml0eSkgKiAxMDAwIC0gRGF0ZS5ub3coKSA8IEVYUElSWV9NQVJHSU5fTVM7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZyhkZWJ1Z05hbWUsIGBzZXNzaW9uIGhhcyR7ZXhwaXJlc1dpdGhNYXJnaW4gPyAnJyA6ICcgbm90J30gZXhwaXJlZCB3aXRoIG1hcmdpbiBvZiAke0VYUElSWV9NQVJHSU5fTVN9c2ApO1xuICAgICAgICAgICAgaWYgKGV4cGlyZXNXaXRoTWFyZ2luKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hUb2tlbiAmJiBjdXJyZW50U2Vzc2lvbi5yZWZyZXNoX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHRoaXMuX2NhbGxSZWZyZXNoVG9rZW4oY3VycmVudFNlc3Npb24ucmVmcmVzaF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXV0aFJldHJ5YWJsZUZldGNoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAncmVmcmVzaCBmYWlsZWQgd2l0aCBhIG5vbi1yZXRyeWFibGUgZXJyb3IsIHJlbW92aW5nIHRoZSBzZXNzaW9uJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3JlbW92ZVNlc3Npb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gcGVyc2lzdCBjdXJyZW50U2Vzc2lvbiBhZ2FpbiwgYXMgd2UganVzdCBsb2FkZWQgaXQgZnJvbVxuICAgICAgICAgICAgICAgIC8vIGxvY2FsIHN0b3JhZ2U7IHBlcnNpc3RpbmcgaXQgYWdhaW4gbWF5IG92ZXJ3cml0ZSBhIHZhbHVlIHNhdmVkIGJ5XG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBjbGllbnQgd2l0aCBhY2Nlc3MgdG8gdGhlIHNhbWUgbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX25vdGlmeUFsbFN1YnNjcmliZXJzKCdTSUdORURfSU4nLCBjdXJyZW50U2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnZW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX2NhbGxSZWZyZXNoVG9rZW4ocmVmcmVzaFRva2VuKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXV0aFNlc3Npb25NaXNzaW5nRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWZyZXNoaW5nIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgICAgICAgaWYgKHRoaXMucmVmcmVzaGluZ0RlZmVycmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWZyZXNoaW5nRGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWJ1Z05hbWUgPSBgI19jYWxsUmVmcmVzaFRva2VuKCR7cmVmcmVzaFRva2VuLnN1YnN0cmluZygwLCA1KX0uLi4pYDtcbiAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnYmVnaW4nKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaGluZ0RlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLl9yZWZyZXNoQWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuKTtcbiAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIGlmICghZGF0YS5zZXNzaW9uKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoU2Vzc2lvbk1pc3NpbmdFcnJvcigpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2F2ZVNlc3Npb24oZGF0YS5zZXNzaW9uKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX25vdGlmeUFsbFN1YnNjcmliZXJzKCdUT0tFTl9SRUZSRVNIRUQnLCBkYXRhLnNlc3Npb24pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyBzZXNzaW9uOiBkYXRhLnNlc3Npb24sIGVycm9yOiBudWxsIH07XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hpbmdEZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyBzZXNzaW9uOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIGlmICghaXNBdXRoUmV0cnlhYmxlRmV0Y2hFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcmVtb3ZlU2Vzc2lvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnJlZnJlc2hpbmdEZWZlcnJlZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF9iID0gdGhpcy5yZWZyZXNoaW5nRGVmZXJyZWQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hpbmdEZWZlcnJlZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9kZWJ1ZyhkZWJ1Z05hbWUsICdlbmQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfbm90aWZ5QWxsU3Vic2NyaWJlcnMoZXZlbnQsIHNlc3Npb24sIGJyb2FkY2FzdCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgZGVidWdOYW1lID0gYCNfbm90aWZ5QWxsU3Vic2NyaWJlcnMoJHtldmVudH0pYDtcbiAgICAgICAgdGhpcy5fZGVidWcoZGVidWdOYW1lLCAnYmVnaW4nLCBzZXNzaW9uLCBgYnJvYWRjYXN0ID0gJHticm9hZGNhc3R9YCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5icm9hZGNhc3RDaGFubmVsICYmIGJyb2FkY2FzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbC5wb3N0TWVzc2FnZSh7IGV2ZW50LCBzZXNzaW9uIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gW107XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20odGhpcy5zdGF0ZUNoYW5nZUVtaXR0ZXJzLnZhbHVlcygpKS5tYXAoYXN5bmMgKHgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB4LmNhbGxiYWNrKGV2ZW50LCBzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9ycy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX2RlYnVnKGRlYnVnTmFtZSwgJ2VuZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHNldCBjdXJyZW50U2Vzc2lvbiBhbmQgY3VycmVudFVzZXJcbiAgICAgKiBwcm9jZXNzIHRvIF9zdGFydEF1dG9SZWZyZXNoVG9rZW4gaWYgcG9zc2libGVcbiAgICAgKi9cbiAgICBhc3luYyBfc2F2ZVNlc3Npb24oc2Vzc2lvbikge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnI19zYXZlU2Vzc2lvbigpJywgc2Vzc2lvbik7XG4gICAgICAgIC8vIF9zYXZlU2Vzc2lvbiBpcyBhbHdheXMgY2FsbGVkIHdoZW5ldmVyIGEgbmV3IHNlc3Npb24gaGFzIGJlZW4gYWNxdWlyZWRcbiAgICAgICAgLy8gc28gd2UgY2FuIHNhZmVseSBzdXBwcmVzcyB0aGUgd2FybmluZyByZXR1cm5lZCBieSBmdXR1cmUgZ2V0U2Vzc2lvbiBjYWxsc1xuICAgICAgICB0aGlzLnN1cHByZXNzR2V0U2Vzc2lvbldhcm5pbmcgPSB0cnVlO1xuICAgICAgICBhd2FpdCBzZXRJdGVtQXN5bmModGhpcy5zdG9yYWdlLCB0aGlzLnN0b3JhZ2VLZXksIHNlc3Npb24pO1xuICAgIH1cbiAgICBhc3luYyBfcmVtb3ZlU2Vzc2lvbigpIHtcbiAgICAgICAgdGhpcy5fZGVidWcoJyNfcmVtb3ZlU2Vzc2lvbigpJyk7XG4gICAgICAgIGF3YWl0IHJlbW92ZUl0ZW1Bc3luYyh0aGlzLnN0b3JhZ2UsIHRoaXMuc3RvcmFnZUtleSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX25vdGlmeUFsbFN1YnNjcmliZXJzKCdTSUdORURfT1VUJywgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW55IHJlZ2lzdGVyZWQgdmlzaWJpbGl0eWNoYW5nZSBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIHtAc2VlICNzdGFydEF1dG9SZWZyZXNofVxuICAgICAqIHtAc2VlICNzdG9wQXV0b1JlZnJlc2h9XG4gICAgICovXG4gICAgX3JlbW92ZVZpc2liaWxpdHlDaGFuZ2VkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuX2RlYnVnKCcjX3JlbW92ZVZpc2liaWxpdHlDaGFuZ2VkQ2FsbGJhY2soKScpO1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMudmlzaWJpbGl0eUNoYW5nZWRDYWxsYmFjaztcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5Q2hhbmdlZENhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBpc0Jyb3dzZXIoKSAmJiAod2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3JlbW92aW5nIHZpc2liaWxpdHljaGFuZ2UgY2FsbGJhY2sgZmFpbGVkJywgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgcHJpdmF0ZSBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgI3N0YXJ0QXV0b1JlZnJlc2h9LiBVc2UgdGhpc1xuICAgICAqIHdpdGhpbiB0aGUgbGlicmFyeS5cbiAgICAgKi9cbiAgICBhc3luYyBfc3RhcnRBdXRvUmVmcmVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RvcEF1dG9SZWZyZXNoKCk7XG4gICAgICAgIHRoaXMuX2RlYnVnKCcjX3N0YXJ0QXV0b1JlZnJlc2goKScpO1xuICAgICAgICBjb25zdCB0aWNrZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLl9hdXRvUmVmcmVzaFRva2VuVGljaygpLCBBVVRPX1JFRlJFU0hfVElDS19EVVJBVElPTl9NUyk7XG4gICAgICAgIHRoaXMuYXV0b1JlZnJlc2hUaWNrZXIgPSB0aWNrZXI7XG4gICAgICAgIGlmICh0aWNrZXIgJiYgdHlwZW9mIHRpY2tlciA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRpY2tlci51bnJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gdGlja2VyIGlzIGEgTm9kZUpTIFRpbWVvdXQgb2JqZWN0IHRoYXQgaGFzIGFuIGB1bnJlZmAgbWV0aG9kXG4gICAgICAgICAgICAvLyBodHRwczovL25vZGVqcy5vcmcvYXBpL3RpbWVycy5odG1sI3RpbWVvdXR1bnJlZlxuICAgICAgICAgICAgLy8gV2hlbiBhdXRvIHJlZnJlc2ggaXMgdXNlZCBpbiBOb2RlSlMgKGxpa2UgZm9yIHRlc3RpbmcpIHRoZVxuICAgICAgICAgICAgLy8gYHNldEludGVydmFsYCBpcyBwcmV2ZW50aW5nIHRoZSBwcm9jZXNzIGZyb20gYmVpbmcgbWFya2VkIGFzXG4gICAgICAgICAgICAvLyBmaW5pc2hlZCBhbmQgdGVzdHMgcnVuIGVuZGxlc3NseS4gVGhpcyBjYW4gYmUgcHJldmVudGVkIGJ5IGNhbGxpbmdcbiAgICAgICAgICAgIC8vIGB1bnJlZigpYCBvbiB0aGUgcmV0dXJuZWQgb2JqZWN0LlxuICAgICAgICAgICAgdGlja2VyLnVucmVmKCk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRTIGhhcyBubyBjb250ZXh0IG9mIERlbm9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIERlbm8udW5yZWZUaW1lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gc2ltaWxhciBsaWtlIGZvciBOb2RlSlMsIGJ1dCB3aXRoIHRoZSBEZW5vIEFQSVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZW5vLmxhbmQvYXBpQGxhdGVzdD91bnN0YWJsZSZzPURlbm8udW5yZWZUaW1lclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUUyBoYXMgbm8gY29udGV4dCBvZiBEZW5vXG4gICAgICAgICAgICBEZW5vLnVucmVmVGltZXIodGlja2VyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBydW4gdGhlIHRpY2sgaW1tZWRpYXRlbHksIGJ1dCBpbiB0aGUgbmV4dCBwYXNzIG9mIHRoZSBldmVudCBsb29wIHNvIHRoYXRcbiAgICAgICAgLy8gI19pbml0aWFsaXplIGNhbiBiZSBhbGxvd2VkIHRvIGNvbXBsZXRlIHdpdGhvdXQgcmVjdXJzaXZlbHkgd2FpdGluZyBvblxuICAgICAgICAvLyBpdHNlbGZcbiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQcm9taXNlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYXV0b1JlZnJlc2hUb2tlblRpY2soKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIHByaXZhdGUgaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rICNzdG9wQXV0b1JlZnJlc2h9LiBVc2UgdGhpc1xuICAgICAqIHdpdGhpbiB0aGUgbGlicmFyeS5cbiAgICAgKi9cbiAgICBhc3luYyBfc3RvcEF1dG9SZWZyZXNoKCkge1xuICAgICAgICB0aGlzLl9kZWJ1ZygnI19zdG9wQXV0b1JlZnJlc2goKScpO1xuICAgICAgICBjb25zdCB0aWNrZXIgPSB0aGlzLmF1dG9SZWZyZXNoVGlja2VyO1xuICAgICAgICB0aGlzLmF1dG9SZWZyZXNoVGlja2VyID0gbnVsbDtcbiAgICAgICAgaWYgKHRpY2tlcikge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aWNrZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBhbiBhdXRvLXJlZnJlc2ggcHJvY2VzcyBpbiB0aGUgYmFja2dyb3VuZC4gVGhlIHNlc3Npb24gaXMgY2hlY2tlZFxuICAgICAqIGV2ZXJ5IGZldyBzZWNvbmRzLiBDbG9zZSB0byB0aGUgdGltZSBvZiBleHBpcmF0aW9uIGEgcHJvY2VzcyBpcyBzdGFydGVkIHRvXG4gICAgICogcmVmcmVzaCB0aGUgc2Vzc2lvbi4gSWYgcmVmcmVzaGluZyBmYWlscyBpdCB3aWxsIGJlIHJldHJpZWQgZm9yIGFzIGxvbmcgYXNcbiAgICAgKiBuZWNlc3NhcnkuXG4gICAgICpcbiAgICAgKiBJZiB5b3Ugc2V0IHRoZSB7QGxpbmsgR29UcnVlQ2xpZW50T3B0aW9ucyNhdXRvUmVmcmVzaFRva2VufSB5b3UgZG9uJ3QgbmVlZFxuICAgICAqIHRvIGNhbGwgdGhpcyBmdW5jdGlvbiwgaXQgd2lsbCBiZSBjYWxsZWQgZm9yIHlvdS5cbiAgICAgKlxuICAgICAqIE9uIGJyb3dzZXJzIHRoZSByZWZyZXNoIHByb2Nlc3Mgd29ya3Mgb25seSB3aGVuIHRoZSB0YWIvd2luZG93IGlzIGluIHRoZVxuICAgICAqIGZvcmVncm91bmQgdG8gY29uc2VydmUgcmVzb3VyY2VzIGFzIHdlbGwgYXMgcHJldmVudCByYWNlIGNvbmRpdGlvbnMgYW5kXG4gICAgICogZmxvb2RpbmcgYXV0aCB3aXRoIHJlcXVlc3RzLiBJZiB5b3UgY2FsbCB0aGlzIG1ldGhvZCBhbnkgbWFuYWdlZFxuICAgICAqIHZpc2liaWxpdHkgY2hhbmdlIGNhbGxiYWNrIHdpbGwgYmUgcmVtb3ZlZCBhbmQgeW91IG11c3QgbWFuYWdlIHZpc2liaWxpdHlcbiAgICAgKiBjaGFuZ2VzIG9uIHlvdXIgb3duLlxuICAgICAqXG4gICAgICogT24gbm9uLWJyb3dzZXIgcGxhdGZvcm1zIHRoZSByZWZyZXNoIHByb2Nlc3Mgd29ya3MgKmNvbnRpbnVvdXNseSogaW4gdGhlXG4gICAgICogYmFja2dyb3VuZCwgd2hpY2ggbWF5IG5vdCBiZSBkZXNpcmFibGUuIFlvdSBzaG91bGQgaG9vayBpbnRvIHlvdXJcbiAgICAgKiBwbGF0Zm9ybSdzIGZvcmVncm91bmQgaW5kaWNhdGlvbiBtZWNoYW5pc20gYW5kIGNhbGwgdGhlc2UgbWV0aG9kc1xuICAgICAqIGFwcHJvcHJpYXRlbHkgdG8gY29uc2VydmUgcmVzb3VyY2VzLlxuICAgICAqXG4gICAgICoge0BzZWUgI3N0b3BBdXRvUmVmcmVzaH1cbiAgICAgKi9cbiAgICBhc3luYyBzdGFydEF1dG9SZWZyZXNoKCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVWaXNpYmlsaXR5Q2hhbmdlZENhbGxiYWNrKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0QXV0b1JlZnJlc2goKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgYW4gYWN0aXZlIGF1dG8gcmVmcmVzaCBwcm9jZXNzIHJ1bm5pbmcgaW4gdGhlIGJhY2tncm91bmQgKGlmIGFueSkuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgY2FsbCB0aGlzIG1ldGhvZCBhbnkgbWFuYWdlZCB2aXNpYmlsaXR5IGNoYW5nZSBjYWxsYmFjayB3aWxsIGJlXG4gICAgICogcmVtb3ZlZCBhbmQgeW91IG11c3QgbWFuYWdlIHZpc2liaWxpdHkgY2hhbmdlcyBvbiB5b3VyIG93bi5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgI3N0YXJ0QXV0b1JlZnJlc2h9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICovXG4gICAgYXN5bmMgc3RvcEF1dG9SZWZyZXNoKCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVWaXNpYmlsaXR5Q2hhbmdlZENhbGxiYWNrKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0b3BBdXRvUmVmcmVzaCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBhdXRvIHJlZnJlc2ggdG9rZW4gdGljay5cbiAgICAgKi9cbiAgICBhc3luYyBfYXV0b1JlZnJlc2hUb2tlblRpY2soKSB7XG4gICAgICAgIHRoaXMuX2RlYnVnKCcjX2F1dG9SZWZyZXNoVG9rZW5UaWNrKCknLCAnYmVnaW4nKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2FjcXVpcmVMb2NrKDAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0sIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnJlZnJlc2hfdG9rZW4gfHwgIXNlc3Npb24uZXhwaXJlc19hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZWJ1ZygnI19hdXRvUmVmcmVzaFRva2VuVGljaygpJywgJ25vIHNlc3Npb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXNzaW9uIHdpbGwgZXhwaXJlIGluIHRoaXMgbWFueSB0aWNrcyAob3IgaGFzIGFscmVhZHkgZXhwaXJlZCBpZiA8PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZXNJblRpY2tzID0gTWF0aC5mbG9vcigoc2Vzc2lvbi5leHBpcmVzX2F0ICogMTAwMCAtIG5vdykgLyBBVVRPX1JFRlJFU0hfVElDS19EVVJBVElPTl9NUyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJyNfYXV0b1JlZnJlc2hUb2tlblRpY2soKScsIGBhY2Nlc3MgdG9rZW4gZXhwaXJlcyBpbiAke2V4cGlyZXNJblRpY2tzfSB0aWNrcywgYSB0aWNrIGxhc3RzICR7QVVUT19SRUZSRVNIX1RJQ0tfRFVSQVRJT05fTVN9bXMsIHJlZnJlc2ggdGhyZXNob2xkIGlzICR7QVVUT19SRUZSRVNIX1RJQ0tfVEhSRVNIT0xEfSB0aWNrc2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBpcmVzSW5UaWNrcyA8PSBBVVRPX1JFRlJFU0hfVElDS19USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY2FsbFJlZnJlc2hUb2tlbihzZXNzaW9uLnJlZnJlc2hfdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRvIHJlZnJlc2ggdGljayBmYWlsZWQgd2l0aCBlcnJvci4gVGhpcyBpcyBsaWtlbHkgYSB0cmFuc2llbnQgZXJyb3IuJywgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlYnVnKCcjX2F1dG9SZWZyZXNoVG9rZW5UaWNrKCknLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzQWNxdWlyZVRpbWVvdXQgfHwgZSBpbnN0YW5jZW9mIExvY2tBY3F1aXJlVGltZW91dEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGVidWcoJ2F1dG8gcmVmcmVzaCB0b2tlbiB0aWNrIGxvY2sgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIG9uIHRoZSBicm93c2VyIC8gcGxhdGZvcm0sIHdoaWNoIGluLXR1cm4gcnVuXG4gICAgICogYWxnb3JpdGhtcyB3aGVuIHRoZSBicm93c2VyIHdpbmRvdy90YWIgYXJlIGluIGZvcmVncm91bmQuIE9uIG5vbi1icm93c2VyXG4gICAgICogcGxhdGZvcm1zIGl0IGFzc3VtZXMgYWx3YXlzIGZvcmVncm91bmQuXG4gICAgICovXG4gICAgYXN5bmMgX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuX2RlYnVnKCcjX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKScpO1xuICAgICAgICBpZiAoIWlzQnJvd3NlcigpIHx8ICEod2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvUmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICAgICAgLy8gaW4gbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRzIHRoZSByZWZyZXNoIHRva2VuIHRpY2tlciBydW5zIGFsd2F5c1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRBdXRvUmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnZpc2liaWxpdHlDaGFuZ2VkQ2FsbGJhY2sgPSBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2VkKGZhbHNlKTtcbiAgICAgICAgICAgIHdpbmRvdyA9PT0gbnVsbCB8fCB3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy52aXNpYmlsaXR5Q2hhbmdlZENhbGxiYWNrKTtcbiAgICAgICAgICAgIC8vIG5vdyBpbW1lZGlhdGVseSBjYWxsIHRoZSB2aXNiaWxpdHkgY2hhbmdlZCBjYWxsYmFjayB0byBzZXR1cCB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCB2aXNiaWxpdHkgc3RhdGVcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZWQodHJ1ZSk7IC8vIGluaXRpYWwgY2FsbFxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgcmVnaXN0ZXJlZCB3aXRoIGB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScpYC5cbiAgICAgKi9cbiAgICBhc3luYyBfb25WaXNpYmlsaXR5Q2hhbmdlZChjYWxsZWRGcm9tSW5pdGlhbGl6ZSkge1xuICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gYCNfb25WaXNpYmlsaXR5Q2hhbmdlZCgke2NhbGxlZEZyb21Jbml0aWFsaXplfSlgO1xuICAgICAgICB0aGlzLl9kZWJ1ZyhtZXRob2ROYW1lLCAndmlzaWJpbGl0eVN0YXRlJywgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvUmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICAgICAgLy8gaW4gYnJvd3NlciBlbnZpcm9ubWVudHMgdGhlIHJlZnJlc2ggdG9rZW4gdGlja2VyIHJ1bnMgb25seSBvbiBmb2N1c2VkIHRhYnNcbiAgICAgICAgICAgICAgICAvLyB3aGljaCBwcmV2ZW50cyByYWNlIGNvbmRpdGlvbnNcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydEF1dG9SZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhbGxlZEZyb21Jbml0aWFsaXplKSB7XG4gICAgICAgICAgICAgICAgLy8gY2FsbGVkIHdoZW4gdGhlIHZpc2liaWxpdHkgaGFzIGNoYW5nZWQsIGkuZS4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2l0aW9uZWQgZnJvbSBoaWRkZW4gLT4gdmlzaWJsZSBzbyB3ZSBuZWVkIHRvIHNlZSBpZiB0aGUgc2Vzc2lvblxuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBiZSByZWNvdmVyZWQgaW1tZWRpYXRlbHkuLi4gYnV0IHRvIGRvIHRoYXQgd2UgbmVlZCB0byBhY3F1aXJlXG4gICAgICAgICAgICAgICAgLy8gdGhlIGxvY2sgZmlyc3QgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQcm9taXNlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgIT09ICd2aXNpYmxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcobWV0aG9kTmFtZSwgJ2FjcXVpcmVkIHRoZSBsb2NrIHRvIHJlY292ZXIgdGhlIHNlc3Npb24sIGJ1dCB0aGUgYnJvd3NlciB2aXNpYmlsaXR5U3RhdGUgaXMgbm8gbG9uZ2VyIHZpc2libGUsIGFib3J0aW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmlsaXR5IGhhcyBjaGFuZ2VkIHdoaWxlIHdhaXRpbmcgZm9yIHRoZSBsb2NrLCBhYm9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY292ZXIgdGhlIHNlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcmVjb3ZlckFuZFJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICdoaWRkZW4nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvUmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RvcEF1dG9SZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHRoZSByZWxldmFudCBsb2dpbiBVUkwgZm9yIGEgdGhpcmQtcGFydHkgcHJvdmlkZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMucmVkaXJlY3RUbyBBIFVSTCBvciBtb2JpbGUgYWRkcmVzcyB0byBzZW5kIHRoZSB1c2VyIHRvIGFmdGVyIHRoZXkgYXJlIGNvbmZpcm1lZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5zY29wZXMgQSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiBzY29wZXMgZ3JhbnRlZCB0byB0aGUgT0F1dGggYXBwbGljYXRpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMucXVlcnlQYXJhbXMgQW4gb2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyBjb250YWluaW5nIHF1ZXJ5IHBhcmFtZXRlcnMgZ3JhbnRlZCB0byB0aGUgT0F1dGggYXBwbGljYXRpb24uXG4gICAgICovXG4gICAgYXN5bmMgX2dldFVybEZvclByb3ZpZGVyKHVybCwgcHJvdmlkZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gW2Bwcm92aWRlcj0ke2VuY29kZVVSSUNvbXBvbmVudChwcm92aWRlcil9YF07XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucmVkaXJlY3RUbykge1xuICAgICAgICAgICAgdXJsUGFyYW1zLnB1c2goYHJlZGlyZWN0X3RvPSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9wdGlvbnMucmVkaXJlY3RUbyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zY29wZXMpIHtcbiAgICAgICAgICAgIHVybFBhcmFtcy5wdXNoKGBzY29wZXM9JHtlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5zY29wZXMpfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZsb3dUeXBlID09PSAncGtjZScpIHtcbiAgICAgICAgICAgIGNvbnN0IFtjb2RlQ2hhbGxlbmdlLCBjb2RlQ2hhbGxlbmdlTWV0aG9kXSA9IGF3YWl0IGdldENvZGVDaGFsbGVuZ2VBbmRNZXRob2QodGhpcy5zdG9yYWdlLCB0aGlzLnN0b3JhZ2VLZXkpO1xuICAgICAgICAgICAgY29uc3QgZmxvd1BhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIGNvZGVfY2hhbGxlbmdlOiBgJHtlbmNvZGVVUklDb21wb25lbnQoY29kZUNoYWxsZW5nZSl9YCxcbiAgICAgICAgICAgICAgICBjb2RlX2NoYWxsZW5nZV9tZXRob2Q6IGAke2VuY29kZVVSSUNvbXBvbmVudChjb2RlQ2hhbGxlbmdlTWV0aG9kKX1gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1cmxQYXJhbXMucHVzaChmbG93UGFyYW1zLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucXVlcnlQYXJhbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zLnF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIHVybFBhcmFtcy5wdXNoKHF1ZXJ5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2tpcEJyb3dzZXJSZWRpcmVjdCkge1xuICAgICAgICAgICAgdXJsUGFyYW1zLnB1c2goYHNraXBfaHR0cF9yZWRpcmVjdD0ke29wdGlvbnMuc2tpcEJyb3dzZXJSZWRpcmVjdH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dXJsfT8ke3VybFBhcmFtcy5qb2luKCcmJyl9YDtcbiAgICB9XG4gICAgYXN5bmMgX3VuZW5yb2xsKHBhcmFtcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3VzZVNlc3Npb24oYXN5bmMgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHNlc3Npb25EYXRhLCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogc2Vzc2lvbkVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnREVMRVRFJywgYCR7dGhpcy51cmx9L2ZhY3RvcnMvJHtwYXJhbXMuZmFjdG9ySWR9YCwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGp3dDogKF9hID0gc2Vzc2lvbkRhdGEgPT09IG51bGwgfHwgc2Vzc2lvbkRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlc3Npb25EYXRhLnNlc3Npb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChpc0F1dGhFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX2Vucm9sbChwYXJhbXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvbkRhdGEsIGVycm9yOiBzZXNzaW9uRXJyb3IgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBzZXNzaW9uRXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IE9iamVjdC5hc3NpZ24oeyBmcmllbmRseV9uYW1lOiBwYXJhbXMuZnJpZW5kbHlOYW1lLCBmYWN0b3JfdHlwZTogcGFyYW1zLmZhY3RvclR5cGUgfSwgKHBhcmFtcy5mYWN0b3JUeXBlID09PSAncGhvbmUnID8geyBwaG9uZTogcGFyYW1zLnBob25lIH0gOiB7IGlzc3VlcjogcGFyYW1zLmlzc3VlciB9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBgJHt0aGlzLnVybH0vZmFjdG9yc2AsIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICBqd3Q6IChfYSA9IHNlc3Npb25EYXRhID09PSBudWxsIHx8IHNlc3Npb25EYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXNzaW9uRGF0YS5zZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmZhY3RvclR5cGUgPT09ICd0b3RwJyAmJiAoKF9iID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnRvdHApID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5xcl9jb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnRvdHAucXJfY29kZSA9IGBkYXRhOmltYWdlL3N2Zyt4bWw7dXRmLTgsJHtkYXRhLnRvdHAucXJfY29kZX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAc2VlIEdvVHJ1ZU1GQUFwaSN2ZXJpZnl9XG4gICAgICovXG4gICAgYXN5bmMgX3ZlcmlmeShwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHNlc3Npb25EYXRhLCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBzZXNzaW9uRXJyb3IgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBfcmVxdWVzdCh0aGlzLmZldGNoLCAnUE9TVCcsIGAke3RoaXMudXJsfS9mYWN0b3JzLyR7cGFyYW1zLmZhY3RvcklkfS92ZXJpZnlgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB7IGNvZGU6IHBhcmFtcy5jb2RlLCBjaGFsbGVuZ2VfaWQ6IHBhcmFtcy5jaGFsbGVuZ2VJZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgand0OiAoX2EgPSBzZXNzaW9uRGF0YSA9PT0gbnVsbCB8fCBzZXNzaW9uRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2Vzc2lvbkRhdGEuc2Vzc2lvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zYXZlU2Vzc2lvbihPYmplY3QuYXNzaWduKHsgZXhwaXJlc19hdDogTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gMTAwMCkgKyBkYXRhLmV4cGlyZXNfaW4gfSwgZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9ub3RpZnlBbGxTdWJzY3JpYmVycygnTUZBX0NIQUxMRU5HRV9WRVJJRklFRCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAc2VlIEdvVHJ1ZU1GQUFwaSNjaGFsbGVuZ2V9XG4gICAgICovXG4gICAgYXN5bmMgX2NoYWxsZW5nZShwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl91c2VTZXNzaW9uKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHNlc3Npb25EYXRhLCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBzZXNzaW9uRXJyb3IgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgX3JlcXVlc3QodGhpcy5mZXRjaCwgJ1BPU1QnLCBgJHt0aGlzLnVybH0vZmFjdG9ycy8ke3BhcmFtcy5mYWN0b3JJZH0vY2hhbGxlbmdlYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogeyBjaGFubmVsOiBwYXJhbXMuY2hhbm5lbCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgand0OiAoX2EgPSBzZXNzaW9uRGF0YSA9PT0gbnVsbCB8fCBzZXNzaW9uRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2Vzc2lvbkRhdGEuc2Vzc2lvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBdXRoRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICoge0BzZWUgR29UcnVlTUZBQXBpI2NoYWxsZW5nZUFuZFZlcmlmeX1cbiAgICAgKi9cbiAgICBhc3luYyBfY2hhbGxlbmdlQW5kVmVyaWZ5KHBhcmFtcykge1xuICAgICAgICAvLyBib3RoIF9jaGFsbGVuZ2UgYW5kIF92ZXJpZnkgaW5kZXBlbmRlbnRseSBhY3F1aXJlIHRoZSBsb2NrLCBzbyBubyBuZWVkXG4gICAgICAgIC8vIHRvIGFjcXVpcmUgaXQgaGVyZVxuICAgICAgICBjb25zdCB7IGRhdGE6IGNoYWxsZW5nZURhdGEsIGVycm9yOiBjaGFsbGVuZ2VFcnJvciB9ID0gYXdhaXQgdGhpcy5fY2hhbGxlbmdlKHtcbiAgICAgICAgICAgIGZhY3RvcklkOiBwYXJhbXMuZmFjdG9ySWQsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY2hhbGxlbmdlRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiBjaGFsbGVuZ2VFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl92ZXJpZnkoe1xuICAgICAgICAgICAgZmFjdG9ySWQ6IHBhcmFtcy5mYWN0b3JJZCxcbiAgICAgICAgICAgIGNoYWxsZW5nZUlkOiBjaGFsbGVuZ2VEYXRhLmlkLFxuICAgICAgICAgICAgY29kZTogcGFyYW1zLmNvZGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB7QHNlZSBHb1RydWVNRkFBcGkjbGlzdEZhY3RvcnN9XG4gICAgICovXG4gICAgYXN5bmMgX2xpc3RGYWN0b3JzKCkge1xuICAgICAgICAvLyB1c2UgI2dldFVzZXIgaW5zdGVhZCBvZiAjX2dldFVzZXIgYXMgdGhlIGZvcm1lciBhY3F1aXJlcyBhIGxvY2tcbiAgICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IHVzZXJFcnJvciwgfSA9IGF3YWl0IHRoaXMuZ2V0VXNlcigpO1xuICAgICAgICBpZiAodXNlckVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvcjogdXNlckVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmFjdG9ycyA9ICh1c2VyID09PSBudWxsIHx8IHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXIuZmFjdG9ycykgfHwgW107XG4gICAgICAgIGNvbnN0IHRvdHAgPSBmYWN0b3JzLmZpbHRlcigoZmFjdG9yKSA9PiBmYWN0b3IuZmFjdG9yX3R5cGUgPT09ICd0b3RwJyAmJiBmYWN0b3Iuc3RhdHVzID09PSAndmVyaWZpZWQnKTtcbiAgICAgICAgY29uc3QgcGhvbmUgPSBmYWN0b3JzLmZpbHRlcigoZmFjdG9yKSA9PiBmYWN0b3IuZmFjdG9yX3R5cGUgPT09ICdwaG9uZScgJiYgZmFjdG9yLnN0YXR1cyA9PT0gJ3ZlcmlmaWVkJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgYWxsOiBmYWN0b3JzLFxuICAgICAgICAgICAgICAgIHRvdHAsXG4gICAgICAgICAgICAgICAgcGhvbmUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHtAc2VlIEdvVHJ1ZU1GQUFwaSNnZXRBdXRoZW50aWNhdG9yQXNzdXJhbmNlTGV2ZWx9XG4gICAgICovXG4gICAgYXN5bmMgX2dldEF1dGhlbnRpY2F0b3JBc3N1cmFuY2VMZXZlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjcXVpcmVMb2NrKC0xLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fdXNlU2Vzc2lvbihhc3luYyAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogc2Vzc2lvbkVycm9yLCB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3I6IHNlc3Npb25FcnJvciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgY3VycmVudExldmVsOiBudWxsLCBuZXh0TGV2ZWw6IG51bGwsIGN1cnJlbnRBdXRoZW50aWNhdGlvbk1ldGhvZHM6IFtdIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwYXlsb2FkIH0gPSBkZWNvZGVKV1Qoc2Vzc2lvbi5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50TGV2ZWwgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLmFhbCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwgPSBwYXlsb2FkLmFhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5leHRMZXZlbCA9IGN1cnJlbnRMZXZlbDtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZmllZEZhY3RvcnMgPSAoX2IgPSAoX2EgPSBzZXNzaW9uLnVzZXIuZmFjdG9ycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbHRlcigoZmFjdG9yKSA9PiBmYWN0b3Iuc3RhdHVzID09PSAndmVyaWZpZWQnKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgICAgICAgICAgICAgaWYgKHZlcmlmaWVkRmFjdG9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRMZXZlbCA9ICdhYWwyJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEF1dGhlbnRpY2F0aW9uTWV0aG9kcyA9IHBheWxvYWQuYW1yIHx8IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHsgY3VycmVudExldmVsLCBuZXh0TGV2ZWwsIGN1cnJlbnRBdXRoZW50aWNhdGlvbk1ldGhvZHMgfSwgZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hKd2soa2lkLCBqd2tzID0geyBrZXlzOiBbXSB9KSB7XG4gICAgICAgIC8vIHRyeSBmZXRjaGluZyBmcm9tIHRoZSBzdXBwbGllZCBqd2tzXG4gICAgICAgIGxldCBqd2sgPSBqd2tzLmtleXMuZmluZCgoa2V5KSA9PiBrZXkua2lkID09PSBraWQpO1xuICAgICAgICBpZiAoandrKSB7XG4gICAgICAgICAgICByZXR1cm4gandrO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyeSBmZXRjaGluZyBmcm9tIGNhY2hlXG4gICAgICAgIGp3ayA9IHRoaXMuandrcy5rZXlzLmZpbmQoKGtleSkgPT4ga2V5LmtpZCA9PT0ga2lkKTtcbiAgICAgICAgLy8gandrIGV4aXN0cyBhbmQgandrcyBpc24ndCBzdGFsZVxuICAgICAgICBpZiAoandrICYmIHRoaXMuandrc19jYWNoZWRfYXQgKyBKV0tTX1RUTCA+IERhdGUubm93KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBqd2s7XG4gICAgICAgIH1cbiAgICAgICAgLy8gandrIGlzbid0IGNhY2hlZCBpbiBtZW1vcnkgc28gd2UgbmVlZCB0byBmZXRjaCBpdCBmcm9tIHRoZSB3ZWxsLWtub3duIGVuZHBvaW50XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IF9yZXF1ZXN0KHRoaXMuZmV0Y2gsICdHRVQnLCBgJHt0aGlzLnVybH0vLndlbGwta25vd24vandrcy5qc29uYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRhdGEua2V5cyB8fCBkYXRhLmtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXV0aEludmFsaWRKd3RFcnJvcignSldLUyBpcyBlbXB0eScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuandrcyA9IGRhdGE7XG4gICAgICAgIHRoaXMuandrc19jYWNoZWRfYXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAvLyBGaW5kIHRoZSBzaWduaW5nIGtleVxuICAgICAgICBqd2sgPSBkYXRhLmtleXMuZmluZCgoa2V5KSA9PiBrZXkua2lkID09PSBraWQpO1xuICAgICAgICBpZiAoIWp3aykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhJbnZhbGlkSnd0RXJyb3IoJ05vIG1hdGNoaW5nIHNpZ25pbmcga2V5IGZvdW5kIGluIEpXS1MnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gandrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZXhwZXJpbWVudGFsIFRoaXMgbWV0aG9kIG1heSBjaGFuZ2UgaW4gZnV0dXJlIHZlcnNpb25zLlxuICAgICAqIEBkZXNjcmlwdGlvbiBHZXRzIHRoZSBjbGFpbXMgZnJvbSBhIEpXVC4gSWYgdGhlIEpXVCBpcyBzeW1tZXRyaWMgSldUcywgaXQgd2lsbCBjYWxsIGdldFVzZXIoKSB0byB2ZXJpZnkgYWdhaW5zdCB0aGUgc2VydmVyLiBJZiB0aGUgSldUIGlzIGFzeW1tZXRyaWMsIGl0IHdpbGwgYmUgdmVyaWZpZWQgYWdhaW5zdCB0aGUgSldLUyB1c2luZyB0aGUgV2ViQ3J5cHRvIEFQSS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRDbGFpbXMoand0LCBqd2tzID0geyBrZXlzOiBbXSB9KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgdG9rZW4gPSBqd3Q7XG4gICAgICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIHx8ICFkYXRhLnNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBkYXRhLnNlc3Npb24uYWNjZXNzX3Rva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBoZWFkZXIsIHBheWxvYWQsIHNpZ25hdHVyZSwgcmF3OiB7IGhlYWRlcjogcmF3SGVhZGVyLCBwYXlsb2FkOiByYXdQYXlsb2FkIH0sIH0gPSBkZWNvZGVKV1QodG9rZW4pO1xuICAgICAgICAgICAgLy8gUmVqZWN0IGV4cGlyZWQgSldUc1xuICAgICAgICAgICAgdmFsaWRhdGVFeHAocGF5bG9hZC5leHApO1xuICAgICAgICAgICAgLy8gSWYgc3ltbWV0cmljIGFsZ29yaXRobSBvciBXZWJDcnlwdG8gQVBJIGlzIHVuYXZhaWxhYmxlLCBmYWxsYmFjayB0byBnZXRVc2VyKClcbiAgICAgICAgICAgIGlmICghaGVhZGVyLmtpZCB8fFxuICAgICAgICAgICAgICAgIGhlYWRlci5hbGcgPT09ICdIUzI1NicgfHxcbiAgICAgICAgICAgICAgICAhKCdjcnlwdG8nIGluIGdsb2JhbFRoaXMgJiYgJ3N1YnRsZScgaW4gZ2xvYmFsVGhpcy5jcnlwdG8pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5nZXRVc2VyKHRva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGdldFVzZXIgc3VjY2VlZHMgc28gdGhlIGNsYWltcyBpbiB0aGUgSldUIGNhbiBiZSB0cnVzdGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhaW1zOiBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWxnb3JpdGhtID0gZ2V0QWxnb3JpdGhtKGhlYWRlci5hbGcpO1xuICAgICAgICAgICAgY29uc3Qgc2lnbmluZ0tleSA9IGF3YWl0IHRoaXMuZmV0Y2hKd2soaGVhZGVyLmtpZCwgandrcyk7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IEpXSyB0byBDcnlwdG9LZXlcbiAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdqd2snLCBzaWduaW5nS2V5LCBhbGdvcml0aG0sIHRydWUsIFtcbiAgICAgICAgICAgICAgICAndmVyaWZ5JyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBzaWduYXR1cmVcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLnZlcmlmeShhbGdvcml0aG0sIHB1YmxpY0tleSwgc2lnbmF0dXJlLCBzdHJpbmdUb1VpbnQ4QXJyYXkoYCR7cmF3SGVhZGVyfS4ke3Jhd1BheWxvYWR9YCkpO1xuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhJbnZhbGlkSnd0RXJyb3IoJ0ludmFsaWQgSldUIHNpZ25hdHVyZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdmVyaWZpY2F0aW9uIHN1Y2NlZWRzLCBkZWNvZGUgYW5kIHJldHVybiBjbGFpbXNcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjbGFpbXM6IHBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGlzQXV0aEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbkdvVHJ1ZUNsaWVudC5uZXh0SW5zdGFuY2VJRCA9IDA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Hb1RydWVDbGllbnQuanMubWFwIiwiaW1wb3J0IEdvVHJ1ZUNsaWVudCBmcm9tICcuL0dvVHJ1ZUNsaWVudCc7XG5jb25zdCBBdXRoQ2xpZW50ID0gR29UcnVlQ2xpZW50O1xuZXhwb3J0IGRlZmF1bHQgQXV0aENsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dGhDbGllbnQuanMubWFwIiwiaW1wb3J0IHsgQXV0aENsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9hdXRoLWpzJztcbmV4cG9ydCBjbGFzcyBTdXBhYmFzZUF1dGhDbGllbnQgZXh0ZW5kcyBBdXRoQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1cGFiYXNlQXV0aENsaWVudC5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEZ1bmN0aW9uc0NsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9mdW5jdGlvbnMtanMnO1xuaW1wb3J0IHsgUG9zdGdyZXN0Q2xpZW50LCB9IGZyb20gJ0BzdXBhYmFzZS9wb3N0Z3Jlc3QtanMnO1xuaW1wb3J0IHsgUmVhbHRpbWVDbGllbnQsIH0gZnJvbSAnQHN1cGFiYXNlL3JlYWx0aW1lLWpzJztcbmltcG9ydCB7IFN0b3JhZ2VDbGllbnQgYXMgU3VwYWJhc2VTdG9yYWdlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N0b3JhZ2UtanMnO1xuaW1wb3J0IHsgREVGQVVMVF9HTE9CQUxfT1BUSU9OUywgREVGQVVMVF9EQl9PUFRJT05TLCBERUZBVUxUX0FVVEhfT1BUSU9OUywgREVGQVVMVF9SRUFMVElNRV9PUFRJT05TLCB9IGZyb20gJy4vbGliL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBmZXRjaFdpdGhBdXRoIH0gZnJvbSAnLi9saWIvZmV0Y2gnO1xuaW1wb3J0IHsgc3RyaXBUcmFpbGluZ1NsYXNoLCBhcHBseVNldHRpbmdEZWZhdWx0cyB9IGZyb20gJy4vbGliL2hlbHBlcnMnO1xuaW1wb3J0IHsgU3VwYWJhc2VBdXRoQ2xpZW50IH0gZnJvbSAnLi9saWIvU3VwYWJhc2VBdXRoQ2xpZW50Jztcbi8qKlxuICogU3VwYWJhc2UgQ2xpZW50LlxuICpcbiAqIEFuIGlzb21vcnBoaWMgSmF2YXNjcmlwdCBjbGllbnQgZm9yIGludGVyYWN0aW5nIHdpdGggUG9zdGdyZXMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1cGFiYXNlQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY2xpZW50IGZvciB1c2UgaW4gdGhlIGJyb3dzZXIuXG4gICAgICogQHBhcmFtIHN1cGFiYXNlVXJsIFRoZSB1bmlxdWUgU3VwYWJhc2UgVVJMIHdoaWNoIGlzIHN1cHBsaWVkIHdoZW4geW91IGNyZWF0ZSBhIG5ldyBwcm9qZWN0IGluIHlvdXIgcHJvamVjdCBkYXNoYm9hcmQuXG4gICAgICogQHBhcmFtIHN1cGFiYXNlS2V5IFRoZSB1bmlxdWUgU3VwYWJhc2UgS2V5IHdoaWNoIGlzIHN1cHBsaWVkIHdoZW4geW91IGNyZWF0ZSBhIG5ldyBwcm9qZWN0IGluIHlvdXIgcHJvamVjdCBkYXNoYm9hcmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuZGIuc2NoZW1hIFlvdSBjYW4gc3dpdGNoIGluIGJldHdlZW4gc2NoZW1hcy4gVGhlIHNjaGVtYSBuZWVkcyB0byBiZSBvbiB0aGUgbGlzdCBvZiBleHBvc2VkIHNjaGVtYXMgaW5zaWRlIFN1cGFiYXNlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmF1dGguYXV0b1JlZnJlc2hUb2tlbiBTZXQgdG8gXCJ0cnVlXCIgaWYgeW91IHdhbnQgdG8gYXV0b21hdGljYWxseSByZWZyZXNoIHRoZSB0b2tlbiBiZWZvcmUgZXhwaXJpbmcuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYXV0aC5wZXJzaXN0U2Vzc2lvbiBTZXQgdG8gXCJ0cnVlXCIgaWYgeW91IHdhbnQgdG8gYXV0b21hdGljYWxseSBzYXZlIHRoZSB1c2VyIHNlc3Npb24gaW50byBsb2NhbCBzdG9yYWdlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmF1dGguZGV0ZWN0U2Vzc2lvbkluVXJsIFNldCB0byBcInRydWVcIiBpZiB5b3Ugd2FudCB0byBhdXRvbWF0aWNhbGx5IGRldGVjdHMgT0F1dGggZ3JhbnRzIGluIHRoZSBVUkwgYW5kIHNpZ25zIGluIHRoZSB1c2VyLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLnJlYWx0aW1lIE9wdGlvbnMgcGFzc2VkIGFsb25nIHRvIHJlYWx0aW1lLWpzIGNvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmdsb2JhbC5mZXRjaCBBIGN1c3RvbSBmZXRjaCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5nbG9iYWwuaGVhZGVycyBBbnkgYWRkaXRpb25hbCBoZWFkZXJzIHRvIHNlbmQgd2l0aCBlYWNoIG5ldHdvcmsgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXksIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMuc3VwYWJhc2VVcmwgPSBzdXBhYmFzZVVybDtcbiAgICAgICAgdGhpcy5zdXBhYmFzZUtleSA9IHN1cGFiYXNlS2V5O1xuICAgICAgICBpZiAoIXN1cGFiYXNlVXJsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdXBhYmFzZVVybCBpcyByZXF1aXJlZC4nKTtcbiAgICAgICAgaWYgKCFzdXBhYmFzZUtleSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3VwYWJhc2VLZXkgaXMgcmVxdWlyZWQuJyk7XG4gICAgICAgIGNvbnN0IF9zdXBhYmFzZVVybCA9IHN0cmlwVHJhaWxpbmdTbGFzaChzdXBhYmFzZVVybCk7XG4gICAgICAgIHRoaXMucmVhbHRpbWVVcmwgPSBgJHtfc3VwYWJhc2VVcmx9L3JlYWx0aW1lL3YxYC5yZXBsYWNlKC9eaHR0cC9pLCAnd3MnKTtcbiAgICAgICAgdGhpcy5hdXRoVXJsID0gYCR7X3N1cGFiYXNlVXJsfS9hdXRoL3YxYDtcbiAgICAgICAgdGhpcy5zdG9yYWdlVXJsID0gYCR7X3N1cGFiYXNlVXJsfS9zdG9yYWdlL3YxYDtcbiAgICAgICAgdGhpcy5mdW5jdGlvbnNVcmwgPSBgJHtfc3VwYWJhc2VVcmx9L2Z1bmN0aW9ucy92MWA7XG4gICAgICAgIC8vIGRlZmF1bHQgc3RvcmFnZSBrZXkgdXNlcyB0aGUgc3VwYWJhc2UgcHJvamVjdCByZWYgYXMgYSBuYW1lc3BhY2VcbiAgICAgICAgY29uc3QgZGVmYXVsdFN0b3JhZ2VLZXkgPSBgc2ItJHtuZXcgVVJMKHRoaXMuYXV0aFVybCkuaG9zdG5hbWUuc3BsaXQoJy4nKVswXX0tYXV0aC10b2tlbmA7XG4gICAgICAgIGNvbnN0IERFRkFVTFRTID0ge1xuICAgICAgICAgICAgZGI6IERFRkFVTFRfREJfT1BUSU9OUyxcbiAgICAgICAgICAgIHJlYWx0aW1lOiBERUZBVUxUX1JFQUxUSU1FX09QVElPTlMsXG4gICAgICAgICAgICBhdXRoOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfQVVUSF9PUFRJT05TKSwgeyBzdG9yYWdlS2V5OiBkZWZhdWx0U3RvcmFnZUtleSB9KSxcbiAgICAgICAgICAgIGdsb2JhbDogREVGQVVMVF9HTE9CQUxfT1BUSU9OUyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBhcHBseVNldHRpbmdEZWZhdWx0cyhvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSwgREVGQVVMVFMpO1xuICAgICAgICB0aGlzLnN0b3JhZ2VLZXkgPSAoX2EgPSBzZXR0aW5ncy5hdXRoLnN0b3JhZ2VLZXkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnO1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSAoX2IgPSBzZXR0aW5ncy5nbG9iYWwuaGVhZGVycykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge307XG4gICAgICAgIGlmICghc2V0dGluZ3MuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgIHRoaXMuYXV0aCA9IHRoaXMuX2luaXRTdXBhYmFzZUF1dGhDbGllbnQoKF9jID0gc2V0dGluZ3MuYXV0aCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30sIHRoaXMuaGVhZGVycywgc2V0dGluZ3MuZ2xvYmFsLmZldGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzZXR0aW5ncy5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIHRoaXMuYXV0aCA9IG5ldyBQcm94eSh7fSwge1xuICAgICAgICAgICAgICAgIGdldDogKF8sIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBAc3VwYWJhc2Uvc3VwYWJhc2UtanM6IFN1cGFiYXNlIENsaWVudCBpcyBjb25maWd1cmVkIHdpdGggdGhlIGFjY2Vzc1Rva2VuIG9wdGlvbiwgYWNjZXNzaW5nIHN1cGFiYXNlLmF1dGguJHtTdHJpbmcocHJvcCl9IGlzIG5vdCBwb3NzaWJsZWApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZldGNoID0gZmV0Y2hXaXRoQXV0aChzdXBhYmFzZUtleSwgdGhpcy5fZ2V0QWNjZXNzVG9rZW4uYmluZCh0aGlzKSwgc2V0dGluZ3MuZ2xvYmFsLmZldGNoKTtcbiAgICAgICAgdGhpcy5yZWFsdGltZSA9IHRoaXMuX2luaXRSZWFsdGltZUNsaWVudChPYmplY3QuYXNzaWduKHsgaGVhZGVyczogdGhpcy5oZWFkZXJzLCBhY2Nlc3NUb2tlbjogdGhpcy5fZ2V0QWNjZXNzVG9rZW4uYmluZCh0aGlzKSB9LCBzZXR0aW5ncy5yZWFsdGltZSkpO1xuICAgICAgICB0aGlzLnJlc3QgPSBuZXcgUG9zdGdyZXN0Q2xpZW50KGAke19zdXBhYmFzZVVybH0vcmVzdC92MWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIHNjaGVtYTogc2V0dGluZ3MuZGIuc2NoZW1hLFxuICAgICAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2gsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXNldHRpbmdzLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5Gb3JBdXRoRXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3VwYWJhc2UgRnVuY3Rpb25zIGFsbG93cyB5b3UgdG8gZGVwbG95IGFuZCBpbnZva2UgZWRnZSBmdW5jdGlvbnMuXG4gICAgICovXG4gICAgZ2V0IGZ1bmN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbnNDbGllbnQodGhpcy5mdW5jdGlvbnNVcmwsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGN1c3RvbUZldGNoOiB0aGlzLmZldGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3VwYWJhc2UgU3RvcmFnZSBhbGxvd3MgeW91IHRvIG1hbmFnZSB1c2VyLWdlbmVyYXRlZCBjb250ZW50LCBzdWNoIGFzIHBob3RvcyBvciB2aWRlb3MuXG4gICAgICovXG4gICAgZ2V0IHN0b3JhZ2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3VwYWJhc2VTdG9yYWdlQ2xpZW50KHRoaXMuc3RvcmFnZVVybCwgdGhpcy5oZWFkZXJzLCB0aGlzLmZldGNoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhIHF1ZXJ5IG9uIGEgdGFibGUgb3IgYSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbGF0aW9uIC0gVGhlIHRhYmxlIG9yIHZpZXcgbmFtZSB0byBxdWVyeVxuICAgICAqL1xuICAgIGZyb20ocmVsYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdC5mcm9tKHJlbGF0aW9uKTtcbiAgICB9XG4gICAgLy8gTk9URTogc2lnbmF0dXJlcyBtdXN0IGJlIGtlcHQgaW4gc3luYyB3aXRoIFBvc3RncmVzdENsaWVudC5zY2hlbWFcbiAgICAvKipcbiAgICAgKiBTZWxlY3QgYSBzY2hlbWEgdG8gcXVlcnkgb3IgcGVyZm9ybSBhbiBmdW5jdGlvbiAocnBjKSBjYWxsLlxuICAgICAqXG4gICAgICogVGhlIHNjaGVtYSBuZWVkcyB0byBiZSBvbiB0aGUgbGlzdCBvZiBleHBvc2VkIHNjaGVtYXMgaW5zaWRlIFN1cGFiYXNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjaGVtYSAtIFRoZSBzY2hlbWEgdG8gcXVlcnlcbiAgICAgKi9cbiAgICBzY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3Quc2NoZW1hKHNjaGVtYSk7XG4gICAgfVxuICAgIC8vIE5PVEU6IHNpZ25hdHVyZXMgbXVzdCBiZSBrZXB0IGluIHN5bmMgd2l0aCBQb3N0Z3Jlc3RDbGllbnQucnBjXG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhIGZ1bmN0aW9uIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gbmFtZSB0byBjYWxsXG4gICAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIGZ1bmN0aW9uIGNhbGxcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE5hbWVkIHBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5oZWFkIC0gV2hlbiBzZXQgdG8gYHRydWVgLCBgZGF0YWAgd2lsbCBub3QgYmUgcmV0dXJuZWQuXG4gICAgICogVXNlZnVsIGlmIHlvdSBvbmx5IG5lZWQgdGhlIGNvdW50LlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmdldCAtIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGhcbiAgICAgKiByZWFkLW9ubHkgYWNjZXNzIG1vZGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY291bnQgLSBDb3VudCBhbGdvcml0aG0gdG8gdXNlIHRvIGNvdW50IHJvd3MgcmV0dXJuZWQgYnkgdGhlXG4gICAgICogZnVuY3Rpb24uIE9ubHkgYXBwbGljYWJsZSBmb3IgW3NldC1yZXR1cm5pbmdcbiAgICAgKiBmdW5jdGlvbnNdKGh0dHBzOi8vd3d3LnBvc3RncmVzcWwub3JnL2RvY3MvY3VycmVudC9mdW5jdGlvbnMtc3JmLmh0bWwpLlxuICAgICAqXG4gICAgICogYFwiZXhhY3RcImA6IEV4YWN0IGJ1dCBzbG93IGNvdW50IGFsZ29yaXRobS4gUGVyZm9ybXMgYSBgQ09VTlQoKilgIHVuZGVyIHRoZVxuICAgICAqIGhvb2QuXG4gICAgICpcbiAgICAgKiBgXCJwbGFubmVkXCJgOiBBcHByb3hpbWF0ZWQgYnV0IGZhc3QgY291bnQgYWxnb3JpdGhtLiBVc2VzIHRoZSBQb3N0Z3Jlc1xuICAgICAqIHN0YXRpc3RpY3MgdW5kZXIgdGhlIGhvb2QuXG4gICAgICpcbiAgICAgKiBgXCJlc3RpbWF0ZWRcImA6IFVzZXMgZXhhY3QgY291bnQgZm9yIGxvdyBudW1iZXJzIGFuZCBwbGFubmVkIGNvdW50IGZvciBoaWdoXG4gICAgICogbnVtYmVycy5cbiAgICAgKi9cbiAgICBycGMoZm4sIGFyZ3MgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3QucnBjKGZuLCBhcmdzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFJlYWx0aW1lIGNoYW5uZWwgd2l0aCBCcm9hZGNhc3QsIFByZXNlbmNlLCBhbmQgUG9zdGdyZXMgQ2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIFJlYWx0aW1lIGNoYW5uZWwuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBSZWFsdGltZSBjaGFubmVsLlxuICAgICAqXG4gICAgICovXG4gICAgY2hhbm5lbChuYW1lLCBvcHRzID0geyBjb25maWc6IHt9IH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbHRpbWUuY2hhbm5lbChuYW1lLCBvcHRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgUmVhbHRpbWUgY2hhbm5lbHMuXG4gICAgICovXG4gICAgZ2V0Q2hhbm5lbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWx0aW1lLmdldENoYW5uZWxzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVuc3Vic2NyaWJlcyBhbmQgcmVtb3ZlcyBSZWFsdGltZSBjaGFubmVsIGZyb20gUmVhbHRpbWUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFsdGltZUNoYW5uZWx9IGNoYW5uZWwgLSBUaGUgbmFtZSBvZiB0aGUgUmVhbHRpbWUgY2hhbm5lbC5cbiAgICAgKlxuICAgICAqL1xuICAgIHJlbW92ZUNoYW5uZWwoY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsdGltZS5yZW1vdmVDaGFubmVsKGNoYW5uZWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnN1YnNjcmliZXMgYW5kIHJlbW92ZXMgYWxsIFJlYWx0aW1lIGNoYW5uZWxzIGZyb20gUmVhbHRpbWUgY2xpZW50LlxuICAgICAqL1xuICAgIHJlbW92ZUFsbENoYW5uZWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsdGltZS5yZW1vdmVBbGxDaGFubmVscygpO1xuICAgIH1cbiAgICBfZ2V0QWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLmFjY2Vzc1Rva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHlpZWxkIHRoaXMuYXV0aC5nZXRTZXNzaW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gZGF0YS5zZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWNjZXNzX3Rva2VuKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2luaXRTdXBhYmFzZUF1dGhDbGllbnQoeyBhdXRvUmVmcmVzaFRva2VuLCBwZXJzaXN0U2Vzc2lvbiwgZGV0ZWN0U2Vzc2lvbkluVXJsLCBzdG9yYWdlLCBzdG9yYWdlS2V5LCBmbG93VHlwZSwgbG9jaywgZGVidWcsIH0sIGhlYWRlcnMsIGZldGNoKSB7XG4gICAgICAgIGNvbnN0IGF1dGhIZWFkZXJzID0ge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuc3VwYWJhc2VLZXl9YCxcbiAgICAgICAgICAgIGFwaWtleTogYCR7dGhpcy5zdXBhYmFzZUtleX1gLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IFN1cGFiYXNlQXV0aENsaWVudCh7XG4gICAgICAgICAgICB1cmw6IHRoaXMuYXV0aFVybCxcbiAgICAgICAgICAgIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYXV0aEhlYWRlcnMpLCBoZWFkZXJzKSxcbiAgICAgICAgICAgIHN0b3JhZ2VLZXk6IHN0b3JhZ2VLZXksXG4gICAgICAgICAgICBhdXRvUmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgcGVyc2lzdFNlc3Npb24sXG4gICAgICAgICAgICBkZXRlY3RTZXNzaW9uSW5VcmwsXG4gICAgICAgICAgICBzdG9yYWdlLFxuICAgICAgICAgICAgZmxvd1R5cGUsXG4gICAgICAgICAgICBsb2NrLFxuICAgICAgICAgICAgZGVidWcsXG4gICAgICAgICAgICBmZXRjaCxcbiAgICAgICAgICAgIC8vIGF1dGggY2hlY2tzIGlmIHRoZXJlIGlzIGEgY3VzdG9tIGF1dGhvcml6YWl0b24gaGVhZGVyIHVzaW5nIHRoaXMgZmxhZ1xuICAgICAgICAgICAgLy8gc28gaXQga25vd3Mgd2hldGhlciB0byByZXR1cm4gYW4gZXJyb3Igd2hlbiBnZXRVc2VyIGlzIGNhbGxlZCB3aXRoIG5vIHNlc3Npb25cbiAgICAgICAgICAgIGhhc0N1c3RvbUF1dGhvcml6YXRpb25IZWFkZXI6ICdBdXRob3JpemF0aW9uJyBpbiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfaW5pdFJlYWx0aW1lQ2xpZW50KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFsdGltZUNsaWVudCh0aGlzLnJlYWx0aW1lVXJsLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHBhcmFtczogT2JqZWN0LmFzc2lnbih7IGFwaWtleTogdGhpcy5zdXBhYmFzZUtleSB9LCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucGFyYW1zKSB9KSk7XG4gICAgfVxuICAgIF9saXN0ZW5Gb3JBdXRoRXZlbnRzKCkge1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZSgoZXZlbnQsIHNlc3Npb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVRva2VuQ2hhbmdlZChldmVudCwgJ0NMSUVOVCcsIHNlc3Npb24gPT09IG51bGwgfHwgc2Vzc2lvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2Vzc2lvbi5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIF9oYW5kbGVUb2tlbkNoYW5nZWQoZXZlbnQsIHNvdXJjZSwgdG9rZW4pIHtcbiAgICAgICAgaWYgKChldmVudCA9PT0gJ1RPS0VOX1JFRlJFU0hFRCcgfHwgZXZlbnQgPT09ICdTSUdORURfSU4nKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkQWNjZXNzVG9rZW4gIT09IHRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWRBY2Nlc3NUb2tlbiA9IHRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50ID09PSAnU0lHTkVEX09VVCcpIHtcbiAgICAgICAgICAgIHRoaXMucmVhbHRpbWUuc2V0QXV0aCgpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSA9PSAnU1RPUkFHRScpXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoLnNpZ25PdXQoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZEFjY2Vzc1Rva2VuID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3VwYWJhc2VDbGllbnQuanMubWFwIiwiaW1wb3J0IFN1cGFiYXNlQ2xpZW50IGZyb20gJy4vU3VwYWJhc2VDbGllbnQnO1xuZXhwb3J0ICogZnJvbSAnQHN1cGFiYXNlL2F1dGgtanMnO1xuZXhwb3J0IHsgUG9zdGdyZXN0RXJyb3IsIH0gZnJvbSAnQHN1cGFiYXNlL3Bvc3RncmVzdC1qcyc7XG5leHBvcnQgeyBGdW5jdGlvbnNIdHRwRXJyb3IsIEZ1bmN0aW9uc0ZldGNoRXJyb3IsIEZ1bmN0aW9uc1JlbGF5RXJyb3IsIEZ1bmN0aW9uc0Vycm9yLCBGdW5jdGlvblJlZ2lvbiwgfSBmcm9tICdAc3VwYWJhc2UvZnVuY3Rpb25zLWpzJztcbmV4cG9ydCAqIGZyb20gJ0BzdXBhYmFzZS9yZWFsdGltZS1qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi9TdXBhYmFzZUNsaWVudCc7XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU3VwYWJhc2UgQ2xpZW50LlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlQ2xpZW50ID0gKHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSwgb3B0aW9ucykgPT4ge1xuICAgIHJldHVybiBuZXcgU3VwYWJhc2VDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5LCBvcHRpb25zKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5jb25zdCBzdXBhYmFzZVVybCA9IFwiaHR0cHM6Ly9odnJmbXp5eHRjZHppa3p1aGNqYS5zdXBhYmFzZS5jb1wiO1xuY29uc3Qgc3VwYWJhc2VLZXkgPVxuICBcImV5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltaDJjbVp0ZW5sNGRHTmtlbWxyZW5Wb1kycGhJaXdpY205c1pTSTZJbk5sY25acFkyVmZjbTlzWlNJc0ltbGhkQ0k2TVRjME5UVTRNelUzT0N3aVpYaHdJam95TURZeE1UVTVOVGM0ZlEuVmF2QWkwbkVQUnpDY00zamRLdEdESjA2c0xCcFl4eW41UUxiSXIzSUFXc1wiO1xuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSk7XG4iLCJleHBvcnQgY29uc3QgdGVjaENvbG9ycyA9IHtcbiAgLy8gRnJvbnRlbmRcbiAgUmVhY3Q6IFwiYmctc2t5LTEwMCB0ZXh0LXNreS04MDAgZGFyazpiZy1za3ktOTAwIGRhcms6dGV4dC1za3ktMjAwXCIsXG4gIEdvOiBcImJnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCBkYXJrOmJnLWdyZWVuLTkwMCBkYXJrOnRleHQtZ3JlZW4tMjAwXCIsXG4gIEdvbGFuZzogXCJiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAgZGFyazpiZy1ncmVlbi05MDAgZGFyazp0ZXh0LWdyZWVuLTIwMFwiLFxuICBLYWZrYTogXCJiZy1yb3NlLTEwMCB0ZXh0LXJvc2UtODAwIGRhcms6Ymctcm9zZS03MDAgZGFyazp0ZXh0LXJvc2UtMjAwXCIsXG4gIFJlZGlzOlxuICAgIFwiYmctb3JhbmdlLTEwMCB0ZXh0LW9yYW5nZS05MDAgZGFyazpiZy1vcmFuZ2UtOTAwIGRhcms6dGV4dC1vcmFuZ2UtMjAwXCIsXG4gIFJhYmJpdE1ROiBcImJnLXBpbmstMTAwIHRleHQtcGluay05MDAgZGFyazpiZy1waW5rLTkwMCBkYXJrOnRleHQtcGluay0yMDBcIixcblxuICAvLyBCYWNrZW5kXG4gIGdSUEM6IFwiYmctbGltZS0xMDAgdGV4dC1saW1lLTgwMCBkYXJrOmJnLWxpbWUtOTAwIGRhcms6dGV4dC1saW1lLTIwMFwiLFxuICBFeHByZXNzOiBcImJnLXppbmMtMTAwIHRleHQtemluYy04MDAgZGFyazpiZy16aW5jLTkwMCBkYXJrOnRleHQtemluYy0yMDBcIixcbiAgRGphbmdvOlxuICAgIFwiYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTgwMCBkYXJrOmJnLWVtZXJhbGQtOTAwIGRhcms6dGV4dC1lbWVyYWxkLTIwMFwiLFxuICBGbGFzazogXCJiZy1zdG9uZS0xMDAgdGV4dC1zdG9uZS04MDAgZGFyazpiZy1zdG9uZS05MDAgZGFyazp0ZXh0LXN0b25lLTIwMFwiLFxuXG4gIC8vIERhdGFiYXNlc1xuICBNb25nb0RCOiBcImJnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTkwMCBkYXJrOmJnLWdyZWVuLTkwMCBkYXJrOnRleHQtZ3JlZW4tMjAwXCIsXG4gIFwiTm9kZS5qc1wiOlxuICAgIFwiYmctaW5kaWdvLTEwMCB0ZXh0LWluZGlnby04MDAgZGFyazpiZy1pbmRpZ28tOTAwIGRhcms6dGV4dC1pbmRpZ28tMjAwXCIsXG4gIFBvc3RncmVTUUw6XG4gICAgXCJiZy15ZWxsb3ctMTAwIHRleHQteWVsbG93LTgwMCBkYXJrOmJnLXllbGxvdy05MDAgZGFyazp0ZXh0LXllbGxvdy0yMDBcIixcbiAgTXlTUUw6IFwiYmctYW1iZXItMTAwIHRleHQtYW1iZXItODAwIGRhcms6YmctYW1iZXItOTAwIGRhcms6dGV4dC1hbWJlci0yMDBcIixcblxuICAvLyBNb2JpbGVcbiAgXCJSZWFjdCBOYXRpdmVcIjpcbiAgICBcImJnLWN5YW4tMTAwIHRleHQtY3lhbi04MDAgZGFyazpiZy1jeWFuLTkwMCBkYXJrOnRleHQtY3lhbi0yMDBcIixcbiAgRmx1dHRlcjogXCJiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIGRhcms6YmctYmx1ZS05MDAgZGFyazp0ZXh0LWJsdWUtMjAwXCIsXG5cbiAgLy8gTGFuZ3VhZ2VzXG4gIEphdmFTY3JpcHQ6XG4gICAgXCJiZy15ZWxsb3ctMTAwIHRleHQteWVsbG93LTkwMCBkYXJrOmJnLXllbGxvdy05MDAgZGFyazp0ZXh0LXllbGxvdy0yMDBcIixcbiAgVHlwZVNjcmlwdDogXCJiZy1ibHVlLTIwMCB0ZXh0LWJsdWUtOTAwIGRhcms6YmctYmx1ZS05NTAgZGFyazp0ZXh0LWJsdWUtMjAwXCIsXG4gIFB5dGhvbjogXCJiZy1jeWFuLTEwMCB0ZXh0LWN5YW4tOTAwIGRhcms6YmctY3lhbi05MDAgZGFyazp0ZXh0LWN5YW4tMjAwXCIsXG4gIEphdmE6IFwiYmctcmVkLTIwMCB0ZXh0LXJlZC05MDAgZGFyazpiZy1yZWQtOTUwIGRhcms6dGV4dC1yZWQtMjAwXCIsXG4gIFwiQysrXCI6XG4gICAgXCJiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTgwMCBkYXJrOmJnLXB1cnBsZS05MDAgZGFyazp0ZXh0LXB1cnBsZS0yMDBcIixcblxuICAvLyBEZXZPcHMgLyBDbG91ZFxuICBEb2NrZXI6IFwiYmctc2t5LTIwMCB0ZXh0LXNreS05MDAgZGFyazpiZy1za3ktOTUwIGRhcms6dGV4dC1za3ktMjAwXCIsXG4gIEt1YmVybmV0ZXM6XG4gICAgXCJiZy12aW9sZXQtMTAwIHRleHQtdmlvbGV0LTgwMCBkYXJrOmJnLXZpb2xldC05MDAgZGFyazp0ZXh0LXZpb2xldC0yMDBcIixcbiAgQVdTOiBcImJnLW9yYW5nZS0yMDAgdGV4dC1vcmFuZ2UtOTAwIGRhcms6Ymctb3JhbmdlLTk1MCBkYXJrOnRleHQtb3JhbmdlLTIwMFwiLFxuICBHQ1A6IFwiYmctcmVkLTEwMCB0ZXh0LXJlZC04MDAgZGFyazpiZy1yZWQtOTAwIGRhcms6dGV4dC1yZWQtMjAwXCIsXG5cbiAgLy8gRGVmYXVsdFxuICBkZWZhdWx0OiBcImJnLWdyYXktMTAwIHRleHQtZ3JheS04MDAgZGFyazpiZy1ncmF5LTgwMCBkYXJrOnRleHQtZ3JheS0yMDBcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZWNoQ29sb3IodGVjaCkge1xuICByZXR1cm4gdGVjaENvbG9yc1t0ZWNoXSB8fCB0ZWNoQ29sb3JzLmRlZmF1bHQ7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlVmFsaWRhdGlvbkVycm9yKGZpZWxkLCBtZXNzYWdlKSB7XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICBlcnJvci5uYW1lID0gXCJWYWxpZGF0aW9uRXJyb3JcIjtcbiAgZXJyb3IuZmllbGQgPSBmaWVsZDtcbiAgcmV0dXJuIGVycm9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YUVycm9yKG1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIGVycm9yLnN0YXR1c0NvZGUgPSA0MDQ7XG4gIGVycm9yLnRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG4gIHRocm93IGVycm9yO1xufVxuIiwiaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tIFwiLi9zdXBhYmFzZS5qc1wiO1xuaW1wb3J0IHsgc2hvd0Vycm9yLCBoaWRlTG9hZGluZyB9IGZyb20gXCIuL3VpLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IGRhdGFFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2FmZVN1cGFiYXNlUXVlcnkoXG4gIHF1ZXJ5Rm4sXG4gIGxvYWRpbmdNZXNzYWdlID0gXCJMb2FkaW5nLi4uXCJcbikge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGxvYWRpbmdNZXNzYWdlKTtcbiAgICAvLyBzaG93TG9hZGluZyhsb2FkaW5nTWVzc2FnZSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnlGbigpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkFQSSBFcnJvcjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGRhdGFFcnJvcihcIkZhaWxlZCB0byBsb2FkIGRhdGFcIik7XG4gIH0gZmluYWxseSB7XG4gICAgaGlkZUxvYWRpbmcoKTtcbiAgfVxufVxuXG4vLyBQcm9qZWN0LXNwZWNpZmljIEFQSSBjYWxsc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUHJvamVjdHMoKSB7XG4gIHJldHVybiBzYWZlU3VwYWJhc2VRdWVyeShhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiUHJvamVjdHNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcHJvamVjdHNcIik7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sIFwiTG9hZGluZyBwcm9qZWN0cy4uLlwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUGVyc29uYWxQcm9qZWN0cygpIHtcbiAgcmV0dXJuIHNhZmVTdXBhYmFzZVF1ZXJ5KGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJQZXJzb25hbFwiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBwcm9qZWN0c1wiKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSwgXCJMb2FkaW5nIHBlcnNvbmFsIHByb2plY3RzLi4uXCIpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hQdWJsaWNhdGlvbnMoKSB7XG4gIHJldHVybiBzYWZlU3VwYWJhc2VRdWVyeShhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiUHVibGljYXRpb25zXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsb2FkIHB1YmxpY2F0aW9uc1wiKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSwgXCJMb2FkaW5nIHB1YmxpY2F0aW9ucy4uLlwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUmVmZXJlbmNlcygpIHtcbiAgcmV0dXJuIHNhZmVTdXBhYmFzZVF1ZXJ5KGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwiUmVmZXJlbmNlc1wiKS5zZWxlY3QoXCIqXCIpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbG9hZCByZWZlcmVuY2VzXCIpO1xuICAgIHJldHVybiBkYXRhO1xuICB9LCBcIkxvYWRpbmcgcmVmZXJlbmNlcy4uLlwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkUmVzdW1lKHJlc3VtZVVybCkge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlc3VtZVVybCk7XG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBQREY6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICB9XG5cbiAgY29uc3QgYmxvYkRhdGEgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gIHJldHVybiBibG9iRGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUmVzdW1lKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcIlJlc3VtZVwiKVxuICAgICAgLnNlbGVjdChcImxpbmtcIilcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQoMSlcbiAgICAgIC5zaW5nbGUoKTsgLy8gQWRkIC5zaW5nbGUoKSB0byBnZXQganVzdCBvbmUgcmVjb3JkXG5cbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgIGlmICghZGF0YSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVzdW1lIGZvdW5kXCIpO1xuXG4gICAgLy8gRW5zdXJlIHRoZSBsaW5rIGlzIGEgcHJvcGVyIHN0cmluZ1xuICAgIHJldHVybiB0eXBlb2YgZGF0YS5saW5rID09PSBcInN0cmluZ1wiID8gZGF0YS5saW5rIDogZGF0YS5saW5rLmpvaW4oXCJcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHJlc3VtZTpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBmZXRjaFByb2plY3RzLFxuICBmZXRjaFBlcnNvbmFsUHJvamVjdHMsXG4gIGZldGNoUHVibGljYXRpb25zLFxuICBmZXRjaFJlZmVyZW5jZXMsXG4gIGZldGNoUmVzdW1lLFxufSBmcm9tIFwiLi9hcGktc2VydmljZS5qc1wiO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tIFwiLi9zdXBhYmFzZS5qc1wiO1xuXG5jb25zdCBjYWNoZSA9IHtcbiAgcHJvamVjdHM6IFtdLFxuICBwZXJzb25hbF9wcm9qZWN0czogW10sXG4gIHB1YmxpY2F0aW9uczogW10sXG4gIHJlZmVyZW5jZXM6IFtdLFxuICBpbml0aWFsaXplZDogZmFsc2UsXG4gIHJlc3VtZTogXCJcIixcbn07XG5cbi8vIGxldCBpbml0aWFsaXphdGlvblByb21pc2UgPSBudWxsO1xubGV0IGNhY2hlSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbmxldCBjYWNoZUluaXRpYWxpemF0aW9uUHJvbWlzZSA9IG51bGw7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUNhY2hlKHJldHJpZXMgPSAzKSB7XG4gIC8vIFJldHVybiBleGlzdGluZyBwcm9taXNlIGlmIGluaXRpYWxpemF0aW9uIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcbiAgaWYgKGNhY2hlSW5pdGlhbGl6YXRpb25Qcm9taXNlKSB7XG4gICAgcmV0dXJuIGNhY2hlSW5pdGlhbGl6YXRpb25Qcm9taXNlO1xuICB9XG5cbiAgY2FjaGVJbml0aWFsaXphdGlvblByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGNhY2hlIGluaXRpYWxpemF0aW9uLi4uXCIpO1xuXG4gICAgICBjb25zdCBbcHJvamVjdHMsIHBlcnNvbmFsUHJvamVjdHMsIHB1YmxpY2F0aW9ucywgcmVmZXJlbmNlcywgcmVzdW1lXSA9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBmZXRjaFByb2plY3RzKCksXG4gICAgICAgICAgZmV0Y2hQZXJzb25hbFByb2plY3RzKCksXG4gICAgICAgICAgZmV0Y2hQdWJsaWNhdGlvbnMoKSxcbiAgICAgICAgICBmZXRjaFJlZmVyZW5jZXMoKSxcbiAgICAgICAgICBmZXRjaFJlc3VtZSgpLFxuICAgICAgICBdKTtcblxuICAgICAgY2FjaGUucHJvamVjdHMgPSBwcm9qZWN0cyB8fCBbXTtcbiAgICAgIGNhY2hlLnB1YmxpY2F0aW9ucyA9IHB1YmxpY2F0aW9ucyB8fCBbXTtcbiAgICAgIGNhY2hlLnJlZmVyZW5jZXMgPSByZWZlcmVuY2VzIHx8IFtdO1xuICAgICAgY2FjaGUucGVyc29uYWxfcHJvamVjdHMgPSBwZXJzb25hbFByb2plY3RzIHx8IFtdO1xuICAgICAgaWYgKHR5cGVvZiByZXN1bWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY2FjaGUucmVzdW1lID0gcmVzdW1lO1xuICAgICAgICBjb25zb2xlLmxvZyhcIllFU1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhY2hlLnJlc3VtZSA9IHJlc3VtZS5qb2luKFwiXCIpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJwcm9qZWN0cy0tPiBcIiwgY2FjaGVbXCJwcm9qZWN0c1wiXSk7XG4gICAgICBjb25zb2xlLmxvZyhcInJlc3VtZS0tPiBcIiwgY2FjaGVbXCJyZXN1bWVcIl0pO1xuICAgICAgY29uc29sZS5sb2coXCJwdWJsaWNhdGlvbnMtLT4gXCIsIHB1YmxpY2F0aW9ucyk7XG4gICAgICBjb25zb2xlLmxvZyhcInJlZmVyZW5jZXMtLT4gXCIsIHJlZmVyZW5jZXMpO1xuICAgICAgY29uc29sZS5sb2coXCJwZXJzb25hbCBwcm9qZWN0cy0tPiBcIiwgcGVyc29uYWxQcm9qZWN0cyk7XG5cbiAgICAgIHNldHVwU3Vic2NyaXB0aW9ucygpO1xuICAgICAgY2FjaGVJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICBjYWNoZS5pbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiQ2FjaGUgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYWNoZSBpbml0aWFsaXphdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgaWYgKHJldHJpZXMgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZXRyeWluZyBjYWNoZSBpbml0aWFsaXphdGlvbiAoJHtyZXRyaWVzfSBsZWZ0KWApO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSk7XG4gICAgICAgIHJldHVybiBpbml0aWFsaXplQ2FjaGUocmV0cmllcyAtIDEpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9KSgpO1xuXG4gIHJldHVybiBjYWNoZUluaXRpYWxpemF0aW9uUHJvbWlzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FjaGVJbml0aWFsaXplZCgpIHtcbiAgcmV0dXJuIGNhY2hlLmluaXRpYWxpemVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdEZvckNhY2hlKGtleSkge1xuICBpZiAoY2FjaGUuaW5pdGlhbGl6ZWQpIHtcbiAgICByZXR1cm4gZ2V0Q2FjaGVkRGF0YShrZXkpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICByZXNvbHZlKGdldENhY2hlZERhdGEoa2V5KSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FjaGUtcmVhZHlcIiwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNhY2hlLXJlYWR5XCIsIGxpc3RlbmVyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZWREYXRhKGtleSkge1xuICBpZiAoIWNhY2hlLmluaXRpYWxpemVkKSB7XG4gICAgY29uc29sZS53YXJuKGBDYWNoZSBhY2Nlc3NlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24gZm9yIGtleTogJHtrZXl9YCk7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiBbLi4uY2FjaGVba2V5XV07XG59XG5cbmZ1bmN0aW9uIHNldHVwU3Vic2NyaXB0aW9ucygpIHtcbiAgY29uc3QgdGFibGVzID0gW1xuICAgIHsgbmFtZTogXCJQcm9qZWN0c1wiLCBrZXk6IFwicHJvamVjdHNcIiB9LFxuICAgIHsgbmFtZTogXCJQdWJsaWNhdGlvbnNcIiwga2V5OiBcInB1YmxpY2F0aW9uc1wiIH0sXG4gICAgeyBuYW1lOiBcIlJlZmVyZW5jZXNcIiwga2V5OiBcInJlZmVyZW5jZXNcIiB9LFxuICAgIHsgbmFtZTogXCJQZXJzb25hbFwiLCBrZXk6IFwicGVyc29uYWxcIiB9LFxuICBdO1xuXG4gIHRhYmxlcy5mb3JFYWNoKCh7IG5hbWUsIGtleSB9KSA9PiB7XG4gICAgc3VwYWJhc2VcbiAgICAgIC5jaGFubmVsKGBwdWJsaWNfY2hhbmdlczoke25hbWV9YClcbiAgICAgIC5vbihcbiAgICAgICAgXCJwb3N0Z3Jlc19jaGFuZ2VzXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBldmVudDogXCIqXCIsXG4gICAgICAgICAgc2NoZW1hOiBcInB1YmxpY1wiLFxuICAgICAgICAgIHRhYmxlOiBuYW1lLFxuICAgICAgICB9LFxuICAgICAgICAocGF5bG9hZCkgPT4ge1xuICAgICAgICAgIGhhbmRsZVRhYmxlVXBkYXRlKGtleSwgcGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKHN0YXR1cykgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSBcIlNVQlNDUklCRURcIikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWFsdGltZSAke2tleX0gc3Vic2NyaXB0aW9uIGVzdGFibGlzaGVkYCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVGFibGVVcGRhdGUoa2V5LCBwYXlsb2FkKSB7XG4gIHN3aXRjaCAocGF5bG9hZC5ldmVudFR5cGUpIHtcbiAgICBjYXNlIFwiSU5TRVJUXCI6XG4gICAgICBjYWNoZVtrZXldLnVuc2hpZnQocGF5bG9hZC5uZXcpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlVQREFURVwiOlxuICAgICAgY2FjaGVba2V5XSA9IGNhY2hlW2tleV0ubWFwKChpdGVtKSA9PlxuICAgICAgICBpdGVtLmlkID09PSBwYXlsb2FkLm5ldy5pZCA/IHBheWxvYWQubmV3IDogaXRlbVxuICAgICAgKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJERUxFVEVcIjpcbiAgICAgIGNhY2hlW2tleV0gPSBjYWNoZVtrZXldLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gcGF5bG9hZC5vbGQuaWQpO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoYCR7a2V5fS11cGRhdGVkYCkpO1xufVxuXG5leHBvcnQgY29uc3QgY2FjaGVSZWFkeSA9IGluaXRpYWxpemVDYWNoZSgpO1xuIiwiaW1wb3J0IHsgZG93bmxvYWRSZXN1bWUgfSBmcm9tIFwiLi9hcGktc2VydmljZVwiO1xuaW1wb3J0IHsgd2FpdEZvckNhY2hlIH0gZnJvbSBcIi4vZGF0YS1jYWNoZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvd0xvYWRpbmcobWVzc2FnZSA9IFwiTG9hZGluZy4uLlwiKSB7XG4gIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmctb3ZlcmxheVwiKTtcbiAgY29uc3QgbWVzc2FnZUVsID0gb3ZlcmxheS5xdWVyeVNlbGVjdG9yKFwic3BhblwiKTtcbiAgbWVzc2FnZUVsLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUxvYWRpbmcoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9hZGluZy1vdmVybGF5XCIpLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3ItbW9kYWxcIik7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3ItbWVzc2FnZVwiKS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlRXJyb3JNb2RhbCgpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvci1tb2RhbFwiKS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2hpbW1lckNhcmQoKSB7XG4gIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjYXJkLmNsYXNzTmFtZSA9XG4gICAgXCJjYXJkIGRhcms6Ymctc2xhdGUtNzAwIHJvdW5kZWQtbGcgc2hhZG93LW1kIG92ZXJmbG93LWhpZGRlbiBkYXJrOmJvcmRlci1zbGF0ZS02MDBcIjtcbiAgY2FyZC5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtcHVsc2UgYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC0zMiB3LWZ1bGxcIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicC00XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1wdWxzZSBiZy1ncmF5LTIwMCBkYXJrOmJnLXNsYXRlLTYwMCBoLTYgdy0zLzQgbWItM1wiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtcHVsc2UgYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC00IHctZnVsbCBtYi0yXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1wdWxzZSBiZy1ncmF5LTIwMCBkYXJrOmJnLXNsYXRlLTYwMCBoLTQgdy01LzYgbWItNFwiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXB1bHNlIGJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNiB3LTE2IHJvdW5kZWQtZnVsbFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1wdWxzZSBiZy1ncmF5LTIwMCBkYXJrOmJnLXNsYXRlLTYwMCBoLTYgdy0xNiByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtcHVsc2UgYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC01IHctMjQgbXQtNFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xuICByZXR1cm4gY2FyZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBlcnNvbmFsU2hpbW1lckNhcmQoKSB7XG4gIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjYXJkLmNsYXNzTmFtZSA9XG4gICAgXCJjYXJkIGRhcms6Ymctc2xhdGUtNzAwIHAtNiByb3VuZGVkLWxnIHNoYWRvdy1tZCBtYi02IGRhcms6Ym9yZGVyLXNsYXRlLTYwMFwiO1xuICBjYXJkLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1wdWxzZVwiPlxuICAgICAgPCEtLSBUaXRsZSArIFR5cGUgQmFkZ2UgLS0+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgbWItNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC03IHctMy80IHJvdW5kZWRcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNSB3LTEyIHJvdW5kZWQtZnVsbFwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDwhLS0gRGVzY3JpcHRpb24gLS0+XG4gICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteS0yIG1iLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNCB3LWZ1bGwgcm91bmRlZFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC00IHctNS82IHJvdW5kZWRcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNCB3LTIvMyByb3VuZGVkXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPCEtLSBGZWF0dXJlIENoaXBzIC0tPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGdhcC0yIG1iLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNiB3LTIwIHJvdW5kZWQtZnVsbFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC02IHctMTYgcm91bmRlZC1mdWxsXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ncmF5LTIwMCBkYXJrOmJnLXNsYXRlLTYwMCBoLTYgdy0yNCByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8IS0tIFN0YXR1cy9EYXRlICsgTGlua3MgUm93IC0tPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtdC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IHNwYWNlLXgtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ncmF5LTIwMCBkYXJrOmJnLXNsYXRlLTYwMCBoLTUgdy0xNiByb3VuZGVkXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNSB3LTIwIHJvdW5kZWRcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IHNwYWNlLXgtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ncmF5LTIwMCBkYXJrOmJnLXNsYXRlLTYwMCBoLTUgdy0xMiByb3VuZGVkXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJnLWdyYXktMjAwIGRhcms6Ymctc2xhdGUtNjAwIGgtNSB3LTE0IHJvdW5kZWRcIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctZ3JheS0yMDAgZGFyazpiZy1zbGF0ZS02MDAgaC01IHctMTYgcm91bmRlZFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xuICByZXR1cm4gY2FyZDtcbn1cblxuLy8gR2xvYmFsIGVycm9yIGhhbmRsZXJzXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBHbG9iYWxFcnJvckhhbmRsZXJzKCkge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2hvd0Vycm9yKFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiKTtcbiAgICBjb25zb2xlLmVycm9yKFwiR2xvYmFsIGVycm9yOlwiLCBldmVudC5lcnJvcik7XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidW5oYW5kbGVkcmVqZWN0aW9uXCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2hvd0Vycm9yKFwiQW4gYXN5bmMgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICBjb25zb2xlLmVycm9yKFwiVW5oYW5kbGVkIHJlamVjdGlvbjpcIiwgZXZlbnQucmVhc29uKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlUmVzdW1lKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ0bi5pbm5lckhUTUw7XG5cbiAgdHJ5IHtcbiAgICBidG4uaW5uZXJIVE1MID1cbiAgICAgICc8aSBjbGFzcz1cImZhcyBmYS1zcGlubmVyIGZhLXNwaW4gbXItMlwiPjwvaT4gRG93bmxvYWRpbmcuLi4nO1xuICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICBsZXQgcmVzdW1lVXJsID0gYXdhaXQgd2FpdEZvckNhY2hlKFwicmVzdW1lXCIpO1xuXG4gICAgaWYgKCFyZXN1bWVVcmwpIHtcbiAgICAgIHJlc3VtZVVybCA9IGF3YWl0IGZldGNoUmVzdW1lKCk7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCBhcnJheSB0byBzdHJpbmcgaWYgbmVlZGVkXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdW1lVXJsKSkge1xuICAgICAgcmVzdW1lVXJsID0gcmVzdW1lVXJsLmpvaW4oXCJcIik7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBibG9iIGRhdGEgZGlyZWN0bHlcbiAgICBjb25zdCBibG9iRGF0YSA9IGF3YWl0IGRvd25sb2FkUmVzdW1lKHJlc3VtZVVybCk7XG4gICAgY29uc29sZS5sb2coXCJCbG9iIGRhdGE6XCIsIGJsb2JEYXRhKTtcblxuICAgIGlmICghYmxvYkRhdGEpIHRocm93IG5ldyBFcnJvcihcIk5vIGRhdGEgcmVjZWl2ZWRcIik7XG5cbiAgICAvLyBDcmVhdGUgZG93bmxvYWQgbGlua1xuICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYkRhdGEpO1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBhLmhyZWYgPSB1cmw7XG4gICAgYS5kb3dubG9hZCA9IFwiQWxlZmV3X1lpbWVyX1Jlc3VtZS5wZGZcIjtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgIGEuY2xpY2soKTtcbiAgICAvLyBDbGVhbiB1cEZcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICBidG4uaW5uZXJIVE1MID0gb3JpZ2luYWxUZXh0O1xuICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfSwgMTAwKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBidG4uaW5uZXJIVE1MID0gb3JpZ2luYWxUZXh0O1xuICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJEb3dubG9hZCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICBzaG93RXJyb3IoYEZhaWxlZCB0byBkb3dubG9hZCBSZXN1bWVgKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBidG4uaW5uZXJIVE1MID0gb3JpZ2luYWxUZXh0O1xuICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRG93bmxvYWRSZXN1bWUoKSB7XG4vLyAgIGRvY3VtZW50XG4vLyAgICAgLmdldEVsZW1lbnRCeUlkKFwiZG93bmxvYWQtY3YtYnRuXCIpXG4vLyAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzYXZlUmVzdW1lKTtcbi8vIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVEb3dubG9hZFJlc3VtZSgpIHtcbiAgY29uc3QgZG93bmxvYWRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvd25sb2FkLWN2LWJ0blwiKTtcbiAgaWYgKGRvd25sb2FkQnRuKSB7XG4gICAgZG93bmxvYWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgc2F2ZVJlc3VtZShlKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBVcGRhdGUgbW9kYWwgY2xvc2UgaGFuZGxlcnNcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tvbmNsaWNrPVwidG9nZ2xlUGRmTW9kYWwoKVwiXScpLmZvckVhY2goKGJ0bikgPT4ge1xuICBidG4ub25jbGljayA9IChlKSA9PiB0b2dnbGVQZGZNb2RhbChlKTtcbn0pO1xuXG5sZXQgbWVzc2FnZVRpbWVyO1xuXG4vLyBTaG93IG1vZGFsIHdpdGggaWNvbiwgYXV0by1kaXNtaXNzIChkZWZhdWx0OiA1IHNlY29uZHMpXG5leHBvcnQgZnVuY3Rpb24gc2hvd01lc3NhZ2VNb2RhbChcbiAgdGl0bGUsXG4gIG1lc3NhZ2UsXG4gIHR5cGUgPSBcImluZm9cIixcbiAgZGlzbWlzc1RpbWUgPSA1MDAwXG4pIHtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2UtbW9kYWxcIik7XG4gIGNvbnN0IGljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2UtaWNvblwiKTtcbiAgY29uc3QgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZS10aXRsZVwiKTtcblxuICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXJcbiAgY2xlYXJUaW1lb3V0KG1lc3NhZ2VUaW1lcik7XG5cbiAgLy8gU2V0IGljb24gYW5kIGNvbG9ycyBiYXNlZCBvbiB0eXBlXG4gIGNvbnN0IHR5cGVTdHlsZXMgPSB7XG4gICAgc3VjY2VzczogeyBpY29uOiBcImZhLWNoZWNrLWNpcmNsZVwiLCBjb2xvcjogXCJ0ZXh0LWdyZWVuLTUwMFwiIH0sXG4gICAgZXJyb3I6IHsgaWNvbjogXCJmYS10aW1lcy1jaXJjbGVcIiwgY29sb3I6IFwidGV4dC1yZWQtNTAwXCIgfSxcbiAgICB3YXJuaW5nOiB7IGljb246IFwiZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIiwgY29sb3I6IFwidGV4dC15ZWxsb3ctNTAwXCIgfSxcbiAgICBpbmZvOiB7IGljb246IFwiZmEtaW5mby1jaXJjbGVcIiwgY29sb3I6IFwidGV4dC1ibHVlLTUwMFwiIH0sXG4gIH07XG5cbiAgLy8gQXBwbHkgc3R5bGVzXG4gIGljb24uY2xhc3NOYW1lID0gYGZhcyAke3R5cGVTdHlsZXNbdHlwZV0uaWNvbn0gdGV4dC14bCBtdC0xICR7dHlwZVN0eWxlc1t0eXBlXS5jb2xvcn1gO1xuICB0aXRsZUVsLnRleHRDb250ZW50ID0gdGl0bGU7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZS1jb250ZW50XCIpLnRleHRDb250ZW50ID0gbWVzc2FnZTtcblxuICAvLyBTaG93IHdpdGggYW5pbWF0aW9uXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGFjaXR5LTBcIik7XG4gICAgbW9kYWwucXVlcnlTZWxlY3RvcihcImRpdlwiKS5jbGFzc0xpc3QucmVtb3ZlKFwic2NhbGUtOTVcIik7XG4gIH0sIDEwKTtcblxuICAvLyBBdXRvLWRpc21pc3MgaWYgdGltZSBzcGVjaWZpZWRcbiAgaWYgKGRpc21pc3NUaW1lID4gMCkge1xuICAgIG1lc3NhZ2VUaW1lciA9IHNldFRpbWVvdXQoaGlkZU1lc3NhZ2VNb2RhbCwgZGlzbWlzc1RpbWUpO1xuICB9XG59XG5cbi8vIEhpZGUgd2l0aCBhbmltYXRpb25cbmV4cG9ydCBmdW5jdGlvbiBoaWRlTWVzc2FnZU1vZGFsKCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZS1tb2RhbFwiKTtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm9wYWNpdHktMFwiKTtcbiAgbW9kYWwucXVlcnlTZWxlY3RvcihcImRpdlwiKS5jbGFzc0xpc3QuYWRkKFwic2NhbGUtOTVcIik7XG5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgfSwgMzAwKTsgLy8gTWF0Y2ggdGhpcyB3aXRoIHlvdXIgQ1NTIHRyYW5zaXRpb24gZHVyYXRpb25cbn1cbiIsImltcG9ydCB7IGdldENhY2hlZERhdGEgfSBmcm9tIFwiLi9kYXRhLWNhY2hlLmpzXCI7XG5pbXBvcnQgeyBzaG93RXJyb3IgfSBmcm9tIFwiLi91aS1oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBnZXRUZWNoQ29sb3IgfSBmcm9tIFwiLi90ZWNoLWNvbG9ycy5qc1wiO1xuXG4vLyBTaG93IHByb2plY3QgbW9kYWwgd2l0aCBkYXRhXG5leHBvcnQgZnVuY3Rpb24gc2hvd1Byb2plY3RNb2RhbChwcm9qZWN0SWQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwcm9qZWN0ID0gZ2V0Q2FjaGVkRGF0YShcInByb2plY3RzXCIpLmZpbmQoKHApID0+IHAuaWQgPT0gcHJvamVjdElkKTtcbiAgICBpZiAoIXByb2plY3QpIHRocm93IG5ldyBFcnJvcihcIlByb2plY3Qgbm90IGZvdW5kXCIpO1xuXG4gICAgLy8gU2V0IGJhc2ljIHByb2plY3QgaW5mb1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC10aXRsZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICBwcm9qZWN0LnRpdGxlIHx8IFwiVW50aXRsZWQgUHJvamVjdFwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1kZXNjcmlwdGlvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICBwcm9qZWN0LmRlc2NyaXB0aW9uIHx8IFwiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlXCI7XG5cbiAgICAvLyBTZXQgcHJvamVjdCBsaW5rcyAob25seSBzaG93IGlmIHRoZXkgZXhpc3QpXG4gICAgY29uc3QgcHJvamVjdExpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtbGlua3NcIik7XG4gICAgcHJvamVjdExpbmsuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcblxuICAgIGlmIChwcm9qZWN0LmxpdmVMaW5rIHx8IHByb2plY3QuY29kZUxpbmspIHtcbiAgICAgIHByb2plY3RMaW5rLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgICBjb25zdCBsaXZlTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1saXZlLWxpbmtcIik7XG4gICAgICBjb25zdCBjb2RlTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1jb2RlLWxpbmtcIik7XG4gICAgICBpZiAocHJvamVjdC5saXZlTGluaykge1xuICAgICAgICBsaXZlTGluay5ocmVmID0gcHJvamVjdC5saXZlTGluaztcbiAgICAgICAgbGl2ZUxpbmsuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpdmVMaW5rLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9qZWN0LmNvZGVMaW5rKSB7XG4gICAgICAgIGNvZGVMaW5rLmhyZWYgPSBwcm9qZWN0LmNvZGVMaW5rO1xuICAgICAgICBjb2RlTGluay5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29kZUxpbmsuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdGVjaG5vbG9naWVzXG4gICAgY29uc3QgdGVjaENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC10ZWNobm9sb2dpZXNcIik7XG4gICAgdGVjaENvbnRhaW5lci5pbm5lckhUTUwgPSAocHJvamVjdC50ZWNobm9sb2dpZXMgfHwgW10pXG4gICAgICAubWFwKFxuICAgICAgICAodGVjaCkgPT4gYFxuICAgICAgICA8c3BhbiBjbGFzcz1cInB4LTMgcHktMSByb3VuZGVkLWZ1bGwgdGV4dC1zbSAke2dldFRlY2hDb2xvcih0ZWNoKX1cIj5cbiAgICAgICAgICAke3RlY2h9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIGBcbiAgICAgIClcbiAgICAgIC5qb2luKFwiXCIpO1xuXG4gICAgLy8gU2V0IHByb2plY3QgaW1hZ2VzXG4gICAgY29uc3QgaW1hZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWltYWdlc1wiKTtcbiAgICBjb25zdCBpc01vYmlsZSA9IHByb2plY3QudHlwZSA9PT0gXCJtb2JpbGVcIjtcbiAgICBjb25zdCBwcm9qZWN0X2ltYWdlcyA9IGlzTW9iaWxlXG4gICAgICA/IHByb2plY3QubW9iaWxlX2ltYWdlc1xuICAgICAgOiBwcm9qZWN0LndlYl9pbWFnZXM7XG4gICAgaW1hZ2VzQ29udGFpbmVyLmlubmVySFRNTCA9IHByb2plY3RfaW1hZ2VzXG4gICAgICAubWFwKFxuICAgICAgICAoaW1nLCBpbmRleCkgPT4gYFxuICAgICAgICA8aW1nIHNyYz1cIiR7aW1nfVwiIFxuICAgICAgICAgICAgIGFsdD1cIlByb2plY3Qgc2NyZWVuc2hvdCAke2luZGV4ICsgMX1cIlxuICAgICAgICAgICAgIGNsYXNzPVwiaC1mdWxsIG9iamVjdC1jb250YWluXCJcbiAgICAgICAgICAgICBvbmVycm9yPVwidGhpcy5zcmM9J2RlZmF1bHQtcHJvamVjdC5qcGcnXCI+XG4gICAgICBgXG4gICAgICApXG4gICAgICAuam9pbihcIlwiKTtcblxuICAgIC8vIEFkZCB0aGVzZSBhZnRlciB0aGUgdGVjaG5vbG9naWVzIHNlY3Rpb24gaW4geW91ciBleGlzdGluZyBmdW5jdGlvblxuXG4gICAgLy8gU2V0IGZlYXR1cmVzIGxpc3RcbiAgICBjb25zdCBmZWF0dXJlc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtZmVhdHVyZXNcIik7XG4gICAgZmVhdHVyZXNMaXN0LmlubmVySFRNTCA9IChwcm9qZWN0LmZlYXR1cmVzIHx8IFtdKVxuICAgICAgLm1hcCgoZmVhdHVyZSkgPT4gYDxsaT4ke2ZlYXR1cmV9PC9saT5gKVxuICAgICAgLmpvaW4oXCJcIik7XG5cbiAgICAvLyBTZXQgY29udHJpYnV0aW9ucyBsaXN0XG4gICAgY29uc3QgY29udHJpYnV0aW9uc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtY29udHJpYnV0aW9uc1wiKTtcbiAgICBjb250cmlidXRpb25zTGlzdC5pbm5lckhUTUwgPSAocHJvamVjdC5jb250cmlidXRpb25zIHx8IFtdKVxuICAgICAgLm1hcCgoY29udHJpYnV0aW9uKSA9PiBgPGxpPiR7Y29udHJpYnV0aW9ufTwvbGk+YClcbiAgICAgIC5qb2luKFwiXCIpO1xuXG4gICAgLy8gU2V0IGNoYWxsZW5nZXMgJiBzb2x1dGlvbnMgbGlzdFxuICAgIGNvbnN0IGNoYWxsZW5nZXNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWNoYWxsZW5nZXNcIik7XG4gICAgY2hhbGxlbmdlc0xpc3QuaW5uZXJIVE1MID0gKHByb2plY3QuY2hhbGxlbmdlc19zb2x1dGlvbnMgfHwgW10pXG4gICAgICAubWFwKChjaGFsbGVuZ2UpID0+IGA8bGk+JHtjaGFsbGVuZ2V9PC9saT5gKVxuICAgICAgLmpvaW4oXCJcIik7XG5cbiAgICAvLyBTZXQgaW1wYWN0IGxpc3RcbiAgICBjb25zdCBpbXBhY3RMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWltcGFjdFwiKTtcbiAgICBpbXBhY3RMaXN0LmlubmVySFRNTCA9IChwcm9qZWN0LmltcGFjdCB8fCBbXSlcbiAgICAgIC5tYXAoKGltcGFjdCkgPT4gYDxsaT4ke2ltcGFjdH08L2xpPmApXG4gICAgICAuam9pbihcIlwiKTtcblxuICAgIC8vIFNob3cgdGhlIG1vZGFsXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LW1vZGFsXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG5cbiAgICAvLyBQcmV2ZW50IGJvZHkgc2Nyb2xsIHdoZW4gbW9kYWwgaXMgb3BlblxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHNob3dFcnJvcihcIkZhaWxlZCB0byBsb2FkIHByb2plY3QgZGV0YWlsc1wiKTtcbiAgICBjb25zb2xlLmVycm9yKFwiUHJvamVjdCBtb2RhbCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIGhpZGVQcm9qZWN0TW9kYWwoKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZVByb2plY3RNb2RhbCgpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LW1vZGFsXCIpLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiO1xufVxuXG4vLyBDbG9zZSBtb2RhbCB3aGVuIGNsaWNraW5nIG91dHNpZGUgY29udGVudFxuLy8gQ2xpY2sgb24gYmFja2Ryb3BcbmRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJhY2tkcm9wXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGlkZVByb2plY3RNb2RhbCk7XG5cbi8vIEVzY2FwZSBrZXlcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGhpZGVQcm9qZWN0TW9kYWwoKTtcbiAgfVxufSk7XG5cbi8vIEltYWdlIHpvb20gZnVuY3Rpb25hbGl0eVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBcIklNR1wiICYmIGUudGFyZ2V0LmNsb3Nlc3QoXCIjcHJvamVjdC1pbWFnZXNcIikpIHtcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiem9vbWVkXCIpO1xuXG4gICAgLy8gVG9nZ2xlIHpvb20taW4vb3V0IGN1cnNvclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjdXJzb3Item9vbS1vdXRcIik7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImN1cnNvci16b29tLWluXCIpO1xuICB9XG59KTtcbiIsImltcG9ydCB7IHdhaXRGb3JDYWNoZSwgY2FjaGVSZWFkeSB9IGZyb20gXCIuL2RhdGEtY2FjaGUuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVNoaW1tZXJDYXJkLFxuICBjcmVhdGVQZXJzb25hbFNoaW1tZXJDYXJkLFxuICBzaG93RXJyb3IsXG59IGZyb20gXCIuL3VpLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IGdldFRlY2hDb2xvciB9IGZyb20gXCIuL3RlY2gtY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplUHJvamVjdHNUYWIoKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgcHJvamVjdHMgdGFiLi4uXCIpO1xuICAgIHJlbmRlclByb2plY3RzTG9hZGluZygpO1xuICAgIHJlbmRlclBlcnNvbmFsUHJvamVjdHNMb2FkaW5nKCk7XG5cbiAgICAvLyBJbXByb3ZlZCBET00gcmVhZHkgY2hlY2tcbiAgICBjb25zdCBkb21SZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAvLyBGaXJzdCB0cnkgdGhlIHJlYWR5c3RhdGVcbiAgICAgIGlmIChcbiAgICAgICAgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8XG4gICAgICAgIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiaW50ZXJhY3RpdmVcIlxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRE9NIGFscmVhZHkgcmVhZHlcIik7XG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZhbGxiYWNrIHRvIGV2ZW50IGxpc3RlbmVyXG4gICAgICBjb25zdCBvblJlYWR5ID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRPTUNvbnRlbnRMb2FkZWQgcmVjZWl2ZWRcIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIG9uUmVhZHkpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBvblJlYWR5KTtcbiAgICB9KTtcblxuICAgIC8vIFdhaXQgd2l0aCB0aW1lb3V0XG4gICAgYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgIFByb21pc2UuYWxsKFtjYWNoZVJlYWR5LCBkb21SZWFkeV0pLFxuICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT5cbiAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkluaXRpYWxpemF0aW9uIHRpbWVvdXQgKGNoZWNrIERPTSBvciBjYWNoZSlcIikpLFxuICAgICAgICAgIDUwMDAgLy8gNSBzZWNvbmQgdGltZW91dFxuICAgICAgICApXG4gICAgICApLFxuICAgIF0pO1xuXG4gICAgY29uc29sZS5sb2coXCJCb3RoIGNhY2hlIGFuZCBET00gcmVhZHlcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2plY3RzLXVwZGF0ZWRcIiwgcmVuZGVyUHJvamVjdHMpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcInBlcnNvbmFsX3Byb2plY3RzLXVwZGF0ZWRcIixcbiAgICAgIHJlbmRlclBlcnNvbmFsUHJvamVjdHNcbiAgICApO1xuICAgIGF3YWl0IHJlbmRlclByb2plY3RzKCk7XG4gICAgYXdhaXQgcmVuZGVyUGVyc29uYWxQcm9qZWN0cygpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJJbml0aWFsaXphdGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICByZW5kZXJFcnJvclN0YXRlKG5ldyBFcnJvcihcIkZhaWxlZCB0byBsb2FkIGRhdGFcIikpO1xuICAgIHJlbmRlclBlcnNvbmFsUHJvamVjdHNFcnJvclN0YXRlKG5ldyBFcnJvcihcIkZhaWxlZCB0byBsb2FkIGRhdGFcIikpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlbmRlclByb2plY3RzKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgdG8gcmVuZGVyIHByb2plY3RzLi4uXCIpO1xuICAgIHNob3dFbXB0eVN0YXRlKCk7XG4gICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCB3YWl0Rm9yQ2FjaGUoXCJwcm9qZWN0c1wiKTtcbiAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIHByb2plY3RzOlwiLCBwcm9qZWN0cyk7XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RzLWNvbnRhaW5lclwiKTtcbiAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvamVjdHMgY29udGFpbmVyIG5vdCBmb3VuZFwiKTtcbiAgICB9XG5cbiAgICBpZiAoIXByb2plY3RzIHx8ICFwcm9qZWN0cy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gcHJvamVjdHMgZm91bmRcIik7XG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNwYW4tZnVsbCB0ZXh0LWNlbnRlciBweS04XCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMFwiPk5vIHByb2plY3RzIGZvdW5kPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFJlbmRlcmluZyAke3Byb2plY3RzLmxlbmd0aH0gcHJvamVjdHNgKTtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gcHJvamVjdHNcbiAgICAgIC5tYXAoKHByb2plY3QpID0+IHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIG1vYmlsZSBwcm9qZWN0XG4gICAgICAgIGNvbnN0IGlzTW9iaWxlID0gcHJvamVjdC50eXBlID09PSBcIm1vYmlsZVwiO1xuXG4gICAgICAgIC8vIEltYWdlIHJlbmRlcmluZyBsb2dpY1xuICAgICAgICBjb25zdCByZW5kZXJJbWFnZXMgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKGlzTW9iaWxlICYmIHByb2plY3QubW9iaWxlX2ltYWdlcz8ubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgIC8vIERpc3BsYXkgMyBtb2JpbGUgaW1hZ2VzIGluIGEgcm93XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGdhcC0xIGgtNDggb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAke3Byb2plY3QubW9iaWxlX2ltYWdlc1xuICAgICAgICAgICAgICAuc2xpY2UoMCwgTWF0aC5taW4oMywgcHJvamVjdC5tb2JpbGVfaW1hZ2VzLmxlbmd0aCkpXG4gICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgKGltZykgPT4gYFxuICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aW1nfVwiIFxuICAgICAgICAgICAgICAgICAgIGFsdD1cIiR7cHJvamVjdC50aXRsZSB8fCBcIk1vYmlsZSBzY3JlZW5zaG90XCJ9XCIgXG4gICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmbGV4LTEgb2JqZWN0LWNvdmVyIGJvcmRlciBkYXJrOmJvcmRlci1zbGF0ZS02MDBcIlxuICAgICAgICAgICAgICAgICAgIG9uZXJyb3I9XCJ0aGlzLnNyYz0nZGVmYXVsdC1tb2JpbGUuanBnJ1wiPlxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IHNpbmdsZSBpbWFnZSBkaXNwbGF5XG4gICAgICAgICAgICBjb25zdCBpbWdTcmMgPVxuICAgICAgICAgICAgICBwcm9qZWN0LmNvdmVyX2ltYWdlIHx8XG4gICAgICAgICAgICAgIHByb2plY3Qud2ViX2ltYWdlcz8uWzBdIHx8XG4gICAgICAgICAgICAgIFwiZGVmYXVsdC1wcm9qZWN0LmpwZ1wiO1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICA8aW1nIHNyYz1cIiR7aW1nU3JjfVwiXG4gICAgICAgICAgICAgICBhbHQ9XCIke3Byb2plY3QudGl0bGUgfHwgXCJQcm9qZWN0XCJ9XCIgXG4gICAgICAgICAgICAgICBjbGFzcz1cInctZnVsbCBoLTQ4IG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICBvbmVycm9yPVwidGhpcy5zcmM9J2RlZmF1bHQtcHJvamVjdC5qcGcnXCI+XG4gICAgICAgIGA7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZCBkYXJrOmJnLXNsYXRlLTcwMCByb3VuZGVkLWxnIHNoYWRvdy1tZCBvdmVyZmxvdy1oaWRkZW4gZGFyazpib3JkZXItc2xhdGUtNjAwXCI+XG4gICAgICAgICR7cmVuZGVySW1hZ2VzKCl9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwLTRcIj5cbiAgICAgICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC14bCBtYi0yXCI+JHtcbiAgICAgICAgICAgIHByb2plY3QudGl0bGUgfHwgXCJVbnRpdGxlZCBQcm9qZWN0XCJcbiAgICAgICAgICB9PC9oMz5cbiAgICAgICAgICA8cCBjbGFzcz1cImRhcms6dGV4dC1ncmF5LTMwMCBtYi00XCI+XG4gICAgICAgICAgICAke3Byb2plY3QuZGVzY3JpcHRpb24gfHwgXCJObyBkZXNjcmlwdGlvbiBhdmFpbGFibGVcIn1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAgICAkeyhwcm9qZWN0LnRlY2hub2xvZ2llcyB8fCBbXSlcbiAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAodGVjaCkgPT4gYFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHgtMiBweS0xIHJvdW5kZWQtZnVsbCB0ZXh0LXhzICR7Z2V0VGVjaENvbG9yKFxuICAgICAgICAgICAgICAgICAgdGVjaFxuICAgICAgICAgICAgICAgICl9XCI+XG4gICAgICAgICAgICAgICAgICAke3RlY2h9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTQgZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgIHByb2plY3QubGl2ZUxpbmtcbiAgICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvamVjdC5saXZlTGlua31cIiBcbiAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCIgXG4gICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICBjbGFzcz1cImlubGluZS1ibG9jayBkYXJrOnRleHQtYmx1ZS00MDAgaG92ZXI6dW5kZXJsaW5lXCI+XG4gICAgICAgICAgICAgICAgTGl2ZSBEZW1vXG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgIHByb2plY3QuY29kZUxpbmtcbiAgICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvamVjdC5jb2RlTGlua31cIiBcbiAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCIgXG4gICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICBjbGFzcz1cImlubGluZS1ibG9jayBkYXJrOnRleHQtYmx1ZS00MDAgaG92ZXI6dW5kZXJsaW5lXCI+XG4gICAgICAgICAgICAgICAgVmlldyBDb2RlXG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cIndpbmRvdy5zaG93UHJvamVjdE1vZGFsKCcke3Byb2plY3QuaWR9JylcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlubGluZS1ibG9jayBkYXJrOnRleHQtYmx1ZS00MDAgaG92ZXI6dW5kZXJsaW5lXCI+XG4gICAgICAgICAgICAgIERldGFpbHMg4oaSXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiUHJvamVjdHMgcmVuZGVyZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiByZW5kZXJQcm9qZWN0czpcIiwgZXJyb3IpO1xuICAgIHJlbmRlckVycm9yU3RhdGUoZXJyb3IpO1xuICB9XG59XG5cbi8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIGhhbmRsZSBwZXJzb25hbCBwcm9qZWN0cyByZW5kZXJpbmdcbmFzeW5jIGZ1bmN0aW9uIHJlbmRlclBlcnNvbmFsUHJvamVjdHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJTdGFydGluZyB0byByZW5kZXIgcGVyc29uYWwgcHJvamVjdHMuLi5cIik7XG4gICAgc2hvd1BlcnNvbmFsUHJvamVjdHNFbXB0eVN0YXRlKCk7XG4gICAgY29uc3QgcGVyc29uYWxQcm9qZWN0cyA9IGF3YWl0IHdhaXRGb3JDYWNoZShcInBlcnNvbmFsX3Byb2plY3RzXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgcGVyc29uYWwgcHJvamVjdHM6XCIsIHBlcnNvbmFsUHJvamVjdHMpO1xuXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwZXJzb25hbC1wcm9qZWN0cy1jb250YWluZXJcIik7XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBlcnNvbmFsIHByb2plY3RzIGNvbnRhaW5lciBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgaWYgKCFwZXJzb25hbFByb2plY3RzIHx8ICFwZXJzb25hbFByb2plY3RzLmxlbmd0aCkge1xuICAgICAgY29uc29sZS5sb2coXCJObyBwZXJzb25hbCBwcm9qZWN0cyBmb3VuZFwiKTtcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS04XCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMFwiPk5vIHBlcnNvbmFsIHByb2plY3RzIGZvdW5kPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFJlbmRlcmluZyAke3BlcnNvbmFsUHJvamVjdHMubGVuZ3RofSBwZXJzb25hbCBwcm9qZWN0c2ApO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBwZXJzb25hbFByb2plY3RzXG4gICAgICAubWFwKChwcm9qZWN0KSA9PiB7XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIGRhcms6Ymctc2xhdGUtNzAwIHAtNiByb3VuZGVkLWxnIHNoYWRvdy1tZCBtYi02IGRhcms6Ym9yZGVyLXNsYXRlLTYwMFwiPlxuICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgbWItM1wiPlxuICAgIDxoMyBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LXhsXCI+JHtwcm9qZWN0LnRpdGxlfTwvaDM+XG4gICAgJHtcbiAgICAgIHByb2plY3QudHlwZVxuICAgICAgICA/IGA8c3BhbiBjbGFzcz1cInRleHQteHMgcHgtMiBweS0xIGJnLXBpbmstMTAwIGRhcms6YmctcGluay05MDAgcm91bmRlZC1mdWxsXCI+JHtwcm9qZWN0LnR5cGV9PC9zcGFuPmBcbiAgICAgICAgOiBcIlwiXG4gICAgfVxuICA8L2Rpdj5cblxuICA8cCBjbGFzcz1cImRhcms6dGV4dC1ncmF5LTMwMCBtYi00XCI+JHtwcm9qZWN0LmRlc2NyaXB0aW9ufTwvcD5cblxuICAke1xuICAgIHByb2plY3QuZmVhdHVyZXM/Lmxlbmd0aFxuICAgICAgPyBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMiBtYi00XCI+XG4gICAgICAgICAgJHtwcm9qZWN0LmZlYXR1cmVzXG4gICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAoZmVhdHVyZSkgPT4gYFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJweC0yIHB5LTEgcm91bmRlZC1mdWxsIHRleHQteHMgYmctYmx1ZS0xMDAvNTAgZGFyazpiZy1ibHVlLTkwMC81MFwiPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1jaGVjay1jaXJjbGUgbXItMSB0ZXh0LWJsdWUtNTAwIGRhcms6dGV4dC1ibHVlLTMwMFwiPjwvaT5cbiAgICAgICAgICAgICAgJHtmZWF0dXJlfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIGBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcbiAgICAgIDogXCJcIlxuICB9XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGdhcC0yIG1iLTRcIj5cbiAgICAgICAgICAgICAgJHsocHJvamVjdC50ZWNobm9sb2dpZXMgfHwgW10pXG4gICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICh0ZWNoKSA9PiBgXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInB4LTIgcHktMSByb3VuZGVkLWZ1bGwgdGV4dC14cyAke2dldFRlY2hDb2xvcihcbiAgICAgICAgICAgICAgICAgICAgdGVjaFxuICAgICAgICAgICAgICAgICAgKX1cIj5cbiAgICAgICAgICAgICAgICAgICAgJHt0ZWNofVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtdC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTMgdGV4dC1zbSBkYXJrOnRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAke1xuICAgICAgICAgICAgcHJvamVjdC5kYXRlXG4gICAgICAgICAgICAgID8gYFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhciBmYS1jYWxlbmRhciBtci0xXCI+PC9pPlxuICAgICAgICAgICAgICAke3Byb2plY3QuZGF0ZX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAke1xuICAgICAgICAgICAgcHJvamVjdC5zdGF0dXNcbiAgICAgICAgICAgICAgPyBgXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWNpcmNsZSBtci0xICR7XG4gICAgICAgICAgICAgICAgcHJvamVjdC5zdGF0dXMgPT09IFwiY29tcGxldGVkXCJcbiAgICAgICAgICAgICAgICAgID8gXCJ0ZXh0LWdyZWVuLTUwMFwiXG4gICAgICAgICAgICAgICAgICA6IFwidGV4dC15ZWxsb3ctNTAwXCJcbiAgICAgICAgICAgICAgfVwiPjwvaT5cbiAgICAgICAgICAgICAgJHtwcm9qZWN0LnN0YXR1c31cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggc3BhY2UteC0zXCI+XG4gICAgICAgICAgJHtcbiAgICAgICAgICAgIHByb2plY3QuY29kZUxpbmtcbiAgICAgICAgICAgICAgPyBgXG4gICAgICAgICAgICA8YSBocmVmPVwiJHtwcm9qZWN0LmNvZGVMaW5rfVwiIFxuICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICBjbGFzcz1cImRhcms6dGV4dC1ibHVlLTQwMCBob3Zlcjp1bmRlcmxpbmUgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYWIgZmEtZ2l0aHViIG1yLTFcIj48L2k+IENvZGVcbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAke1xuICAgICAgICAgICAgcHJvamVjdC5saXZlTGlua1xuICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgIDxhIGhyZWY9XCIke3Byb2plY3QubGl2ZUxpbmt9XCIgXG4gICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgIGNsYXNzPVwiZGFyazp0ZXh0LWJsdWUtNDAwIGhvdmVyOnVuZGVybGluZSBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1leHRlcm5hbC1saW5rLWFsdCBtci0xXCI+PC9pPiBEZW1vXG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgYFxuICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgICBgO1xuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiUGVyc29uYWwgcHJvamVjdHMgcmVuZGVyZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiByZW5kZXJQZXJzb25hbFByb2plY3RzOlwiLCBlcnJvcik7XG4gICAgcmVuZGVyUGVyc29uYWxQcm9qZWN0c0Vycm9yU3RhdGUoZXJyb3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclByb2plY3RzTG9hZGluZygpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0cy1jb250YWluZXJcIik7XG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVTaGltbWVyQ2FyZCgpKTtcbiAgfVxufVxuXG4vLyBMb2FkaW5nIHN0YXRlIGZvciBwZXJzb25hbCBwcm9qZWN0c1xuZnVuY3Rpb24gcmVuZGVyUGVyc29uYWxQcm9qZWN0c0xvYWRpbmcoKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVyc29uYWwtcHJvamVjdHMtY29udGFpbmVyXCIpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlUGVyc29uYWxTaGltbWVyQ2FyZCgpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJFcnJvclN0YXRlKGVycikge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RzLWNvbnRhaW5lclwiKTtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwiY29sLXNwYW4tZnVsbCB0ZXh0LWNlbnRlciBweS04XCI+XG4gICAgICA8cCBjbGFzcz1cInRleHQtcmVkLTUwMCBkYXJrOnRleHQtcmVkLTQwMFwiPiR7ZXJyLm1lc3NhZ2V9PC9wPlxuICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXCIgXG4gICAgICAgIGNsYXNzPVwibXQtNCBiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAgdGV4dC13aGl0ZSBweS0yIHB4LTQgcm91bmRlZFwiPlxuICAgICAgICBSZWxvYWQgUGFnZVxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIGA7XG59XG5cbi8vIEVycm9yIHN0YXRlIGZvciBwZXJzb25hbCBwcm9qZWN0c1xuZnVuY3Rpb24gcmVuZGVyUGVyc29uYWxQcm9qZWN0c0Vycm9yU3RhdGUoZXJyKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVyc29uYWwtcHJvamVjdHMtY29udGFpbmVyXCIpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS04XCI+XG4gICAgICA8cCBjbGFzcz1cInRleHQtcmVkLTUwMCBkYXJrOnRleHQtcmVkLTQwMFwiPiR7ZXJyLm1lc3NhZ2V9PC9wPlxuICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXCIgXG4gICAgICAgICAgICAgIGNsYXNzPVwibXQtNCBiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAgdGV4dC13aGl0ZSBweS0yIHB4LTQgcm91bmRlZFwiPlxuICAgICAgICBSZWxvYWQgUGFnZVxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIGA7XG59XG5cbmZ1bmN0aW9uIHNob3dFbXB0eVN0YXRlKCkge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RzLWNvbnRhaW5lclwiKTtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwiY29sLXNwYW4tZnVsbCB0ZXh0LWNlbnRlciBweS04XCI+XG4gICAgICA8cCBjbGFzcz1cInRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCI+TG9hZGluZyBwcm9qZWN0cy4uLjwvcD5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuLy8gRW1wdHkgc3RhdGUgZm9yIHBlcnNvbmFsIHByb2plY3RzXG5mdW5jdGlvbiBzaG93UGVyc29uYWxQcm9qZWN0c0VtcHR5U3RhdGUoKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVyc29uYWwtcHJvamVjdHMtY29udGFpbmVyXCIpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS04XCI+XG4gICAgICA8cCBjbGFzcz1cInRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCI+TG9hZGluZyBwZXJzb25hbCBwcm9qZWN0cy4uLjwvcD5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cbiIsImltcG9ydCB7IHNldHVwR2xvYmFsRXJyb3JIYW5kbGVycyB9IGZyb20gXCIuL3VpLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IGZldGNoUmVzdW1lIH0gZnJvbSBcIi4vYXBpLXNlcnZpY2UuanNcIjtcbmltcG9ydCB7IHdhaXRGb3JDYWNoZSB9IGZyb20gXCIuL2RhdGEtY2FjaGUuanNcIjtcblxuLy8gRXhwb3J0IGFsbCBuYXZpZ2F0aW9uIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgdXNlZCBlbHNld2hlcmVcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplTmF2aWdhdGlvbigpIHtcbiAgLy8gU2V0IGRlZmF1bHQgdGFiXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiUHJvamVjdHMtVGFiXCIpLmNsaWNrKCk7XG5cbiAgLy8gQ2xvc2UgbW9iaWxlIG1lbnUgd2hlbiBjbGlja2luZyBvdXRzaWRlXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBtb2JpbGVNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2JpbGUtbmF2LWxpbmtzXCIpO1xuICAgIGNvbnN0IG1lbnVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vYmlsZS1tZW51LWJ1dHRvblwiKTtcblxuICAgIGlmIChcbiAgICAgIG1vYmlsZU1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvd1wiKSAmJlxuICAgICAgIW1vYmlsZU1lbnUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgIW1lbnVCdXR0b24uY29udGFpbnMoZXZlbnQudGFyZ2V0KVxuICAgICkge1xuICAgICAgbW9iaWxlTWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBUYWIgc3dpdGNoaW5nIGZ1bmN0aW9uXG5leHBvcnQgZnVuY3Rpb24gb3BlblRhYihldnQsIHRhYk5hbWUsIHRhYk1lbnVOYW1lKSB7XG4gIGlmIChldnQpIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIC8vIEhpZGUgYWxsIHRhYiBjb250ZW50XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiLWNvbnRlbnRcIikuZm9yRWFjaCgodGFiKSA9PiB7XG4gICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIH0pO1xuXG4gIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgdGFic1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYlwiKS5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS10YWJcIik7XG4gIH0pO1xuXG4gIC8vIFNob3cgY3VycmVudCB0YWIgYW5kIG1hcmsgYXMgYWN0aXZlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYk5hbWUpLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYk1lbnVOYW1lKS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXRhYlwiKTtcblxuICAvLyBVcGRhdGUgbmF2aWdhdGlvbiBoaWdobGlnaHRzXG4gIGNvbnN0IG5hdk1hcCA9IHtcbiAgICBcIkFib3V0LVRhYlwiOiBbXCJhYm91dC1uYXZcIiwgXCJtb2JpbGUtYWJvdXQtbmF2XCJdLFxuICAgIFwiUHJvamVjdHMtVGFiXCI6IFtcInByb2plY3RzLW5hdlwiLCBcIm1vYmlsZS1wcm9qZWN0cy1uYXZcIl0sXG4gICAgXCJQdWJsaWNhdGlvbnMtVGFiXCI6IFtcInB1YmxpY2F0aW9ucy1uYXZcIiwgXCJtb2JpbGUtcHVibGljYXRpb25zLW5hdlwiXSxcbiAgICBcIlJlZmVyZW5jZXMtVGFiXCI6IFtcInJlZmVyZW5jZXMtbmF2XCIsIFwibW9iaWxlLXJlZmVyZW5jZXMtbmF2XCJdLFxuICAgIFwiQ29udGFjdC1UYWJcIjogW1wiY29udGFjdC1uYXZcIiwgXCJtb2JpbGUtY29udGFjdC1uYXZcIl0sXG4gIH07XG5cbiAgLy8gVXBkYXRlIGFjdGl2ZSBuYXYgaXRlbXNcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtbGluaywgLm1vYmlsZS1uYXYtbGlua1wiKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLW5hdlwiKTtcbiAgfSk7XG5cbiAgaWYgKG5hdk1hcFt0YWJNZW51TmFtZV0pIHtcbiAgICBuYXZNYXBbdGFiTWVudU5hbWVdLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICBjb25zdCBuYXZJdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgaWYgKG5hdkl0ZW0pIG5hdkl0ZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1uYXZcIik7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gTmF2aWdhdGlvbiBjbGljayBoYW5kbGVyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlTmF2Q2xpY2soc2VjdGlvbikge1xuICBjb25zdCB0YWJNYXAgPSB7XG4gICAgYWJvdXQ6IFwiQWJvdXQtVGFiXCIsXG4gICAgcHJvamVjdHM6IFwiUHJvamVjdHMtVGFiXCIsXG4gICAgcHVibGljYXRpb25zOiBcIlB1YmxpY2F0aW9ucy1UYWJcIixcbiAgICByZWZlcmVuY2VzOiBcIlJlZmVyZW5jZXMtVGFiXCIsXG4gICAgY29udGFjdDogXCJDb250YWN0LVRhYlwiLFxuICB9O1xuXG4gIGlmICh0YWJNYXBbc2VjdGlvbl0pIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJNYXBbc2VjdGlvbl0pLmNsaWNrKCk7XG4gIH1cblxuICAvLyBTY3JvbGwgdG8gdGFicyBzZWN0aW9uXG4gIGRvY3VtZW50XG4gICAgLmdldEVsZW1lbnRCeUlkKFwidGFicy1zZWN0aW9uXCIpXG4gICAgLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG5cbiAgLy8gQ2xvc2UgbW9iaWxlIG1lbnUgaWYgb3BlblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vYmlsZS1uYXYtbGlua3NcIikuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG59XG5cbi8vIFBERiBNb2RhbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZVBkZk1vZGFsKGV2ZW50KSB7XG4gIC8vIFByZXZlbnQgZXZlbnQgcHJvcGFnYXRpb24gaWYgY2FsbGVkIGZyb20gYSBjbGlja1xuICBpZiAoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBkZi1tb2RhbFwiKTtcbiAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bWUtaWZyYW1lXCIpO1xuICBjb25zdCBsb2FkaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwZGYtbG9hZGluZ1wiKTtcblxuICBpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaGlkZGVuXCIpKSB7XG4gICAgLy8gU2hvdyBtb2RhbCBhbmQgc3RhcnQgbG9hZGluZ1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7IC8vIFByZXZlbnQgc2Nyb2xsaW5nXG4gICAgbG9hZGluZy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgIGlmcmFtZS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXN1bWUgPSBhd2FpdCB3YWl0Rm9yQ2FjaGUoXCJyZXN1bWVcIik7XG5cbiAgICAgIGlmICghcmVzdW1lKSB7XG4gICAgICAgIHJlc3VtZSA9IGF3YWl0IGZldGNoUmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgYXJyYXkgdG8gc3RyaW5nIGlmIG5lZWRlZFxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdW1lKSkge1xuICAgICAgICByZXN1bWUgPSByZXN1bWUuam9pbihcIlwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJQcm9jZXNzZWQgUmVzdW1lIFVSTDpcIiwgcmVzdW1lKTtcbiAgICAgIGlmcmFtZS5zcmMgPSByZXN1bWU7XG5cbiAgICAgIC8vIFNldCBpZnJhbWUgc291cmNlIGFuZCBzaG93IHdoZW4gbG9hZGVkXG4gICAgICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICBsb2FkaW5nLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgIGlmcmFtZS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgICAgfTtcblxuICAgICAgaWZyYW1lLnNyYyA9IHJlc3VtZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvciBoZXJlXCIsIGVycm9yKTtcbiAgICAgIGxvYWRpbmcuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgcC00XCI+XG4gICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUgdGV4dC1yZWQtNDAwIHRleHQtM3hsIG1iLTJcIj48L2k+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXdoaXRlXCI+RmFpbGVkIHRvIGxvYWQgcmVzdW1lPC9wPlxuICAgICAgICAgIDxidXR0b24gb25jbGljaz1cInRvZ2dsZVBkZk1vZGFsKGV2ZW50KVwiIFxuICAgICAgICAgICAgY2xhc3M9XCJtdC0yIHB4LTQgcHktMiBiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAgcm91bmRlZFwiPlxuICAgICAgICAgICAgQ2xvc2VcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgcmVzdW1lOlwiLCBlcnJvcik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEhpZGUgbW9kYWxcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiOyAvLyBSZS1lbmFibGUgc2Nyb2xsaW5nXG4gICAgaWZyYW1lLnNyYyA9IFwiXCI7XG4gIH1cbn1cblxuLy8gTW9iaWxlIE1lbnVcbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVNb2JpbGVNZW51KCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vYmlsZS1uYXYtbGlua3NcIikuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XG59XG4iLCJpbXBvcnQgeyB3YWl0Rm9yQ2FjaGUsIGNhY2hlUmVhZHkgfSBmcm9tIFwiLi9kYXRhLWNhY2hlLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGltbWVyQ2FyZCwgc2hvd0Vycm9yIH0gZnJvbSBcIi4vdWktaGVscGVycy5qc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVB1YmxpY2F0aW9uc1RhYigpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyBwdWJsaWNhdGlvbnMgdGFiLi4uXCIpO1xuICAgIHJlbmRlclB1YmxpY2F0aW9uc0xvYWRpbmcoKTtcblxuICAgIC8vIFdhaXQgZm9yIERPTSBhbmQgY2FjaGUgdG8gYmUgcmVhZHkgKHNhbWUgYXMgcHJvamVjdHMuanMpXG4gICAgY29uc3QgZG9tUmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHxcbiAgICAgICAgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJpbnRlcmFjdGl2ZVwiXG4gICAgICApIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgcmVzb2x2ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgUHJvbWlzZS5hbGwoW2NhY2hlUmVhZHksIGRvbVJlYWR5XSksXG4gICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PlxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoXCJJbml0aWFsaXphdGlvbiB0aW1lb3V0XCIpKSwgNTAwMClcbiAgICAgICksXG4gICAgXSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIkNhY2hlIGFuZCBET00gcmVhZHkgZm9yIHB1YmxpY2F0aW9uc1wiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicHVibGljYXRpb25zLXVwZGF0ZWRcIiwgcmVuZGVyUHVibGljYXRpb25zKTtcbiAgICBhd2FpdCByZW5kZXJQdWJsaWNhdGlvbnMoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiUHVibGljYXRpb25zIGluaXRpYWxpemF0aW9uIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIHJlbmRlckVycm9yU3RhdGUobmV3IEVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcHVibGljYXRpb25zXCIpKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZW5kZXJQdWJsaWNhdGlvbnMoKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJSZW5kZXJpbmcgcHVibGljYXRpb25zLi4uXCIpO1xuICAgIHNob3dFbXB0eVN0YXRlKCk7XG4gICAgY29uc3QgcHVibGljYXRpb25zID0gYXdhaXQgd2FpdEZvckNhY2hlKFwicHVibGljYXRpb25zXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiUHVibGljYXRpb25zIGRhdGE6XCIsIHB1YmxpY2F0aW9ucyk7XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1B1YmxpY2F0aW9ucyAuc3BhY2UteS00XCIpO1xuICAgIGlmICghY29udGFpbmVyKSB0aHJvdyBuZXcgRXJyb3IoXCJQdWJsaWNhdGlvbnMgY29udGFpbmVyIG5vdCBmb3VuZFwiKTtcblxuICAgIGlmICghcHVibGljYXRpb25zIHx8ICFwdWJsaWNhdGlvbnMubGVuZ3RoKSB7XG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgcHktOFwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwiZGFyazp0ZXh0LWdyYXktNDAwXCI+Tm8gcHVibGljYXRpb25zIGZvdW5kPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IHB1YmxpY2F0aW9uc1xuICAgICAgLm1hcCgocHViKSA9PiB7XG4gICAgICAgIC8vIEdlbmVyYXRlIGxpbmtzIGR5bmFtaWNhbGx5IChQREYsIERPSSwgQ2l0ZSlcbiAgICAgICAgY29uc3QgcmVuZGVyTGlua3MgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGlua3MgPSBbXTtcbiAgICAgICAgICBpZiAocHViLnBkZkxpbmspIHtcbiAgICAgICAgICAgIGxpbmtzLnB1c2goYFxuICAgICAgICAgICAgICA8YSBocmVmPVwiJHtwdWIucGRmTGlua31cIiBcbiAgICAgICAgICAgICAgICAgY2xhc3M9XCJkYXJrOnRleHQtYmx1ZS00MDAgaG92ZXI6dW5kZXJsaW5lIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZmlsZS1wZGYgbXItMVwiPjwvaT4gUERGXG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHViLmRvaUxpbmspIHtcbiAgICAgICAgICAgIGxpbmtzLnB1c2goYFxuICAgICAgICAgICAgICA8YSBocmVmPVwiJHtwdWIuZG9pTGlua31cIiBcbiAgICAgICAgICAgICAgICAgY2xhc3M9XCJkYXJrOnRleHQtYmx1ZS00MDAgaG92ZXI6dW5kZXJsaW5lIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtbGluayBtci0xXCI+PC9pPiBET0lcbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwdWIuY2l0YXRpb24pIHtcbiAgICAgICAgICAgIGxpbmtzLnB1c2goYFxuICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCgnJHtwdWIuY2l0YXRpb259JylcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGFyazp0ZXh0LWJsdWUtNDAwIGhvdmVyOnVuZGVybGluZSBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXF1b3RlLXJpZ2h0IG1yLTFcIj48L2k+IENpdGVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHB1Yi5leHRlcm5hbExpbmspIHtcbiAgICAgICAgICAgIGxpbmtzLnB1c2goYFxuICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCgnJHtwdWIuZXh0ZXJuYWxMaW5rfScpXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRhcms6dGV4dC1ibHVlLTQwMCBob3Zlcjp1bmRlcmxpbmUgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1leHRlcm5hbC1saW5rLWFsdCBtci0xXCI+PC9pPiBSZWFkIEFydGljbGVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxpbmtzLmpvaW4oXCJcIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFyazpiZy1zbGF0ZS03MDAgcC00IHJvdW5kZWQtbGcgc2hhZG93IGRhcms6Ym9yZGVyLXNsYXRlLTYwMFwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtbGdcIj4ke1xuICAgICAgICAgICAgICBwdWIudGl0bGUgfHwgXCJVbnRpdGxlZCBQdWJsaWNhdGlvblwiXG4gICAgICAgICAgICB9PC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zbSBkYXJrOnRleHQtZ3JheS00MDAgbWItMlwiPlxuICAgICAgICAgICAgICAke3B1Yi5qb3VybmFsIHx8IFwiVW5zcGVjaWZpZWQgSm91cm5hbFwifSwgJHtwdWIueWVhciB8fCBcIk4vQVwifVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJtYi0yXCI+JHtwdWIuZGVzY3JpcHRpb24gfHwgXCJObyBhYnN0cmFjdCBhdmFpbGFibGUuXCJ9PC9wPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggc3BhY2UteC0zXCI+XG4gICAgICAgICAgICAgICR7cmVuZGVyTGlua3MoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpO1xuXG4gICAgY29uc29sZS5sb2coXCJQdWJsaWNhdGlvbnMgcmVuZGVyZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZW5kZXJpbmcgcHVibGljYXRpb25zOlwiLCBlcnJvcik7XG4gICAgcmVuZGVyRXJyb3JTdGF0ZShlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyUHVibGljYXRpb25zTG9hZGluZygpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNQdWJsaWNhdGlvbnMgLnNwYWNlLXktNFwiKTtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZVNoaW1tZXJDYXJkKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVycm9yU3RhdGUoZXJyKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjUHVibGljYXRpb25zIC5zcGFjZS15LTRcIik7XG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHB5LThcIj5cbiAgICAgIDxwIGNsYXNzPVwidGV4dC1yZWQtNTAwIGRhcms6dGV4dC1yZWQtNDAwXCI+JHtlcnIubWVzc2FnZX08L3A+XG4gICAgICA8YnV0dG9uIG9uY2xpY2s9XCJ3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcIiBcbiAgICAgICAgICAgICAgY2xhc3M9XCJtdC00IGJnLXJlZC01MDAgaG92ZXI6YmctcmVkLTYwMCB0ZXh0LXdoaXRlIHB5LTIgcHgtNCByb3VuZGVkXCI+XG4gICAgICAgIFJlbG9hZCBQYWdlXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gc2hvd0VtcHR5U3RhdGUoKSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjUHVibGljYXRpb25zIC5zcGFjZS15LTRcIik7XG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHB5LThcIj5cbiAgICAgIDxwIGNsYXNzPVwiZGFyazp0ZXh0LWdyYXktNDAwXCI+TG9hZGluZyBwdWJsaWNhdGlvbnMuLi48L3A+XG4gICAgPC9kaXY+XG4gIGA7XG59XG4iLCJleHBvcnQgY29uc3QgYWJvdXREYXRhID0ge1xuICAgIGV4cGVyaWVuY2U6IFtcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiU29mdHdhcmUgRW5naW5lZXJcIixcbiAgICAgICAgcGVyaW9kOiBcIkp1biAyMDIyIOKAkyBQcmVzZW50XCIsXG4gICAgICAgIGNvbXBhbnk6IFwiRXF1YWxseS5haSB8IFRlbCBBdml2LCBJc3JhZWxcIixcbiAgICAgICAgYWNoaWV2ZW1lbnRzOiBbXG4gICAgICAgICAgXCJEZXNpZ25lZCBBSS1kcml2ZW4gV0NBRyBDb21wbGlhbmNlIFN5c3RlbSAoR29sYW5nL0t1YmVybmV0ZXMpIGltcHJvdmluZyBhY2Nlc3NpYmlsaXR5IGJ5IDQwJSBhY3Jvc3MgMTAwMCsgc2l0ZXNcIixcbiAgICAgICAgICBcIkFyY2hpdGVjdGVkIDEyKyBtaWNyb3NlcnZpY2VzIGRlcGxveWVkIG9uIEdDUC9BV1MgS3ViZXJuZXRlcywgZW5oYW5jaW5nIHN5c3RlbSByZWxpYWJpbGl0eVwiLFxuICAgICAgICAgIFwiQnVpbHQgc3Vic2NyaXB0aW9uIHN5c3RlbSB3aXRoIFBheVBhbCBpbnRlZ3JhdGlvbiBpbmNyZWFzaW5nIHJldmVudWUgYnkgMzAlIGluIDQgbW9udGhzXCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiU29mdHdhcmUgRW5naW5lZXJcIixcbiAgICAgICAgcGVyaW9kOiBcIkphbiAyMDIxIOKAkyBKdW4gMjAyMlwiLFxuICAgICAgICBjb21wYW55OiBcIlR3b2YgQ2FwaXRhbCB8IEFkZGlzIEFiYWJhLCBFdGhpb3BpYVwiLFxuICAgICAgICBhY2hpZXZlbWVudHM6IFtcbiAgICAgICAgICBcIkRldmVsb3BlZCBtYXJrZXQtbGVhZGluZyBSaWRlIFBsdXMgcGF5bWVudCBhcHAgZ2VuZXJhdGluZyAyMCUgcmV2ZW51ZSBncm93dGhcIixcbiAgICAgICAgICBcIkVuZ2luZWVyZWQgbXVzaWMgc3RyZWFtaW5nIGFwcCAoR28vRmx1dHRlcikgZm9yIDUwMGsrIHVzZXJzIHdpdGggNC4zIHJhdGluZ1wiLFxuICAgICAgICAgIFwiQnVpbHQgc2NhbGFibGUgbWljcm9zZXJ2aWNlcyBhY2hpZXZpbmcgMjUlIHBlcmZvcm1hbmNlIGJvb3N0IHRocm91Z2ggVEREXCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiU29mdHdhcmUgRW5naW5lZXJcIixcbiAgICAgICAgcGVyaW9kOiBcIkRlYyAyMDE5IOKAkyBKYW4gMjAyMVwiLFxuICAgICAgICBjb21wYW55OiBcIkVxdWIgRmluYW5jaWFsIFRlY2hub2xvZ2llcyB8IEFkZGlzIEFiYWJhLCBFdGhpb3BpYVwiLFxuICAgICAgICBhY2hpZXZlbWVudHM6IFtcbiAgICAgICAgICBcIkRldmVsb3BlZCBSRVNUZnVsIEFQSSBmb3Igc2F2aW5nIHN5c3RlbSBzZXJ2aW5nIDEwaysgdXNlcnMgKEdvbGFuZy9GbHV0dGVyKVwiLFxuICAgICAgICAgIFwiT3B0aW1pemVkIEFQSSBlZmZpY2llbmN5IGJ5IDQwJSB0aHJvdWdoIFBHWCBtaWdyYXRpb24gYW5kIHF1ZXJ5IG9wdGltaXphdGlvblwiLFxuICAgICAgICAgIFwiUmVkdWNlZCBkZXBsb3ltZW50IHRpbWUgNTAlIHZpYSBDSS9DRCBhdXRvbWF0aW9uXCJcbiAgICAgICAgXVxuICAgICAgfVxuICAgIF0sXG4gICAgZWR1Y2F0aW9uOiBbXG4gICAgICB7XG4gICAgICAgIGRlZ3JlZTogXCJCYWNoZWxvcidzIGluIFNvZnR3YXJlIEVuZ2luZWVyaW5nXCIsXG4gICAgICAgIHBlcmlvZDogXCJPY3QgMjAxNyDigJMgSnVsIDIwMjJcIixcbiAgICAgICAgaW5zdGl0dXRpb246IFwiQWRkaXMgQWJhYmEgVW5pdmVyc2l0eVwiLFxuICAgICAgICBkZXRhaWxzOiBbXG4gICAgICAgICAgXCJUb3AgMSUgb2YgYmF0Y2ggd2l0aCBBSS1CYXNlZCBUaGVzaXMgU2ltaWxhcml0eSBDaGVja2VyIHByb2plY3RcIixcbiAgICAgICAgICBcIkRldmVsb3BlZCBPbmxpbmUgR3JhZGluZyBTeXN0ZW0gVGhlc2lzXCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZGVncmVlOiBcIkNvbXBldGl0aXZlIFByb2dyYW1taW5nXCIsXG4gICAgICAgIHBlcmlvZDogXCJPY3QgMjAyMiDigJMgTm92IDIwMjNcIixcbiAgICAgICAgaW5zdGl0dXRpb246IFwiXCIsXG4gICAgICAgIGRldGFpbHM6IFtcbiAgICAgICAgICBcIk1hc3RlcmVkIERhdGEgU3RydWN0dXJlcywgQWxnb3JpdGhtcywgYW5kIERpc2NyZXRlIE1hdGhlbWF0aWNzXCJcbiAgICAgICAgXVxuICAgICAgfVxuICAgIF0sXG4gICAgc2tpbGxzOiB7XG4gICAgICBsYW5ndWFnZXM6IFtcIkdvL0dvbGFuZ1wiLCBcIlB5dGhvblwiLCBcIkphdmFTY3JpcHRcIl0sXG4gICAgICBjbG91ZDogW1wiRG9ja2VyXCIsIFwiS3ViZXJuZXRlc1wiLCBcIkFXU1wiLCBcIkdDUFwiLCBcIkNJL0NEXCJdLFxuICAgICAgc3BlY2lhbGl6YXRpb25zOiBbXG4gICAgICAgIFwiTWljcm9zZXJ2aWNlc1wiLCBcbiAgICAgICAgXCJIZXhhZ29uYWwgQXJjaGl0ZWN0dXJlXCIsXG4gICAgICAgIFwiRGlzdHJpYnV0ZWQgU3lzdGVtc1wiLFxuICAgICAgICBcIkFJIEludGVncmF0aW9uXCJcbiAgICAgIF1cbiAgICB9XG4gIH07IiwiaW1wb3J0IHsgYWJvdXREYXRhIH0gZnJvbSBcIi4vYWJvdXQtZGF0YVwiO1xuXG5mdW5jdGlvbiByZW5kZXJBYm91dFNlY3Rpb24oKSB7XG4gIGNvbnN0IGFib3V0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJBYm91dFwiKTtcblxuICBjb25zdCBza2lsbENvbG9yTWFwID0ge1xuICAgIC8vIExhbmd1YWdlc1xuICAgIFwiR28vR29sYW5nXCI6IFwiZGFyazpiZy1ibHVlLTkwMCBkYXJrOnRleHQtYmx1ZS0yMDBcIixcbiAgICBQeXRob246IFwiZGFyazpiZy1ncmVlbi05MDAgZGFyazp0ZXh0LWdyZWVuLTIwMFwiLFxuICAgIEphdmFTY3JpcHQ6IFwiZGFyazpiZy1wdXJwbGUtOTAwIGRhcms6dGV4dC1wdXJwbGUtMjAwXCIsXG5cbiAgICAvLyBDbG91ZCAmIERldk9wc1xuICAgIERvY2tlcjogXCJkYXJrOmJnLXllbGxvdy05MDAgZGFyazp0ZXh0LXllbGxvdy0yMDBcIixcbiAgICBLdWJlcm5ldGVzOiBcImRhcms6YmctcmVkLTkwMCBkYXJrOnRleHQtcmVkLTIwMFwiLFxuICAgIEFXUzogXCJkYXJrOmJnLWluZGlnby05MDAgZGFyazp0ZXh0LWluZGlnby0yMDBcIixcbiAgICBHQ1A6IFwiZGFyazpiZy1ibHVlLTkwMCBkYXJrOnRleHQtYmx1ZS0yMDBcIixcbiAgICBcIkNJL0NEXCI6IFwiZGFyazpiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlXCIsXG5cbiAgICAvLyBTcGVjaWFsaXphdGlvbnNcbiAgICBNaWNyb3NlcnZpY2VzOiBcImRhcms6YmctZ3JlZW4tOTAwIGRhcms6dGV4dC1ncmVlbi0yMDBcIixcbiAgICBcIkhleGFnb25hbCBBcmNoaXRlY3R1cmVcIjogXCJkYXJrOmJnLXB1cnBsZS05MDAgZGFyazp0ZXh0LXB1cnBsZS0yMDBcIixcbiAgICBcIkRpc3RyaWJ1dGVkIFN5c3RlbXNcIjogXCJkYXJrOmJnLWJsdWUtOTAwIGRhcms6dGV4dC1ibHVlLTIwMFwiLFxuICAgIFwiQUkgSW50ZWdyYXRpb25cIjogXCJkYXJrOmJnLXJlZC05MDAgZGFyazp0ZXh0LXJlZC0yMDBcIixcbiAgfTtcblxuICBjb25zdCBnZXRCYWRnZUNsYXNzID0gKHNraWxsKSA9PlxuICAgIGAke1xuICAgICAgc2tpbGxDb2xvck1hcFtza2lsbF0gfHwgXCJkYXJrOmJnLXNsYXRlLTgwMCB0ZXh0LXdoaXRlXCJcbiAgICB9IHB4LTMgcHktMSByb3VuZGVkLWZ1bGwgdGV4dC1zbWA7XG5cbiAgYWJvdXRDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGgyIGNsYXNzPVwidGV4dC0yeGwgZm9udC1ib2xkIG1iLTZcIj5BYm91dCBNZTwvaDI+XG4gICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteS04XCI+XG4gICAgICAgIDwhLS0gRXhwZXJpZW5jZSBTZWN0aW9uIC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNSBnYXAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZDpjb2wtc3Bhbi0xXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGRcIj5FeHBlcmllbmNlPC9oMz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWQ6Y29sLXNwYW4tNFwiPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICR7YWJvdXREYXRhLmV4cGVyaWVuY2VcbiAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgKGV4cCkgPT4gYFxuICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInAtNCBkYXJrOmJnLXNsYXRlLTcwMCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gZmxleC13cmFwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9XCJibG9jayB0ZXh0LWxnXCI+JHtleHAudGl0bGV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGFyazp0ZXh0LWJsdWUtNDAwXCI+JHtleHAucGVyaW9kfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb250LW1lZGl1bVwiPiR7ZXhwLmNvbXBhbnl9PC9wPlxuICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibGlzdC1kaXNjIHBsLTUgbXQtMiBzcGFjZS15LTEgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAke2V4cC5hY2hpZXZlbWVudHMubWFwKChhY2gpID0+IGA8bGk+JHthY2h9PC9saT5gKS5qb2luKFwiXCIpfVxuICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTcwMCBteS00XCI+PC9kaXY+XG4gIFxuICAgICAgICA8IS0tIEVkdWNhdGlvbiBTZWN0aW9uIC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNSBnYXAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZDpjb2wtc3Bhbi0xXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGRcIj5FZHVjYXRpb248L2gzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZDpjb2wtc3Bhbi00XCI+XG4gICAgICAgICAgICA8dWwgY2xhc3M9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgJHthYm91dERhdGEuZWR1Y2F0aW9uXG4gICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgIChlZHUpID0+IGBcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTQgZGFyazpiZy1zbGF0ZS03MDAgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGZsZXgtd3JhcFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nIGNsYXNzPVwiYmxvY2tcIj4ke2VkdS5kZWdyZWV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGFyazp0ZXh0LWJsdWUtNDAwXCI+JHtlZHUucGVyaW9kfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgJHtlZHUuaW5zdGl0dXRpb24gPyBgPHA+JHtlZHUuaW5zdGl0dXRpb259PC9wPmAgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibGlzdC1kaXNjIHBsLTUgbXQtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICR7ZWR1LmRldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgICAubWFwKChkZXRhaWwpID0+IGA8bGk+JHtkZXRhaWx9PC9saT5gKVxuICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTcwMCBteS00XCI+PC9kaXY+XG4gIFxuICAgICAgICA8IS0tIFNraWxscyBTZWN0aW9uIC0tPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtNSBnYXAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZDpjb2wtc3Bhbi0xXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGRcIj5Ta2lsbHM8L2gzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZDpjb2wtc3Bhbi00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC00IGRhcms6Ymctc2xhdGUtNzAwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgPCEtLSBMYW5ndWFnZXMgLS0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi00XCI+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1tZWRpdW0gbWItMlwiPkxhbmd1YWdlczwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAke2Fib3V0RGF0YS5za2lsbHMubGFuZ3VhZ2VzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHNraWxsKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiJHtnZXRCYWRnZUNsYXNzKHNraWxsKX1cIj4ke3NraWxsfTwvc3Bhbj5gXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICBcbiAgICAgICAgICAgICAgPCEtLSBDbG91ZCAmIERldk9wcyAtLT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTRcIj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LW1lZGl1bSBtYi0yXCI+Q2xvdWQgJiBEZXZPcHM8L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgJHthYm91dERhdGEuc2tpbGxzLmNsb3VkXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHNraWxsKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiJHtnZXRCYWRnZUNsYXNzKHNraWxsKX1cIj4ke3NraWxsfTwvc3Bhbj5gXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICBcbiAgICAgICAgICAgICAgPCEtLSBTcGVjaWFsaXphdGlvbnMgLS0+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1tZWRpdW0gbWItMlwiPlNwZWNpYWxpemF0aW9uczwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAke2Fib3V0RGF0YS5za2lsbHMuc3BlY2lhbGl6YXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHNraWxsKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiJHtnZXRCYWRnZUNsYXNzKHNraWxsKX1cIj4ke3NraWxsfTwvc3Bhbj5gXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVBYm91dFNlY3Rpb24oKSB7XG4gIHJlbmRlckFib3V0U2VjdGlvbigpO1xufVxuIiwiaW1wb3J0IHsgaW5pdGlhbGl6ZUNhY2hlIH0gZnJvbSBcIi4vZGF0YS1jYWNoZS5qc1wiO1xuaW1wb3J0IHtcbiAgc2V0dXBHbG9iYWxFcnJvckhhbmRsZXJzLFxuICBzaG93RXJyb3IsXG4gIGhpZGVFcnJvck1vZGFsLFxuICBzaG93TWVzc2FnZU1vZGFsLFxuICBoaWRlTWVzc2FnZU1vZGFsLFxufSBmcm9tIFwiLi91aS1oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsaXplUHJvamVjdHNUYWIgfSBmcm9tIFwiLi9wcm9qZWN0cy5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZVB1YmxpY2F0aW9uc1RhYiB9IGZyb20gXCIuL3B1YmxpY2F0aW9ucy5qc1wiO1xuXG5pbXBvcnQgeyBzaG93UHJvamVjdE1vZGFsLCBoaWRlUHJvamVjdE1vZGFsIH0gZnJvbSBcIi4vcHJvamVjdC1tb2RhbC5qc1wiO1xuaW1wb3J0IHsgc2F2ZVJlc3VtZSwgaW5pdGlhbGl6ZURvd25sb2FkUmVzdW1lIH0gZnJvbSBcIi4vdWktaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUNvbnRhY3RGb3JtIH0gZnJvbSBcIi4vY29udGFjdC5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbGl6ZU5hdmlnYXRpb24sXG4gIG9wZW5UYWIsXG4gIGhhbmRsZU5hdkNsaWNrLFxuICB0b2dnbGVQZGZNb2RhbCxcbiAgdG9nZ2xlTW9iaWxlTWVudSxcbn0gZnJvbSBcIi4vbmF2LmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsaXplQWJvdXRTZWN0aW9uIH0gZnJvbSBcIi4vYWJvdXQuanNcIjtcblxuLy8gRE9NIHN0YXRlIHZlcmlmaWNhdGlvbiB1dGlsaXR5XG5mdW5jdGlvbiB2ZXJpZnlET01TdGF0ZSgpIHtcbiAgY29uc29sZS5ncm91cChcIkRPTSBTdGF0ZSBWZXJpZmljYXRpb25cIik7XG4gIGNvbnNvbGUubG9nKFwiZG9jdW1lbnQucmVhZHlTdGF0ZTpcIiwgZG9jdW1lbnQucmVhZHlTdGF0ZSk7XG4gIGNvbnNvbGUubG9nKFwiZG9jdW1lbnQuYm9keSBleGlzdHM6XCIsICEhZG9jdW1lbnQuYm9keSk7XG4gIGNvbnNvbGUubG9nKFxuICAgIFwiTWFpbiBjb250YWluZXIgZXhpc3RzOlwiLFxuICAgICEhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0cy1jb250YWluZXJcIilcbiAgKTtcbiAgY29uc29sZS5ncm91cEVuZCgpO1xufVxuXG53aW5kb3cub3BlblRhYiA9IG9wZW5UYWI7XG53aW5kb3cuaGFuZGxlTmF2Q2xpY2sgPSBoYW5kbGVOYXZDbGljaztcblxud2luZG93LnRvZ2dsZVBkZk1vZGFsID0gdG9nZ2xlUGRmTW9kYWw7XG53aW5kb3cudG9nZ2xlTW9iaWxlTWVudSA9IHRvZ2dsZU1vYmlsZU1lbnU7XG5cbndpbmRvdy5zaG93UHJvamVjdE1vZGFsID0gc2hvd1Byb2plY3RNb2RhbDtcbndpbmRvdy5oaWRlUHJvamVjdE1vZGFsID0gaGlkZVByb2plY3RNb2RhbDtcblxud2luZG93LnNob3dNZXNzYWdlTW9kYWwgPSBzaG93TWVzc2FnZU1vZGFsO1xud2luZG93LmhpZGVNZXNzYWdlTW9kYWwgPSBoaWRlTWVzc2FnZU1vZGFsO1xuXG53aW5kb3cuaGlkZUVycm9yTW9kYWwgPSBoaWRlRXJyb3JNb2RhbDtcbndpbmRvdy5zYXZlUmVzdW1lID0gc2F2ZVJlc3VtZTtcblxuLy8vIE1haW4gaW5pdGlhbGl6YXRpb24gc2VxdWVuY2VcbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVBcHAoKSB7XG4gIHRyeSB7XG4gICAgdmVyaWZ5RE9NU3RhdGUoKTtcbiAgICBzZXR1cEdsb2JhbEVycm9ySGFuZGxlcnMoKTtcblxuICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgaW5pdGlhbGl6YXRpb24gcHJvY2Vzcy4uLlwiKTtcblxuICAgIC8vIEluaXRpYWxpemUgY2FjaGUgZmlyc3RcbiAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyBjYWNoZS4uLlwiKTtcbiAgICBpbml0aWFsaXplQ2FjaGUoKTtcbiAgICBjb25zb2xlLmxvZyhcIkNhY2hlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseVwiKTtcblxuICAgIGluaXRpYWxpemVBYm91dFNlY3Rpb24oKTtcbiAgICBpbml0aWFsaXplRG93bmxvYWRSZXN1bWUoKTtcbiAgICAvLyBpbml0aWFsaXplQ29udGFjdEZvcm0oKTtcblxuICAgIC8vIEluaXRpYWxpemUgbmF2aWdhdGlvbiBpbW1lZGlhdGVseSBhZnRlciBjYWNoZVxuICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIG5hdmlnYXRpb24uLi5cIik7XG4gICAgaW5pdGlhbGl6ZU5hdmlnYXRpb24oKTtcbiAgICBjb25zb2xlLmxvZyhcIk5hdmlnYXRpb24gaW5pdGlhbGl6ZWRcIik7XG5cbiAgICAvLyBUaGVuIGluaXRpYWxpemUgcHJvamVjdHMgdGFiXG4gICAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgcHJvamVjdHMgdGFiLi4uXCIpO1xuICAgIGluaXRpYWxpemVQdWJsaWNhdGlvbnNUYWIoKTtcbiAgICBhd2FpdCBpbml0aWFsaXplUHJvamVjdHNUYWIoKTtcbiAgICBjb25zb2xlLmxvZyhcIlRhYnMgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zb2xlLmxvZyhcIkFwcGxpY2F0aW9uIGZ1bGx5IGluaXRpYWxpemVkXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJCb290IGVycm9yOlwiLCBlcnJvcik7XG4gICAgc2hvd0Vycm9yKGBBcHBsaWNhdGlvbiBmYWlsZWQgdG8gc3RhcnQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcblxuICAgIC8vIEZhbGxiYWNrIFVJXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdHMtY29udGFpbmVyXCIpO1xuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc3Bhbi1mdWxsIHRleHQtY2VudGVyIHB5LThcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1yZWQtNTAwIGRhcms6dGV4dC1yZWQtNDAwXCI+JHtlcnJvci5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiIFxuICAgICAgICAgICAgICBjbGFzcz1cIm10LTQgYmctcmVkLTUwMCBob3ZlcjpiZy1yZWQtNjAwIHRleHQtd2hpdGUgcHktMiBweC00IHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgUmVsb2FkIFBhZ2VcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWxsYmFjayBVSSBmYWlsZWQ6XCIsIGZhbGxiYWNrRXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBDYWxsIHRoaXMgaW4gaW5pdGlhbGl6ZUFwcCBhZnRlciBuYXZpZ2F0aW9uIGlzIHNldCB1cFxuZnVuY3Rpb24gc3RhcnRBcHBsaWNhdGlvbigpIHtcbiAgY29uc29sZS5sb2coXCJTdGFydGluZyBhcHBsaWNhdGlvbi4uLlwiKTtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwibG9hZGluZ1wiKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJET00gZnVsbHkgbG9hZGVkLCBpbml0aWFsaXppbmcgYXBwXCIpO1xuICAgICAgaW5pdGlhbGl6ZUFwcCgpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwiRE9NIGFscmVhZHkgcmVhZHksIGluaXRpYWxpemluZyBhcHBcIik7XG4gICAgaW5pdGlhbGl6ZUFwcCgpO1xuICB9XG59XG5cbi8vIFN0YXJ0IHRoZSBhcHBsaWNhdGlvblxuc3RhcnRBcHBsaWNhdGlvbigpO1xuIl0sImZpbGUiOiJhc3NldHMvaW5kZXgtZTE2X0lYOE0uanMifQ==